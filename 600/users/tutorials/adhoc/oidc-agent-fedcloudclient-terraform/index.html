<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.104.3"><link rel=alternate type=application/rss+xml href=../../../../users/tutorials/adhoc/oidc-agent-fedcloudclient-terraform/index.xml><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" href=../../../../favicons/favicon.ico><link rel=apple-touch-icon href=../../../../favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=../../../../favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=../../../../favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=../../../../favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=../../../../favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=../../../../favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=../../../../favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=../../../../favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=../../../../favicons/android-192x192.png sizes=192x192><title>Automate with oidc-agent, fedcloudclient, terraform and Ansible | Documentation</title><meta name=description content="EGI documentation"><meta property="og:title" content="Automate with oidc-agent, fedcloudclient, terraform and Ansible"><meta property="og:description" content="Step by step guide to automating the deployment using Ansible with Terraform, oidc-agent and fedcloudclient
"><meta property="og:type" content="website"><meta property="og:url" content="/users/tutorials/adhoc/oidc-agent-fedcloudclient-terraform/"><meta property="og:site_name" content="Documentation"><meta itemprop=name content="Automate with oidc-agent, fedcloudclient, terraform and Ansible"><meta itemprop=description content="Step by step guide to automating the deployment using Ansible with Terraform, oidc-agent and fedcloudclient
"><meta name=twitter:card content="summary"><meta name=twitter:title content="Automate with oidc-agent, fedcloudclient, terraform and Ansible"><meta name=twitter:description content="Step by step guide to automating the deployment using Ansible with Terraform, oidc-agent and fedcloudclient
"><link rel=preload href=../../../../scss/main.min.cf17fb22ec677b25d6e0b252db304a8d9ddd90de85adc30494f93f5196259e54.css as=style><link href=../../../../scss/main.min.cf17fb22ec677b25d6e0b252db304a8d9ddd90de85adc30494f93f5196259e54.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script>
<link rel=stylesheet href=../../../../css/prism.css><link rel=stylesheet href=../../../../css/shortcodes/tabbed-panex.css><link rel=stylesheet href=../../../../css/tags.css><link rel=stylesheet href=../../../../css/egi.css><script type=text/javascript src=../../../../js/prism.js></script>
<script type=text/javascript src=../../../../js/featherlight.min.js></script>
<script type=text/javascript src=../../../../js/highlight.min.js></script>
<script type=text/javascript src=../../../../js/egi.js></script>
<script type=text/javascript src=../../../../js/github.min.js></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=../../../../><span class=navbar-logo><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 250 189.57"><defs><style>.cls-1{fill:#fff}</style></defs><path class="cls-1" d="M131.12 9.02c.7-5.22 5.16-9.02 10.29-9.02h0c.46.0.93.03 1.39.09h0c5.69.76 9.69 5.99 8.93 11.68h0c-.76 5.69-6 9.69-11.68 8.93h0c-5.69-.76-9.69-5.99-8.94-11.68h0z"/><path class="cls-1" d="M105.69.45c.53-.08 1.06-.12 1.59-.12h0c5.04.0 9.47 3.68 10.26 8.82h0c.87 5.68-3.02 10.98-8.7 11.85h0c-5.67.87-10.98-3.02-11.85-8.7h0c-.87-5.67 3.03-10.98 8.7-11.85h0z"/><path class="cls-1" d="M70.14 11.32c1.43-.67 2.94-1 4.43-1h0c3.9.0 7.63 2.2 9.4 5.96h0c2.45 5.19.24 11.39-4.96 13.84h0c-5.19 2.45-11.39.24-13.84-4.96h0c-2.45-5.19-.23-11.39 4.96-13.84h0z"/><path class="cls-1" d="M195.27 31.3c2.05-2.4 4.96-3.63 7.89-3.63h0c2.4.0 4.8.83 6.77 2.51h0c4.34 3.74 4.86 10.3 1.11 14.65h0c-3.74 4.36-10.3 4.86-14.66 1.12h0c-4.36-3.74-4.86-10.3-1.12-14.66h0z"/><path class="cls-1" d="M39.16 31.84c1.98-1.76 4.45-2.64 6.92-2.64h0c2.86.0 5.71 1.17 7.76 3.48h0c3.82 4.28 3.45 10.86-.83 14.68h0c-4.28 3.82-10.85 3.45-14.67-.84h0c-3.82-4.28-3.45-10.85.83-14.68h0z"/><path class="cls-1" d="M220 55.07c1.75-1.13 3.71-1.68 5.65-1.68h0c3.41.0 6.74 1.67 8.73 4.74h0c3.11 4.82 1.75 11.25-3.07 14.38h0c-4.82 3.12-11.25 1.75-14.38-3.06h0c-3.11-4.82-1.75-11.25 3.07-14.38h0z"/><path class="cls-1" d="M15.25 60.26c1.97-3.17 5.37-4.91 8.84-4.91h0c1.87.0 3.77.51 5.48 1.57h0c4.87 3.03 6.37 9.44 3.34 14.31h0c-3.03 4.88-9.44 6.37-14.31 3.34h0c-4.88-3.03-6.37-9.44-3.34-14.32h0z"/><path class="cls-1" d="M.37 94.32c1.26-4.62 5.45-7.65 10.02-7.65h0c.91.0 1.83.12 2.75.37h0c5.54 1.52 8.79 7.24 7.28 12.78h0c-1.52 5.53-7.23 8.79-12.77 7.27h0c-5.54-1.52-8.8-7.23-7.28-12.77H.37z"/><path class="cls-1" d="M129.49 30.75c.5-3.7 3.67-6.39 7.29-6.39h0c.33.0.65.02.99.06h0c4.03.54 6.86 4.25 6.32 8.28h0c-.54 4.03-4.24 6.86-8.27 6.33h0c-4.04-.54-6.88-4.25-6.34-8.28h0z"/><path class="cls-1" d="M111.45 24.67c.38-.06.75-.08 1.12-.08h0c3.58.0 6.71 2.61 7.27 6.25h0c.62 4.02-2.14 7.78-6.17 8.4h0c-4.02.62-7.78-2.15-8.4-6.17h0c-.62-4.02 2.15-7.78 6.17-8.4h0z"/><path class="cls-1" d="M153.37 35.33c1.22-2.73 3.92-4.35 6.73-4.35h0c1.01.0 2.03.21 3.01.65h0c3.71 1.67 5.37 6.03 3.7 9.74h0c-1.66 3.71-6.02 5.37-9.74 3.7h0c-3.71-1.66-5.37-6.02-3.7-9.74h0z"/><path class="cls-1" d="M86.26 32.37c1.01-.47 2.09-.7 3.14-.7h0c2.76.0 5.41 1.56 6.67 4.22h0c1.74 3.68.16 8.07-3.52 9.81h0c-3.68 1.74-8.07.17-9.81-3.51h0c-1.74-3.68-.16-8.07 3.52-9.81h0z"/><path class="cls-1" d="M174.95 46.54c1.45-1.7 3.51-2.57 5.58-2.57h0c1.7.0 3.41.58 4.8 1.78h0c3.09 2.65 3.44 7.3.79 10.39h0c-2.65 3.09-7.3 3.44-10.39.79h0c-3.09-2.65-3.44-7.3-.79-10.39h0z"/><path class="cls-1" d="M64.3 46.92c1.41-1.25 3.16-1.87 4.9-1.87h0c2.03.0 4.04.83 5.5 2.46h0c2.71 3.04 2.44 7.69-.59 10.4h0c-3.04 2.71-7.69 2.44-10.4-.59h0c-2.71-3.04-2.44-7.69.59-10.41h0z"/><path class="cls-1" d="M192.48 63.39c1.24-.8 2.63-1.19 4.01-1.19h0c2.41.0 4.77 1.18 6.18 3.36h0c2.21 3.41 1.24 7.98-2.17 10.19h0c-3.41 2.22-7.98 1.24-10.19-2.17h0c-2.21-3.41-1.24-7.98 2.17-10.19h0z"/><path class="cls-1" d="M47.35 67.06c1.4-2.24 3.8-3.48 6.27-3.48h0c1.33.0 2.67.36 3.88 1.11h0c3.46 2.15 4.52 6.7 2.37 10.15h0c-2.15 3.45-6.69 4.51-10.15 2.36h0c-3.46-2.15-4.51-6.69-2.37-10.15h0z"/><path class="cls-1" d="M36.81 91.21c.89-3.27 3.87-5.43 7.1-5.43h0c.65.0 1.3.09 1.95.26h0c3.92 1.08 6.24 5.13 5.16 9.06h0c-1.07 3.92-5.13 6.23-9.05 5.15h0c-3.92-1.07-6.23-5.12-5.16-9.04h0z"/><path class="cls-1" d="M128.15 48.47c.34-2.47 2.44-4.26 4.87-4.26h0c.22.0.44.01.66.05h0c2.69.36 4.58 2.83 4.21 5.52h0c-.35 2.69-2.83 4.58-5.52 4.22h0c-2.69-.36-4.57-2.83-4.22-5.52h0z"/><path class="cls-1" d="M116.13 44.42c.25-.04.5-.05.75-.05h0c2.39.0 4.48 1.74 4.85 4.17h0c.41 2.68-1.43 5.19-4.11 5.6h0c-2.68.41-5.19-1.43-5.6-4.11h0c-.41-2.68 1.43-5.19 4.11-5.6h0z"/><path class="cls-1" d="M144.08 51.53c.82-1.82 2.61-2.9 4.49-2.9h0c.67.0 1.36.14 2.01.44h0 0c2.48 1.11 3.58 4.01 2.47 6.49h0c-1.12 2.47-4.02 3.58-6.5 2.47h0c-2.48-1.11-3.58-4.02-2.47-6.49h0z"/><path class="cls-1" d="M99.33 49.56c.68-.32 1.39-.47 2.09-.47h0c1.84.0 3.6 1.04 4.44 2.82h0c1.16 2.45.11 5.38-2.34 6.54h0c-2.45 1.16-5.38.11-6.54-2.34h0c-1.16-2.46-.11-5.38 2.35-6.54h0z"/><path class="cls-1" d="M84.7 59.25c.94-.83 2.1-1.25 3.27-1.25h0c1.35.0 2.7.56 3.67 1.64h0c1.8 2.02 1.63 5.13-.4 6.93h0c-2.02 1.81-5.13 1.63-6.93-.39h0c-1.81-2.02-1.63-5.13.39-6.94h0z"/><path class="cls-1" d="M170.15 70.24c.82-.53 1.75-.79 2.67-.79h0c1.61.0 3.18.79 4.13 2.24h0c1.47 2.28.83 5.32-1.45 6.8h0c-2.27 1.48-5.32.82-6.8-1.45h0c-1.47-2.28-.82-5.32 1.45-6.79h0z"/><path class="cls-1" d="M178.2 84.32c.46-.14.93-.2 1.4-.2h0c2.11.0 4.07 1.38 4.7 3.53h0c.77 2.6-.72 5.33-3.33 6.1h0c-2.6.77-5.33-.72-6.1-3.32h0c-.77-2.6.72-5.33 3.33-6.1h0z"/><path class="cls-1" d="M66.36 88.78c.6-2.18 2.58-3.62 4.74-3.62h0c.43.0.87.06 1.3.18h0c2.62.72 4.16 3.42 3.44 6.03h0c-.71 2.62-3.42 4.16-6.03 3.44h0c-2.62-.72-4.16-3.42-3.44-6.03h0z"/><path class="cls-1" d="M127.18 61.35c.21-1.57 1.56-2.71 3.1-2.71h0c.13.0.27.0.42.03h0c1.71.23 2.9 1.8 2.69 3.51h0c-.23 1.71-1.81 2.91-3.52 2.68h0c-1.71-.23-2.91-1.8-2.69-3.51h0z"/><path class="cls-1" d="M119.54 58.77c.16-.02.32-.04.48-.04h0c1.51.0 2.84 1.11 3.08 2.65h0c.26 1.7-.91 3.3-2.61 3.56h0c-1.71.26-3.3-.91-3.56-2.62h0c-.26-1.7.91-3.3 2.61-3.56h0z"/><path class="cls-1" d="M137.31 63.29c.52-1.16 1.65-1.84 2.85-1.84h0c.43.0.87.09 1.29.28h0c1.57.7 2.27 2.55 1.57 4.13h0c-.71 1.57-2.56 2.28-4.13 1.57h0c-1.57-.71-2.27-2.55-1.57-4.13h0z"/><path class="cls-1" d="M99.54 68.21c.59-.53 1.34-.8 2.08-.8h0c.86.0 1.72.35 2.33 1.05h0c1.15 1.29 1.04 3.26-.25 4.41h0c-1.28 1.15-3.26 1.03-4.41-.25h0c-1.14-1.29-1.04-3.26.25-4.41h0z"/><path class="cls-1" d="M153.9 75.19c.52-.34 1.11-.5 1.69-.5h0c1.03.0 2.03.5 2.62 1.42h0c.94 1.45.53 3.39-.92 4.32h0c-1.45.94-3.38.53-4.32-.92h0c-.94-1.45-.52-3.38.92-4.32h0z"/><path class="cls-1" d="M92.36 76.74c.59-.95 1.61-1.47 2.66-1.48h0c.56.0 1.13.16 1.65.47h0c1.47.92 1.91 2.84 1 4.3h0c-.91 1.47-2.84 1.92-4.3 1.01h0c-1.46-.92-1.91-2.84-1-4.31h0z"/><path class="cls-1" d="M159.01 84.15c.3-.09.59-.13.89-.13h0c1.35.0 2.6.88 2.99 2.24h0c.49 1.66-.46 3.39-2.1 3.88h0c-1.66.49-3.39-.46-3.88-2.11h0c-.49-1.66.46-3.39 2.11-3.88h0z"/><path class="cls-1" d="M87.89 86.98c.38-1.39 1.64-2.3 3.01-2.3h0c.27.0.55.04.82.11h0c1.67.46 2.65 2.18 2.19 3.84h0c-.46 1.66-2.18 2.64-3.84 2.19h0c-1.67-.46-2.64-2.18-2.19-3.84h0z"/><path class="cls-1" d="M204.54 84.51c.69-.21 1.39-.31 2.08-.31h0c3.18.0 6.12 2.08 7.06 5.29h0c1.16 3.9-1.08 8-4.98 9.15h0c-3.91 1.14-8-1.08-9.16-4.98h0c-1.14-3.9 1.08-8 4.99-9.15h0z"/><rect class="cls-1" x="232.02" y="120.84" width="17.18" height="68.73"/><path class="cls-1" d="M24.1 155.2c0-4.74 3.85-8.59 8.6-8.59h51.98c1.21.0 2.23-.47 3.04-1.26h0c.79-.8 1.25-1.83 1.25-3.04h0c0-1.22-.47-2.23-1.25-3.04h0c-.81-.79-1.83-1.25-3.04-1.26H34.41c-4.75.0-8.98 1.91-12.11 5.02h0c-3.12 3.14-5.02 7.39-5.03 12.16h0c.01 4.78 1.91 9.02 5.03 12.16h0c3.12 3.13 7.35 5.02 12.11 5.02H106.2v17.19H34.39c-9.45.0-18.08-3.87-24.26-10.08h0C3.94 173.3.08 164.66.09 155.2h0c0-9.46 3.85-18.1 10.04-24.29h0c6.18-6.21 14.82-10.07 24.27-10.07h50.27c5.9.0 11.33 2.41 15.19 6.28h0c3.88 3.86 6.3 9.29 6.29 15.19h0c0 5.91-2.42 11.33-6.29 15.2h0c-3.85 3.86-9.27 6.28-15.17 6.28h-52c-4.75.0-8.6-3.84-8.6-8.59z"/><path class="cls-1" d="M139.47 155.2c0 4.75 3.84 8.59 8.59 8.59h51.97c1.21.0 2.24.47 3.04 1.26h0c.79.81 1.25 1.83 1.25 3.04h0c0 1.21-.47 2.23-1.25 3.03h0c-.8.79-1.83 1.25-3.04 1.26h-50.26c-4.76.0-8.98-1.89-12.11-5.02h0c-3.11-3.14-5.02-7.37-5.02-12.16h0c0-4.77 1.91-9.02 5.02-12.16h0c3.13-3.11 7.35-5.02 12.11-5.02h71.79v-17.18h-71.8c-9.45.0-18.08 3.86-24.25 10.07h0c-6.2 6.19-10.05 14.83-10.05 24.29h0c0 9.46 3.84 18.1 10.05 24.29h0c6.18 6.21 14.81 10.08 24.27 10.08h50.26c5.91.0 11.34-2.42 15.2-6.3h0c3.86-3.86 6.29-9.28 6.28-15.19h0c0-5.9-2.42-11.32-6.28-15.19h0c-3.86-3.87-9.28-6.29-15.18-6.29h-51.99c-4.75.0-8.59 3.85-8.59 8.59h0z"/><path class="cls-1" d="M250 93.22c0 5.74-4.66 10.4-10.41 10.4s-10.39-4.66-10.39-10.4 4.66-10.4 10.39-10.4S250 87.48 250 93.22z"/><path class="cls-1" d="M184.69 19.75c0 5.74-4.65 10.4-10.4 10.4s-10.39-4.66-10.39-10.4 4.65-10.4 10.39-10.4 10.4 4.66 10.4 10.4z"/><path class="cls-1" d="M167.09 62.2c0 2.71-2.2 4.91-4.91 4.91s-4.9-2.2-4.9-4.91 2.19-4.91 4.9-4.91 4.91 2.2 4.91 4.91z"/><path class="cls-1" d="M82.47 75.28c0 2.71-2.2 4.91-4.91 4.91s-4.9-2.2-4.9-4.91 2.19-4.9 4.9-4.9 4.91 2.19 4.91 4.9z"/><circle class="cls-1" cx="148.83" cy="70.08" r="3.13"/><path class="cls-1" d="M113.31 64.86c0 1.73-1.4 3.13-3.13 3.13s-3.12-1.4-3.12-3.13 1.4-3.12 3.12-3.12 3.13 1.4 3.13 3.12z"/></svg></span><span class=font-weight-bold>Documentation</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-2 mb-2 mb-lg-0"><a class="nav-link active" href=../../../../users/><i class='fa fa-user-friends'></i><span class=active>For Users</span></a></li><li class="nav-item mr-2 mb-2 mb-lg-0"><a class=nav-link href=../../../../providers/><i class='fa fa-users-cog'></i><span>For Providers</span></a></li><li class="nav-item mr-2 mb-2 mb-lg-0"><a class=nav-link href=../../../../internal/><i class='fa fa-cogs'></i><span>Internal Services</span></a></li><li class="nav-item mr-2 mb-2 mb-lg-0"><a class=nav-link href=../../../../support/><i class='fa fa-lightbulb'></i><span>Support</span></a></li><li class="nav-item mr-2 mb-2 mb-lg-0"><a class=nav-link href=../../../../about/><i class='fa fa-info'></i><span>About</span></a></li></ul></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><script>$(function(){$("#td-section-nav a").removeClass("active"),$("#td-section-nav #m-userstutorialsadhocoidc-agent-fedcloudclient-terraform").addClass("active"),$("#td-section-nav #m-userstutorialsadhocoidc-agent-fedcloudclient-terraform-li span").addClass("td-sidebar-nav-active-item"),$("#td-section-nav #m-userstutorialsadhocoidc-agent-fedcloudclient-terraform").parents("li").addClass("active-path"),$("#td-section-nav li.active-path").addClass("show"),$("#td-section-nav li.active-path").children("input").prop("checked",!0),$("#td-section-nav #m-userstutorialsadhocoidc-agent-fedcloudclient-terraform-li").siblings("li").addClass("show"),$("#td-section-nav #m-userstutorialsadhocoidc-agent-fedcloudclient-terraform-li").children("ul").children("li").addClass("show"),$("#td-sidebar-menu").toggleClass("d-none")})</script><div id=td-sidebar-menu class="td-sidebar__inner d-none"><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search…" aria-label=Search… autocomplete=off data-offline-search-index-json-src=../../../../offline-search-index.fd47573a3ed43936f303a2399c757ab4.json data-offline-search-base-href=../../../../ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav foldable-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-users-li><a href=../../../../users/ title="User Guides" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-users><span>For Users</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-usersgetting-started-li><input type=checkbox id=m-usersgetting-started-check>
<label for=m-usersgetting-started-check><a href=../../../../users/getting-started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersgetting-started><span>Getting Started</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersgetting-startedarchitecture-li><input type=checkbox id=m-usersgetting-startedarchitecture-check>
<label for=m-usersgetting-startedarchitecture-check><a href=../../../../users/getting-started/architecture/ title="EGI Architecture" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersgetting-startedarchitecture><span>Architecture</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersgetting-startedopenstack-li><input type=checkbox id=m-usersgetting-startedopenstack-check>
<label for=m-usersgetting-startedopenstack-check><a href=../../../../users/getting-started/openstack/ title="Using OpenStack Providers" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersgetting-startedopenstack><span>OpenStack Providers</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersgetting-startedcli-li><input type=checkbox id=m-usersgetting-startedcli-check>
<label for=m-usersgetting-startedcli-check><a href=../../../../users/getting-started/cli/ title="Command Line Interface" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersgetting-startedcli><span>Command Line</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-usersgetting-startedcommunities-li><input type=checkbox id=m-usersgetting-startedcommunities-check>
<label for=m-usersgetting-startedcommunities-check><a href=../../../../users/getting-started/communities/ title="Community Specific Documentation" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersgetting-startedcommunities><span>Communities</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersgetting-startedcommunitiesdmcc-li><input type=checkbox id=m-usersgetting-startedcommunitiesdmcc-check>
<label for=m-usersgetting-startedcommunitiesdmcc-check><a href=../../../../users/getting-started/communities/dmcc/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersgetting-startedcommunitiesdmcc><span>Disaster Mitigation and Agriculture</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-userstutorials-li><input type=checkbox id=m-userstutorials-check>
<label for=m-userstutorials-check><a href=../../../../users/tutorials/ title="Tutorials & Guides" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userstutorials><span>Tutorials</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userstutorialsfoundation-li><input type=checkbox id=m-userstutorialsfoundation-check>
<label for=m-userstutorialsfoundation-check><a href=../../../../users/tutorials/foundation/ title="Foundation level" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userstutorialsfoundation><span>Foundation</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userstutorialsintermediate-li><input type=checkbox id=m-userstutorialsintermediate-check>
<label for=m-userstutorialsintermediate-check><a href=../../../../users/tutorials/intermediate/ title="Intermediate level" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userstutorialsintermediate><span>Intermediate</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userstutorialsadvanced-li><input type=checkbox id=m-userstutorialsadvanced-check>
<label for=m-userstutorialsadvanced-check><a href=../../../../users/tutorials/advanced/ title="Advanced level" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userstutorialsadvanced><span>Advanced</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userstutorialsscientific-li><input type=checkbox id=m-userstutorialsscientific-check>
<label for=m-userstutorialsscientific-check><a href=../../../../users/tutorials/scientific/ title="Scientific level" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userstutorialsscientific><span>Scientific</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-userstutorialsadhoc-li><input type=checkbox id=m-userstutorialsadhoc-check>
<label for=m-userstutorialsadhoc-check><a href=../../../../users/tutorials/adhoc/ title="Ad-hoc tutorials" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userstutorialsadhoc><span>Ad-hoc</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userstutorialsadhoccreate-your-first-virtual-machine-li><input type=checkbox id=m-userstutorialsadhoccreate-your-first-virtual-machine-check>
<label for=m-userstutorialsadhoccreate-your-first-virtual-machine-check><a href=../../../../users/tutorials/adhoc/create-your-first-virtual-machine/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userstutorialsadhoccreate-your-first-virtual-machine><span>Create your first Virtual Machine (VM)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userstutorialsadhocaccessing-vm-with-ssh-li><input type=checkbox id=m-userstutorialsadhocaccessing-vm-with-ssh-check>
<label for=m-userstutorialsadhocaccessing-vm-with-ssh-check><a href=../../../../users/tutorials/adhoc/accessing-vm-with-ssh/ title="Accessing virtual machines with SSH" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userstutorialsadhocaccessing-vm-with-ssh><span>Access a VM with SSH</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userstutorialsadhocvm-datahub-li><input type=checkbox id=m-userstutorialsadhocvm-datahub-check>
<label for=m-userstutorialsadhocvm-datahub-check><a href=../../../../users/tutorials/adhoc/vm-datahub/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userstutorialsadhocvm-datahub><span>Access DataHub from a VM</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userstutorialsadhocjupyter-datahub-virtual-machine-li><input type=checkbox id=m-userstutorialsadhocjupyter-datahub-virtual-machine-check>
<label for=m-userstutorialsadhocjupyter-datahub-virtual-machine-check><a href=../../../../users/tutorials/adhoc/jupyter-datahub-virtual-machine/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userstutorialsadhocjupyter-datahub-virtual-machine><span>Create a VM with Jupyter and DataHub</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userstutorialsadhocoidc-agent-fedcloudclient-terraform-li><input type=checkbox id=m-userstutorialsadhocoidc-agent-fedcloudclient-terraform-check>
<label for=m-userstutorialsadhocoidc-agent-fedcloudclient-terraform-check><a href=../../../../users/tutorials/adhoc/oidc-agent-fedcloudclient-terraform/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userstutorialsadhocoidc-agent-fedcloudclient-terraform><span>Automate with oidc-agent, fedcloudclient, terraform and Ansible</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userstutorialsadhocdata-transfer-grid-storage-li><input type=checkbox id=m-userstutorialsadhocdata-transfer-grid-storage-check>
<label for=m-userstutorialsadhocdata-transfer-grid-storage-check><a href=../../../../users/tutorials/adhoc/data-transfer-grid-storage/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userstutorialsadhocdata-transfer-grid-storage><span>Data transfer with grid storage</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userstutorialsadhochtc-job-submission-li><input type=checkbox id=m-userstutorialsadhochtc-job-submission-check>
<label for=m-userstutorialsadhochtc-job-submission-check><a href=../../../../users/tutorials/adhoc/htc-job-submission/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userstutorialsadhochtc-job-submission><span>Submitting HTC Jobs</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userstutorialsadhocdata-transfer-object-storage-li><input type=checkbox id=m-userstutorialsadhocdata-transfer-object-storage-check>
<label for=m-userstutorialsadhocdata-transfer-object-storage-check><a href=../../../../users/tutorials/adhoc/data-transfer-object-storage/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userstutorialsadhocdata-transfer-object-storage><span>Data transfer with object storage</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-usersaai-li><input type=checkbox id=m-usersaai-check>
<label for=m-usersaai-check><a href=../../../../users/aai/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersaai><span>Authentication & Authorization</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-usersaaicheck-in-li><input type=checkbox id=m-usersaaicheck-in-check>
<label for=m-usersaaicheck-in-check><a href=../../../../users/aai/check-in/ title="EGI Check-in" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersaaicheck-in><span>Check-in</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersaaicheck-insignup-li><input type=checkbox id=m-usersaaicheck-insignup-check>
<label for=m-usersaaicheck-insignup-check><a href=../../../../users/aai/check-in/signup/ title="Sign up for an EGI Account" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersaaicheck-insignup><span>Sign up</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersaaicheck-inlinking-li><input type=checkbox id=m-usersaaicheck-inlinking-check>
<label for=m-usersaaicheck-inlinking-check><a href=../../../../users/aai/check-in/linking/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersaaicheck-inlinking><span>Linking Identities</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersaaicheck-injoining-virtual-organisation-li><input type=checkbox id=m-usersaaicheck-injoining-virtual-organisation-check>
<label for=m-usersaaicheck-injoining-virtual-organisation-check><a href=../../../../users/aai/check-in/joining-virtual-organisation/ title="Joining a Virtual Organisation" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersaaicheck-injoining-virtual-organisation><span>Joining a VO</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-usersaaicheck-invos-li><input type=checkbox id=m-usersaaicheck-invos-check>
<label for=m-usersaaicheck-invos-check><a href=../../../../users/aai/check-in/vos/ title="Managing a Virtual Organisation" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersaaicheck-invos><span>Managing a VO</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersaaicheck-invosexpressing-vo-information-li><input type=checkbox id=m-usersaaicheck-invosexpressing-vo-information-check>
<label for=m-usersaaicheck-invosexpressing-vo-information-check><a href=../../../../users/aai/check-in/vos/expressing-vo-information/ title="VO Membership Information" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersaaicheck-invosexpressing-vo-information><span>VO Membership</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersaaicheck-invosperun-li><input type=checkbox id=m-usersaaicheck-invosperun-check>
<label for=m-usersaaicheck-invosperun-check><a href=../../../../users/aai/check-in/vos/perun/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersaaicheck-invosperun><span>Perun</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersaaicheck-invosvoms-li><input type=checkbox id=m-usersaaicheck-invosvoms-check>
<label for=m-usersaaicheck-invosvoms-check><a href=../../../../users/aai/check-in/vos/voms/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersaaicheck-invosvoms><span>VOMS</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-usersaaicheck-inobtaining-tokens-li><input type=checkbox id=m-usersaaicheck-inobtaining-tokens-check>
<label for=m-usersaaicheck-inobtaining-tokens-check><a href=../../../../users/aai/check-in/obtaining-tokens/ title="Obtaining Access/Refresh Tokens" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersaaicheck-inobtaining-tokens><span>Obtaining Tokens</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersaaicheck-inobtaining-tokensoidc-agent-li><input type=checkbox id=m-usersaaicheck-inobtaining-tokensoidc-agent-check>
<label for=m-usersaaicheck-inobtaining-tokensoidc-agent-check><a href=../../../../users/aai/check-in/obtaining-tokens/oidc-agent/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersaaicheck-inobtaining-tokensoidc-agent><span>oidc-agent</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersaaicheck-inobtaining-tokenstoken-portal-li><input type=checkbox id=m-usersaaicheck-inobtaining-tokenstoken-portal-check>
<label for=m-usersaaicheck-inobtaining-tokenstoken-portal-check><a href=../../../../users/aai/check-in/obtaining-tokens/token-portal/ title="EGI Check-in Token Portal" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersaaicheck-inobtaining-tokenstoken-portal><span>Token Portal</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersaaicheck-infaq-li><input type=checkbox id=m-usersaaicheck-infaq-check>
<label for=m-usersaaicheck-infaq-check><a href=../../../../users/aai/check-in/faq/ title="Frequently Asked Questions" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersaaicheck-infaq><span>FAQ</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-userscompute-li><input type=checkbox id=m-userscompute-check>
<label for=m-userscompute-check><a href=../../../../users/compute/ title="Compute Services" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscompute><span>Compute</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-userscomputecloud-compute-li><input type=checkbox id=m-userscomputecloud-compute-check>
<label for=m-userscomputecloud-compute-check><a href=../../../../users/compute/cloud-compute/ title="Federated Cloud Compute" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputecloud-compute><span>Cloud Compute</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userscomputecloud-computeopenstack-li><input type=checkbox id=m-userscomputecloud-computeopenstack-check>
<label for=m-userscomputecloud-computeopenstack-check><a href=../../../../users/compute/cloud-compute/openstack/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputecloud-computeopenstack><span>Using OpenStack Providers</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userscomputecloud-computeauth-li><input type=checkbox id=m-userscomputecloud-computeauth-check>
<label for=m-userscomputecloud-computeauth-check><a href=../../../../users/compute/cloud-compute/auth/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputecloud-computeauth><span>Authentication and Authorisation</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userscomputecloud-computeimages-li><input type=checkbox id=m-userscomputecloud-computeimages-check>
<label for=m-userscomputecloud-computeimages-check><a href=../../../../users/compute/cloud-compute/images/ title="Virtual Machine Images" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputecloud-computeimages><span>Images</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userscomputecloud-computegpgpu-li><input type=checkbox id=m-userscomputecloud-computegpgpu-check>
<label for=m-userscomputecloud-computegpgpu-check><a href=../../../../users/compute/cloud-compute/gpgpu/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputecloud-computegpgpu><span>GPUs</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userscomputecloud-computedynamic-dns-li><input type=checkbox id=m-userscomputecloud-computedynamic-dns-check>
<label for=m-userscomputecloud-computedynamic-dns-check><a href=../../../../users/compute/cloud-compute/dynamic-dns/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputecloud-computedynamic-dns><span>Dynamic DNS</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userscomputecloud-computeautomate-li><input type=checkbox id=m-userscomputecloud-computeautomate-check>
<label for=m-userscomputecloud-computeautomate-check><a href=../../../../users/compute/cloud-compute/automate/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputecloud-computeautomate><span>Automating Deployments</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userscomputecloud-computemonitor-li><input type=checkbox id=m-userscomputecloud-computemonitor-check>
<label for=m-userscomputecloud-computemonitor-check><a href=../../../../users/compute/cloud-compute/monitor/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputecloud-computemonitor><span>Monitoring and Management</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userscomputecloud-computeappdb-li><input type=checkbox id=m-userscomputecloud-computeappdb-check>
<label for=m-userscomputecloud-computeappdb-check><a href=../../../../users/compute/cloud-compute/appdb/ title="AppDB REST API v1.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputecloud-computeappdb><span>AppDB REST API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userscomputecloud-computefaq-li><input type=checkbox id=m-userscomputecloud-computefaq-check>
<label for=m-userscomputecloud-computefaq-check><a href=../../../../users/compute/cloud-compute/faq/ title="Frequently Asked Questions" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputecloud-computefaq><span>FAQ</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-userscomputecloud-container-compute-li><input type=checkbox id=m-userscomputecloud-container-compute-check>
<label for=m-userscomputecloud-container-compute-check><a href=../../../../users/compute/cloud-container-compute/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputecloud-container-compute><span>Cloud Container Compute</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userscomputecloud-container-computedocker-li><input type=checkbox id=m-userscomputecloud-container-computedocker-check>
<label for=m-userscomputecloud-container-computedocker-check><a href=../../../../users/compute/cloud-container-compute/docker/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputecloud-container-computedocker><span>Docker VM</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userscomputecloud-container-computek8s-li><input type=checkbox id=m-userscomputecloud-container-computek8s-check>
<label for=m-userscomputecloud-container-computek8s-check><a href=../../../../users/compute/cloud-container-compute/k8s/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputecloud-container-computek8s><span>Kubernetes</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-userscomputehigh-throughput-compute-li><input type=checkbox id=m-userscomputehigh-throughput-compute-check>
<label for=m-userscomputehigh-throughput-compute-check><a href=../../../../users/compute/high-throughput-compute/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputehigh-throughput-compute><span>High Throughput Compute</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userscomputehigh-throughput-computequerying-information-system-li><input type=checkbox id=m-userscomputehigh-throughput-computequerying-information-system-check>
<label for=m-userscomputehigh-throughput-computequerying-information-system-check><a href=../../../../users/compute/high-throughput-compute/querying-information-system/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputehigh-throughput-computequerying-information-system><span>Querying the Information System</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-userscomputeorchestration-li><input type=checkbox id=m-userscomputeorchestration-check>
<label for=m-userscomputeorchestration-check><a href=../../../../users/compute/orchestration/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputeorchestration><span>Compute Orchestration</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-userscomputeorchestrationim-li><input type=checkbox id=m-userscomputeorchestrationim-check>
<label for=m-userscomputeorchestrationim-check><a href=../../../../users/compute/orchestration/im/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputeorchestrationim><span>Infrastructure Manager</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userscomputeorchestrationimcli-li><input type=checkbox id=m-userscomputeorchestrationimcli-check>
<label for=m-userscomputeorchestrationimcli-check><a href=../../../../users/compute/orchestration/im/cli/ title="Infrastructure Manager Command-Line Interface" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputeorchestrationimcli><span>Command Line</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userscomputeorchestrationimdashboard-li><input type=checkbox id=m-userscomputeorchestrationimdashboard-check>
<label for=m-userscomputeorchestrationimdashboard-check><a href=../../../../users/compute/orchestration/im/dashboard/ title="Infrastructure Manager Dashboard" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputeorchestrationimdashboard><span>Dashboard</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-userscomputeorchestrationec3-li><input type=checkbox id=m-userscomputeorchestrationec3-check>
<label for=m-userscomputeorchestrationec3-check><a href=../../../../users/compute/orchestration/ec3/ title="Elastic Cloud Compute Clusters" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputeorchestrationec3><span>Cloud Compute Clusters</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userscomputeorchestrationec3portal-li><input type=checkbox id=m-userscomputeorchestrationec3portal-check>
<label for=m-userscomputeorchestrationec3portal-check><a href=../../../../users/compute/orchestration/ec3/portal/ title="EC3 Portal" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputeorchestrationec3portal><span>Portal</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userscomputeorchestrationec3cli-li><input type=checkbox id=m-userscomputeorchestrationec3cli-check>
<label for=m-userscomputeorchestrationec3cli-check><a href=../../../../users/compute/orchestration/ec3/cli/ title="EC3 Command-Line Interface" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputeorchestrationec3cli><span>Command Line</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-userscomputeorchestrationec3apps-li><input type=checkbox id=m-userscomputeorchestrationec3apps-check>
<label for=m-userscomputeorchestrationec3apps-check><a href=../../../../users/compute/orchestration/ec3/apps/ title="EC3 Applications and Tools" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputeorchestrationec3apps><span>Applications and Tools</span></a></label><ul class="ul-5 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userscomputeorchestrationec3appsecas-li><input type=checkbox id=m-userscomputeorchestrationec3appsecas-check>
<label for=m-userscomputeorchestrationec3appsecas-check><a href=../../../../users/compute/orchestration/ec3/apps/ecas/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputeorchestrationec3appsecas><span>ECAS</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userscomputeorchestrationec3appshtc-li><input type=checkbox id=m-userscomputeorchestrationec3appshtc-check>
<label for=m-userscomputeorchestrationec3appshtc-check><a href=../../../../users/compute/orchestration/ec3/apps/htc/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputeorchestrationec3appshtc><span>HTC</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userscomputeorchestrationec3developers-li><input type=checkbox id=m-userscomputeorchestrationec3developers-check>
<label for=m-userscomputeorchestrationec3developers-check><a href=../../../../users/compute/orchestration/ec3/developers/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputeorchestrationec3developers><span>Instructions for Developers</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userscomputeorchestrationdodas-li><input type=checkbox id=m-userscomputeorchestrationdodas-check>
<label for=m-userscomputeorchestrationdodas-check><a href=../../../../users/compute/orchestration/dodas/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputeorchestrationdodas><span>Dynamic On-Demand Analysis Software</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userscomputeorchestrationworkload-manager-li><input type=checkbox id=m-userscomputeorchestrationworkload-manager-check>
<label for=m-userscomputeorchestrationworkload-manager-check><a href=../../../../users/compute/orchestration/workload-manager/ title="EGI Workload Manager" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputeorchestrationworkload-manager><span>Workload Manager</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userscomputesoftware-distribution-li><input type=checkbox id=m-userscomputesoftware-distribution-check>
<label for=m-userscomputesoftware-distribution-check><a href=../../../../users/compute/software-distribution/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userscomputesoftware-distribution><span>Software Distribution</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-usersdata-li><input type=checkbox id=m-usersdata-check>
<label for=m-usersdata-check><a href=../../../../users/data/ title="Data Services" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdata><span>Data</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-usersdatastorage-li><input type=checkbox id=m-usersdatastorage-check>
<label for=m-usersdatastorage-check><a href=../../../../users/data/storage/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdatastorage><span>Online Storage</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdatastorageblock-storage-li><input type=checkbox id=m-usersdatastorageblock-storage-check>
<label for=m-usersdatastorageblock-storage-check><a href=../../../../users/data/storage/block-storage/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdatastorageblock-storage><span>Block Storage</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdatastoragegrid-storage-li><input type=checkbox id=m-usersdatastoragegrid-storage-check>
<label for=m-usersdatastoragegrid-storage-check><a href=../../../../users/data/storage/grid-storage/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdatastoragegrid-storage><span>Grid Storage</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdatastorageobject-storage-li><input type=checkbox id=m-usersdatastorageobject-storage-check>
<label for=m-usersdatastorageobject-storage-check><a href=../../../../users/data/storage/object-storage/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdatastorageobject-storage><span>Object Storage</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-usersdatamanagement-li><input type=checkbox id=m-usersdatamanagement-check>
<label for=m-usersdatamanagement-check><a href=../../../../users/data/management/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdatamanagement><span>Data Management</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-usersdatamanagementdatahub-li><input type=checkbox id=m-usersdatamanagementdatahub-check>
<label for=m-usersdatamanagementdatahub-check><a href=../../../../users/data/management/datahub/ title="EGI DataHub" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdatamanagementdatahub><span>DataHub</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdatamanagementdatahubusecases-li><input type=checkbox id=m-usersdatamanagementdatahubusecases-check>
<label for=m-usersdatamanagementdatahubusecases-check><a href=../../../../users/data/management/datahub/usecases/ title="DataHub Use-Cases" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdatamanagementdatahubusecases><span>Use-Cases</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdatamanagementdatahubclients-li><input type=checkbox id=m-usersdatamanagementdatahubclients-check>
<label for=m-usersdatamanagementdatahubclients-check><a href=../../../../users/data/management/datahub/clients/ title="DataHub Clients" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdatamanagementdatahubclients><span>Clients</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdatamanagementdatahubfile-management-li><input type=checkbox id=m-usersdatamanagementdatahubfile-management-check>
<label for=m-usersdatamanagementdatahubfile-management-check><a href=../../../../users/data/management/datahub/file-management/ title="DataHub File Management" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdatamanagementdatahubfile-management><span>File Management</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdatamanagementdatahubapi-li><input type=checkbox id=m-usersdatamanagementdatahubapi-check>
<label for=m-usersdatamanagementdatahubapi-check><a href=../../../../users/data/management/datahub/api/ title="DataHub API" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdatamanagementdatahubapi><span>API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdatamanagementdatahublinks-li><input type=checkbox id=m-usersdatamanagementdatahublinks-check>
<label for=m-usersdatamanagementdatahublinks-check><a href=../../../../users/data/management/datahub/links/ title="DataHub Links" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdatamanagementdatahublinks><span>Links</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-usersdatamanagementdata-transfer-li><input type=checkbox id=m-usersdatamanagementdata-transfer-check>
<label for=m-usersdatamanagementdata-transfer-check><a href=../../../../users/data/management/data-transfer/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdatamanagementdata-transfer><span>EGI Data Transfer</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdatamanagementdata-transferwebfts-li><input type=checkbox id=m-usersdatamanagementdata-transferwebfts-check>
<label for=m-usersdatamanagementdata-transferwebfts-check><a href=../../../../users/data/management/data-transfer/webfts/ title="Data Transfer Web Interface" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdatamanagementdata-transferwebfts><span>Web Interface</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdatamanagementdata-transferclients-li><input type=checkbox id=m-usersdatamanagementdata-transferclients-check>
<label for=m-usersdatamanagementdata-transferclients-check><a href=../../../../users/data/management/data-transfer/clients/ title="Data Transfer Clients" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdatamanagementdata-transferclients><span>Clients</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdatamanagementdata-transferapi-li><input type=checkbox id=m-usersdatamanagementdata-transferapi-check>
<label for=m-usersdatamanagementdata-transferapi-check><a href=../../../../users/data/management/data-transfer/api/ title="Data Transfer API" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdatamanagementdata-transferapi><span>API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdatamanagementdata-transfermonitoring-li><input type=checkbox id=m-usersdatamanagementdata-transfermonitoring-check>
<label for=m-usersdatamanagementdata-transfermonitoring-check><a href=../../../../users/data/management/data-transfer/monitoring/ title="Monitoring Data Transfer" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdatamanagementdata-transfermonitoring><span>Monitoring</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-usersdatamanagementrucio-li><input type=checkbox id=m-usersdatamanagementrucio-check>
<label for=m-usersdatamanagementrucio-check><a href=../../../../users/data/management/rucio/ title=Rucio class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdatamanagementrucio><span>Data Orchestrator</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdatamanagementruciogetting-started-li><input type=checkbox id=m-usersdatamanagementruciogetting-started-check>
<label for=m-usersdatamanagementruciogetting-started-check><a href=../../../../users/data/management/rucio/getting-started/ title="Getting Started with Rucio" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdatamanagementruciogetting-started><span>Getting Started</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdatamanagementruciocommands-li><input type=checkbox id=m-usersdatamanagementruciocommands-check>
<label for=m-usersdatamanagementruciocommands-check><a href=../../../../users/data/management/rucio/commands/ title="Rucio Command-Line Interface" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdatamanagementruciocommands><span>Command Line</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdatamanagementrucioadmin-li><input type=checkbox id=m-usersdatamanagementrucioadmin-check>
<label for=m-usersdatamanagementrucioadmin-check><a href=../../../../users/data/management/rucio/admin/ title="Administering Rucio" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdatamanagementrucioadmin><span>Administration</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdatamanagementruciodteam-vo-li><input type=checkbox id=m-usersdatamanagementruciodteam-vo-check>
<label for=m-usersdatamanagementruciodteam-vo-check><a href=../../../../users/data/management/rucio/dteam-vo/ title="Dteam Specific Documentation" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdatamanagementruciodteam-vo><span>Rucio Dteam</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdatamanagementopen-rdm-li><input type=checkbox id=m-usersdatamanagementopen-rdm-check>
<label for=m-usersdatamanagementopen-rdm-check><a href=../../../../users/data/management/open-rdm/ title=openRDM class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdatamanagementopen-rdm><span>Research Data Management</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-userssecurity-li><input type=checkbox id=m-userssecurity-check>
<label for=m-userssecurity-check><a href=../../../../users/security/ title="Security Services" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userssecurity><span>Security</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-userssecuritysecrets-store-li><input type=checkbox id=m-userssecuritysecrets-store-check>
<label for=m-userssecuritysecrets-store-check><a href=../../../../users/security/secrets-store/ title="EGI Secrets Store" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userssecuritysecrets-store><span>Secrets Store</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userssecuritysecrets-storegui-li><input type=checkbox id=m-userssecuritysecrets-storegui-check>
<label for=m-userssecuritysecrets-storegui-check><a href=../../../../users/security/secrets-store/gui/ title="Secrets Store Web Interface" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userssecuritysecrets-storegui><span>Web Interface</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userssecuritysecrets-storecli-li><input type=checkbox id=m-userssecuritysecrets-storecli-check>
<label for=m-userssecuritysecrets-storecli-check><a href=../../../../users/security/secrets-store/cli/ title="Secrets Store Command-Line Interface" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userssecuritysecrets-storecli><span>Command Line</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userssecuritysecrets-storeapi-li><input type=checkbox id=m-userssecuritysecrets-storeapi-check>
<label for=m-userssecuritysecrets-storeapi-check><a href=../../../../users/security/secrets-store/api/ title="Secrets Store API" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userssecuritysecrets-storeapi><span>API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userssecuritysecrets-storearchitecture-li><input type=checkbox id=m-userssecuritysecrets-storearchitecture-check>
<label for=m-userssecuritysecrets-storearchitecture-check><a href=../../../../users/security/secrets-store/architecture/ title="Secrets Store Architecture" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userssecuritysecrets-storearchitecture><span>Architecture</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-usersdev-env-li><input type=checkbox id=m-usersdev-env-check>
<label for=m-usersdev-env-check><a href=../../../../users/dev-env/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdev-env><span>Development Environments</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-usersdev-envnotebooks-li><input type=checkbox id=m-usersdev-envnotebooks-check>
<label for=m-usersdev-envnotebooks-check><a href=../../../../users/dev-env/notebooks/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdev-envnotebooks><span>Notebooks</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-usersdev-envnotebookskernels-li><input type=checkbox id=m-usersdev-envnotebookskernels-check>
<label for=m-usersdev-envnotebookskernels-check><a href=../../../../users/dev-env/notebooks/kernels/ title="Notebooks Environments" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdev-envnotebookskernels><span>Environments</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdev-envnotebookskernelsdefault-li><input type=checkbox id=m-usersdev-envnotebookskernelsdefault-check>
<label for=m-usersdev-envnotebookskernelsdefault-check><a href=../../../../users/dev-env/notebooks/kernels/default/ title="Default Environment" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdev-envnotebookskernelsdefault><span>Default</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdev-envnotebookskernelsmatlab-li><input type=checkbox id=m-usersdev-envnotebookskernelsmatlab-check>
<label for=m-usersdev-envnotebookskernelsmatlab-check><a href=../../../../users/dev-env/notebooks/kernels/matlab/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdev-envnotebookskernelsmatlab><span>MATLAB</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdev-envnotebooksdata-li><input type=checkbox id=m-usersdev-envnotebooksdata-check>
<label for=m-usersdev-envnotebooksdata-check><a href=../../../../users/dev-env/notebooks/data/ title="Data Management in Notebooks" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdev-envnotebooksdata><span>Data Management</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdev-envnotebooksintegration-li><input type=checkbox id=m-usersdev-envnotebooksintegration-check>
<label for=m-usersdev-envnotebooksintegration-check><a href=../../../../users/dev-env/notebooks/integration/ title="Notebooks Integration with Other Services" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdev-envnotebooksintegration><span>Integration</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdev-envnotebookstraining-li><input type=checkbox id=m-usersdev-envnotebookstraining-check>
<label for=m-usersdev-envnotebookstraining-check><a href=../../../../users/dev-env/notebooks/training/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdev-envnotebookstraining><span>Training Instance</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdev-envnotebooksfaq-li><input type=checkbox id=m-usersdev-envnotebooksfaq-check>
<label for=m-usersdev-envnotebooksfaq-check><a href=../../../../users/dev-env/notebooks/faq/ title="Frequently Asked Questions" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdev-envnotebooksfaq><span>FAQ</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-usersdev-envreplay-li><input type=checkbox id=m-usersdev-envreplay-check>
<label for=m-usersdev-envreplay-check><a href=../../../../users/dev-env/replay/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-usersdev-envreplay><span>Replay</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-userstraining-li><input type=checkbox id=m-userstraining-check>
<label for=m-userstraining-check><a href=../../../../users/training/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-userstraining><span>Training Infrastructure</span></a></label></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta pb-1 pt-2 mb-0"><a href=https://github.com/EGI-Federation/documentation/edit/main/content/en/users/tutorials/adhoc/oidc-agent-fedcloudclient-terraform/_index.md target=_blank><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/EGI-Federation/documentation/new/main/content/en/users/tutorials/adhoc/oidc-agent-fedcloudclient-terraform/_index.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/EGI-Federation/documentation/issues/new?title=Automate%20with%20oidc-agent,%20fedcloudclient,%20terraform%20and%20Ansible" target=_blank><i class="fab fa-github fa-fw"></i> Create documentation issue</a></div><div class=td-toc><p class=td-toc-title>On this page</p><hr class=panel-line><nav id=TableOfContents><ul><li><a href=#overview>Overview</a></li><li><a href=#step-1-signing-up-for-an-egi-check-in-account>Step 1: Signing up for an EGI Check-in account</a></li><li><a href=#step-2-enrolling-to-a-virtual-organisation>Step 2: Enrolling to a Virtual Organisation</a></li><li><a href=#step-3-creating-a-vm>Step 3: Creating a VM</a><ul><li><a href=#setting-up-oidc-agent>Setting up oidc-agent</a></li><li><a href=#installing-fedcloudclient-and-ansible>Installing fedcloudclient and ansible</a></li><li><a href=#identifying-a-suitable-cloud-site>Identifying a suitable cloud site</a></li><li><a href=#deploying-the-virtual-machine-with-terraform>Deploying the Virtual Machine with terraform</a></li></ul></li><li><a href=#step-4-using-ansible>Step 4: Using Ansible</a></li><li><a href=#additional-resources>Additional resources</a></li><li><a href=#asking-for-help>Asking for help</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=../../../../users/>For Users</a></li><li class=breadcrumb-item><a href=../../../../users/tutorials/>Tutorials</a></li><li class=breadcrumb-item><a href=../../../../users/tutorials/adhoc/>Ad-hoc</a></li><li class="breadcrumb-item active" aria-current=page><a href=../../../../users/tutorials/adhoc/oidc-agent-fedcloudclient-terraform/>Automate with oidc-agent, fedcloudclient, terraform and Ansible</a></li></ol></nav><div class=td-content><h1>Automate with oidc-agent, fedcloudclient, terraform and Ansible</h1><div class=lead>Step by step guide to automating the deployment using Ansible with Terraform, oidc-agent and fedcloudclient</div><header class=article-meta></header><h2 id=overview>Overview</h2><p>This tutorial describes how to create a Virtual Machine in the EGI Federation,
leveraging <a href=https://indigo-dc.gitbook.io/oidc-agent/>oidc-agent</a> to retrieve
ODIC tokens from <a href=../../aai/check-in>EGI Check-in</a>,
<a href=https://fedcloudclient.fedcloud.eu/>fedcloudclient</a> to simplify interacting
with the <a href=../../compute/cloud-compute>EGI Cloud Compute service</a>,
<a href=https://www.terraform.io>terraform</a> and <a href=https://www.ansible.com/>Ansible</a> to
simplify deploying an infrastructure.
<a href=../../compute/cloud-compute/dynamic-dns>EGI Dynamic DNS</a> is also used to
assign a domain name to the virtual machine, which can then be used to get a
valid TLS certificate from <a href=https://letsencrypt.org/>Let&rsquo;s Encrypt</a>.</p><h2 id=step-1-signing-up-for-an-egi-check-in-account>Step 1: Signing up for an EGI Check-in account</h2><p>Create an EGI account with <a href=../../aai/check-in/signup>Check-in</a>.</p><h2 id=step-2-enrolling-to-a-virtual-organisation>Step 2: Enrolling to a Virtual Organisation</h2><p>Once your EGI account is ready you need to join a
<a href=https://confluence.egi.eu/display/EGIG/Virtual+organisation>Virtual Organisation (VO)</a>.
Here are the steps to
<a href=../../aai/check-in/joining-virtual-organisation/>join a VO</a>. Explore the list
of available VOs in the
<a href=https://operations-portal.egi.eu/vo/a/list>Operations Portal</a>. We have a
dedicated VO called
<a href=https://operations-portal.egi.eu/vo/view/voname/vo.access.egi.eu>vo.access.egi.eu</a>
for piloting purposes. If you are not sure about which VO to enrol to, please
request access to the <em>vo.access.egi.eu</em> VO with your EGI account by visiting
the <a href=https://aai.egi.eu/registry/co_petitions/start/coef:240>enrolment URL</a>.
Check <a href=https://appdb.egi.eu/store/vo/vo.access.egi.eu>AppDB</a> to see the list of
Virtual Appliances and Resource Providers participating in the
<em>vo.access.egi.eu</em> VO. AppDB is one of the service in the
<a href=../../getting-started/architecture/>EGI Architecture</a>.</p><blockquote><p>This tutorial will assume you are using <code>vo.access.egi.eu</code>, adapt as required
for your specific environment.</p></blockquote><h2 id=step-3-creating-a-vm>Step 3: Creating a VM</h2><p>Once your membership to a VO has been approved you are ready to create your
first Virtual Machine.</p><p>The OpenID Connect (OIDC) protocol is used to authenticate users and authorise
access to <a href=../../compute/cloud-compute/>Cloud Compute</a> resources that are
integrated with <a href=../../aai/check-in/>EGI Check-in</a>.</p><p>While it&rsquo;s not mandatory, a convenient way to manage the OIDC token is to use
<a href=#setting-up-oidc-agent>oidc-agent</a>.</p><h3 id=setting-up-oidc-agent>Setting up oidc-agent</h3><blockquote><p><a href=https://indigo-dc.gitbook.io/oidc-agent/>oidc-agent</a> is a set of tools to
manage OpenID Connect tokens and make them easily usable from the command
line.</p></blockquote><p>Install <code>oidc-agent</code> according to
<a href=https://indigo-dc.gitbook.io/oidc-agent/installation>official documentation</a>,
once <code>oidc-agent</code> is installed it can be used to retrieve an OIDC access token
from EGI Check-in.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Generating configuration for EGI Check-in</span>
</span></span><span style=display:flex><span>$ oidc-gen --pub --issuer https://aai.egi.eu/auth/realms/egi <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>            --scope <span style=color:#4e9a06>&#34;email \
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>             eduperson_entitlement \
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>             eduperson_scoped_affiliation \
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>             eduperson_unique_id&#34;</span> egi
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Listing existing configuration</span>
</span></span><span style=display:flex><span>$ oidc-add -l
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Requesting an OIDC access token</span>
</span></span><span style=display:flex><span>$ oidc-token egi
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Exporting a variable with a Check-in OIDC access token to be used with OpenStack</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># XXX access tokens are short lived, relaunch command to obtain a new token</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># This is *not* required for following this tutorial, it&#39;s an example</span>
</span></span><span style=display:flex><span>$ <span style=color:#204a87>export</span> <span style=color:#000>OS_ACCESS_TOKEN</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>oidc-token egi<span style=color:#204a87;font-weight:700>)</span>
</span></span></code></pre></div><p>It&rsquo;s possible to automatically start <code>oidc-agent</code> in your shell initialisation,
example that can be added to <code>~/.bash_profile</code> or <code>~/.zshrc</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#204a87;font-weight:700>if</span> <span style=color:#204a87>command</span> -v oidc-agent-service <span style=color:#000;font-weight:700>&amp;</span>&gt; /dev/null
</span></span><span style=display:flex><span>  <span style=color:#204a87>eval</span> <span style=color:#204a87;font-weight:700>$(</span>oidc-agent-service use<span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic># for fedcloudclient, selecting egi configuration generated with oidc-gen</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87>export</span> <span style=color:#000>OIDC_AGENT_ACCOUNT</span><span style=color:#ce5c00;font-weight:700>=</span>egi
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>fi</span>
</span></span></code></pre></div><p>When using <code>oidc-agent-service</code>,
<a href=#installing-fedcloudclient-and-ansible>fedcloudclient</a> will be able to
automatically request a new access token from <code>oidc-agent</code>.</p><p>See <a href=https://indigo-dc.gitbook.io/oidc-agent/>full documentation</a>.</p><h3 id=installing-fedcloudclient-and-ansible>Installing fedcloudclient and ansible</h3><p><a href=https://fedcloudclient.fedcloud.eu/><code>fedcloudclient</code></a> is an high-level Python
package for a command-line client designed for interaction with the OpenStack
services in the EGI infrastructure. The client can access various EGI services
and can perform many tasks for users including managing access tokens, listing
services, and mainly execute commands on OpenStack sites in EGI infrastructure.</p><p><code>fedcloudclient</code> can leverage <a href=#setting-up-oidc-agent><code>oidc-agent</code></a> if it&rsquo;s
installed and properly configured.</p><p><code>fedcloudclient</code> and
<a href=https://docs.openstack.org/python-openstackclient/latest/><code>openstackclient</code></a>,
the official OpenStack python client, will be used to interact with the EGI
Cloud Compute service.</p><p>Required python dependencies are documented in a <code>requirements.txt</code> file
(Ansible will be used at a later stage, but is installed at the same time):</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-requirements.txt data-lang=requirements.txt><span style=display:flex><span>openstackclient
</span></span><span style=display:flex><span>fedcloudclient
</span></span><span style=display:flex><span>ansible
</span></span></code></pre></div><p>For keeping the main system tidy and isolating the environment, the python
packages will be installed in a dedicated
<a href=https://docs.python.org/3/tutorial/venv.html>python virtualenv</a>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Creating an arbitrary directory where to store python virtual environments</span>
</span></span><span style=display:flex><span>$ mkdir -p ~/.virtualenvs
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Creating a python 3 virtual environment</span>
</span></span><span style=display:flex><span>$ python3 -m venv ~/.virtualenvs/fedcloud
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Activating the virtual environment</span>
</span></span><span style=display:flex><span>$ <span style=color:#204a87>source</span> ~/.virtualenvs/fedcloud
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Installing required python packages in the virtual environment</span>
</span></span><span style=display:flex><span>$ pip install -r requirements.txt
</span></span></code></pre></div><h3 id=identifying-a-suitable-cloud-site>Identifying a suitable cloud site</h3><p>It&rsquo;s possible to deploy an OpenStack Virtual Machine (VM) on any of the sites
supporting the Virtual Organisations (VO) you are a member of.</p><p>Once <a href=#installing-fedcloudclient-and-ansible>fedcloudclient</a> is installed it&rsquo;s
possible to get information about the OIDC token accessed via
<a href=#setting-up-oidc-agent>oidc-agent</a>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Listing the VO membership related to the OIDC access token</span>
</span></span><span style=display:flex><span>$ fedcloud token list-vos
</span></span></code></pre></div><p>In order to look for sites supporting a particular VO, you can use the
<a href=https://appdb.egi.eu/browse/vos/cloud>EGI Application Database</a>.</p><p>You can retrieve information from the AppDB about the sites supporting the
<a href=https://appdb.egi.eu/store/vo/vo.access.egi.eu>vo.access.egi.eu VO</a>.</p><blockquote><p>In the following example, the <code>IN2P3-IRES</code> site supporting the
<code>vo.access.egi.eu</code> VO will be used, see
<a href=#step-2-enrolling-to-a-virtual-organisation>Step 2: Enrolling to a Virtual Organisation</a>
to request access.</p></blockquote><h3 id=deploying-the-virtual-machine-with-terraform>Deploying the Virtual Machine with terraform</h3><p>Instead of creating the server manually, it is possible to use
<a href=../../compute/cloud-compute/openstack/#terraform>terraform with EGI Cloud Compute</a>.</p><p>The
<a href=https://registry.terraform.io/providers/terraform-provider-openstack/openstack/latest/docs>Terraform OpenStack provider</a>
provides official documentation.</p><p>Terraform provides
<a href=https://www.terraform.io/downloads>installation instructions</a> for all usual
platforms.</p><p>Once terraform is installed locally, we will create a deployment as documented
in the following sections.</p><h4 id=setting-up-the-environment>Setting up the environment</h4><p>The <code>OS_*</code> variables that will be used by terraform can be generated using
<code>fedcloudclient</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Activating the virtual environment</span>
</span></span><span style=display:flex><span>$ <span style=color:#204a87>source</span> ~/.virtualenvs/fedcloudclient/bin/activate
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Exporting variable for VO and SITE to avoid having to repeat them</span>
</span></span><span style=display:flex><span>$ <span style=color:#204a87>export</span> <span style=color:#000>EGI_VO</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;vo.access.egi.eu&#39;</span>
</span></span><span style=display:flex><span>$ <span style=color:#204a87>export</span> <span style=color:#000>EGI_SITE</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;IN2P3-IRES&#39;</span>
</span></span><span style=display:flex><span><span style=color:#204a87>eval</span> <span style=color:#204a87;font-weight:700>$(</span>fedcloud site env<span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Obtaining an OS_TOKEN for terraform</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># XXX this breaks using openstackclient: use fedcloudclient</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># or unset OS_TOKEN before using openstackclient</span>
</span></span><span style=display:flex><span>$ <span style=color:#204a87>export</span> <span style=color:#000>OS_TOKEN</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>fedcloud openstack token issue --site <span style=color:#4e9a06>&#34;</span><span style=color:#000>$EGI_SITE</span><span style=color:#4e9a06>&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --vo <span style=color:#4e9a06>&#34;</span><span style=color:#000>$EGI_VO</span><span style=color:#4e9a06>&#34;</span> -j <span style=color:#000;font-weight:700>|</span> jq -r <span style=color:#4e9a06>&#39;.[0].Result.id&#39;</span><span style=color:#204a87;font-weight:700>)</span>
</span></span></code></pre></div><h4 id=describing-the-terraform-variables>Describing the terraform variables</h4><p>The main terraform configuration file,
<a href=#creating-the-main-terraform-deployment-file>main.tf</a> is using variables that
have to be described in a <code>vars.tf</code> file:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-terraform data-lang=terraform><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Terraform variables definition
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Values to be provided in a *.tfvars file passed on the command line
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>variable</span> <span style=color:#4e9a06>&#34;internal_net_id&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>type</span>        = <span style=color:#000>string</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>description</span> = <span style=color:#4e9a06>&#34;The id of the internal network&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>variable</span> <span style=color:#4e9a06>&#34;public_ip_pool&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>type</span>        = <span style=color:#000>string</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>description</span> = <span style=color:#4e9a06>&#34;The name of the public IP address pool&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>variable</span> <span style=color:#4e9a06>&#34;image_id&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>type</span>        = <span style=color:#000>string</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>description</span> = <span style=color:#4e9a06>&#34;VM image id&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>variable</span> <span style=color:#4e9a06>&#34;flavor_id&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>type</span>        = <span style=color:#000>string</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>description</span> = <span style=color:#4e9a06>&#34;VM flavor id&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>variable</span> <span style=color:#4e9a06>&#34;security_groups&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>type</span>        =<span style=color:#204a87> list</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>string</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>description</span> = <span style=color:#4e9a06>&#34;List of security groups&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>The SITE and VO specific values for those variables will be
<a href=#identifying-the-cloud-resources>identified</a> and documented in a
<a href=#documenting-the-cloud-resources-for-the-selected-site><code>$EGI_SITE.tfvars</code> file</a>.</p><h4 id=identifying-the-cloud-resources>Identifying the cloud resources</h4><p>Once the <a href=#setting-up-the-environment>environment is properly configure</a>,
<code>fedcloudclient</code> is used to gather information and identify flavor, image,
network and security groups for the site you want to use.</p><blockquote><p><code>fedcloud openstack</code> currently requires an explicit <code>--site</code> parameter, this
will be addressed in a
<a href=https://github.com/tdviet/fedcloudclient/issues/150>future fedcloud release</a>.
In the meantime the <code>$EGI_SITE</code> environment variable can be reused using
<code>--site "$EGI_SITE"</code>.</p></blockquote><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Selecting an image</span>
</span></span><span style=display:flex><span>$ fedcloud <span style=color:#204a87;font-weight:700>select</span> image --image-specs <span style=color:#4e9a06>&#34;Name =~ &#39;EGI.*22&#39;&#34;</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Selecting a flavor</span>
</span></span><span style=display:flex><span>$ fedcloud <span style=color:#204a87;font-weight:700>select</span> flavor --flavor-specs <span style=color:#4e9a06>&#34;RAM&gt;=2096&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --flavor-specs <span style=color:#4e9a06>&#34;Disk &gt; 10&#34;</span> --vcpus <span style=color:#0000cf;font-weight:700>2</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Identifying available networks</span>
</span></span><span style=display:flex><span>$ fedcloud openstack --site <span style=color:#4e9a06>&#34;</span><span style=color:#000>$EGI_SITE</span><span style=color:#4e9a06>&#34;</span> network list
</span></span><span style=display:flex><span>$ fedcloud <span style=color:#204a87;font-weight:700>select</span> network --network-specs default
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Identifying security groups</span>
</span></span><span style=display:flex><span>$ fedcloud openstack --site <span style=color:#4e9a06>&#34;</span><span style=color:#000>$EGI_SITE</span><span style=color:#4e9a06>&#34;</span> security group list
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Listing rules of a specific security group</span>
</span></span><span style=display:flex><span>$ fedcloud openstack --site <span style=color:#4e9a06>&#34;</span><span style=color:#000>$EGI_SITE</span><span style=color:#4e9a06>&#34;</span> security group rule list default
</span></span></code></pre></div><h4 id=documenting-the-cloud-resources-for-the-selected-site>Documenting the cloud resources for the selected site</h4><p>The chosen flavor, image, network and security group should be documented in a
<code>$EGI_SITE.tfvars</code> file that will be passed as an argument to terraform
commands.</p><blockquote><p>The network configuration can be tricky, and is usually dependant on the site.
For <code>IN2P3-IRES</code>, one has to request a floating IP from the public network IP
pool <code>ext-net</code>, and assign this floating IP to the created instance. For
another site it may not be needed, in that case the
<a href=#creating-the-main-terraform-deployment-file>main.tf</a> will have to be
adjusted accordingly.</p></blockquote><p>See the example <code>IN2P3-IRES.tfvars</code> below, to be adjusted according to the
requirements and to the selected site and VO:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-terraform data-lang=terraform><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Internal network
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#c4a000>internal_net_id</span> = <span style=color:#4e9a06>&#34;7ae7b0ca-f122-4445-836a-5fb7af524dcb&#34;</span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Public IP pool for floating IPs
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#c4a000>public_ip_pool</span> = <span style=color:#4e9a06>&#34;ext-net&#34;</span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Flavor: m1.medium
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#c4a000>flavor_id</span> = <span style=color:#4e9a06>&#34;ab1fbd4c-324d-4155-bd0f-72f077f0ebce&#34;</span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Image for EGI CentOS 7
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># https://appdb.egi.eu/store/vappliance/egi.centos.7
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#c4a000>image_id</span> = <span style=color:#4e9a06>&#34;09093c70-f2bb-46b8-a87f-00e2cc0c8542&#34;</span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Image: EGI CentOS 8
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># https://appdb.egi.eu/store/vappliance/egi.centos.8
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># image_id = &#34;38ced5bf-bbfd-434b-ae41-3ab35d929aba&#34;
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Image: EGI Ubuntu 22.04
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># https://appdb.egi.eu/store/vappliance/egi.ubuntu.22.04
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># image_id = &#34;fc6c83a3-845f-4f29-b44d-2584f0ca4177&#34;
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Security groups
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#c4a000>security_groups</span>  = <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;default&#34;</span><span style=color:#000;font-weight:700>]</span>
</span></span></code></pre></div><h4 id=creating-the-main-terraform-deployment-file>Creating the main terraform deployment file</h4><p>To be more reusable, the <code>main.tf</code> configuration file is referencing variables
described in the <a href=#describing-the-terraform-variables>vars.tf</a> file created
previously, and will take the values from the
<a href=#documenting-the-cloud-resources-for-the-selected-site><code>$EGI_SITE.tfvars</code></a>
file passed as an argument to the terraform command.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-terraform data-lang=terraform><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Terraform versions and providers
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>terraform</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>required_version</span> = <span style=color:#4e9a06>&#34;&gt;= 0.14.0&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>required_providers</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>openstack</span> = <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#c4a000>source</span> = <span style=color:#4e9a06>&#34;terraform-provider-openstack/openstack&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#c4a000>version</span> = <span style=color:#4e9a06>&#34;~&gt; 1.35.0&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Allocate a floating IP from the public IP pool
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>resource</span> <span style=color:#4e9a06>&#34;openstack_networking_floatingip_v2&#34;</span> <span style=color:#4e9a06>&#34;egi_vm_floatip_1&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>pool</span> = <span style=color:#204a87>var</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>public_ip_pool</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Creating the VM
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>resource</span> <span style=color:#4e9a06>&#34;openstack_compute_instance_v2&#34;</span> <span style=color:#4e9a06>&#34;egi_vm&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>name</span> = <span style=color:#4e9a06>&#34;egi_test_vm&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>image_id</span> = <span style=color:#204a87>var</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>image_id</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>flavor_id</span> = <span style=color:#204a87>var</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>flavor_id</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>security_groups</span> = <span style=color:#204a87>var</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>security_groups</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>user_data</span> = <span style=color:#204a87>file</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;cloud-init.yaml&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>  <span style=color:#000>network</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#c4a000>uuid</span> = <span style=color:#204a87>var</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>internal_net_id</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Attach the floating public IP to the created instance
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>resource</span> <span style=color:#4e9a06>&#34;openstack_compute_floatingip_associate_v2&#34;</span> <span style=color:#4e9a06>&#34;egi_vm_fip_1&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>instance_id</span> = <span style=color:#4e9a06>&#34;</span><span style=color:#4e9a06>${</span><span style=color:#000>openstack_compute_instance_v2</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>egi_vm</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>id</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>floating_ip</span> = <span style=color:#4e9a06>&#34;</span><span style=color:#4e9a06>${</span><span style=color:#000>openstack_networking_floatingip_v2</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>egi_vm_floatip_1</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>address</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Create inventory file for Ansible
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>resource</span> <span style=color:#4e9a06>&#34;local_file&#34;</span> <span style=color:#4e9a06>&#34;hosts_cfg&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>content</span> = <span style=color:#204a87>templatefile</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;</span><span style=color:#4e9a06>${</span><span style=color:#000>path</span><span style=color:#000;font-weight:700>.</span><span style=color:#204a87>module</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>/hosts.cfg.tpl&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#c4a000>ui</span> = <span style=color:#4e9a06>&#34;</span><span style=color:#4e9a06>${</span><span style=color:#000>openstack_networking_floatingip_v2</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>egi_vm_floatip_1</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>address</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>filename</span> = <span style=color:#4e9a06>&#34;./inventory/hosts.cfg&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>The last resource is relying on
<a href=https://www.terraform.io/language/functions/templatefile>templatefile</a> to
populate the inventory file that will later be used by
<a href=#step-4-using-ansible>ansible</a>.</p><h4 id=initial-configuration-of-the-vm-using-cloud-init>Initial configuration of the VM using cloud-init</h4><blockquote><p><a href=https://cloudinit.readthedocs.io/>cloud-init</a> is the industry standard
multi-distribution method for cross-platform cloud instance initialization.</p></blockquote><p>The initial configuration of the VM is done using a <code>cloud-init.yaml</code> file.</p><p>The <code>curl</code> call from the
<a href=https://cloudinit.readthedocs.io/en/latest/topics/modules.html#runcmd>runcmd</a>
block in the <code>cloud-init.yaml</code> configuration below, will register the IP of the
virtual machine in the DNS zone managed using the
<a href=https://nsupdate.fedcloud.eu/>EGI Dynamic DNS service</a>, allowing to access the
virtual machine using a fully qualified hostname and allowing to retrieve a
<a href=https://letsencrypt.org/>Let&rsquo;s Encrypt certificate</a>.</p><blockquote><p>Please look at the
<a href=../../compute/cloud-compute/dynamic-dns/>EGI Dynamic DNS documentation</a> for
instructions on creating the configuration for a new host.</p></blockquote><p>The
<a href=https://cloudinit.readthedocs.io/en/latest/topics/modules.html#users-and-groups>users</a>
block in the <code>cloud-init.yaml</code> configuration below, will create a new user with
password-less <a href=https://www.sudo.ws/>sudo</a> access.</p><blockquote><p>While this <code>egi</code> user can only be accessed via the specified SSH key(s),
setting a user password and requesting password verification for using sudo
should be considered, as a compromise of this user account would mean a
compromise of the complete virtual machine.</p></blockquote><p>Replace <code>&lt;NSUPDATE_HOSTNAME></code>, <code>&lt;NSUPDATE_SECRET></code>, <code>&lt;SSH_AUTHORIZED_KEY></code> (the
content of your SSH public key) by the proper values.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#000>---</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic># cloud-config</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>runcmd</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#000>curl,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#4e9a06>&#34;https://&lt;NSUPDATE_HOSTNAME&gt;:&lt;NSUPDATE_SECRET&gt;@nsupdate.fedcloud.eu/nic/update&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>users</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>egi</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>gecos</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>EGI</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>primary_group</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>egi</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>groups</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>users</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>shell</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>/bin/bash</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>sudo</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ALL=(ALL) NOPASSWD:ALL</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>ssh_authorized_keys</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>&lt;SSH_AUTHORIZED_KEY&gt;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>packages</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000>vim</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>package_update</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>package_upgrade</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>package_reboot_if_required</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><h4 id=launching-the-terraform-deployment>Launching the terraform deployment</h4><p>Now that all the files have been created, it&rsquo;s possible to deploy the
infrastructure, currently only a single VM, but it can easily be extended to a
more complex setup, using terraform:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Initialising working directory, install dependencies</span>
</span></span><span style=display:flex><span>$ terraform init
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Reviewing plan of actions for creating the infrastructure</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Use relevant site-specific config file</span>
</span></span><span style=display:flex><span>$ terraform plan --var-file<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;</span><span style=color:#4e9a06>${</span><span style=color:#000>EGI_SITE</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>.tfvars&#34;</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Creating the infrastructure</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Manual approval can be skipped using -auto-approve</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># The SERVER_ID will be printed (openstack_compute_instance_v2.scoreboard)</span>
</span></span><span style=display:flex><span>$ terraform apply --var-file<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;</span><span style=color:#4e9a06>${</span><span style=color:#000>EGI_SITE</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>.tfvars&#34;</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Wait a few minutes for the setup to be finalised</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Connecting to the server using ssh</span>
</span></span><span style=display:flex><span>$ ssh egi@<span style=color:#000>$NSUPDATE_HOSTNAME</span>
</span></span></code></pre></div><blockquote><p>From here you can extend the
<a href=#initial-configuration-of-the-vm-using-cloud-init>cloud-init.yaml</a> and/or
use <a href=#step-4-using-ansible>Ansible</a> to configure the remote machine, as well
as doing manual work via SSH.</p></blockquote><h4 id=debugging-terraform>Debugging terraform</h4><p>The token used by Terraform for accessing OpenStack is short lived, it will have
to be renewed from time to time.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Creating a new token to access the OpenStack endpoint</span>
</span></span><span style=display:flex><span>$ <span style=color:#204a87>export</span> <span style=color:#000>OS_TOKEN</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>fedcloud openstack token issue --site <span style=color:#4e9a06>&#34;</span><span style=color:#000>$EGI_SITE</span><span style=color:#4e9a06>&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --vo <span style=color:#4e9a06>&#34;</span><span style=color:#000>$EGI_VO</span><span style=color:#4e9a06>&#34;</span> -j <span style=color:#000;font-weight:700>|</span> jq -r <span style=color:#4e9a06>&#39;.[0].Result.id&#39;</span><span style=color:#204a87;font-weight:700>)</span>
</span></span></code></pre></div><p>It is possible to print a verbose/debug output to get details on interactions
with the OpenStack endpoint.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Debugging</span>
</span></span><span style=display:flex><span>$ <span style=color:#000>OS_DEBUG</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>1</span> <span style=color:#000>TF_LOG</span><span style=color:#ce5c00;font-weight:700>=</span>DEBUG terraform apply --var-file<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;</span><span style=color:#4e9a06>${</span><span style=color:#000>EGI_SITE</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>.tfvars&#34;</span>
</span></span></code></pre></div><h4 id=destroying-the-resources-created-by-terraform>Destroying the resources created by terraform</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Destroying the created infrastructure</span>
</span></span><span style=display:flex><span>$ terraform destroy --var-file<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;</span><span style=color:#4e9a06>${</span><span style=color:#000>EGI_SITE</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>.tfvars&#34;</span>
</span></span></code></pre></div><h2 id=step-4-using-ansible>Step 4: Using Ansible</h2><p><a href=https://www.ansible.com/>Ansible</a> can be used to manage the configuration of
the crated virtual machine.</p><p>The <a href=#deploying-the-virtual-machine-with-terraform>terraform deployment</a>
generated an
<a href=https://docs.ansible.com/ansible/latest/user_guide/intro_inventory.html>Ansible inventory</a>,
<code>inventory/hosts.cfg</code>, that can directly be used by
<a href=https://www.ansible.com/>Ansible</a>.</p><p>Configure a basic Ansible environment in the <code>ansible.cfg</code> file:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#204a87;font-weight:700>[defaults]</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Use user created using cloud-init.yml</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>remote_user</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>egi</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Use inventory file generated by terraform</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>inventory</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>./inventory/hosts.cfg</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>[privilege_escalation]</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Escalate privileges using password-less sudo</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>become</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>yes</span>
</span></span></code></pre></div><p>Then you can verify that the Virtual Machine is accessible by Ansible:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Confirming ansible can reach the VM</span>
</span></span><span style=display:flex><span>$ ansible all -m ping
</span></span></code></pre></div><p>Once this works, you can
<a href=https://docs.ansible.com/ansible/latest/user_guide/index.html>create advanced playbooks</a>
to configure your deployed host(s).</p><p>Various Ansible roles are available in the
<a href=https://github.com/egi-qc/ansible-playbooks>egi-qc/ansible-playbooks repository</a>
and in the
<a href="https://github.com/EGI-Federation?q=ansible-role">EGI Federation GitHub organisation</a>.</p><blockquote><p>A
<a href=https://github.com/EGI-Federation/ansible-style-guide>style guide for writing Ansible roles</a>
is providing a skeleton that you can use fore creating new roles.</p></blockquote><h2 id=additional-resources>Additional resources</h2><p>Additional resources are available, and can help with addressing different use
cases, or be used as a source of inspiration:</p><ul><li><a href=https://github.com/egi-qc/deployment-howtos>egi-qc/deployment-howtos</a>:
Deployment recipes extracted from Jenkins builds for the
<a href=https://go.egi.eu/umd>UMD</a> and <a href=https://go.egi.eu/cmd>CMD</a> products</li><li><a href=https://github.com/EGI-ILM/fedcloud-terraform>EGI-ILM/fedcloud-terraform</a>:
providing an advanced helper script allowing to interact with EGI Cloud
Compute.</li><li><a href=https://github.com/EGI-ILM/automated-containers>EGI-ILM/automated-containers</a>:
providing documentation for automated on-demand execution of Docker containers</li></ul><h2 id=asking-for-help>Asking for help</h2><p>If you find issues please do not hesitate to <a href=../../../support/>contact us</a>.</p><div class=section-index></div><div class="text-muted mt-5 pt-3 border-top">Last modified
May 19, 2023
by
<a href=mailto:sebastian-luna-valero@users.noreply.github.com>Sebastian Luna-Valero</a>
: <a href=https://github.com/EGI-Federation/documentation/commit/8f96133d35cd2095dfff43118edbe8367680cca3>Update tutorials (#598)</a></div></div></main></div></div><footer class="bg-dark py-3 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item footer-usr-link mx-2 h3" data-toggle=tooltip data-placement=top title="Community discussions" aria-label="Community discussions"><a class=text-white target=_blank rel=noopener href=https://community.egi.eu aria-label="Community discussions"><i class="fa fa-comments"></i></a></li><li class="list-inline-item footer-usr-link mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/EGI_eInfra aria-label=Twitter><i class="fab fa-twitter"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item github mx-0"><a class=github-button href=https://github.com/EGI-Federation/documentation data-icon=octicon-star data-show-count=true aria-label="Star EGI documentation on GitHub">Stars</a></li><li class="list-inline-item github mx-0"><a class=github-button href=https://github.com/EGI-Federation/documentation/fork data-icon=octicon-repo-forked data-show-count=true aria-label="Fork EGI documentation on GitHub">Forks</a></li><li class="list-inline-item footer-dev-link mx-2 h3" style=vertical-align:top data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/EGI-Federation aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 EGI Foundation. All rights reserved.</small><br><small class=ml-1><a href=https://www.egi.eu/privacy-policy/ target=_blank rel=noopener>Privacy Policy</a></small><br><small><a href=../../../../about/>About EGI Documentation</a></small></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/mermaid@8.9.2/dist/mermaid.min.js integrity=sha384-uQikAXnCAqsMb3ygtdqBYvcwvHUkzGIpjdGyy9owhURXHUxLC5LgTcSxJQH/RzjK crossorigin=anonymous></script>
<script src=../../../../js/deflate.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.2/dist/katex.min.css integrity=sha384-Cqd8ihRLum0CCg8rz0hYKPoLZ3uw+gES2rXQXycqnL5pgVQIflxAUDS7ZSjITLb5 crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.2/dist/katex.min.js integrity=sha384-1Or6BdeNQb0ezrmtGeqQHFpppNd7a/gw29xeiSikBbsb44xu3uAo8c7FwbF5jhbd crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.2/dist/contrib/mhchem.min.js integrity=sha384-LIgAiYlGSAdpNC9+YDjDPF6JeS/RRIumtNo0CmyQERZ/+g0h9MbuYQwf/5pQ4Y4M crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.2/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous onload=renderMathInElement(document.body,null)></script>
<script src=../../../../js/main.min.d0b5594a58881d76643839c90ace353d66139058f0ee49bd0e7077fae617cb89.js integrity="sha256-0LVZSliIHXZkODnJCs41PWYTkFjw7km9DnB3+uYXy4k=" crossorigin=anonymous></script>
<script src=../../../../js/prism.js></script></body></html>