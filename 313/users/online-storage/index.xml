<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>EGI Docs – Online Storage</title><link>/users/online-storage/</link><description>Recent content in Online Storage on EGI Docs</description><generator>Hugo -- gohugo.io</generator><atom:link href="/users/online-storage/index.xml" rel="self" type="application/rss+xml"/><item><title>Users: Block Storage</title><link>/users/online-storage/block-storage/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/users/online-storage/block-storage/</guid><description>
&lt;!--
// jscpd:ignore-start
-->
&lt;h2 id="what-is-it">What is it?&lt;/h2>
&lt;p>Block storage provides &lt;strong>block-level storage volumes&lt;/strong> for use within virtual
machines (VMs). Block storage volumes are raw, unformatted
&lt;a href="https://en.wikipedia.org/wiki/Device_file#BLOCKDEV">block devices&lt;/a>, which can
be mounted as devices in VMs.&lt;/p>
&lt;p>Block storage volumes that are attached to a VM are exposed as storage volumes
that &lt;strong>persist independently from the life of the VM&lt;/strong>, and need to be
explicitly destroyed when data is not needed anymore. Users can create a file
system on top of these volumes, or use them in any way you would use a block
device (such as a hard drive).&lt;/p>
&lt;p>The content of block storage volumes can be accessed only from within the VM
they are mounted to, and they can be mounted to a single VM at any given time.&lt;/p>
&lt;p>The main features of block storage:&lt;/p>
&lt;ul>
&lt;li>Block storage is recommended for data that must be quickly accessible and
requires long-term persistence.&lt;/li>
&lt;li>Block storage volumes are well suited to both database-style applications
that rely on random reads and writes, and to throughput-intensive
applications that perform long, continuous reads and writes.&lt;/li>
&lt;li>Users can create point-in-time snapshots of block storage volumes, which
protect data for long-term durability, and they can be used as the starting
point for new block storage volumes.&lt;/li>
&lt;/ul>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Block storage volumes can can only be
mounted to VMs running at the same provider where the block storage is located.
&lt;/div>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Block storage usage is accounted for
the entire block storage device, regardless how much of it is actually used.
&lt;/div>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Important&lt;/h4>
There is a limit on the number
of block storage devices you can attach on a VM and there is a limit to the
maximum size of such virtual disks. These values will depend on the particular
provider and your SLA.
&lt;/div>
&lt;h2 id="manage-volumes">Manage volumes&lt;/h2>
&lt;p>The block storage in the EGI Cloud is offered via
&lt;a href="https://openstack.org/">OpenStack&lt;/a> deployments that implement the
&lt;a href="https://docs.openstack.org/cinder/latest/">Cinder&lt;/a> service.&lt;/p>
&lt;p>Users can manage block storage using the
&lt;a href="https://docs.openstack.org/horizon/latest/user/">OpenStack Horizon dashboard&lt;/a>
of a provider, from a &lt;a href="#manage-from-the-command-line">command line interface&lt;/a>
(CLI), or via the
&lt;a href="https://docs.openstack.org/api-ref/block-storage/">OpenStack Block Storage API&lt;/a>.&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Please refer to
&lt;a href="https://wiki.egi.eu/wiki/HOWTO11_How_to_use_the_rOCCI_Client#How_to_create_block_storage.3F">OCCI How-To&lt;/a>
for details about using the legacy OCCI interface to manage block storage.
&lt;/div>
&lt;h2 id="manage-from-the-command-line">Manage from the command line&lt;/h2>
&lt;p>Multiple command line interfaces (CLIs) are available to manage block
storage:&lt;/p>
&lt;ul>
&lt;li>The &lt;a href="https://docs.openstack.org/python-openstackclient/latest">OpenStack CLI&lt;/a>&lt;/li>
&lt;li>The &lt;a href="../../cloud-compute/openstack">FedCloud Client&lt;/a> is a high-level CLI for
interaction with the EGI Federated Cloud (&lt;strong>recommended&lt;/strong>)&lt;/li>
&lt;li>The &lt;a href="https://docs.openstack.org/python-cinderclient/latest/user/shell.html">Cinder CLI&lt;/a>
has some advanced features and administrative commands that are not available through
the OpenStack CLI&lt;/li>
&lt;/ul>
&lt;p>The main FedCloud commands for managing volumes are detailed below.&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
For more information see the
documentation about
&lt;a href="https://docs.openstack.org/cinder/latest/cli/cli-manage-volumes.html">volume management&lt;/a>.
&lt;/div>
&lt;h3 id="list-volumes">List volumes&lt;/h3>
&lt;p>For example, to
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/volume.html#volume-list">list the volumes&lt;/a>
in the site IN2P3-IRES via the Pilot VO (vo.access.egi.eu), use the following
FedCloud command:&lt;/p>
&lt;ul class="nav nav-tabs" id="tabs-5" role="tablist">
&lt;li class="nav-item">
&lt;a class="nav-link active"
id="tabs-5-0-tab" data-toggle="tab" href="#tabs-5-0" role="tab"
aria-controls="tabs-5-0" aria-selected="true">
Linux / Mac
&lt;/a>
&lt;/li>
&lt;li class="nav-item">
&lt;a class="nav-link"
id="tabs-5-1-tab" data-toggle="tab" href="#tabs-5-1" role="tab"
aria-controls="tabs-5-1" aria-selected="false">
Windows
&lt;/a>
&lt;/li>
&lt;li class="nav-item">
&lt;a class="nav-link"
id="tabs-5-2-tab" data-toggle="tab" href="#tabs-5-2" role="tab"
aria-controls="tabs-5-2" aria-selected="false">
PowerShell
&lt;/a>
&lt;/li>
&lt;/ul>
&lt;div class="tabx-content" id="tabs-5-content">
&lt;div class="tab-pane fade show active"
id="tabs-5-0" role="tabpanel" aria-labelled-by="tabs-5-0-tab">
&lt;p>To avoid passing the site, VO, etc. each time, you can use
&lt;a href="https://fedcloudclient.fedcloud.eu/usage.html#environment-variables">FedCloud CLI environment variables&lt;/a>
to set them once and reuse them with each command invocation.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ &lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">EGI_SITE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>IN2P3-IRES
$ &lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">EGI_VO&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>vo.access.egi.eu
$ fedcloud openstack volume list
Site: IN2P3-IRES, VO: vo.access.egi.eu, command: volume list
+---------------------------+--------+-----------+------+--------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> ID &lt;span style="color:#000;font-weight:bold">|&lt;/span> Name &lt;span style="color:#000;font-weight:bold">|&lt;/span> Status &lt;span style="color:#000;font-weight:bold">|&lt;/span> Size &lt;span style="color:#000;font-weight:bold">|&lt;/span> Attached to &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+---------------------------+--------+-----------+------+--------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> aa711296-5cff-46ac-bbe... &lt;span style="color:#000;font-weight:bold">|&lt;/span> Matlab &lt;span style="color:#000;font-weight:bold">|&lt;/span> in-use &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">50&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> Attached to Moodle on /dev/vdb &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> b0abc762-a503-129d-3c1... &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> available &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">30&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+---------------------------+--------+-----------+------+--------------------------------+
&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;div class="tab-pane fade"
id="tabs-5-1" role="tabpanel" aria-labelled-by="tabs-5-1-tab">
&lt;p>To avoid passing the site, VO, etc. each time, you can use
&lt;a href="https://fedcloudclient.fedcloud.eu/usage.html#environment-variables">FedCloud CLI environment variables&lt;/a>
to set them once and reuse them with each command invocation.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">&amp;gt; &lt;span style="color:#204a87">set&lt;/span> &lt;span style="color:#000">EGI_SITE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>IN2P3-IRES
&amp;gt; &lt;span style="color:#204a87">set&lt;/span> &lt;span style="color:#000">EGI_VO&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>vo.access.egi.eu
&amp;gt; fedcloud openstack volume list
Site: IN2P3-IRES, VO: vo.access.egi.eu, command: volume list
+---------------------------+--------+-----------+------+--------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> ID &lt;span style="color:#000;font-weight:bold">|&lt;/span> Name &lt;span style="color:#000;font-weight:bold">|&lt;/span> Status &lt;span style="color:#000;font-weight:bold">|&lt;/span> Size &lt;span style="color:#000;font-weight:bold">|&lt;/span> Attached to &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+---------------------------+--------+-----------+------+--------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> aa711296-5cff-46ac-bbe... &lt;span style="color:#000;font-weight:bold">|&lt;/span> Matlab &lt;span style="color:#000;font-weight:bold">|&lt;/span> in-use &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">50&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> Attached to Moodle on /dev/vdb &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> b0abc762-a503-129d-3c1... &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> available &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">30&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+---------------------------+--------+-----------+------+--------------------------------+
&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;div class="tab-pane fade"
id="tabs-5-2" role="tabpanel" aria-labelled-by="tabs-5-2-tab">
&lt;p>To avoid passing the site, VO, etc. each time, you can use
&lt;a href="https://fedcloudclient.fedcloud.eu/usage.html#environment-variables">FedCloud CLI environment variables&lt;/a>
to set them once and reuse them with each command invocation.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-powershell" data-lang="powershell">&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span> &lt;span style="color:#000">$Env:EGI_SITE&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;IN2P3-IRES&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span> &lt;span style="color:#000">$Env:EGI_VO&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;vo.access.egi.eu&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span> &lt;span style="color:#000">fedcloud&lt;/span> &lt;span style="color:#000">openstack&lt;/span> &lt;span style="color:#000">volume&lt;/span> &lt;span style="color:#000">list&lt;/span>
&lt;span style="color:#000">Site&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#204a87">IN2P3-IRES&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">VO&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000">vo&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">access&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">egi&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">eu&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">command&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000">volume&lt;/span> &lt;span style="color:#000">list&lt;/span>
&lt;span style="color:#000;font-weight:bold">+---------------------------+--------+-----------+------+--------------------------------+&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000">ID&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000">Name&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000">Status&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000">Size&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000">Attached&lt;/span> &lt;span style="color:#000">to&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">+---------------------------+--------+-----------+------+--------------------------------+&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000">aa711296&lt;/span>&lt;span style="color:#000;font-weight:bold">-&lt;/span>&lt;span style="color:#000">5cff&lt;/span>&lt;span style="color:#000;font-weight:bold">-&lt;/span>&lt;span style="color:#000">46ac-bbe&lt;/span>&lt;span style="color:#000;font-weight:bold">...&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000">Matlab&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">in-use&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000">50&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000">Attached&lt;/span> &lt;span style="color:#000">to&lt;/span> &lt;span style="color:#000">Moodle&lt;/span> &lt;span style="color:#000">on&lt;/span> &lt;span style="color:#000;font-weight:bold">/&lt;/span>&lt;span style="color:#000">dev&lt;/span>&lt;span style="color:#000;font-weight:bold">/&lt;/span>&lt;span style="color:#000">vdb&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">b0abc762-a503&lt;/span>&lt;span style="color:#000;font-weight:bold">-&lt;/span>&lt;span style="color:#000">129d&lt;/span>&lt;span style="color:#000;font-weight:bold">-&lt;/span>&lt;span style="color:#000">3c1&lt;/span>&lt;span style="color:#000;font-weight:bold">...&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000">available&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000">30&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">+---------------------------+--------+-----------+------+--------------------------------+&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;/div>
&lt;h3 id="create-volume">Create volume&lt;/h3>
&lt;p>To
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/volume.html#volume-create">create a new volume&lt;/a>
use the FedCloud command below:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack volume create --size &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> my-volume
Site: IN2P3-IRES, VO: vo.access.egi.eu, command: volume create --size &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> my-volume
+---------------------+------------------------------------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> Field &lt;span style="color:#000;font-weight:bold">|&lt;/span> Value &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+---------------------+------------------------------------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> attachments &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[]&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> availability_zone &lt;span style="color:#000;font-weight:bold">|&lt;/span> nova &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> bootable &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">false&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> consistencygroup_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> created_at &lt;span style="color:#000;font-weight:bold">|&lt;/span> 2021-08-05T13:10:42.000000 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> description &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> encrypted &lt;span style="color:#000;font-weight:bold">|&lt;/span> False &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> id &lt;span style="color:#000;font-weight:bold">|&lt;/span> a711296-5cff-46ac-bbe3-58e00712ee3e &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> multiattach &lt;span style="color:#000;font-weight:bold">|&lt;/span> False &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> name &lt;span style="color:#000;font-weight:bold">|&lt;/span> my-volume &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> properties &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> replication_status &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> size &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> snapshot_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> source_volid &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> status &lt;span style="color:#000;font-weight:bold">|&lt;/span> creating &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">type&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> ceph &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> updated_at &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> user_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> 1a3ef4b64714f86ac71f1c9512345678c157a94ae1b37f167b6a663baa3b915b &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+---------------------+------------------------------------------------------------------+
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The status of the new volume will probably be returned as &lt;code>creating&lt;/code>. To check
if the volume finished creating, look at the
&lt;a href="#see-volume-details">details of the volume&lt;/a>, or list only the newly created
volume (filter by volume name or ID):&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack volume list --name my-volume
Site: IN2P3-IRES, VO: vo.access.egi.eu, command: volume list --name my-volume
+--------------------------------------+-----------+-----------+------+-------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> ID &lt;span style="color:#000;font-weight:bold">|&lt;/span> Name &lt;span style="color:#000;font-weight:bold">|&lt;/span> Status &lt;span style="color:#000;font-weight:bold">|&lt;/span> Size &lt;span style="color:#000;font-weight:bold">|&lt;/span> Attached to &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+--------------------------------------+-----------+-----------+------+-------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> aa711296-5cff-46ac-bbe3-58e00712ee3e &lt;span style="color:#000;font-weight:bold">|&lt;/span> my-volume &lt;span style="color:#000;font-weight:bold">|&lt;/span> available &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+--------------------------------------+-----------+-----------+------+-------------+
&lt;/code>&lt;/pre>&lt;/div>&lt;p>When the status of the volume is &lt;code>available&lt;/code> the volume is ready to be
&lt;a href="#attach-volume-to-vm">attached to a VM&lt;/a>.&lt;/p>
&lt;h3 id="see-volume-details">See volume details&lt;/h3>
&lt;p>To
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/volume.html#volume-show">view details of a volume&lt;/a>
use the FedCloud command below:&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Tip&lt;/h4>
The volume can be specified either by
its ID or by its name (if it has one).
&lt;/div>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack volume show Matlab
Site: IN2P3-IRES, VO: vo.access.egi.eu, command: volume show Matlab
+------------------------------+------------------------------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> Field &lt;span style="color:#000;font-weight:bold">|&lt;/span> Value &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+------------------------------+------------------------------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> attachments &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[{&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;server_id&amp;#39;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#39;a4ab00a1-d458-41a9-a091-ee707bc9357e&amp;#39;&lt;/span>, &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;attachment_id&amp;#39;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#39;291111d3-f43c-494c-b64c-5c0abcda3d37&amp;#39;&lt;/span>, &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;attached_at&amp;#39;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#39;2021-08-05T08:50:19.000000&amp;#39;&lt;/span>, &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;host_name&amp;#39;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#39;sbgcsrv17.in2p3.fr&amp;#39;&lt;/span>, &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;volume_id&amp;#39;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#39;9a4000fb-0bcc-47e8-96fb-85a222295402&amp;#39;&lt;/span>, &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;device&amp;#39;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#39;/dev/vdb&amp;#39;&lt;/span>, &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;id&amp;#39;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#39;9a4000fb-0bcc-47e8-96fb-85a222295402&amp;#39;&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">}]&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> availability_zone &lt;span style="color:#000;font-weight:bold">|&lt;/span> nova &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> bootable &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">false&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> consistencygroup_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> created_at &lt;span style="color:#000;font-weight:bold">|&lt;/span> 2021-08-05T08:48:41.000000 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> description &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> encrypted &lt;span style="color:#000;font-weight:bold">|&lt;/span> False &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> id &lt;span style="color:#000;font-weight:bold">|&lt;/span> 9a4000fb-0bcc-47e8-96fb-85a222295402 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> multiattach &lt;span style="color:#000;font-weight:bold">|&lt;/span> False &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> name &lt;span style="color:#000;font-weight:bold">|&lt;/span> Matlab &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> os-vol-tenant-attr:tenant_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> 7a910xxxxae74ed9yyyy7497zzzz9499 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> properties &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> replication_status &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> size &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">50&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> snapshot_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> source_volid &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> status &lt;span style="color:#000;font-weight:bold">|&lt;/span> in-use &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">type&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> ceph &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> updated_at &lt;span style="color:#000;font-weight:bold">|&lt;/span> 2021-08-05T08:50:20.000000 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> user_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> babzz8c3b4cxxxx6286dacyyyy01e5a3 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+------------------------------+------------------------------------------------------------+
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="attach-volume-to-vm">Attach volume to VM&lt;/h3>
&lt;p>Mapping block devices to VMs is described in detail in the
&lt;a href="https://docs.openstack.org/nova/latest/user/block-device-mapping.html">OpenStack documentation&lt;/a>.&lt;/p>
&lt;p>To
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/server.html#server-add-volume">attach a volume to a VM&lt;/a>
use the FedCloud command below:&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
To be able to attach a volume to a VM,
the volume must not be attached to any VM (volume status must be &lt;code>available&lt;/code>).
&lt;/div>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Caution&lt;/h4>
The optional &lt;code>--device&lt;/code>
argument to specify the device name in the VM should not be used. It does
not work properly, and will be removed in the near future.
&lt;/div>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack server add volume my-server my-volume
Site: IN2P3-IRES, VO: vo.access.egi.eu, command: server add volume my-server my-volume
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can check that the volume got attached to the VM (and with what device name)
by either looking at the &lt;a href="#see-volume-details">details of the volume&lt;/a>, the
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/server.html#server-show">details of the VM&lt;/a>,
or by listing only the volume in question (filter by volume name or ID):&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack volume list --name my-volume
Site: IN2P3-IRES, VO: vo.access.egi.eu, command: volume list --name my-volume
+--------------------------------------+-----------+-----------+------+-----------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> ID &lt;span style="color:#000;font-weight:bold">|&lt;/span> Name &lt;span style="color:#000;font-weight:bold">|&lt;/span> Status &lt;span style="color:#000;font-weight:bold">|&lt;/span> Size &lt;span style="color:#000;font-weight:bold">|&lt;/span> Attached to &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+--------------------------------------+-----------+-----------+------+-----------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> aa711296-5cff-46ac-bbe3-58e00712ee3e &lt;span style="color:#000;font-weight:bold">|&lt;/span> my-volume &lt;span style="color:#000;font-weight:bold">|&lt;/span> in-use &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> my-server on /dev/vdc &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+--------------------------------------+-----------+-----------+------+-----------------------+
&lt;/code>&lt;/pre>&lt;/div>&lt;p>When the volume status is &lt;code>in-use&lt;/code> the volume is attached to a VM, and it can
be &lt;a href="#access-from-your-vms">used from the VM&lt;/a>.&lt;/p>
&lt;h3 id="detach-volume-from-vm">Detach volume from VM&lt;/h3>
&lt;p>To
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/server.html#server-remove-volume">detach a volume from a VM&lt;/a>
use the FedCloud command below:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack server remove volume my-server my-volume
Site: IN2P3-IRES, VO: vo.access.egi.eu, command: server remove volume my-server my-volume
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can check that the volume got detached by either looking at the
&lt;a href="#see-volume-details">details of the volume&lt;/a>, the
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/server.html#server-show">details of the VM&lt;/a>,
or by listing only the volume in question (filter by volume name or ID):&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack volume list --name my-volume
Site: IN2P3-IRES, VO: vo.access.egi.eu, command: volume list --name my-volume
+--------------------------------------+-----------+-----------+------+-------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> ID &lt;span style="color:#000;font-weight:bold">|&lt;/span> Name &lt;span style="color:#000;font-weight:bold">|&lt;/span> Status &lt;span style="color:#000;font-weight:bold">|&lt;/span> Size &lt;span style="color:#000;font-weight:bold">|&lt;/span> Attached to &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+--------------------------------------+-----------+-----------+------+-------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> aa711296-5cff-46ac-bbe3-58e00712ee3e &lt;span style="color:#000;font-weight:bold">|&lt;/span> my-volume &lt;span style="color:#000;font-weight:bold">|&lt;/span> available &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+--------------------------------------+-----------+-----------+------+-------------+
&lt;/code>&lt;/pre>&lt;/div>&lt;p>When the volume status is &lt;code>available&lt;/code> the volume is not attached to any VM.&lt;/p>
&lt;h3 id="resize-volume">Resize volume&lt;/h3>
&lt;p>To
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/volume.html#volume-set">resize a volume&lt;/a>
set its &lt;code>size&lt;/code> property to the desired size. For example, if there
is a volume named &lt;code>my-volume&lt;/code> with a size of 10GB, it can be resized using the
FedCloud command below:&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Tip&lt;/h4>
Other volume properties can be altered
in the same way.
&lt;/div>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
To be able to resize a volume, the
volume must not be attached to any VM (volume status must be &lt;code>available&lt;/code>),
unless the volume driver supports
&lt;a href="https://docs.openstack.org/cinder/latest/cli/cli-manage-volumes.html#extend-attached-volume">in-use extend&lt;/a>.
&lt;/div>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack volume &lt;span style="color:#204a87">set&lt;/span> --size &lt;span style="color:#0000cf;font-weight:bold">20&lt;/span> my-volume
Site: IN2P3-IRES, VO: vo.access.egi.eu, command: volume &lt;span style="color:#204a87">set&lt;/span> --size &lt;span style="color:#0000cf;font-weight:bold">20&lt;/span> my-volume
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can check that the volume got resized by either looking at the
&lt;a href="#see-volume-details">details of the volume&lt;/a>, or by listing only the volume in
question (filter by volume name or ID):&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack volume list --name my-volume
Site: IN2P3-IRES, VO: vo.access.egi.eu, command: volume list --name my-volume
+--------------------------------------+-----------+-----------+------+-------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> ID &lt;span style="color:#000;font-weight:bold">|&lt;/span> Name &lt;span style="color:#000;font-weight:bold">|&lt;/span> Status &lt;span style="color:#000;font-weight:bold">|&lt;/span> Size &lt;span style="color:#000;font-weight:bold">|&lt;/span> Attached to &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+--------------------------------------+-----------+-----------+------+-------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> aa711296-5cff-46ac-bbe3-58e00712ee3e &lt;span style="color:#000;font-weight:bold">|&lt;/span> my-volume &lt;span style="color:#000;font-weight:bold">|&lt;/span> available &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">20&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+--------------------------------------+-----------+-----------+------+-------------+
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="snapshot-a-volume">Snapshot a volume&lt;/h3>
&lt;p>Users can create snapshots of a volume that can later be used to create other
volumes or to rollback to a precedent point in time. &lt;strong>Volume snapshots are
pointers in the read-write history of a volume&lt;/strong>.&lt;/p>
&lt;p>To
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/volume-snapshot.html#volume-snapshot-create">take a snapshot&lt;/a>
of a volume, use the FedCloud command below:&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Tip&lt;/h4>
See also the documentation about the
other
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/volume-snapshot.html">snapshot management commands&lt;/a>.
&lt;/div>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
To be able to create a snapshot of a
volume, the volume must not be attached to any VM (volume status must be
&lt;code>available&lt;/code>). To create a snapshot while the volume is attached
to a VM, use the &lt;code>--force&lt;/code> command flag, but be aware that there may be
inconsistencies if the VM’s OS is not aware of the snapshot being taken.
&lt;/div>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack volume snapshot create --volume my-volume my-snapshot --force
Site: IN2P3-IRES, VO: vo.access.egi.eu, command: volume snapshot create --volume my-volume my-snapshot
+-------------+--------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> Field &lt;span style="color:#000;font-weight:bold">|&lt;/span> Value &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+-------------+--------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> created_at &lt;span style="color:#000;font-weight:bold">|&lt;/span> 2021-08-06T16:08:37.631226 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> description &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> id &lt;span style="color:#000;font-weight:bold">|&lt;/span> 15149b42-032f-4cec-b6f3-41aa5c958081 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> name &lt;span style="color:#000;font-weight:bold">|&lt;/span> my-snapshot &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> properties &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> size &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> status &lt;span style="color:#000;font-weight:bold">|&lt;/span> creating &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> updated_at &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> volume_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> aa711296-5cff-46ac-bbe3-58e0712ee3e9 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+-------------+--------------------------------------+
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The status of the snapshot will probably be returned as &lt;code>creating&lt;/code>. To check
if the snapshot is ready, look at the
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/volume-snapshot.html#volume-snapshot-show">details of the snapshot&lt;/a>,
or list only the newly created snapshot (filter by snapshot name or ID):&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack volume snapshot list --name my-snapshot
Site: IN2P3-IRES, VO: vo.access.egi.eu, command: volume snapshot list --name my-snapshot
+--------------------------------------+-------------+-------------+-----------+------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> ID &lt;span style="color:#000;font-weight:bold">|&lt;/span> Name &lt;span style="color:#000;font-weight:bold">|&lt;/span> Description &lt;span style="color:#000;font-weight:bold">|&lt;/span> Status &lt;span style="color:#000;font-weight:bold">|&lt;/span> Size &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+--------------------------------------+-------------+-------------+-----------+------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> 15149b42-032f-4cec-b6f3-41aa5c958081 &lt;span style="color:#000;font-weight:bold">|&lt;/span> my-snapshot &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span> available &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+--------------------------------------+-------------+-------------+-----------+------+
&lt;/code>&lt;/pre>&lt;/div>&lt;p>When the status of the snapshot is &lt;code>available&lt;/code> the snapshot is ready, and can
be used to create new volumes or to restore the source volume to the
point-in-time when the snapshot was taken.&lt;/p>
&lt;h3 id="backup-a-volume">Backup a volume&lt;/h3>
&lt;p>Users can also create backups of a volume, but backups can only be used later
to create or replace other volumes. A &lt;strong>volume backup is a copy of a volume&lt;/strong>
saved to cold storage, which is cheaper than the performant storage used for
volumes and snapshots.&lt;/p>
&lt;p>To
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/volume-snapshot.html#volume-backup-create">make a backup&lt;/a>
of a volume, use the FedCloud command below:&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Tip&lt;/h4>
See also the documentation of the other
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/volume-backup.html">backup management commands&lt;/a>.
&lt;/div>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Not all OpenStack deployments support
volume backups.
&lt;/div>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Backups use as much storage as the
source volume, albeit in a cheaper storage layer. This means backups take
a long time to create (~4h for 500GB), and the space is accounted for the
same way as for regular volumes (the entire size of the backed up volume,
regardless of how much of the volume space is actually used).
Thus backups should be deleted when no longer needed.
&lt;/div>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
To be able to make a backup of a
volume, the volume must not be attached to any VM (volume status must be
&lt;code>available&lt;/code>). To make a backup while the volume is attached to a VM,
use the &lt;code>--force&lt;/code> command flag, but be aware that there may be inconsistencies
if the VM’s OS is not aware of the backup being taken.
&lt;/div>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack volume backup create --name my-backup my-volume --force
Site: IN2P3-IRES, VO: vo.access.egi.eu, command: volume backup create --name my-backup my-volume
+-------------+--------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> Field &lt;span style="color:#000;font-weight:bold">|&lt;/span> Value &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+-------------+--------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> created_at &lt;span style="color:#000;font-weight:bold">|&lt;/span> 2021-08-06T16:08:37.631226 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> description &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> id &lt;span style="color:#000;font-weight:bold">|&lt;/span> 158bcb42-032f-4cec-b6f3-890a5c958081 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> name &lt;span style="color:#000;font-weight:bold">|&lt;/span> my-backup &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> properties &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> size &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> status &lt;span style="color:#000;font-weight:bold">|&lt;/span> creating &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> updated_at &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> volume_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> aa711296-5cff-46ac-bbe3-58e0712ee3e9 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+-------------+--------------------------------------+
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The status of the backup will probably be returned as &lt;code>creating&lt;/code>. To check
if the backup has finished, look at the
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/volume-snapshot.html#volume-backup-show">details of the backup&lt;/a>,
or list only the newly created backup (filter by backup name or ID):&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack volume backup list --name my-backup
Site: IN2P3-IRES, VO: vo.access.egi.eu, command: volume backup list --name my-backup
+--------------------------------------+-----------+-------------+-----------+------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> ID &lt;span style="color:#000;font-weight:bold">|&lt;/span> Name &lt;span style="color:#000;font-weight:bold">|&lt;/span> Description &lt;span style="color:#000;font-weight:bold">|&lt;/span> Status &lt;span style="color:#000;font-weight:bold">|&lt;/span> Size &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+--------------------------------------+-----------+-------------+-----------+------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> 158bcb42-032f-4cec-b6f3-890a5c958081 &lt;span style="color:#000;font-weight:bold">|&lt;/span> my-backup &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span> available &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+--------------------------------------+-----------+-------------+-----------+------+
&lt;/code>&lt;/pre>&lt;/div>&lt;p>When the status of the backup is &lt;code>available&lt;/code> the backup operation is complete.&lt;/p>
&lt;h3 id="delete-volume">Delete volume&lt;/h3>
&lt;p>To
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/volume.html#volume-delete">delete a volume&lt;/a>
use the following FedCloud command:&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
To be able to delete a volume, the
volume must not be attached to any VM (volume status must be &lt;code>available&lt;/code>).
&lt;/div>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack volume delete my-volume
Site: IN2P3-IRES, VO: vo.access.egi.eu, command: volume delete my-volume
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This starts deletion of the specified volume (the volume status changes
to &lt;code>deleting&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack volume list --name my-volume
Site: IN2P3-IRES, VO: vo.access.egi.eu, command: volume list --name my-volume
+--------------------------------------+-----------+----------+------+-------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> ID &lt;span style="color:#000;font-weight:bold">|&lt;/span> Name &lt;span style="color:#000;font-weight:bold">|&lt;/span> Status &lt;span style="color:#000;font-weight:bold">|&lt;/span> Size &lt;span style="color:#000;font-weight:bold">|&lt;/span> Attached to &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+--------------------------------------+-----------+----------+------+-------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> aa711296-5cff-46ac-bbe3-58e00712ee3e &lt;span style="color:#000;font-weight:bold">|&lt;/span> my-volume &lt;span style="color:#000;font-weight:bold">|&lt;/span> deleting &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+--------------------------------------+-----------+----------+------+-------------+
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Once deletion of the specified volume is complete, it will no longer show up in
the list of volumes.&lt;/p>
&lt;h2 id="access-from-your-vms">Access from your VMs&lt;/h2>
&lt;!-- markdownlint-disable no-inline-html -->
&lt;!-- TODO Move this under Tutorials -->
&lt;p>Block storage volumes attached to a VM will appear as a
&lt;a href="https://en.wikipedia.org/wiki/Device_file#BLOCKDEV">block device&lt;/a> in the VM.&lt;/p>
&lt;p>To find out the device name that got assigned to a volume when it was
attached to a VM, look at the &lt;a href="#see-volume-details">details of the volume&lt;/a>, or
list only the volume in question (filter by volume name or ID):&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack volume list --name my-volume
Site: IN2P3-IRES, VO: vo.access.egi.eu, command: volume list --name my-volume
+--------------------------------------+-----------+--------+------+-----------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> ID &lt;span style="color:#000;font-weight:bold">|&lt;/span> Name &lt;span style="color:#000;font-weight:bold">|&lt;/span> Status &lt;span style="color:#000;font-weight:bold">|&lt;/span> Size &lt;span style="color:#000;font-weight:bold">|&lt;/span> Attached to &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+--------------------------------------+-----------+--------+------+-----------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> aa711296-5cff-46ac-bbe3-58e00712ee3e &lt;span style="color:#000;font-weight:bold">|&lt;/span> my-volume &lt;span style="color:#000;font-weight:bold">|&lt;/span> in-use &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> my-server on /dev/vdb &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+--------------------------------------+-----------+--------+------+-----------------------+
&lt;/code>&lt;/pre>&lt;/div>&lt;p>In this example the device name is &lt;code>/dev/vdb&lt;/code>. To validate this, run the
following command in the VM:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ lsblk
NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT
vda 252:0 &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 20G &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> disk
└─vda1 252:1 &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 20G &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> part /
vdb 252:16 &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 10G &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> disk
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Usually these devices are empty upon creation. The first time you attach them
to a VM, you will need to partition the device and create filesystem(s) on it,
by running the following command in the VM:&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Tip&lt;/h4>
Using a file system volume label is
useful to avoid the need to find the out the device name, especially when
multiple block storage volumes are attached to a VM. It is recommended to use
a file system volume label in the VM that is the same as the name of the
block storage volume.
&lt;/div>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Tip&lt;/h4>
The filesystem type can be one supported by
the Linux distribution in the VM, but &lt;code>xfs&lt;/code> and &lt;code>ext4&lt;/code> are the most widely used.
&lt;/div>
&lt;div class="alert alert-danger" role="alert">
&lt;h4 class="alert-heading">Caution&lt;/h4>
Only run this command the first
time you use the device, as it deletes all data! Make sure you use the correct
device name, otherwise you will destroy data on other devices!
&lt;/div>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ sudo mkfs.ext4 -L my-volume /dev/vdb
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Once you created a filesystem on the device, you can mount it at any
desired path by running the following command in the VM:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ sudo mount /dev/vdb1 /&amp;lt;path&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Continuing with the example above, if we check again the block devices by
running the following command in the VM:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ lsblk
NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT
vda 252:0 &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 20G &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> disk
└─vda1 252:1 &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 20G &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> part /
vdb 252:16 &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 10G &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> disk
└─vdb1 252:1 &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 10G &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> part /&amp;lt;path&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;p>If non-root users should be able to access the mounted volume similar to the
way e.g. &lt;code>/tmp&lt;/code> is accessible, set the sticky bit on the mount point, with this
command in the VM:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ sudo chmod +t /&amp;lt;path&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;p>If the desired behaviour is to mount the file system automatically on VM
restart, add it to &lt;code>/etc/fstab&lt;/code>. Using the &lt;code>LABEL&lt;/code> parameter will ensure
the correct volume is chosen if multiple volumes are attached:&lt;/p>
&lt;p>&lt;code>LABEL=my-volume /&amp;lt;path&amp;gt; ext4 noatime,nodiratime,user_xattr,nofail 0 0&lt;/code>&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
The use of option &lt;code>nofail&lt;/code> is
recommended in order to skip (and not block on) mounting the file system volume
if it is unavailable, e.g. in case of network issues. Remove this option from
the &lt;em>fstab&lt;/em> line if you want the VM to block the boot process if the volume is
unavailable.
&lt;/div>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
The use of option &lt;code>nobarrier&lt;/code> is
not recommended as volumes are accessed via a cache, and ignoring the correct
ordering of journal commits may result in a corrupted file system in case of
a hardware problem.
&lt;/div>
&lt;p>With that you can access &lt;code>/&amp;lt;path&amp;gt;&lt;/code> inside the VM, where all data stored on the
volume will be available. Applications will not see any difference between a
block storage device and a regular disk, thus no major changes should be
required in the application logic.&lt;/p>
&lt;h2 id="access-via-egi-data-transfer">Access via EGI Data Transfer&lt;/h2>
&lt;p>The &lt;a href="../../data-transfer">File Transfer service&lt;/a> allows you to move any type of
data files asynchronously from one storage to another. If you want to copy data
from/to one VM running on the EGI cloud, you will need to run a compatible
server (Webdav/https, GridFTP, xrootd, SRM, S3, GCloud) that can interact with
the FTS3 software.&lt;/p>
&lt;p>An easy way to provide a GridFTP server on your VM is to use the
&lt;a href="https://github.com/cern-fts/ready2go/tree/master/gridftp-le">gridftp-le ready2go docker stack&lt;/a>
for deploying a GridFTP Docker Container with certificates from Let&amp;rsquo;s Encrypt.
Take into account:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Security groups for the VM must allow ports 80, 2811 and the 50000-50200
range.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>The VM must have a valid DNS entry (you can use
&lt;a href="https://nsupdate.fedcloud.eu">FedCloud&amp;rsquo;s Dynamic DNS&lt;/a> for getting one)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>The default setup uses &lt;code>/srv&lt;/code> as path to expose and maps users to the &lt;code>nobody&lt;/code>
user. Make sure that &lt;code>nobody&lt;/code> is able to read (and write if needed) on that
location or set the mapping to the appropriate users.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>The Let&amp;rsquo;s Encrypt certificates may not be accepted by some of the EGI
infrastructure endpoints, you may want to consider using IGTF certificates
instead. Check your CA for instructions on how to get those.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>You can add direct mappings for specific DNs by adding a
&lt;code>/etc/localgridmap.conf&lt;/code> file in your running container. See the example below
to map the
&lt;code>/DC=org/DC=terena/DC=tcs/C=NL/O=Stichting EGI/CN=Enol Fernandez del Castillo&lt;/code>
DN to &lt;code>nobody&lt;/code>. You can add as many lines as needed:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-plaintext" data-lang="plaintext">&amp;#34;/DC=org/DC=terena/DC=tcs/C=NL/O=Stichting EGI/CN=Enol Fernandez del Castillo&amp;#34; nobody
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>You need to specify the environment variables in the &lt;code>docker-compose.yml&lt;/code> file
for obtaining the Let&amp;rsquo;s Encrypt certificate. An extra variable
&lt;code>GLOBUS_HOSTNAME&lt;/code> must be also set:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="color:#204a87;font-weight:bold">environment&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">TESTCERT&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">EMAIL=youremail@domain.com&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">DOMAIN=mygridftp.example.com&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">GLOBUS_HOSTNAME=mygridftp.example.com&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>If you are running on a site with MTU smaller than 1500 (e.g. CESNET-MCC),
make sure that you set the MTU to a value smaller than the interface MTU(you
can check this with &lt;code>ip addr&lt;/code>). In your &lt;code>docker-compose.yml&lt;/code>, add:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="color:#204a87;font-weight:bold">networks&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">default&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">driver&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">bridge&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">driver_opts&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">com.docker.network.driver.mtu&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1434&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;!--
// jscpd:ignore-end
--></description></item><item><title>Users: Grid Storage</title><link>/users/online-storage/grid-storage/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/users/online-storage/grid-storage/</guid><description>
&lt;h2 id="what-is-it">What is it?&lt;/h2>
&lt;p>Grid storage enables &lt;strong>storage of files in a fault-tolerant and scalable
environment&lt;/strong>, and sharing it with distributed teams. Your data can be accessed
through multiple protocols, and can be replicated across different providers
to increase fault-tolerance. Grid storage gives you complete control over what
data you share, and with whom you share the data.&lt;/p>
&lt;p>The main features of grid storage:&lt;/p>
&lt;ul>
&lt;li>Access highly-scalable storage from anywhere&lt;/li>
&lt;li>Control the data you share&lt;/li>
&lt;li>Organise your data using a flexible, hierarchical structure&lt;/li>
&lt;/ul>
&lt;p>Grid storage file access is based on the
&lt;a href="https://en.wikipedia.org/wiki/GridFTP">gridFTP&lt;/a> and
&lt;a href="https://en.wikipedia.org/wiki/WebDAV">WebDav/HTTP&lt;/a> protocols, together with
&lt;a href="https://xrootd.slac.stanford.edu/">XRootD&lt;/a> and legacy
&lt;a href="https://www.gridpp.ac.uk/wiki/SRM">SRM&lt;/a> (under deprecation at some of the
endpoints).&lt;/p>
&lt;p>Several grid storage implementations are available in the EGI Cloud, the most
common being:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.dcache.org/">dCache&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://twiki.cern.ch/twiki/bin/view/DPM/">DPM&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://italiangrid.github.io/storm/">StoRM&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="endpoint-discovery">Endpoint discovery&lt;/h2>
&lt;p>The grid storage endpoints that are available to a user&amp;rsquo;s Virtual Organizations
are discoverable via the EGI Information System (BDII).&lt;/p>
&lt;!-- markdownlint-disable commands-show-output no-inline-html -->
&lt;!-- TODO Add details about how to setup lcg-infosites CLI -->
&lt;!-- markdownlint-enable no-inline-html -->
&lt;p>The &lt;code>lcg-infosites&lt;/code> command can be used to obtain VO-specific information on
existing grid storages, using the following syntax:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ lcg-infosites --vo voname -&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>v&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> -f &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>site name&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>option&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>s&lt;span style="color:#ce5c00;font-weight:bold">)]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>-h&lt;span style="color:#000;font-weight:bold">|&lt;/span> --help&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--is BDII&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>For example, to list the Storage Elements (SEs) available to the &lt;code>biomed&lt;/code> VO, we
could issue the following command:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ lcg-infosites --vo biomed se
Avail Space&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>kB&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> Used Space&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>kB&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> Type SE
------------------------------------------
&lt;span style="color:#0000cf;font-weight:bold">280375465082&lt;/span> n.a SRM ccsrm.ihep.ac.cn
&lt;span style="color:#0000cf;font-weight:bold">10995116266&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">11&lt;/span> SRM cirigridse01.univ-bpclermont.fr
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="access-from-the-command-line">Access from the command line&lt;/h2>
&lt;p>Access to grid storage via a command line interface (CLI) requires users
to obtain a valid X.509 user VOMS proxy.
Please refer to the &lt;a href="../../check-in/vos/voms">Check-in&lt;/a> documentation for more
information.&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Integration via
&lt;a href="https://openid.net/connect">OpenID Connect&lt;/a> to the
&lt;a href="../../check-in">EGI Check-in service&lt;/a> is under piloting at some of the
endpoints of the EGI Cloud infrastructure , but it has not yet reached the
production stage.
&lt;/div>
&lt;p>The CLI widely used to access grid-storage is
&lt;a href="https://dmc-docs.web.cern.ch/dmc-docs/gfal2/gfal2.html">gfal2&lt;/a>, which is
available for installation both on RHEL and Debian compatible systems.&lt;/p>
&lt;p>In particular, &lt;code>gfal2&lt;/code> provides an abstraction layer on top of several storage
protocols (XRootD, WebDAV, SRM, gsiftp, etc), offerint a convenient API that
can be used over different protocols.&lt;/p>
&lt;p>The &lt;code>gfal2&lt;/code> CLI can be installed as follows (for RHEL compatible systems):&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ yum install gfal2-util gfal2-all
&lt;/code>&lt;/pre>&lt;/div>&lt;p>where &lt;code>gfal2-all&lt;/code> will install all the plug-ins (to deal with all the
available protocols).&lt;/p>
&lt;p>Below you can find examples of the usual commands needed to access storage via
&lt;code>gfal2&lt;/code>. For a complete list of available commands, and the guide on how to use
them, please refer to the
&lt;a href="https://dmc-docs.web.cern.ch/dmc-docs/gfal2-util.html">gfal2-util documentation&lt;/a>.&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
In the examples below, the used
&lt;code>gsiftp&lt;/code> protocol can be replaced by any other supported protocol.
&lt;/div>
&lt;h3 id="list-files-on-a-given-endpoint">List files on a given endpoint&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ gfal-ls gsiftp://dcache-door-doma01.desy.de/dteam
1G.header-1
domatest
gb
SSE-demo
&lt;span style="color:#204a87">test&lt;/span>
tpctest
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="create-a-folder">Create a folder&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ gfal-mkdir gsiftp://dcache-door-doma01.desy.de/dteam/test
&lt;/code>&lt;/pre>&lt;/div>&lt;!-- markdownlint-enable commands-show-output -->
&lt;h3 id="copy-a-local-file">Copy a local file&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ gfal-copy test.json gsiftp://dcache-door-doma01.desy.de/dteam/test
Copying file:///root/Documents/test.json &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>DONE&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> after 0s
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="copy-files-between-storages">Copy files between storages&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ gfal-copy gsiftp://prometheus.desy.de/VOs/dteam/public-file gsiftp://dcache-door-doma01.desy.de/dteam/test
Copying gsiftp://prometheus.desy.de/VOs/dteam/public-file &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>DONE&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> after 3s
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="download-a-file-to-a-local-folder">Download a file to a local folder&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ gfal-copy gsiftp://prometheus.desy.de/VOs/dteam/public-file /tmp
Copying gsiftp://prometheus.desy.de/VOs/dteam/public-file &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>DONE&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> after 0s
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="delete-a-file">Delete a file&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ gfal-rm gsiftp://dcache-door-doma01.desy.de/dteam/test/public-file
gsiftp://dcache-door-doma01.desy.de/dteam/test/public-file DELETED
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="access-via-egi-data-transfer">Access via EGI Data Transfer&lt;/h2>
&lt;!-- markdown-link-check-disable -->
&lt;p>The &lt;a href="../../data-transfer">EGI Data Transfer&lt;/a> service provides mechanisms
to optimize the transfer of files between EGI Online Storage endpoints.
Both a &lt;a href="../../data-transfer/webfts">graphical user interface&lt;/a> (GUI) and
&lt;a href="../../data-transfer/clients">command line interfaces&lt;/a> (CLI) are available
to perform bulk movement of data.
Please check out the related documentation for more information.&lt;/p>
&lt;!-- markdown-link-check-enable -->
&lt;h2 id="integration-with-data-management-frameworks">Integration with Data Management frameworks&lt;/h2>
&lt;p>Grid storage access, most of the time, is hidden from users by the integration
with the Data Management Frameworks (DMFs) used by Collaborations and
Experiments.&lt;/p>
&lt;p>For example, the &lt;a href="../../workload-manager">EGI Workload Manager&lt;/a> provides a way
to efficiently access grid storage endpoints in order to read/store files,
and to catalogue the existing file and related metadata.&lt;/p>
&lt;p>When running computation via the EGI Workload Manager, users do not actually
access the storage directly. However, users can retrieve the output of the
computation once it has been stored on the grid.&lt;/p></description></item><item><title>Users: Object Storage</title><link>/users/online-storage/object-storage/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/users/online-storage/object-storage/</guid><description>
&lt;!--
// jscpd:ignore-start
-->
&lt;h2 id="what-is-it">What is it?&lt;/h2>
&lt;p>Object storage is a standalone service that &lt;strong>stores data as individual
objects, organized into containers&lt;/strong>. It is a highly scalable, reliable,
fast, and inexpensive data storage. It has a simple web services interface
that can be used to store and retrieve any amount of data, at any time,
from anywhere on the web.&lt;/p>
&lt;p>The main features of object storage:&lt;/p>
&lt;ul>
&lt;li>Storage containers and objects have unique URLs, which can be used to access,
manage, and share them.&lt;/li>
&lt;li>Data can be accessed from anywhere, using standard HTTP requests to a REST
API (e.g. VMs running in the EGI Cloud or in other cloud provider&amp;rsquo;s cloud,
from any browser/laptop, etc.)&lt;/li>
&lt;li>Access can be public or can be restricted using access control lists.&lt;/li>
&lt;li>There is virtually no limit to the amount of data you can store, only the
space used is accounted for.&lt;/li>
&lt;/ul>
&lt;h2 id="concepts">Concepts&lt;/h2>
&lt;p>To use object storage effectively, you need to understand the following key
concepts and terminology:&lt;/p>
&lt;h3 id="storage-containers">Storage containers&lt;/h3>
&lt;p>Storage containers (aka buckets) are the fundamental holders of data. Every
object is stored in a storage container. You can store any number of objects in
a storage container.&lt;/p>
&lt;p>Storage containers have an unique name and act as the root folders of the
storage space.&lt;/p>
&lt;p>Each storage container has a unique URL (that includes the name) by which
anyone can refer to it.&lt;/p>
&lt;h3 id="objects">Objects&lt;/h3>
&lt;p>Objects are the fundamental entities stored in object storage. Objects consist
of object data and metadata. The data portion is opaque to object storage. The
metadata is a set of name-value pairs that describe the object. These include
some default metadata, such as the date last modified, and standard HTTP
metadata, such as &lt;code>Content-Type&lt;/code>. You can also specify custom metadata at the
time the object is stored.&lt;/p>
&lt;p>An object is uniquely identified within a storage container by a key (name)
and a version.&lt;/p>
&lt;p>Each object has a unique URL, based on the storage container&amp;rsquo;s URL (that
includes the key, and optionally the version) by which anyone can refer to it.&lt;/p>
&lt;h3 id="permissions">Permissions&lt;/h3>
&lt;p>Storage containers and objects can be shared by sharing their URLs.
However, access to a storage container or to an object is controlled by
access control lists (ACLs). When a request is received against a resource,
object storage checks the corresponding ACL to verify that the requester has
the necessary access permissions.&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
It is possible to set permissions so
that the storage container or object can be accessed publicly.
&lt;/div>
&lt;h2 id="usage-from-your-application">Usage from your application&lt;/h2>
&lt;p>The object storage in the EGI Cloud is offered via
&lt;a href="https://openstack.org/">OpenStack&lt;/a> deployments that implement the
&lt;a href="https://docs.openstack.org/swift/latest/">Swift&lt;/a> service.&lt;/p>
&lt;p>Users can manage object storage using the
&lt;a href="https://docs.openstack.org/horizon/latest/user/">OpenStack Horizon dashboard&lt;/a>
of a provider or from the &lt;a href="#access-from-the-command-line">command line&lt;/a>
(CLI). More advanced usage include access via the
&lt;a href="#access-via-the-s3-protocol">S3 protocol&lt;/a>, via the
&lt;a href="https://docs.openstack.org/api-ref/object-store/">OpenStack Object Store API&lt;/a>,
or using the &lt;a href="#access-via-egi-data-transfer">EGI Data Transfer service&lt;/a>.&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Available object storage resources
can be discovered in the
&lt;a href="https://goc.egi.eu/portal/index.php?Page_Type=Services&amp;amp;serviceType=org.openstack.swift&amp;amp;selectItemserviceType=org.openstack.swift&amp;amp;ngi=&amp;amp;searchTerm=&amp;amp;production=TRUE&amp;amp;monitored=TRUE&amp;amp;certStatus=Certified&amp;amp;scopeMatch=all&amp;amp;servKeyNames=&amp;amp;servKeyValue=">Configuration Database&lt;/a>
(GOCDB).
&lt;/div>
&lt;h2 id="access-from-the-command-line">Access from the command line&lt;/h2>
&lt;p>Multiple command line interfaces (CLIs) are available to manage object
storage:&lt;/p>
&lt;ul>
&lt;li>The &lt;a href="https://docs.openstack.org/python-openstackclient/latest">OpenStack CLI&lt;/a>&lt;/li>
&lt;li>The &lt;a href="../../cloud-compute/openstack">FedCloud Client&lt;/a> is a high-level CLI for
interaction with the EGI Federated Cloud (&lt;strong>recommended&lt;/strong>)&lt;/li>
&lt;li>The &lt;a href="https://docs.openstack.org/mitaka/cli-reference/swift.html">Swift CLI&lt;/a>
has some advanced features that are not available through the OpenStack CLI&lt;/li>
&lt;li>The &lt;a href="https://davix.web.cern.ch">Davix Client&lt;/a>, developed at CERN for RHEL and
Debian environments, is another alternative for working with S3-compatible
object storage&lt;/li>
&lt;/ul>
&lt;h3 id="access-with-the-fedcloud-cli">Access with the FedCloud CLI&lt;/h3>
&lt;p>The main FedCloud commands for managing storage containers and storage objects are
described below.&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
See
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/container.html">here&lt;/a>
for documentation on all storage container-related commands, and
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/object.html">here&lt;/a>
for all object-related commands.
&lt;/div>
&lt;h4 id="list-storage-containers">List storage containers&lt;/h4>
&lt;p>For example, to access to the SWIFT endpoint at IFCA-LCG2 via the
Pilot VO (vo.access.egi.eu), and
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/container.html#container-list">list the available storage containers&lt;/a>,
use the FedCloud command below:&lt;/p>
&lt;ul class="nav nav-tabs" id="tabs-3" role="tablist">
&lt;li class="nav-item">
&lt;a class="nav-link active"
id="tabs-3-0-tab" data-toggle="tab" href="#tabs-3-0" role="tab"
aria-controls="tabs-3-0" aria-selected="true">
Linux / Mac
&lt;/a>
&lt;/li>
&lt;li class="nav-item">
&lt;a class="nav-link"
id="tabs-3-1-tab" data-toggle="tab" href="#tabs-3-1" role="tab"
aria-controls="tabs-3-1" aria-selected="false">
Windows
&lt;/a>
&lt;/li>
&lt;li class="nav-item">
&lt;a class="nav-link"
id="tabs-3-2-tab" data-toggle="tab" href="#tabs-3-2" role="tab"
aria-controls="tabs-3-2" aria-selected="false">
PowerShell
&lt;/a>
&lt;/li>
&lt;/ul>
&lt;div class="tabx-content" id="tabs-3-content">
&lt;div class="tab-pane fade show active"
id="tabs-3-0" role="tabpanel" aria-labelled-by="tabs-3-0-tab">
&lt;p>To avoid passing the site, VO, etc. each time, you can use
&lt;a href="https://fedcloudclient.fedcloud.eu/usage.html#environment-variables">FedCloud CLI environment variables&lt;/a>
to set them once and reuse them with each command invocation.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ &lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">EGI_SITE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>IFCA-LCG2
$ &lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">EGI_VO&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>vo.access.egi.eu
$ fedcloud openstack container list
+------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> Name &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> test-egi &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+------------------+
&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;div class="tab-pane fade"
id="tabs-3-1" role="tabpanel" aria-labelled-by="tabs-3-1-tab">
&lt;p>To avoid passing the site, VO, etc. each time, you can use
&lt;a href="https://fedcloudclient.fedcloud.eu/usage.html#environment-variables">FedCloud CLI environment variables&lt;/a>
to set them once and reuse them with each command invocation.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">&amp;gt; &lt;span style="color:#204a87">set&lt;/span> &lt;span style="color:#000">EGI_SITE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>IN2P3-IRES
&amp;gt; &lt;span style="color:#204a87">set&lt;/span> &lt;span style="color:#000">EGI_VO&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>vo.access.egi.eu
&amp;gt; fedcloud openstack container list
+------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> Name &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> test-egi &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+------------------+
&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;div class="tab-pane fade"
id="tabs-3-2" role="tabpanel" aria-labelled-by="tabs-3-2-tab">
&lt;p>To avoid passing the site, VO, etc. each time, you can use
&lt;a href="https://fedcloudclient.fedcloud.eu/usage.html#environment-variables">FedCloud CLI environment variables&lt;/a>
to set them once and reuse them with each command invocation.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-powershell" data-lang="powershell">&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span> &lt;span style="color:#000">$Env:EGI_SITE&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;IN2P3-IRES&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span> &lt;span style="color:#000">$Env:EGI_VO&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;vo.access.egi.eu&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span> &lt;span style="color:#000">fedcloud&lt;/span> &lt;span style="color:#000">openstack&lt;/span> &lt;span style="color:#000">container&lt;/span> &lt;span style="color:#000">list&lt;/span>
&lt;span style="color:#000;font-weight:bold">+------------------+&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000">Name&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">+------------------+&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">test-egi&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">+------------------+&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;/div>
&lt;h4 id="create-new-storage-container">Create new storage container&lt;/h4>
&lt;p>To
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/container.html#container-create">create a new storage container&lt;/a>
named &lt;code>test-egi&lt;/code>, use the follwoing FedCloud command:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack container create test-egi
+---------+-----------+------------------------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> account &lt;span style="color:#000;font-weight:bold">|&lt;/span> container &lt;span style="color:#000;font-weight:bold">|&lt;/span> x-trans-id &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+---------+-----------+------------------------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> v1 &lt;span style="color:#000;font-weight:bold">|&lt;/span> test-egi &lt;span style="color:#000;font-weight:bold">|&lt;/span> tx000000000000000000afc-005f845160-2bb3ed4-RegionOne &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+---------+-----------+------------------------------------------------------+
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="create-new-object-by-uploading-a-file">Create new object by uploading a file&lt;/h4>
&lt;p>To
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/object.html#object-create">upload a file as a new object&lt;/a>
into a storage container named &lt;code>test-egi&lt;/code>, use the following FedCloud command:&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Tip&lt;/h4>
The newly created object can have a different
name than the file being uploaded, use the &lt;code>--name&lt;/code> command flag for this.
&lt;/div>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Tip&lt;/h4>
Multiple files can be uploaded at once,
but in that case the resulting objects will have the same names as the uploaded
files.
&lt;/div>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack object create test-egi file1.txt
+-----------+-----------+----------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> object &lt;span style="color:#000;font-weight:bold">|&lt;/span> container &lt;span style="color:#000;font-weight:bold">|&lt;/span> etag &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+-----------+-----------+----------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> file1.txt &lt;span style="color:#000;font-weight:bold">|&lt;/span> test-egi &lt;span style="color:#000;font-weight:bold">|&lt;/span> 5bbf5a52328e7439ae6e719dfe712200 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+-----------+-----------+----------------------------------+
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="list-objects-in-a-storage-container">List objects in a storage container&lt;/h4>
&lt;p>To
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/object.html#object-list">list the objects in a storage container&lt;/a>
use the FedCloud command below:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack object list test-egi
+-----------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> Name &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+-----------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> file1.txt &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+-----------+
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="download-the-content-of-an-object">Download (the content of) an object&lt;/h4>
&lt;p>To
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/object.html#object-save">download an object&lt;/a>
named &lt;code>file1.txt&lt;/code> located in storage container &lt;code>test-egi&lt;/code>, and save its content
to a file use the FedCloud command below:&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Tip&lt;/h4>
The object can be saved into a file
named differently than the object itselft, by using the &lt;code>--filename&lt;/code> command
flag.
&lt;/div>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Tip&lt;/h4>
Multiple files can be downloaded at
once, but in that case the resulting files will have the same names as the
downloaded objects.
&lt;/div>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack object save test-egi file1.txt
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="add-metadata-to-an-object">Add metadata to an object&lt;/h4>
&lt;p>You can &lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/object.html#object-set">add/update object metadata&lt;/a>,
stored as key-value pairs among the object properties.
E.g. to add a property named &lt;code>key1&lt;/code> with the value &lt;code>value2&lt;/code> to an object
named &lt;code>file1.txt&lt;/code> located in the storage container named &lt;code>test-egi&lt;/code>, you can
use the FedCloud command below:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack object &lt;span style="color:#204a87">set&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> --property &lt;span style="color:#000">key1&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>value2 test-egi file1.txt
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="remove-metadata-from-an-object">Remove metadata from an object&lt;/h4>
&lt;p>You can also &lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/container.html#container-unset">remove metadata from objects&lt;/a>.
E.g. to remove the property named &lt;code>key1&lt;/code> from the object named &lt;code>file1.txt&lt;/code>
located in the storage container named &lt;code>test-egi&lt;/code>, you can use the FedCloud
command below:&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Only metadata added by users can be
removed (system properties cannot be removed).
&lt;/div>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack object &lt;span style="color:#204a87">unset&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> --property key test-egi file1.txt
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="remove-an-object-from-a-storage-container">Remove an object from a storage container&lt;/h4>
&lt;p>To
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/object.html#object-delete">delete an object&lt;/a>
named &lt;code>file1.txt&lt;/code> from the storage container &lt;code>test-egi&lt;/code>, use the following
FedCloud command:&lt;/p>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Caution&lt;/h4>
Deleting object from storage
containers is final, there is no way to recover deleted objects. Unlike in
&lt;a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock.html">AWS S3&lt;/a>,
objects in OpenStack storage containers cannot be protected against deletion.
&lt;/div>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack object delete test-egi file1.txt
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="removing-an-entire-container">Removing an entire container&lt;/h4>
&lt;p>To
&lt;a href="https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/container.html#container-delete">delete a storage container&lt;/a>,
including all objects in it, use the FedCloud command below.&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Tip&lt;/h4>
You can add the &lt;code>-r&lt;/code> option
to recursively remove sub-containers.
&lt;/div>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Caution&lt;/h4>
Deleting all objects from a
storage container is final, there is no way to recover deleted objects. Unlike in
&lt;a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock.html">AWS S3&lt;/a>,
objects in OpenStack storage containers cannot be protected against deletion.
&lt;/div>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack container delete test-egi
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="access-via-the-s3-protocol">Access via the S3 protocol&lt;/h3>
&lt;p>The OpenStack &lt;a href="https://docs.openstack.org/swift/latest/">Swift&lt;/a> service is
compatible with the S3 protocol, therefore when properly configured, it can be
accessed as any other S3-compatible object store.&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
The S3 protocol was created by &lt;a href="https://www.aws.com">Amazon
Web Services&lt;/a> (AWS) for their object storage,
called &lt;a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/Welcome.html">Simple Storage Service&lt;/a>
(S3), but it was
&lt;a href="https://www.architecting.it/blog/object-storage-standardising-on-the-s3-api/">adopted as the de-facto standard&lt;/a>
to access object storage offered by other providers.
&lt;/div>
&lt;p>In order to access the storage via S3, you need
&lt;a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/concepts.html">EC2&lt;/a>-compatible
credentials from the OpenStack deployment. Use the following command:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ fedcloud openstack ec2 credentials create
+------------+------------------------------------------------------------------------------------------------------------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> Field &lt;span style="color:#000;font-weight:bold">|&lt;/span> Value &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+------------+------------------------------------------------------------------------------------------------------------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> access &lt;span style="color:#000;font-weight:bold">|&lt;/span> zxxxxxxxxxxxxxxxxxxxxxxxxxx &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> links &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">{&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;self&amp;#39;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#39;https://api.cloud.ifca.es:5000/v3/users/5495cd688ad7401b8e87b46bdea92f33/credentials/OS-EC2/xxxxxxxxxxxxxxxxx&amp;#39;&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">}&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> project_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> 999f045cb1ff4684a15ebb338af69460 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> secret &lt;span style="color:#000;font-weight:bold">|&lt;/span> xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> trust_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> user_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> xxxxxxxxxxxxxxxxxxxxxxxxxxxx &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+------------+------------------------------------------------------------------------------------------------------------------------------------------+
&lt;/code>&lt;/pre>&lt;/div>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Important&lt;/h4>
Save the &lt;code>access&lt;/code> and &lt;code>secret&lt;/code>
values, as those are needed in subsequent commands that use the S3 protocol.
&lt;/div>
&lt;p>To list containers/objects via the S3 protocol, use the command:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ davix-ls --s3accesskey &lt;span style="color:#4e9a06">&amp;#39;access&amp;#39;&lt;/span> --s3secretkey &lt;span style="color:#4e9a06">&amp;#39;secret&amp;#39;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> --s3alternate s3s://api.cloud.ifca.es:8080/swift/v1/test-egi
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>davix-get&lt;/code>, &lt;code>davix-put&lt;/code> and &lt;code>davix-del&lt;/code> are also available to download, store
and delete objects from the storage.&lt;/p>
&lt;h2 id="access-via-egi-data-transfer">Access via EGI Data Transfer&lt;/h2>
&lt;p>The &lt;a href="../../data-transfer">EGI Data Transfer&lt;/a> service can move files
to and from object storages that are compatible with the S3 protocol.
You will have to upload the EC2 access keys to the EGI Data Transfer
service, which will be able to generate properly signed URLs for the
objects in the storage.&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Please contact support
at &lt;code>support&lt;/code> &lt;code>&amp;lt;at&amp;gt;&lt;/code> &lt;code>egi.eu&lt;/code> for more details.
&lt;/div>
&lt;!--
// jscpd:ignore-end
--></description></item></channel></rss>