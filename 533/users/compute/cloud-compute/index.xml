<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>EGI Documentation – Federated Cloud Compute</title><link>/users/compute/cloud-compute/</link><description>Recent content in Federated Cloud Compute on EGI Documentation</description><generator>Hugo -- gohugo.io</generator><atom:link href="/users/compute/cloud-compute/index.xml" rel="self" type="application/rss+xml"/><item><title>Users: Using OpenStack Providers</title><link>/users/compute/cloud-compute/openstack/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/users/compute/cloud-compute/openstack/</guid><description>
&lt;p>&lt;a href="https://openstack.org">OpenStack&lt;/a> providers of the EGI Cloud Compute service
offer native OpenStack features via native APIs integrated with EGI Check-in
accounts.&lt;/p>
&lt;p>The extensive &lt;a href="https://docs.openstack.org/user/">OpenStack user documentation&lt;/a>
includes details on every OpenStack project most providers offer access to:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://docs.openstack.org/keystone/latest/">Keystone&lt;/a>, for identity&lt;/li>
&lt;li>&lt;a href="https://docs.openstack.org/nova/latest/">Nova&lt;/a>, for VM management&lt;/li>
&lt;li>&lt;a href="https://docs.openstack.org/glance/latest/">Glance&lt;/a>, for VM image
management&lt;/li>
&lt;li>&lt;a href="https://docs.openstack.org/cinder/latest/">Cinder&lt;/a>, for block storage&lt;/li>
&lt;li>&lt;a href="https://docs.openstack.org/swift/latest/">Swift&lt;/a>, for object storage&lt;/li>
&lt;li>&lt;a href="https://docs.openstack.org/neutron/latest/">Neutron&lt;/a>, for network
management&lt;/li>
&lt;li>&lt;a href="https://docs.openstack.org/horizon/latest/">Horizon&lt;/a>, as a web
dashboard&lt;/li>
&lt;/ul>
&lt;p>The Horizon Web-dashboard of the OpenStack providers can be accessed using your
EGI Check-in credentials directly. See the
&lt;a href="../../../getting-started/openstack/">Getting Started guide&lt;/a> for more information.
The rest of this guide will focus on CLI/API access.&lt;/p>
&lt;h2 id="installation">Installation&lt;/h2>
&lt;p>The OpenStack client is a command-line client for OpenStack that brings the
command set for Compute, Identity, Image, Object Storage and Block Storage APIs
together in a single shell with a uniform command structure.&lt;/p>
&lt;ul class="nav nav-tabs" id="tabs-0" role="tablist">
&lt;li class="nav-item">
&lt;a class="nav-link active"
id="tabs-0-0-tab" data-toggle="tab" href="#tabs-0-0" role="tab"
aria-controls="tabs-0-0" aria-selected="true">
Linux / Mac
&lt;/a>
&lt;/li>
&lt;li class="nav-item">
&lt;a class="nav-link"
id="tabs-0-1-tab" data-toggle="tab" href="#tabs-0-1" role="tab"
aria-controls="tabs-0-1" aria-selected="false">
Windows
&lt;/a>
&lt;/li>
&lt;/ul>
&lt;div class="tabx-content" id="tabs-0-content">
&lt;div class="tab-pane show active"
id="tabs-0-0" role="tabpanel" aria-labelled-by="tabs-0-0-tab">
&lt;p>Installation of the OpenStack client can be done using:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>pip install openstackclient
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;div class="tab-pane "
id="tabs-0-1" role="tabpanel" aria-labelled-by="tabs-0-1-tab">
&lt;p>As there are non-pure Python packages needed for installation, the
&lt;a href="https://visualstudio.microsoft.com/visual-cpp-build-tools/">Microsoft C++ Build Tools&lt;/a>
is a prerequisite, please make sure it&amp;rsquo;s installed with the following options
selected:&lt;/p>
&lt;ul>
&lt;li>C++ CMake tools for Windows&lt;/li>
&lt;li>C++ ATL for latest v142 build tools (x86 &amp;amp; x64)&lt;/li>
&lt;li>Testing tools core features - Build Tools&lt;/li>
&lt;li>Windows 10 SDK (&lt;code>&amp;lt;latest&lt;/code>&amp;gt;)&lt;/li>
&lt;/ul>
&lt;p>In case you prefer to use non-Microsoft alternatives for building non-pure
packages, please see &lt;a href="https://wiki.python.org/moin/WindowsCompilers">here&lt;/a>.&lt;/p>
&lt;p>Installation of the OpenStack client can be done using:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>pip install openstackclient
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;/div>
&lt;p>Add IGTF CA to python's CA store:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>cat /etc/grid-security/certificates/*.pem &amp;gt;&amp;gt; &lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>python -m requests.certs&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="authentication">Authentication&lt;/h2>
&lt;p>Check the documentation at the
&lt;a href="../auth">authentication and authorisation section&lt;/a> on how to get the right
credentials for accessing the providers.&lt;/p>
&lt;h3 id="openstack-token-for-other-clients">OpenStack token for other clients&lt;/h3>
&lt;p>Most OpenStack clients allow authentication with tokens, so you can easily use
them with EGI Cloud providers just doing a first step for obtaining the token.
With the OpenStack client you can use the following command to set the OS_TOKEN
variable with the needed token:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#000">OS_TOKEN&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>openstack --os-auth-type v3oidcaccesstoken &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --os-protocol openid --os-identity-provider egi.eu &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --os-auth-url &amp;lt;keystone url&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --os-access-token &amp;lt;your access token&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --os-project-id &amp;lt;your project id&amp;gt; token issue -c id -f value&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can easily obtain an OpenStack token with the
&lt;a href="../../../getting-started/cli">FedCloud client&lt;/a>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>fedcloud openstack --site &amp;lt;NAME_OF_THE_SITE&amp;gt; --vo &amp;lt;NAME_OF_VO&amp;gt; token issue -c id -f value
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="useful-commands-with-openstack-cli">Useful commands with OpenStack CLI&lt;/h2>
&lt;p>Usage of the OpenStack client is described in detail
&lt;a href="https://docs.openstack.org/python-openstackclient/latest">here&lt;/a>.&lt;/p>
&lt;p>Please refer to the
&lt;a href="https://docs.openstack.org/nova/latest/user/">nova documentation&lt;/a> for a
complete guide on the VM management features of OpenStack. We list in the
sections below some useful commands for the EGI Cloud.&lt;/p>
&lt;h3 id="registering-an-existing-ssh-key">Registering an existing ssh key&lt;/h3>
&lt;p>It&amp;rsquo;s possible to register an ssh key that can later be used as the default ssh
key for the default user of the VM (via the &lt;code>--key-name&lt;/code> argument to
&lt;code>openstack server create&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>openstack keypair create --public-key ~/.ssh/id_rsa.pub mykey
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="creating-a-vm">Creating a VM&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>openstack flavor list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">FLAVOR&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;FLAVOR_NAME&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>openstack image list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">IMAGE_ID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;IMAGE_ID&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>openstack network list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Pick FedCloud network&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">NETWORK_ID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;NETOWRK_ID&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>openstack security group list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>openstack server create --flavor &lt;span style="color:#000">$FLAVOR&lt;/span> --image &lt;span style="color:#000">$IMAGE_ID&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --nic net-id&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000">$NETWORK_ID&lt;/span> --security-group default &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --key-name mykey oneprovider
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Creating a floating IP&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>openstack floating ip create &amp;lt;NETOWRK_NAME&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Assigning floating IP to server&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>openstack server add floating ip &amp;lt;SERVER_ID&amp;gt; &amp;lt;IP&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Removing floating IP from server&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>openstack server show &amp;lt;SERVER_ID&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Deleting server&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>openstack server remove floating ip &amp;lt;SERVER_ID&amp;gt; &amp;lt;IP&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>openstack server delete &amp;lt;SERVER_ID&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Deleting floating IP&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>openstack floating ip delete &amp;lt;IP&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;a href="https://docs.openstack.org/mitaka/install-guide-obs/launch-instance-provider.html">OpenStack: launch an instance on the provider network&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.openstack.org/ocata/user-guide/cli-manage-ip-addresses.html">OpenStack: Managing IP addresses&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="using-cloud-init">Using cloud-init&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>openstack server create --flavor m3.medium &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --image d0a89aa8-9644-408d-a023-4dcc1148ca01 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --user-data userdata.txt --key-name My_Key server01.example.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;a href="https://docs.openstack.org/nova/latest/user/user-data.html">OpenStack: providing user data (cloud-init)&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://cloudinit.readthedocs.io/en/latest/index.html">cloudinit documentation&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="shell-script-data-as-user-data">Shell script data as user data&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">#!/bin/sh
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>adduser --disabled-password --gecos &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span> clouduser
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="cloud-config-data-as-user-data">cloud-config data as user data&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">#cloud-config&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">hostname&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">mynode&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">fqdn&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">mynode.example.com&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">manage_etc_hosts&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;a href="https://cloudinit.readthedocs.io/en/latest/topics/examples.html#yaml-examples">Official cloud-config examples&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.zetta.io/en/help/articles-tutorials/customizing-instance-deployment-cloud-init/">Cloud-init example&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="creating-a-snapshot-image-from-running-vm">Creating a snapshot image from running VM&lt;/h3>
&lt;p>You can create a new image from a snapshot of an existing VM that will allow you
to easily recover a previous version of your VM or to use it as a template to
clone a given VM.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>openstack server image create &amp;lt;your VM&amp;gt; --name &amp;lt;name of the snapshot&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Once the snapshot is ready &lt;code>openstack image show &amp;lt;name of the snapshot&amp;gt;&lt;/code> will
give your the details you can use it as any other image at the provider:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>openstack server create --flavor &amp;lt;flavor&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --image &amp;lt;name of the snapshot&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> &amp;lt;name of the new VM&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can override files in the snapshot if needed, e.g. changing the SSH keys:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>openstack server create --flavor &amp;lt;flavor&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --image &amp;lt;name of the snapshot&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --file /home/ubuntu/.ssh/authorized_keys&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>my_new_keys &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> &amp;lt;name of the new VM&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="terraform">Terraform&lt;/h2>
&lt;p>&lt;a href="https://terraform.io/">Terraform&lt;/a> supports EGI Cloud OpenStack providers by
using valid access tokens for Keystone. For using this, just configure your
provider as usual in Terraform, but do not include user/password information.
Instead, use the &lt;a href="../../../getting-started/cli">FedCloud client&lt;/a> client to configure
environment variables as follows:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># export OS_AUTH_URL and OS_PROJECT_ID with&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#204a87">eval&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>fedcloud site show-project-id --site &amp;lt;NAME_OF_SITE&amp;gt; --vo &amp;lt;NAME_OF_VO&amp;gt;&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># now get a valid token&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">OS_TOKEN&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>fedcloud openstack --site &amp;lt;NAME_OF_SITE&amp;gt; --vo &amp;lt;NAME_OF_VO&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> token issue -c id -f value&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Here is a sample &lt;code>main.tf&lt;/code> configuration file for Terraform:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-terraform" data-lang="terraform">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">terraform&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">required_providers&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#c4a000">openstack&lt;/span> = &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#c4a000">source&lt;/span> = &lt;span style="color:#4e9a06">&amp;#34;terraform-provider-openstack/openstack&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#8f5902;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Create a server
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">resource&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;openstack_compute_instance_v2&amp;#34;&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;vm&amp;#34;&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#c4a000">name&lt;/span> = &lt;span style="color:#4e9a06">&amp;#34;testvm&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#c4a000">image_id&lt;/span> = &lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#c4a000">flavor_id&lt;/span> = &lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#c4a000">security_groups&lt;/span> = &lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;default&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Initialize Terraform with:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ terraform init
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Now check the deployment plan:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ terraform plan
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>If you are happy with the plan, perform the deployment with:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ terraform apply
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>For more information on how to use Terraform with OpenStack please check the
&lt;a href="https://registry.terraform.io/providers/terraform-provider-openstack/openstack/">OpenStack provider documentation&lt;/a>.&lt;/p>
&lt;h2 id="libcloud">libcloud&lt;/h2>
&lt;p>&lt;a href="https://libcloud.apache.org/index.html">Apache libcloud&lt;/a> supports OpenStack and
EGI authentication mechanisms by setting the &lt;code>ex_force_auth_version&lt;/code> to
&lt;code>3.x_oidc_access_token&lt;/code> or &lt;code>2.0_voms&lt;/code> respectively. Check the
&lt;a href="https://libcloud.readthedocs.io/en/latest/compute/drivers/openstack.html#connecting-to-the-openstack-installation">libcloud docs on connecting to OpenStack&lt;/a>
for details. See below two code samples for using them&lt;/p>
&lt;h3 id="openid-connect">OpenID Connect&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">import&lt;/span> &lt;span style="color:#000">requests&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">from&lt;/span> &lt;span style="color:#000">libcloud.compute.types&lt;/span> &lt;span style="color:#204a87;font-weight:bold">import&lt;/span> &lt;span style="color:#000">Provider&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">from&lt;/span> &lt;span style="color:#000">libcloud.compute.providers&lt;/span> &lt;span style="color:#204a87;font-weight:bold">import&lt;/span> &lt;span style="color:#000">get_driver&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">refresh_data&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#39;client_id&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;&amp;lt;your client_id&amp;gt;&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#39;client_secret&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;&amp;lt;your client_secret&amp;gt;&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#39;grant_type&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;refresh_token&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#39;refresh_token&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;&amp;lt;your refresh_token&amp;gt;&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#39;scope&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;openid email profile&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">r&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">requests&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">post&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;https://aai.egi.eu/auth/realms/egi/protocol/openid-connect/token&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">auth&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">client_id&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">client_secret&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">data&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000">refresh_data&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">access_token&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">r&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">json&lt;/span>&lt;span style="color:#000;font-weight:bold">()[&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;access_token&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">OpenStack&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">get_driver&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">Provider&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">OPENSTACK&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># first parameter is the identity provider: &amp;#34;egi.eu&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Second parameter is the access_token&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># The protocol &amp;#39;openid&amp;#39; is specified in ex_tenant_name&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># and tenant/project cannot be selected :(&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">driver&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">OpenStack&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;egi.eu&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">access_token&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">ex_tenant_name&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;openid&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">ex_force_auth_url&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;https://keystone_url:5000&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">ex_force_auth_version&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;3.x_oidc_access_token&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="voms">VOMS&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">from&lt;/span> &lt;span style="color:#000">libcloud.compute.types&lt;/span> &lt;span style="color:#204a87;font-weight:bold">import&lt;/span> &lt;span style="color:#000">Provider&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">from&lt;/span> &lt;span style="color:#000">libcloud.compute.providers&lt;/span> &lt;span style="color:#204a87;font-weight:bold">import&lt;/span> &lt;span style="color:#000">get_driver&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">OpenStack&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">get_driver&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">Provider&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">OPENSTACK&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># assume your proxy is available at /tmp/x509up_u1000&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># you can obtain a proxy with the voms-proxy-init command&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># no need for username&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">driver&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">OpenStack&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#204a87;font-weight:bold">None&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;/tmp/x509up_u1000&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">ex_tenant_name&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;EGI_FCTF&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">ex_force_auth_url&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;https://sbgcloud.in2p3.fr:5000&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">ex_force_auth_version&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;2.0_voms&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Users: Authentication and Authorisation</title><link>/users/compute/cloud-compute/auth/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/users/compute/cloud-compute/auth/</guid><description>
&lt;h2 id="oidc-auth-using-check-in">Authentication&lt;/h2>
&lt;p>&lt;a href="http://openid.net/connect/">OpenID Connect&lt;/a> is the main authentication protocol
used on the EGI Cloud. It replaces the legacy VOMS-based authentication for all
OpenStack providers.&lt;/p>
&lt;p>Authentication to web based services (like the AppDB) will redirect you to the
EGI Check-in authentication page. Just select your institution or social login
and follow the regular authentication process.&lt;/p>
&lt;p>Access to APIs or via command-line interfaces (CLI) requires the use of OAuth2.0
tokens and interaction with the OpenStack Keystone
&lt;a href="https://developer.openstack.org/api-ref/identity/v3-ext/index.html#os-federation-api">OS-FEDERATION API&lt;/a>.
The process for authentication is as follows:&lt;/p>
&lt;ol>
&lt;li>Obtain a valid OAuth2.0 access token from Check-in. Access tokens are
short-lived credentials that can be obtained by recognised Check-in clients
once a user has been authenticated.&lt;/li>
&lt;li>Interchange the Check-in access token for a valid unscoped Keystone token.&lt;/li>
&lt;li>Discover available projects from Keystone using the unscoped token.&lt;/li>
&lt;li>Use the unscoped Keystone token to get a scoped token for a valid project.
Scoped tokens will allow the user to perform operations on the provider.&lt;/li>
&lt;/ol>
&lt;h2 id="authorisation">Authorisation&lt;/h2>
&lt;p>Cloud Compute service is accessed through &lt;strong>Virtual Organisations (VOs)&lt;/strong>. Users
that are members of a VO will have access to the providers supporting that VO:
they will be able to manage VMs, block storage and object storage available to
the VO. Resources (VMs and storage) are shared across all members of the VO,
please do not interfere with the VMs of other users if you are not entitled to
do so (specially do not delete them).&lt;/p>
&lt;p>Some users roles have special consideration in VOs:&lt;/p>
&lt;ul>
&lt;li>Users with VO Manager, VO Deputy or VO Expert Role have extra privileges in
the AppDB for managing the Virtual Appliances to be available at every
provider. Check the &lt;a href="../images">Virtual Machine Image Management documentation&lt;/a>
for more information.&lt;/li>
&lt;/ul>
&lt;h3 id="pilot-vo">Pilot VO&lt;/h3>
&lt;p>The
&lt;a href="https://operations-portal.egi.eu/vo/view/voname/vo.access.egi.eu">vo.access.egi.eu Virtual Organisation&lt;/a>
serves as a test ground for users to try the Cloud Compute service and to
prototype and validate applications. It can be used for up to 6 month by any new
user.&lt;/p>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Warning&lt;/h4>
&lt;ul>
&lt;li>After the 6-month long membership in the vo.access.egi.eu VO, you will need to
move to a production VO, or establish a new VO.&lt;/li>
&lt;li>The resources are not guaranteed and may be removed without notice by
providers. &lt;strong>Back-up frequently to avoid losing your work!&lt;/strong>&lt;/li>
&lt;/ul>
&lt;/div>
&lt;p>For joining this VO, please click on the
&lt;a href="https://aai.egi.eu/registry/co_petitions/start/coef:240">enrollment URL&lt;/a>
using your &lt;a href="../../../aai/check-in/">EGI account&lt;/a>.&lt;/p>
&lt;h3 id="other-vos">Other VOs&lt;/h3>
&lt;p>Pre-existing VOs of EGI can be also used on IaaS cloud providers. Consult with
your VO manager or browse the existing VOs at the
&lt;a href="https://operations-portal.egi.eu/vo/a/list">EGI Operations Portal&lt;/a>.&lt;/p>
&lt;h2 id="check-in-and-access-tokens">Check-in and access tokens&lt;/h2>
&lt;p>Access tokens can be obtained via several mechanisms, usually involving the use
of a web server and a browser. Command-line clients/APIs without access to a
browser or interactive prompt for user authentication can use refresh tokens. A
refresh token is a special token that is used to generate additional access
tokens. This allows you to have short-lived access tokens without having to
collect credentials every single time one expires. You can request this token
alongside the access and/or ID tokens as part of a user&amp;rsquo;s initial authentication
flow.&lt;/p>
&lt;p>If you need to obtain these kind of tokens for using it in command-line tools or APIs,
you can easily do so with the EGI Check-in Token Portal. You can access the
&lt;a href="https://aai.egi.eu/token">EGI Check-in Token Portal&lt;/a> and click on
'Authorise' to log in with your Check-in credentials to obtain:&lt;/p>
&lt;ul>
&lt;li>a client ID (&lt;code>token-portal&lt;/code>)&lt;/li>
&lt;li>a refresh token&lt;/li>
&lt;/ul>
&lt;div class="alert alert-danger" role="alert">
&lt;h4 class="alert-heading">Refresh tokens&lt;/h4>
Refresh tokens should be treated with care! This is a secret that can be used to
impersonate you in the infrastructure. It is recommended not to store them in
plain text.
&lt;/div>
&lt;p>Alternatively, you can use the
&lt;a href="https://indigo-dc.gitbook.io/oidc-agent/user/oidc-gen/provider/egi">oidc-agent&lt;/a>
tool that is able to manage your tokens locally, or the
&lt;a href="https://fedcloudclient.fedcloud.eu/">fedcloud&lt;/a> client executed inside
&lt;a href="../../../dev-env/notebooks/integration/#fedcloud-client">EGI Notebooks&lt;/a>.&lt;/p>
&lt;h3 id="discovering-projects-in-keystone">Discovering projects in Keystone&lt;/h3>
&lt;p>The &lt;em>access token&lt;/em> will provide you access to a cloud provider, but you may have
access to several different projects within that provider (a project can be
considered equivalent to a VO allocation). In order to discover which projects
are available you can do that using the Keystone API.&lt;/p>
&lt;p>You can use the &lt;a href="https://fedcloudclient.fedcloud.eu/">fedcloud&lt;/a> client to
simplify the discovery of projects.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Get a list of sites (also available in [AppDB](https://appdb.egi.eu))&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fedcloud site list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Get list of projects that you are allowed to access&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># You can either specify the name of the account in your oidc-agent configuration&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># or directly a valid access token&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fedcloud endpoint projects --site&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;name of the site&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--oidc-agent-account &amp;lt;account name&amp;gt;&lt;span style="color:#000;font-weight:bold">|&lt;/span>--oidc-access-token &amp;lt;access token&amp;gt;&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># You can also use environment variables for the configuration&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">EGI_SITE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;name of the site&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">OIDC_ACCESS_TOKEN&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;your access token&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fedcloud endpoint projects
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># or with oidc-agent&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">OIDC_AGENT_ACCOUNT&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;account name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fedcloud enpoint projects
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="using-the-openstack-api">Using the OpenStack API&lt;/h3>
&lt;p>Once you know which project to use, you can use your regular openstack cli
commands for performing actual operations in the provider:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>fedcloud openstack image list --site &amp;lt;NAME_OF_SITE&amp;gt; --vo &amp;lt;NAME_OF_VO&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>For third-party tools that can use token based authentication in OpenStack, use
the following command:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">OS_TOKEN&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>fedcloud openstack --site &amp;lt;NAME_OF_SITE&amp;gt; --vo &amp;lt;NAME_OF_VO&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> token issue -c id -f value&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="legacy-x509-aai">Legacy X.509 AAI&lt;/h2>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Warning&lt;/h4>
OpenID Connect is the preferred federated identity technology on EGI Cloud. Use
of X.509 certificates should be limited to legacy applications.
&lt;/div>
&lt;p>&lt;a href="https://italiangrid.github.io/voms/index.html">VOMS&lt;/a> uses X.509 proxies
extended with VO information for authentication and authorisation on the
providers. You can learn about X.509 certificates and VOMS in the
&lt;a href="../../../aai/check-in/vos/voms">Check-in documentation&lt;/a>.&lt;/p>
&lt;h3 id="voms-configuration">VOMS configuration&lt;/h3>
&lt;p>Valid configuration for &lt;code>fedcloud.egi.eu&lt;/code> is available on the
&lt;a href="https://appdb.egi.eu/store/vappliance/egi.fedcloud.clients">FedCloud client VM&lt;/a>
as generated by the
&lt;a href="https://raw.githubusercontent.com/EGI-FCTF/fedcloud-userinterface/master/fedcloud-ui.sh">fedcloud-ui installation script&lt;/a>.&lt;/p>
&lt;p>VOMS client expects your certificate and private key to be available at
&lt;code>$HOME/.globus/usercert.pem&lt;/code> and &lt;code>$HOME/.globus/userkey.pem&lt;/code> respectively.&lt;/p>
&lt;h3 id="access-the-providers">Access the providers&lt;/h3>
&lt;p>VOMS authentication differs from one provider to another depending on the
technology used. There are 3 different cases handled automatically by the
&lt;code>rOCCI-cli&lt;/code>. For accessing native OpenStack sites there are two different
plugins available for Keystone that are installed with a single library:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>pip install openstack-voms-auth-type
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>For Keystone-VOMS based installations (Keystone URL ending on &lt;code>/v2.0&lt;/code>), just
define the location of your proxy and &lt;code>v2voms&lt;/code> as authorisation plugin:&lt;/p>
&lt;!-- markdownlint-disable line-length -->
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>openstack --os-auth-url https://&amp;lt;keystone-url&amp;gt;/v2.0 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --os-auth-type v2voms --os-x509-user-proxy /tmp/x509up_u1000 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> token issue
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> Field &lt;span style="color:#000;font-weight:bold">|&lt;/span> Value &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> expires &lt;span style="color:#000;font-weight:bold">|&lt;/span> 2019-02-04T12:41:25+0000 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> id &lt;span style="color:#000;font-weight:bold">|&lt;/span> gAAAAABcWCTlMoz6Jx9IHF5hj-ZOn-CI17CfX81FTn7yy0ZJ54jkza7QNoQTRU5-KRJkphmes55bcoSaaBRnE3g2clFgY-MR2GVUJZRkCmj9TXsLZ-hVBWXQNENiX9XxUwnavj7KqDn4b9B1K22ijTrjdDVkcdpvMw &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> user_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> 9310054c2b6f4fd28789ee08c2351221 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;!-- markdownlint-enable line-length -->
&lt;p>For those Keystone installations supporting only &lt;code>v3&lt;/code>, specify &lt;code>v3voms&lt;/code> as
authorisation plugin, &lt;code>egi.eu&lt;/code> as identity provider, &lt;code>mapped&lt;/code> as protocol, and
the location of your proxy:&lt;/p>
&lt;!-- markdownlint-disable line-length -->
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>openstack --os-auth-url https://&amp;lt;keystone url&amp;gt;/v3 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --os-auth-type v3voms --os-x509-user-proxy /tmp/x509up_u1000 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --os-identity-provider egi.eu --os-protocol mapped &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> token issue
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> Field &lt;span style="color:#000;font-weight:bold">|&lt;/span> Value &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> expires &lt;span style="color:#000;font-weight:bold">|&lt;/span> 2019-02-04T12:45:32+0000 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> id &lt;span style="color:#000;font-weight:bold">|&lt;/span> gAAAAABcWCXcXGUDpHUYnI1IDLW3MnEpDzivw_OPaau8DQDYxA7gK9XsmOqZh1pL5Uqqs8aM-tHowdJQnJURww2-UhmQVqk5PxbjdnvLeqtXPYURCLaSsbmhkQg6kB311c_ZA1jfgdT-pG6fZz3toeH66SEFX-H0bThSUy0KFLhcZVkrZIbYgTsAOIzFkTfLjOgTw_tNChS8 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> user_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> 50fa8516b2554daeae652619ba9ebf96 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+---------+----------------------------------------------------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;!-- markdownlint-enable line-length --></description></item><item><title>Users: Virtual Machine Images</title><link>/users/compute/cloud-compute/images/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/users/compute/cloud-compute/images/</guid><description>
&lt;p>Users of the EGI Cloud create Virtual Machines (VMs) on the providers. Those VMs
are started from images: templates for the root volume of the running instances,
i.e. operating system and applications available initially on a VM. The AppDB
collects the Virtual Machine Images available on the service as Virtual
Appliances (VA).&lt;/p>
&lt;p>Any user can register new Virtual Appliances at the AppDB, these are then
managed by special VO members that curate which appliances are available to
their VO.&lt;/p>
&lt;h2 id="appdb-cloud-marketplace">AppDB Cloud Marketplace&lt;/h2>
&lt;p>&lt;img src="appdb_cloud.png" alt="AppDB Cloud Marketplace">&lt;/p>
&lt;p>The &lt;a href="https://appdb.egi.eu">AppDB&lt;/a> is a browsable catalogue of Virtual Appliances
that users can start at the providers. You can find below a set of reference
guides for the catalogue:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://wiki.appdb.egi.eu/main:faq:how_to_register_a_virtual_appliance">How to register a VA?&lt;/a>:
any registered user can register VAs in AppDB for anyone to download or for
making them available at the EGI Cloud providers once a VO adds it to the
&lt;em>VO-wide image list&lt;/em>.&lt;/li>
&lt;li>Once registered, VAs can be managed as described in the
&lt;a href="https://wiki.appdb.egi.eu/main:guides:guide_for_managing_virtual_appliance_versions_using_the_portal">VA management guide&lt;/a>.&lt;/li>
&lt;li>VO managers select VAs to be available at the providers following the
&lt;a href="https://wiki.appdb.egi.eu/main:guides:manage_vo-wide_image_lists">VO-wide image list management&lt;/a>.&lt;/li>
&lt;/ul>
&lt;p>Check the full list of
&lt;a href="https://wiki.appdb.egi.eu/main:guides#cloud_marketplace">Cloud marketplace guides&lt;/a>
and
&lt;a href="https://wiki.appdb.egi.eu/main:faq#cloud_marketplace">Cloud marketplace FAQ&lt;/a>
for more information about the AppDB features.&lt;/p>
&lt;h2 id="custom-images">Custom images&lt;/h2>
&lt;p>Packaging your application in a custom VM image is a suggested solution in one
of the following cases:&lt;/p>
&lt;ul>
&lt;li>your particular OS flavor is not available at AppDB;&lt;/li>
&lt;li>installation of your application is very complex and time-consuming for being
performed during contextualization; or&lt;/li>
&lt;li>you want to reduce the number of 'moving-parts' of your software stack and
follow an &lt;em>immutable infrastructure&lt;/em> approach for deploying your application.&lt;/li>
&lt;/ul>
&lt;p>Custom VM images can be crafted in different ways. The two main possibilities
are:&lt;/p>
&lt;ul>
&lt;li>start from scratch, creating a virtual machine, installing an OS and the
software on top of it, then taking the virtual machine OS disk as custom
image; or&lt;/li>
&lt;li>dump an existing disk from a running VM or physical server and modify it, if
needed, to run on a virtualisation platform.&lt;/li>
&lt;/ul>
&lt;p>In this guide we will focus on the first option, because it tends to produce
cleaner images and reduces the risks of hardware conflicts. Snapshotting may be
also restricted by the cloud providers or by security policies.&lt;/p>
&lt;p>Advantages:&lt;/p>
&lt;ul>
&lt;li>Possibility to build the virtual disk directly from a legacy machine, dumping
the contents of the disk.&lt;/li>
&lt;li>Possibility to speed-up the deployment for applications with complex and big
installation packages. This because you do not need to install the application
at startup, but the application is already included in the machine.&lt;/li>
&lt;/ul>
&lt;p>Disadvantages:&lt;/p>
&lt;ul>
&lt;li>Building a virtual disk directly from a legacy machine poses a set of
compatibility issues with hardware drivers, which usually differs from a
virtual and physical environment and even between different virtual
environments.&lt;/li>
&lt;li>You need to keep your machine updated. Outdated VM disk images may take a long
time to startup due to the need to download and install the latest OS updates.&lt;/li>
&lt;li>If you are using special drivers or you are not packaging correctly the disk,
your custom VM image may not run (or run slowly) on different cloud providers
based on different virtualisation technologies.&lt;/li>
&lt;li>VM images on public clouds are sometimes public, thus be aware of installing
proprietary software on custom images, since other users may be able to run
the image or download it.&lt;/li>
&lt;li>In general, the effort to implement this solution is higher than the basic
contextualization.&lt;/li>
&lt;/ul>
&lt;h3 id="image-size-and-layout">Image size and layout&lt;/h3>
&lt;p>The larger the VM image, the longer it will take to be distributed to the
providers and the longer it will take to be started on the infrastructure. As a
general rule, always try to make images as smaller as possible following these
guidelines:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>DO NOT&lt;/strong> include (big) data in your image. There are other mechanisms for
accessing data from your VM (block/object storage,
&lt;a href="https://www.gridpp.ac.uk/wiki/RALnonLHCCVMFS">CVMFS&lt;/a>)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>DO NOT&lt;/strong> include (big) empty space or swap in your image. Extra space for
your computation or swap can be added with block storage once the VM is booted
or using VM flavors that have extra disk allocated for your VM.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>DO NOT&lt;/strong> install un-needed software. Tools like GUI are of no-use in most
cases since you will have no access to the graphical console of the VM.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>DO&lt;/strong> adjust the size of the images as much as possible. As stated above,
empty space can be allocated on runtime easily.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>DO&lt;/strong> use compressed image formats, like qcow2 or vmdk (used in OVA) to
minimize the size of the image. Preferred format for images in EGI is OVA as
it's standardised.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>DO&lt;/strong> fill with &lt;code>0&lt;/code> the empty disk space of your image so when compressed it
can be significantly reduced, e.g. using:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>dd &lt;span style="color:#204a87;font-weight:bold">if&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>/dev/zero &lt;span style="color:#000">of&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>/bigemptyfile &lt;span style="color:#000">bs&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>4096k
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rm -rf /bigemptyfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>DO&lt;/strong> use a single partition (no /boot, no swap) for the disk layout and
avoid LVM. This will allow the cloud provider to easily resize your partition
when instantiated and to modify files in it if needed.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="contextualization-and-credentials">Contextualization and credentials&lt;/h3>
&lt;div class="alert alert-danger" role="alert">
&lt;h4 class="alert-heading">Danger&lt;/h4>
&lt;strong>Do NOT include any credentials on your images&lt;/strong>.
&lt;/div>
&lt;p>You should never include any kind of credentials on your images, instead you
should use contextualization.
&lt;a href="https://cloudinit.readthedocs.io/en/latest/">cloud-init&lt;/a> is a tool that will
simplify the contextualization process for you. This is widely available as
packages in major OS distributions and is supported by all the providers of the
EGI Cloud and most of the commercial providers.&lt;/p>
&lt;p>&lt;a href="https://cloudinit.readthedocs.io/en/latest/">cloud-init&lt;/a> documentation contains
detailed examples on how to create users, run scripts, install packages and
several other actions supported by the tool.&lt;/p>
&lt;p>For complex setups, especially when applications involve multiple VMs it may be
useful to use cloud-init to bootstrap some
&lt;a href="https://en.wikipedia.org/wiki/Comparison_of_open-source_configuration_management_software">Configuration Management Software&lt;/a>
that will manage the configuration of the VMs during runtime.&lt;/p>
&lt;h3 id="security">Security&lt;/h3>
&lt;ul>
&lt;li>&lt;strong>Always remove all default passwords and accounts from your VM.&lt;/strong>&lt;/li>
&lt;li>Disable all services unless necessary for the intended tasks.&lt;/li>
&lt;li>Make sure the firewall configuration (iptables for Linux, also on IPv6) is
minimally open.&lt;/li>
&lt;li>Put no shared credentials (passwords) in any image.&lt;/li>
&lt;/ul>
&lt;p>You should also follow the best practice guides for each service that's exposed
to the outside world. See for example guides for:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://wiki.centos.org/HowTos/Network/SecuringSSH">ssh&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.owasp.org/index.php/Securing_tomcat">tomcat&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>See also
&lt;a href="https://aws.amazon.com/whitepapers/aws-security-best-practices/">AWS security Best Practices&lt;/a>&lt;/p>
&lt;h3 id="tools">Tools&lt;/h3>
&lt;p>Whenever possible, automate the process of creating your images. This will allow
you to:&lt;/p>
&lt;ul>
&lt;li>Get reproducible results&lt;/li>
&lt;li>Avoid tedious manual installation steps&lt;/li>
&lt;li>Quickly produce updated versions of your images&lt;/li>
&lt;/ul>
&lt;p>EGI uses &lt;a href="https://packer.io">packer&lt;/a> as a tool for automating the creation of
our base images. This tool can use &lt;a href="https://www.virtualbox.org/">VirtualBox&lt;/a> as
a hypervisor for the creation of the images and guarantees identical results
under different platforms and providers.&lt;/p>
&lt;p>Check out the
&lt;a href="https://github.com/EGI-Federation/fedcloud-vmi-templates">fedcloud-vmi-templates GitHub repository&lt;/a>
for all the &lt;code>packer&lt;/code> recipes used to build our images, re-use them as needed
for your images.&lt;/p></description></item><item><title>Users: GPUs</title><link>/users/compute/cloud-compute/gpgpu/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/users/compute/cloud-compute/gpgpu/</guid><description>
&lt;h2 id="gpu-resources-on-egi-cloud">GPU resources on EGI Cloud&lt;/h2>
&lt;p>GPUs resources are available on selected providers of the EGI Cloud. These are
available as specific &lt;strong>flavours&lt;/strong> that when used to instantiate a Virtual
Machine will make the hardware available to the user.&lt;/p>
&lt;p>The table below summarises the available options:&lt;/p>
&lt;!-- markdownlint-disable line-length -->
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Site&lt;/th>
&lt;th>VM configuration options&lt;/th>
&lt;th>Flavors&lt;/th>
&lt;th>Supported VOs with GPUs&lt;/th>
&lt;th>Access conditions&lt;/th>
&lt;th>More information&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>IISAS-FedCloud&lt;/td>
&lt;td>up to 8 NVIDIA Tesla K20m&lt;/td>
&lt;td>g1.c08r30-K20m, g1.c16r60-2xK20m&lt;/td>
&lt;td>vo.access.egi.eu, eosc-synergy.eu, enmr.eu, training.egi.eu&lt;/td>
&lt;td>Sponsored access for limited testing, conditions to be negotiated for long-term usage&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>IFCA-LCG2&lt;/td>
&lt;td>up to 80 NVIDIA T4, up to 20 NVIDIA V100&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>Pay-per-use&lt;/td>
&lt;td>&lt;a href="https://confluence.ifca.es/display/IC/Cloud+Compute+Flavors">IFCA-LCG2 Documentation&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>CESNET-MCC&lt;/td>
&lt;td>up to 2 NVIDIA Tesla T4, up to 4 NVIDIA A40, up to 2 GeForce RTX 1080/2080 (experimental use only)&lt;/td>
&lt;td>hpc.8core-64ram-nvidia-1080-glados, hpc.19core-176ram-nvidia-1080-glados, hpc.19core-176ram-nvidia-2080-glados, hpc.32core-256ram-nvidia-t4-single-gpu, hpc.64core-238ram-nvidia-t4, hpc.64core-512ram-nvidia-t4, meta-hdm.16core-120ram-nvidia-a40, meta-hdm.64core-485ram-nvidia-a40-quad&lt;/td>
&lt;td>vo.clarin.eu, biomed, eosc-synergy.eu, peachnote.com, cryoem.instruct-eric.eu, fusion, icecube, vo.carouseldancing.org, vo.pangeo.eu, vo.neanias.eu, umsa.cerit-sc.cz, vip, vo.notebooks.egi.eu, vo.emphasisproject.eu, vo.inactive-sarscov2.eu&lt;/td>
&lt;td>Sponsored, conditions to be negotiated&lt;/td>
&lt;td>&lt;a href="https://docs.cloud.muni.cz/cloud/gpus/">CESNET-MCC Documentation&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>IN2P3-IRES&lt;/td>
&lt;td>up to 1 NVIDIA Tesla T4 per VM, up to 1 NVIDIA A40 per VM, up to 4 GeForce RTX 2080 per VM (experimental use only)&lt;/td>
&lt;td>g1.xlarge-4xmem, g2.xlarge-4xmem, g4.xlarge-4xmem&lt;/td>
&lt;td>biomed, vo.emphasisproject.eu, vo.france-grilles.fr&lt;/td>
&lt;td>Sponsored, conditions to be negotiated&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;!-- markdownlint-enable line-length -->
&lt;h2 id="access-to-gpu-resources-on-egi-cloud">Access to GPU resources on EGI Cloud&lt;/h2>
&lt;p>Check whether you belong to one of the supported
&lt;a href="https://confluence.egi.eu/display/EGIG/Virtual+organisation">Virtual Organisations (VOs)&lt;/a>.
If you are not sure what VO to join, request access to the pilot VO
&lt;a href="https://operations-portal.egi.eu/vo/view/voname/vo.access.egi.eu">vo.access.egi.eu&lt;/a>
by visiting the &lt;a href="https://aai.egi.eu/registry/co_petitions/start/coef:240">enrollment URL&lt;/a>
with your Check-In account. More information is available in the
&lt;a href="../../../aai//check-in/joining-virtual-organisation">Check-in&lt;/a> section.&lt;/p>
&lt;p>GPUs sites can be accessed in different ways: via site-specific dashboards and
endpoints or via common federated-cloud services like the OpenStack Horizon
dashboards, &lt;a href="../monitor">VMOps Dashboard&lt;/a>, or a &lt;a href="../automate">cloud orchestrator&lt;/a>.&lt;/p>
&lt;p>It is also possible to use the
&lt;a href="../../../getting-started/cli">FedCloud Client&lt;/a> for command-line access. Below is
an example on how to use the &lt;code>fedcloud&lt;/code> command to show the GPU properties of
the available GPU flavors on all sites for the specific VO in the command:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>fedcloud openstack flavor list --long --site ALL_SITES --vo vo.access.egi.eu --json-output &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> jq -r &lt;span style="color:#4e9a06">&amp;#39;map(select(.&amp;#34;Error code&amp;#34; == 0)) |
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> map(.Result = (.Result| map(select(.Properties.&amp;#34;Accelerator:Type&amp;#34; == &amp;#34;GPU&amp;#34;)))) |
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> map(select(.Result | length &amp;gt; 0))&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Site-specific dashboards and endpoints are described in the following table:&lt;/p>
&lt;!-- markdownlint-disable line-length -->
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Site&lt;/th>
&lt;th>Openstack Horizon dashboard&lt;/th>
&lt;th>Keystone endpoint&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>IISAS-FedCloud&lt;/td>
&lt;td>&lt;code>https://cloud.ui.savba.sk&lt;/code>&lt;/td>
&lt;td>&lt;code>https://cloud.ui.savba.sk:5000/v3/&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>IFCA-LCG2&lt;/td>
&lt;td>&lt;code>https://portal.cloud.ifca.es&lt;/code>&lt;/td>
&lt;td>&lt;code>https://api.cloud.ifca.es:5000/&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>CESNET-MCC&lt;/td>
&lt;td>&lt;code>https://dashboard.cloud.muni.cz&lt;/code>&lt;/td>
&lt;td>&lt;code>https://identity.cloud.muni.cz/&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;!-- markdownlint-enable line-length -->
&lt;p>A VM image with pre-installed NVIDIA driver and Docker is available at
&lt;a href="https://appdb.egi.eu/store/vappliance/nvidia.docker.centos.7">AppDB&lt;/a>. Some VOs
(vo.access.egi.eu, eosc-synergy.eu) have the image included in the VO image list.&lt;/p></description></item><item><title>Users: Dynamic DNS</title><link>/users/compute/cloud-compute/dynamic-dns/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/users/compute/cloud-compute/dynamic-dns/</guid><description>
&lt;p>The Dynamic DNS service provides a unified, federation-wide Dynamic DNS support
for VMs in EGI infrastructure. Users can register their chosen meaningful and
memorable DNS hostnames in given domains (e.g. &lt;code>my-server.vo.fedcloud.eu&lt;/code>) and
assign to public IPs of their servers.&lt;/p>
&lt;p>By using Dynamic DNS, users can host services in EGI Cloud with their
meaningful service names, can freely move VMs from sites to sites without
modifying server/client configurations (federated approach), can request valid
server certificates in advance (critical for security) and many other
advantages.&lt;/p>
&lt;p>A short demonstration video is available at
&lt;a href="https://www.youtube.com/watch?v=dk4VYT2VFmU">fedcloud.eu YouTube channel&lt;/a>.&lt;/p>
&lt;h2 id="dynamic-dns-gui-portal">Dynamic DNS GUI portal&lt;/h2>
&lt;p>The Dynamic DNS offers a &lt;a href="https://nsupdate.fedcloud.eu">web GUI portal&lt;/a> where
users can login using their Check-in credentials. For doing so, click on the
&lt;em>Login&lt;/em> link (top left) and then click on the &lt;em>egi&lt;/em> button.&lt;/p>
&lt;p>Once logged in, you will be presented with the following page:&lt;/p>
&lt;p>&lt;img src="dynamic-dns-portal.png" alt="Dynamic DNS front page">&lt;/p>
&lt;p>To register a new DNS host name:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>click on &lt;em>Overview&lt;/em> and then on &lt;em>Add Host&lt;/em>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Type in the hostname you&amp;rsquo;d like to register and select the domain to use.&lt;/p>
&lt;p>&lt;img src="add-host.png" alt="Add host">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>The portal will then show you a secret than can be used for updating
the host ip whenever needed. Note it down so you can use it later.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>From the VM you&amp;rsquo;d like to assign the name to, run a command like follows:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>curl &lt;span style="color:#4e9a06">&amp;#34;https://&amp;lt;hostname&amp;gt;:&amp;lt;secret&amp;gt;@nsupdate.fedcloud.eu/nic/update&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>where &lt;code>&amp;lt;hostname&amp;gt;&lt;/code> is the full hostname generated before, e.g.
&lt;code>myserver.fedcloud-tf.fedcloud.eu&lt;/code> and &lt;code>&amp;lt;secret&amp;gt;&lt;/code> is the secret generated
in the previous step. You can add that as a boot command in your &lt;code>cloud-init&lt;/code>
configuration:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">#cloud-config&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">runcmd&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">curl, &amp;#34;https://&amp;lt;hostname&amp;gt;:&amp;lt;secret&amp;gt;@nsupdate.fedcloud.eu/nic/update&amp;#34; ]&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>You can also manually edit your registered hostnames in the &lt;em>Overview&lt;/em> menu
by clicking on the hostname you&amp;rsquo;d like to manage&lt;/p>
&lt;/li>
&lt;/ol>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Hostnames/IP addresses are not expired so no need to refresh IP addresses if
no changes, it is enough to run once. You can add the following command
&lt;code>curl https://HOSTNAME:SECRET@nsupdate.fedcloud.eu/nic/update&lt;/code> to cloud-init
as described above to assign hostname automatically at VM start&lt;/p>
&lt;/li>
&lt;li>
&lt;p>DNS server set Time-to-Live (max time for caching DNS records) to 1 min for
dynamic DNS, but MS Windows seems to not respect that. You can clear DNS cache
in Windows with &lt;code>ipconfig /flushdns&lt;/code> command with Administrator account&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/div>
&lt;h2 id="api">API&lt;/h2>
&lt;p>Dynamic DNS update server uses dydns2 protocol, compatible with commercial
providers like &lt;a href="https://help.dyn.com/remote-access-api/perform-update/">dyn.com&lt;/a>,
and &lt;a href="http://www.noip.com/integrate/request">noip.com&lt;/a>. The API is specified as
follows:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-plain" data-lang="plain">&lt;span style="display:flex;">&lt;span>GET /nic/update?hostname=yourhostname&amp;amp;myip=ipaddress
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Host: nsupdate.fedcloud.eu
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Authorization: Basic base64-encoded-auth-string
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>User-Agent:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>where:&lt;/p>
&lt;ul>
&lt;li>&lt;code>base64-encoded-auth-string&lt;/code>: base64 encoding of username:password&lt;/li>
&lt;li>&lt;code>username&lt;/code>: your hostname&lt;/li>
&lt;li>&lt;code>password&lt;/code>: your host secret&lt;/li>
&lt;li>&lt;code>hostname&lt;/code> in the parameter string can be omitted or must be the same as
&lt;code>username&lt;/code>&lt;/li>
&lt;li>&lt;code>myip&lt;/code> in the parameter string if omitted, the IP address of the client
performing the GET request will be used&lt;/li>
&lt;/ul>
&lt;h2 id="security">Security&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>For updating IP address, only hostname and its secret are needed. No user
information is stored on VM in any form for updating IP.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>NS-update server uses HTTPS protocol, hostname/secret are encrypted as data
and not visible during transfer so it is secure to use the update URL&lt;/p>
&lt;/li>
&lt;li>
&lt;p>NS-update portal does not store host secret in recoverable form. If you forget
the secret of your hostname, simply generate new one via &amp;ldquo;Show configuration&amp;rdquo;
button in the host edit page. The old secret will be invalid.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="support">Support&lt;/h2>
&lt;p>Support for Dynamic DNS service is provided via &lt;a href="https://ggus.eu/">EGI Helpdesk&lt;/a>
in &lt;strong>&amp;ldquo;Dynamic DNS&amp;rdquo;&lt;/strong> support unit, where users can ask questions, report issues
or make requests for additional domains for specific projects or user
commnunities.&lt;/p></description></item><item><title>Users: Automating Deployments</title><link>/users/compute/cloud-compute/automate/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/users/compute/cloud-compute/automate/</guid><description>
&lt;p>The &lt;a href="../../../getting-started/openstack">OpenStack&lt;/a> sites in the EGI Cloud that
provide compute resources to run virtual machines (VMs) allow nearly everything
to be done via an Application Programming Interface (API) or a
&lt;a href="../../../getting-started/cli">command-line interface&lt;/a> (CLI).
This means that repetitive tasks or complex architectures can be turned into shell scripts.&lt;/p>
&lt;p>But creating VMs happens so often in the EGI Cloud that tools were developed to
capture the provisioning of these VMs, and allow users to recreate them in a flash,
in a &lt;strong>deterministic&lt;/strong> and &lt;strong>repeatable&lt;/strong> way, using an Infrastructure-as-Code (IaC) approach.&lt;/p>
&lt;p>Automating this activity will help researchers to:&lt;/p>
&lt;ul>
&lt;li>Not forget important configuration (e.g. the size and type of the hardware resources needed).&lt;/li>
&lt;li>Ensure the same steps are performed, in the same order (e.g. making sure the correct
datasets are attached to each VM).&lt;/li>
&lt;li>Easily share scientific pipelines with collaborators.&lt;/li>
&lt;li>Make scientific applications cloud agnostic.&lt;/li>
&lt;/ul>
&lt;p>To automate VM deployment, you can use any of the &lt;a href="../../orchestration">cloud orchestrators&lt;/a>
available in the EGI Cloud.&lt;/p></description></item><item><title>Users: Monitoring and Management</title><link>/users/compute/cloud-compute/monitor/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/users/compute/cloud-compute/monitor/</guid><description>
&lt;p>The &lt;a href="https://appdb.egi.eu/">EGI Application Database (AppDB)&lt;/a> includes a web GUI
for management of Virtual Machines (VMs) on the federated infrastructure.&lt;/p>
&lt;p>This GUI is available for a set of
&lt;a href="https://wiki.appdb.egi.eu/main:faq:which_vos_are_supported_by_the_vmops_dashboard">selected VOs&lt;/a>.
If your VO is not listed and you are interested in getting support, please
&lt;a href="https://ggus.eu">open a ticket&lt;/a> or contact us at &lt;code>support _at_ egi.eu&lt;/code>.&lt;/p>
&lt;h2 id="main-user-features">Main user features&lt;/h2>
&lt;ul>
&lt;li>User identification with Check-in, with customised view of the VAs and
resource providers based on the VO membership of the user.&lt;/li>
&lt;li>Management of VMs in &lt;em>topologies&lt;/em>, containing one or more instances of a given
VA.&lt;/li>
&lt;li>Attachment of additional block storage to the VM instances.&lt;/li>
&lt;li>Start/Stop VMs without destroying the VM (for all VMs of a topology or for
individual instances within a topology)&lt;/li>
&lt;li>Single control of topologies across the whole federation.&lt;/li>
&lt;/ul>
&lt;h2 id="quick-start">Quick start&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>Log into the &lt;a href="https://dashboard.appdb.egi.eu/vmops">VMOps dashboard&lt;/a> using
EGI Check-in.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Click on &amp;quot;Create a new VM Topology&amp;quot; to start the topology builder, this
will guide you through a set of steps:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Select the Virtual Appliance you want to start, these are the same shown
in the &lt;a href="https://appdb.egi.eu/browse/cloud">AppDB Cloud Marketplace&lt;/a>, you
can use the search field to find your VA;&lt;/p>
&lt;p>&lt;img src="vmops_va_select.png" alt="Select the VA">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>select the VO to use when instantiating the VA;&lt;/p>
&lt;/li>
&lt;li>
&lt;p>select the provider where to instantiate the VA; and finally&lt;/p>
&lt;/li>
&lt;li>
&lt;p>select the template (VM instance type) of the instance that will determine
the number of cores, memory and disk space used in your VM.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>Now you will be presented with a summary page where you can further customise
your VM by:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Adding more VMs to the topology&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Adding block storage devices to the VMs&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Define contextualisation parameters (e.g. add new users, execute some
script)&lt;/p>
&lt;p>&lt;img src="vmops_settings.png" alt="Topology settings">&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Click on &amp;quot;Launch&amp;quot; and your deployment will be submitted to the
infrastructure.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>The topology you just created will appear on your &amp;quot;Topologies&amp;quot; with all the
details about it, clicking on a VM of a topology will give you details about its
status and IP. VMOps will create a default &lt;code>cloudadm&lt;/code> user for you and create
ssh-key pair for login (you can create as many users as needed with the
contextualisation options of the wizard described above).&lt;/p>
&lt;p>&lt;img src="vmops_vm.png" alt="VM details">&lt;/p>
&lt;p>VMOps was presented in one of the &lt;a href="https://www.egi.eu/webinars/">EGI Webinars&lt;/a>
in 2020. The &lt;a href="https://indico.egi.eu/event/5272/">indico page&lt;/a> contains more
details and there is also a video recording available on
&lt;a href="https://youtu.be/0YuuKA_4pSM">YouTube&lt;/a>.&lt;/p></description></item><item><title>Users: AppDB REST API v1.0</title><link>/users/compute/cloud-compute/appdb/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/users/compute/cloud-compute/appdb/</guid><description>
&lt;p>This document is intended for developers who want to write applications that
interact with the AppDB API over the web using HTTP commands following the
&lt;a href="http://en.wikipedia.org/wiki/Representational_state_transfer">REST&lt;/a>paradigm.
The API is located at &lt;a href="http://appdb-pi.egi.eu">http://appdb-pi.egi.eu&lt;/a> and it allows information
retrieval and modification from third party applications without having to
reside on the rich user interface of the AppDB portal. Thus one is given the
opportunity to design one&amp;rsquo;s own front-ends.&lt;/p>
&lt;h1 id="getting-started">Getting started&lt;/h1>
&lt;h2 id="operations">Operations&lt;/h2>
&lt;p>Starting with version 1.0, the AppDB API features write access as well, by
supporting HTTP verbs such as PUT, POST, and DELETE. Verb mappings to data
operations follow a
&lt;a href="http://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD&lt;/a>convention,
as depicted in the following table:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;span style="font-size: 15px; font-family: Arial; background-color: transparent; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;">Operation&lt;/span>&lt;/td>
&lt;td>&lt;span style="font-size: 15px; font-family: Arial; background-color: transparent; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;">HTTP Verb&lt;/span>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">Create&lt;/span>&lt;/td>
&lt;td>&lt;span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">PUT&lt;/span>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">Read&lt;/span>&lt;/td>
&lt;td>&lt;span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">GET&lt;/span>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">Update&lt;/span>&lt;/td>
&lt;td>&lt;span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">POST&lt;/span>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">Delete&lt;/span>&lt;/td>
&lt;td>&lt;span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">DELETE&lt;/span>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>The API also supports the Listing operation
(&lt;a href="http://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUDL&lt;/a>extension),
by passing the parameter listmode=listing in the querystring when performing a
GET request. Please note that in order to simplify the access model, Update
operations are always partial, meaning that properties of the resource that is
being updated which are entirely missing from the representation, are ignored
(i.e. their state in the backend does not change). Therefore, in order to
unset/remove a property, one has to explicitly specify it as NULL, provided that
this is permitted. This is the reason why Create and Update
&lt;a href="http://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD&lt;/a>mappings are
inverted with regards to what is usually accustomed. Finally, the API also
supports the OPTIONS HTTP verb, which returns a list of the operations that are
permitted, in principle, for the resource in question. The base URI for this
version of the RESTful API is&lt;/p>
&lt;ul>
&lt;li>
&lt;pre>&lt;code> http://appdb-pi.egi.eu/rest/1.0/
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;p>and requests must be followed by at least one resource name, which may be
followed by one or more optional sub-resource names, separated by slashes, as in
the examples given bellow:&lt;/p>
&lt;ul>
&lt;li>
&lt;pre>&lt;code> http://appdb-pi.egi.eu/rest/1.0/applications/
http://appdb-pi.egi.eu/rest/1.0/applications/50/
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;h2 id="response-types">Response types&lt;/h2>
&lt;p>Because the API conforms to the REST paradigm, responses to all
&lt;a href="http://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD&lt;/a>operations
are always &lt;a href="http://en.wikipedia.org/wiki/XML">XML&lt;/a>document representations of
the resource in question. These documents are described by schema files which
reside publicly in the web server. All the XML documents are enveloped in a
common root element named &lt;em>appdb&lt;/em> with attributes that describe request status,
such as paging, or errors. These attributes are:&lt;/p>
&lt;ul>
&lt;li>count (number) : the count of the entries found in the applications database.
In case of paging, where only a subset of the results gets returned, the
attribute is left unaffected.&lt;/li>
&lt;li>pagelength, pageoffset (numbers) : paging data in case the response is a list
of resources. More information follows in the next section.&lt;/li>
&lt;li>datatype (string) : an identifier for the resource data that is enclosed in
the response as defined in the XML schema.&lt;/li>
&lt;li>type (string) : the type of the response. Possible values are:
&lt;ul>
&lt;li>list: A collection of references to entries in the applications&amp;rsquo; database.
In order to obtain the referenced entry, a request should be made using the
entry&amp;rsquo;s id.&lt;/li>
&lt;li>entry: Detailed information about an entry in the applications&amp;rsquo; database.
Paging is never used for this type of response.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>version (number) : The version of the API that was accessed.&lt;/li>
&lt;li>error (string) : If an error occurs, this attribute will contain the error
message.&lt;/li>
&lt;li>errornum (number) : If an error occurs, this attribute will contain the error
number.&lt;/li>
&lt;li>errordesc (string) : If an error occurs, this attribute might contain a more
detailed description about the error.&lt;/li>
&lt;li>host, apihost (strings) : the URIs of the host that provided the data and API
access, respectively.&lt;/li>
&lt;/ul>
&lt;h2 id="paging-and-filtering">Paging and Filtering&lt;/h2>
&lt;p>The paging mechanism that the API provides, as far as Read/Listing operations
are concerned, can be used through two query parameters (if allowed) and can be
displayed in the attributes of the root element of the response XML document.
The query parameters are:&lt;/p>
&lt;ul>
&lt;li>pagelength : defines the count of entries to be displayed in each page.&lt;/li>
&lt;li>pageoffset : defines the position in the list of entries from which the page
will start.&lt;/li>
&lt;/ul>
&lt;p>So if the client wants a list of 50 entries and wants to display the first 10,
then the parameters should be set as page length=10 and page offset=0. To view
the next 10 entries it should change the page offset to 10, for the next 10, it
should set page length to 20, etc. One must remember that paging is not valid
for all resources, as documented in the query parameters section in the API
reference. A final note about paging is that if the client hasn&amp;rsquo;t explicitly
enable paging, then the server will default to a preset paging value, in order
to reduce load; this value can be retrieved from the relevant attributes of the
response’s root node. If the paging parameters were set by the client but the
page length exceeds that of the server&amp;rsquo;s default maximum value, then the later
is used. Otherwise the page length set by the client will be used. Moreover,
some of the API’s resources support filtering when doing Read/Listing
operations; filter expressions may be passed in the querystring by assigning a
value to the flt parameter, in order to retrieve just the subset of data that
match certain criteria. These filter expressions are strings that may range from
simple keywords to complex queries. They are search arguments which will be
matched to results that are deemed relevant in the scope of the search target.
These expressions can range from the simple and obvious space separated keyword
list, to complex operator and field specific queries. In particular, filter
expressions are composed of one or more keywords, optionally prefixed by
operators and/or specifiers. The syntax in BNF is:&lt;/p>
&lt;p>&lt;expression> ::= &lt;keyword>* &lt;keyword> ::=
[&lt;operator>][&lt;specifier>:]some_string &lt;operator> ::=
[&amp;lt;context_operator&amp;gt;]&amp;lt;comparison_operator&amp;gt; &amp;lt;context_operator&amp;gt; ::= &amp;amp;
&amp;lt;comparison_operator&amp;gt; ::= = | * | ~ | $ | &amp;lt;[=] | &amp;gt;[=] |
+[=|*|~|$|&amp;lt;[=]|&amp;gt;[=]] | -[=|*|~|$|&amp;lt;[=]|&amp;gt;[=]] &lt;specifier> ::=
&amp;lt;related_entity&amp;gt;[.property_name] | property_name &amp;lt;related_entity&amp;gt; ::=
application | person | vo | middleware | country | [sub]discipline Rules are
as follow:&lt;/p>
&lt;ul>
&lt;li>Each keyword without an operator may partially match any property related to
the filtered entity.&lt;/li>
&lt;li>If a keyword is prefixed with the &amp;ldquo;=&amp;rdquo; operator, then the keyword may exactly
match any related property.&lt;/li>
&lt;li>If a keyword is prefixed with the &amp;ldquo;*&amp;rdquo; operator, then any part of a
comma-separated set of keywords may exactly match any related property.&lt;/li>
&lt;/ul>
&lt;p>Please note that in this case, the keyword NULL takes on the special meaning of
a nil value&lt;/p>
&lt;ul>
&lt;li>If a keyword is prefixed with the &amp;ldquo;&amp;lt;&amp;rdquo; or &amp;ldquo;&amp;gt;&amp;rdquo; comparison operator, then the
keyword may be greater than or lesser than any related property, respectively.&lt;/li>
&lt;/ul>
&lt;p>Optionally prefixing the &amp;ldquo;=&amp;rdquo; operator as well, will make the comparison operator
non-strict.&lt;/p>
&lt;ul>
&lt;li>If a keyword is prefixed with the &amp;ldquo;~&amp;rdquo; operator, then the keyword will be
treated as a regular expression which may match any related property.&lt;/li>
&lt;li>If a keyword is prefixed with the &amp;ldquo;$&amp;rdquo; operator, then the keyword will be
treated as a soundex phonem which may match any related property that sounds
alike in the english language.&lt;/li>
&lt;li>If a keyword is prefixed with the &amp;ldquo;+&amp;rdquo; operator, then the keyword must match
any related property.&lt;/li>
&lt;li>If a keyword is prefixed with the &amp;ldquo;-&amp;rdquo; operator, then the keyword must not
match any related property.&lt;/li>
&lt;li>If a specifier is present, then the keyword applies only to the specified
property.&lt;/li>
&lt;li>Specifiers refering to related entities may omit the property name, in which
case the special property any will be implicit.&lt;/li>
&lt;li>In keywords without specifiers, the special specifier any.any will be
implicit.&lt;/li>
&lt;li>The &amp;ldquo;&amp;amp;&amp;rdquo; context operator makes an entity&amp;rsquo;s context private when present; this
reduces results to the immediate neighborhoud of the target.&lt;/li>
&lt;/ul>
&lt;p>Consider the following examples when searching for software:&lt;/p>
&lt;ul>
&lt;li>
&lt;pre>&lt;code> cms atlas
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;p>will return a software item named &amp;ldquo;CMSSW&amp;rdquo;, another named &amp;ldquo;ATLAS&amp;rdquo;, another
belonging to the &amp;ldquo;atlas&amp;rdquo; VO, etc.&lt;/p>
&lt;ul>
&lt;li>
&lt;pre>&lt;code> cms atlas +greece
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;p>will return only the subset of the previous example&amp;rsquo;s results that actually
mention Greece (e.g. in the description, or by having a researcher from Greece
in their contact list, etc.)&lt;/p>
&lt;ul>
&lt;li>
&lt;pre>&lt;code> cms atlas -greece
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;p>will return only the subset of the first example&amp;rsquo;s results that do not mention
Greece&lt;/p>
&lt;ul>
&lt;li>
&lt;pre>&lt;code> vo:biomed
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;p>will return software that belong to the VO&amp;rsquo;s that contain biomed in their name
or description&lt;/p>
&lt;ul>
&lt;li>
&lt;pre>&lt;code> =vo.name:biomed
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;p>will return software that belong to the VO named &amp;ldquo;biomed&amp;rdquo; only&lt;/p>
&lt;ul>
&lt;li>
&lt;pre>&lt;code> &amp;lt;dateadded:2011
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;p>will return software that have been registered before the year 2011&lt;/p>
&lt;ul>
&lt;li>
&lt;pre>&lt;code> &amp;gt;=name:x
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;p>will return software whose names begin with &amp;ldquo;x&amp;rdquo;,&amp;ldquo;y&amp;rdquo;, or &amp;ldquo;z&amp;rdquo;&lt;/p>
&lt;ul>
&lt;li>
&lt;pre>&lt;code> person:&amp;quot;john doe&amp;quot;
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;p>will return software that has someone whose name contains &amp;ldquo;john doe&amp;rdquo; listed as a
contact&lt;/p>
&lt;ul>
&lt;li>
&lt;pre>&lt;code> discipline:physics +tag:portal
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;p>will return software that are filed under disciplines that are related to
physics, and that are tagged as portals&lt;/p>
&lt;p>For a list of possible specifiers, you can look up the /filter/reflect
subresource of any searchable resource (e.g. /applications/filter/reflect), or
you can also try using any search box in the &lt;a href="http://appdb.egi.eu">portal&lt;/a>, and
check out the autocompletion list.&lt;/p>
&lt;h2 id="authenticated-access">Authenticated Access&lt;/h2>
&lt;p>Some or all operations on certain resources may require authentication, as
indicated in the API Reference section below. In order to authenticate, the
following parameters must be provided in the query string, or POST fields
accordingly:&lt;/p>
&lt;ul>
&lt;li>username or userid: the &lt;a href="https://www.egi.eu/sso/">EGI SSO&lt;/a>username or the EGI
AppDB user ID (it can be found on the top of you personal profile at the
&lt;a href="http://appdb.egi.eu/">AppDB portal&lt;/a>)&lt;/li>
&lt;li>passwd: the &lt;a href="https://www.egi.eu/sso/">EGI SSO&lt;/a>password if providing a
username, or the MD5 sum of the password if providing an EGI AppDB user ID&lt;/li>
&lt;li>apikey: a valid API key. Registered users can generate API keys from within
the AppDB portal, under their profile preferences tab&lt;/li>
&lt;/ul>
&lt;p>When creating a client application that makes authenticated use of the AppDB
API, developers have a choice of either&lt;/p>
&lt;ul>
&lt;li>forwarding the &lt;a href="https://www.egi.eu/sso/">EGI SSO&lt;/a>credentials of their users,
or&lt;/li>
&lt;li>using a &lt;em>system account&lt;/em> which acts on behalf of their users. Registered users
can create system accounts from within the AppDB portal, under their profile
preferences tab. &lt;em>Note that system accounts may only be used for API calls and
cannot log into the portal.&lt;/em>&lt;/li>
&lt;/ul>
&lt;p>The first case would apply best to client applications that share the same user
base with the AppDB (e.g. NGI versions of the portal), while the second case
would be preferred by client applications that have a different user base (e.g.
external projects which wish to collaborate). The use of an API key permits the
identification of the source of API requests in both of the above cases, and
adds an extra level of security by allowing access only from specific sources
via netfilters. Defining netfilters for an API key is not required, but it is
strongly suggested, since they can help safeguard its use. Special care should
be taken by client applications that make client-side API calls (e.g. web pages
with javascript via XHR), since the API key would then probably be visible to
the public. In such cases, it is advised to use a proxy which routes API calls
and append the API key server-side.&lt;/p>
&lt;p>&lt;strong>Sample Use Cases&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Example 1&lt;/strong>: NGI_MARS wants to launch its own web portal, with interface in
the Martian language, which will only display applications that have been
developed by Martians, and which will allow its users to modify data. The
senior developer creates an &lt;a href="https://www.egi.eu/sso/">EGI SSO&lt;/a>account if he or
she does not have one already, logs into the
&lt;a href="http://appdb.egi.eu/">EGI AppDB portal&lt;/a> and creates a new API key in his or
her profile page. The new web portal gets developed and launched. When a user
visits the site, he or she provides a username and password in order to log
in. The webpage sends the username and password over HTTPS back to a PHP
server, which then makes a &lt;a href="http://php.net/manual/en/book.curl.php">cURL&lt;/a> GET
call to&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;pre>&lt;code>https://appdb-pi.egi.eu/rest/1.0/people/profile?username={username}&amp;amp;passwd={password}&amp;amp;apikey={apikey}
&lt;/code>&lt;/pre>
&lt;p>with the API key hard-coded in the PHP code, or read from a server-side config
file. The AppDB server returns the XML representation of the user&amp;rsquo;s profile,
which contains its user ID. The Martian website then stores the user ID and the
MD5 sum of the password in the server session and/or in a client-side cookie,
and the log in procedure is complete. All future authenticated calls to the
AppDB API from the Martial website are then done either though PHP server side
cURL calls in a similar fasion, where the user ID and password are retrieved
from the session information, or via javascript XHR proxied through the Martian
server in order to securely append the API key, if the website uses AJAX.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Example 2&lt;/strong>: The Grid4Martians distributed computing project, which has its
own user base and set of applications, wants to collaborate with
&lt;a href="http://www.egi.eu">EGI&lt;/a>, by registering its applications in the EGI AppDB,
and by providing its users with information about applications from the
&lt;a href="http://www.egi.eu">EGI project&lt;/a>. The project has its own complicated
authorization system and does not want to force its users to create
&lt;a href="https://www.egi.eu/sso/">EGI SSO&lt;/a> accounts. The senior developer creates an
&lt;a href="https://www.egi.eu/sso/">EGI SSO&lt;/a>account if he or she does not have one
already, logs into the &lt;a href="http://appdb.egi.eu/">EGI AppDB portal&lt;/a> and creates a
new API key in his or her profile page, like in example 1, but creates a
system account as well, named &lt;em>The Grid4Martians Project&lt;/em> with a username of
&lt;em>grid4martians&lt;/em>. All AppDB API calls have been planed to be made server-side
from an array of 3 servers in their domain, so the appropriate netfilters are
also set. The project already has its own webpage setup, which gets upgraded
with a newly developed module that synchronizes data with the
&lt;a href="http://appdb.egi.eu/">EGI AppDB&lt;/a>. Initially, the module issues multiple
server-side PUT operations to&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;pre>&lt;code>https://appdb-pi.egi.eu/rest/1.0/applications?username=grid4martians&amp;amp;passwd={password}&amp;amp;apikey={apikey}
&lt;/code>&lt;/pre>
&lt;p>providing XML representation of its own applications, in order to register them
with the &lt;a href="http://appdb.egi.eu">EGI AppDB&lt;/a>, and associates the returned IDs with
the entries in its own backend. It also issues a GET operation to&lt;/p>
&lt;pre>&lt;code>https://appdb-pi.egi.eu/rest/1.0/applications?listmode=listing
&lt;/code>&lt;/pre>
&lt;p>to get a list of all the applications registered in the AppDB, and then issues
multiple GET operations to&lt;/p>
&lt;pre>&lt;code>https://appdb-pi.egi.eu/rest/1.0/applications/{id}?username=grid4martians&amp;amp;passwd={password}&amp;amp;apikey={apikey}
&lt;/code>&lt;/pre>
&lt;p>one for each of the application IDs returned by the listing, in order to migrate
EGI applications into their own backend. Now, each time one of its users uses
the project&amp;rsquo;s website to modify an application, the server issues a POST
operation to the AppDB API, in order to synchronize the changes.&lt;/p>
&lt;pre>&lt;code>https://appdb-pi.egi.eu/rest/1.0/applications/{id}?username=grid4martians&amp;amp;passwd={password}&amp;amp;apikey={apikey}
&lt;/code>&lt;/pre>
&lt;p>Moreover, it periodically checks the AppDB by issuing a GET operation when an
application is displayed in their portal, in order to check if the information
contained in their backend is up-to-date.&lt;/p>
&lt;h1 id="api-reference">API Reference&lt;/h1>
&lt;p>Below you may find an exhaustive list of the resources v1.0 of the AppDB RESTful
API offers. Details and documentation about a resource&amp;rsquo;s representation may be
found as &lt;a href="http://en.wikipedia.org/wiki/XSD">XSD&lt;/a>annotations inside the
appropriate schema file, under
&lt;a href="http://appdb-pi.egi.eu/rest/1.0/schema">the schemata base resource&lt;/a>. Note that
when performing POST operations, the representation must be passed as a
URL-encoded string in the query-string under the parameter &lt;em>data&lt;/em>, whereas when
performing PUT operations, the representation must be passed as a normal text
stream. Representations passed to PUT/POST operations must be enclosed within an
&lt;em>appdb:appdb&lt;/em> root element, with the appropriate
&lt;a href="http://en.wikipedia.org/wiki/XML">XML&lt;/a> namespaces declared, the same way that
responses are; nevertheless, this will be omitted in all following examples, in
order to reduce clutter. Also note that since all Update (POST) operations are
partial, &lt;a href="http://en.wikipedia.org/wiki/XML">XML&lt;/a>elements that represent
properties with a cardinality 0..* must be either&lt;/p>
&lt;ul>
&lt;li>omitted, in which case the present state in the backend is left untouched,&lt;/li>
&lt;li>fully disclosed, in which case entities present in the backend but absent from
the POSTed representation are deleted, and vice versa&lt;/li>
&lt;li>explicitly declared NULL by passing a single instance of the element, with no
node value (is of &lt;em>mixed&lt;/em> type) and the single attribute &lt;em>xsi:nil&lt;/em> with value
&lt;em>true&lt;/em>, in which case all instances of the entity are erased from the backend.&lt;/li>
&lt;/ul>
&lt;p>This way, it is possible to perform modifications to a resource&amp;rsquo;s properties
without having to re-declare all instances of other properties with 0..*
cardinality, lest they were to be erased. Properties of 0..1 cardinality may
also be declared NULL in a similar fasion, in which case their value in the
backed becomes undefined. Moreover, one should also note that the response of
all PUT/POST/DELETE operations equivalent to that of a GET operation, with the
state of the resource&lt;/p>
&lt;ul>
&lt;li>after the operation, in case of PUT/POST&lt;/li>
&lt;li>before the operation, in case of DELETE&lt;/li>
&lt;/ul>
&lt;p>This way, it is possible - as well as advised - to differentiate the response
with the input to such operations, in order to verify that the result is what
was intended, since properties that are malformed or invalid will not break the
operation, but rather be ignored, as long as the representation is well-formed
(i.e. passes the &lt;a href="http://en.wikipedia.org/wiki/XSD">XSD&lt;/a> compilation).&lt;/p>
&lt;h2 id="application-list">Application List&lt;/h2>
&lt;ul>
&lt;li>Resource: applications/&lt;/li>
&lt;li>Type: list&lt;/li>
&lt;li>Datatype: application&lt;/li>
&lt;li>Schema: application&lt;/li>
&lt;li>Filtering: yes&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: PUT POST&lt;/li>
&lt;/ul>
&lt;p>List of all application entries registered in the database&lt;/p>
&lt;p>Examples:&lt;/p>
&lt;p>*:&lt;/p>
&lt;pre>&lt;code>GET http://appdb-pi.egi.eu/rest/1.0/applications?flt=metatype:0
&lt;/code>&lt;/pre>
&lt;p>will return all applications that are listed under the Software Marketplace
(i.e. Software)&lt;/p>
&lt;p>*:&lt;/p>
&lt;pre>&lt;code>GET http://appdb-pi.egi.eu/rest/1.0/applications?flt=metatype:1
&lt;/code>&lt;/pre>
&lt;p>will return all applications that are listed under the Cloud Marketplace (i.e.
Virtual Appliances)&lt;/p>
&lt;p>*:&lt;/p>
&lt;pre>&lt;code>GET http://appdb-pi.egi.eu/rest/1.0/applications?flt=country:Greece
&lt;/code>&lt;/pre>
&lt;p>will return all applications that are related to Greece&lt;/p>
&lt;p>*:&lt;/p>
&lt;pre>&lt;code>POST https://appdb-pi.egi.eu/rest/1.0/applications?data={data}&amp;amp;username={username}&amp;amp;passwd={passwd}&amp;amp;apikey={apikey}
&lt;/code>&lt;/pre>
&lt;p>where {data} is&lt;/p>
&lt;p>:&lt;/p>
&lt;pre>&lt;code>&amp;lt;application:application id=&amp;quot;123&amp;quot;&amp;gt;
&amp;lt;application:description&amp;gt;some new description&amp;lt;/application:description&amp;gt;
&amp;lt;/application:application&amp;gt;
&lt;/code>&lt;/pre>
&lt;p>will update application with ID 123 setting it description to &amp;ldquo;some new
description&amp;rdquo; and leaving all other properties as-is. Similarly, providing&lt;/p>
&lt;p>:&lt;/p>
&lt;pre>&lt;code>&amp;lt;application:application id=&amp;quot;123&amp;quot;&amp;gt;
&amp;lt;discipline:subdiscipline xsi:nil=&amp;quot;true&amp;quot; /&amp;gt;
&amp;lt;/application:application&amp;gt;
&lt;/code>&lt;/pre>
&lt;p>as {data} will remove all subdiscipline associations from the application, and
providing&lt;/p>
&lt;p>:&lt;/p>
&lt;pre>&lt;code>&amp;lt;application:application id=&amp;quot;123&amp;quot;&amp;gt;
&amp;lt;discipline:discipline id=&amp;quot;1&amp;quot;/&amp;gt;
&amp;lt;discipline:discipline id=&amp;quot;5&amp;quot;/&amp;gt;
&amp;lt;/application:application&amp;gt;
&lt;/code>&lt;/pre>
&lt;p>will replace the list of associated disciplines of the application with ID 123,
with the disciplines with IDs 3 and 5 (&amp;ldquo;Life Sciences&amp;rdquo; and &amp;ldquo;Earth Sciences&amp;rdquo;
respectively)&lt;/p>
&lt;p>Note that providing {data} as&lt;/p>
&lt;p>:&lt;/p>
&lt;pre>&lt;code>&amp;lt;application:application id=&amp;quot;123&amp;quot;&amp;gt;
&amp;lt;discipline:discipline xsi:nil=&amp;quot;true&amp;quot; /&amp;gt;
&amp;lt;/application:application&amp;gt;
&lt;/code>&lt;/pre>
&lt;p>to a POST operation will result in an error, since discipline elements are not
defined as nillable in the schemata, meaning that all application entries must
have at least on discipline in their complete representation.&lt;/p>
&lt;p>Finally, doing&lt;/p>
&lt;p>*:&lt;/p>
&lt;pre tabindex="0">&lt;code> echo {data} | PUT https://appdb-pi.egi.eu/rest/1.0/applications?username={username}&amp;amp;passwd={passwd}&amp;amp;apikey={apikey}
&lt;/code>&lt;/pre>&lt;p>with {data} defined as&lt;/p>
&lt;p>:&lt;/p>
&lt;pre>&lt;code>&amp;lt;application:application tagPolicy=&amp;quot;0&amp;quot;&amp;gt;
&amp;lt;application:name&amp;gt;MyGridApp&amp;lt;/application:name&amp;gt;
&amp;lt;application:description&amp;gt;my grid application&amp;lt;/application:description&amp;gt;
&amp;lt;application:abstract/&amp;gt;this is a grid application which performs task X&amp;lt;/application:abstract&amp;gt;
&amp;lt;application:category id=&amp;quot;1&amp;quot; primary=&amp;quot;true&amp;quot;/&amp;gt;
&amp;lt;application:category id=&amp;quot;2&amp;quot; primary=&amp;quot;false&amp;quot;/&amp;gt;
&amp;lt;discipline:discipline id=&amp;quot;1&amp;quot;/&amp;gt;
&amp;lt;application:status id=&amp;quot;6&amp;quot;/&amp;gt;
&amp;lt;vo:vo id=&amp;quot;951&amp;quot;/&amp;gt;
&amp;lt;application:contact id=&amp;quot;189&amp;quot;/&amp;gt;
&amp;lt;application:contact id=&amp;quot;190&amp;quot;/&amp;gt;
&amp;lt;publication:publication &amp;gt;
&amp;lt;publication:title&amp;gt;Evidence of Y using novel method X&amp;lt;/publication:title&amp;gt;
&amp;lt;publication:url&amp;gt;http://linkto.my.pub&amp;lt;/publication:url&amp;gt;
&amp;lt;publication:conference&amp;gt;X developments 2012&amp;lt;/publication:conference&amp;gt;
&amp;lt;publication:proceedings/&amp;gt;
&amp;lt;publication:isbn&amp;gt;ISSN 0000-0000&amp;lt;/publication:isbn&amp;gt;
&amp;lt;publication:startPage&amp;gt;592&amp;lt;/publication:startPage&amp;gt;
&amp;lt;publication:endPage&amp;gt;597&amp;lt;/publication:endPage&amp;gt;
&amp;lt;publication:volume&amp;gt;18&amp;lt;/publication:volume&amp;gt;
&amp;lt;publication:publisher/&amp;gt;
&amp;lt;publication:journal/&amp;gt;
&amp;lt;publication:year&amp;gt;2012&amp;lt;/publication:year&amp;gt;
&amp;lt;publication:type id=&amp;quot;1&amp;quot;&amp;gt;Full Paper&amp;lt;/publication:type&amp;gt;
&amp;lt;publication:author main=&amp;quot;true&amp;quot; type=&amp;quot;internal&amp;quot;&amp;gt;
&amp;lt;person:person id=&amp;quot;189&amp;quot;/&amp;gt;
&amp;lt;/publication:author&amp;gt;
&amp;lt;publication:author type=&amp;quot;external&amp;quot;&amp;gt;
&amp;lt;publication:extAuthor&amp;gt;John Doe&amp;lt;/publication:extAuthor&amp;gt;
&amp;lt;/publication:author&amp;gt;
&amp;lt;/publication:publication&amp;gt;
&amp;lt;middleware:middleware id=&amp;quot;1&amp;quot;&amp;gt;gLite&amp;lt;/middleware:middleware&amp;gt;
&amp;lt;middleware:middleware id=&amp;quot;5&amp;quot;&amp;gt;MyGrid&amp;lt;/middleware:middleware&amp;gt;
&amp;lt;application:tag&amp;gt;methodX&amp;lt;/application:tag&amp;gt;
&amp;lt;application:tag&amp;gt;countryZ&amp;lt;/application:tag&amp;gt;
&amp;lt;/application:application&amp;gt;
&lt;/code>&lt;/pre>
&lt;p>will add a new application to the database, with the following properties:&lt;/p>
&lt;ul>
&lt;li>belonging to two categories, of which the one with ID equal to 1 will be the
primary&lt;/li>
&lt;li>related to one discipline&lt;/li>
&lt;li>with an application status with ID 6&lt;/li>
&lt;li>listed as supported by the VO with ID 951&lt;/li>
&lt;li>having two people in its scientific contact list, those with IDs 189 and 190&lt;/li>
&lt;li>having one publication with two authors, one internal (i.e. registered with
the AppDB) and one external (not registered, name-only entry)&lt;/li>
&lt;li>listed as supported by two middlewares, and&lt;/li>
&lt;li>with two tags applied&lt;/li>
&lt;/ul>
&lt;h2 id="application-entry">Application Entry&lt;/h2>
&lt;ul>
&lt;li>Resource: applications/{id}&lt;/li>
&lt;li>Type: entry&lt;/li>
&lt;li>Datatype: application&lt;/li>
&lt;li>Schema: application&lt;/li>
&lt;li>Filtering: N/A&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: DELETE&lt;/li>
&lt;/ul>
&lt;p>Detailed description of a specific application entry&lt;/p>
&lt;h2 id="moderated-application-list">Moderated Application List&lt;/h2>
&lt;ul>
&lt;li>Resource: applications/moderated&lt;/li>
&lt;li>Type: list&lt;/li>
&lt;li>Datatype: application&lt;/li>
&lt;li>Schema: application&lt;/li>
&lt;li>Filtering: no&lt;/li>
&lt;li>Public Operations: none&lt;/li>
&lt;li>Authenticated Operations: GET PUT&lt;/li>
&lt;/ul>
&lt;p>List of applications that have been moderated some some particular reason, and
thus hidden from public view until the issue gets resolved. Administrative
access only.&lt;/p>
&lt;p>Examples:&lt;/p>
&lt;p>*:&lt;/p>
&lt;pre>&lt;code>echo {data} | PUT https://appdb-pi.egi.eu/rest/1.0/applications/moderated?username={username}&amp;amp;passwd={passwd}&amp;amp;apikey={apikey}
&lt;/code>&lt;/pre>
&lt;p>where {data} is&lt;/p>
&lt;p>:&lt;/p>
&lt;pre>&lt;code>&amp;lt;application:application id=&amp;quot;123&amp;quot;&amp;gt;
&amp;lt;application:moderationReason&amp;gt;copyright violation&amp;lt;/application:moderationReason&amp;gt;
&amp;lt;/application:application&amp;gt;
&lt;/code>&lt;/pre>
&lt;p>will moderate the application with ID 123, providing &amp;ldquo;copyright violation&amp;rdquo; as
the reason&lt;/p>
&lt;h2 id="application-publication-list">Application Publication List&lt;/h2>
&lt;ul>
&lt;li>Resource: applications/{id}/publications&lt;/li>
&lt;li>Type: list&lt;/li>
&lt;li>Datatype: publication&lt;/li>
&lt;li>Schema: publication&lt;/li>
&lt;li>Filtering: no&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: PUT POST&lt;/li>
&lt;/ul>
&lt;p>List of scientific publications related to an application entry. Publications
can be individually managed from this resource (and its sub-resources), or
collectively defined directly from &lt;em>application/{id}&lt;/em> resources&lt;/p>
&lt;h2 id="application-publication-entry">Application Publication Entry&lt;/h2>
&lt;ul>
&lt;li>Resource: applications/{id}/publications/{id}&lt;/li>
&lt;li>Type: entry&lt;/li>
&lt;li>Datatype: publication&lt;/li>
&lt;li>Schema: publication&lt;/li>
&lt;li>Filtering: N/A&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: DELETE&lt;/li>
&lt;/ul>
&lt;p>Detailed description of a publication related to an application entry&lt;/p>
&lt;h2 id="application-tag-list">Application Tag List&lt;/h2>
&lt;ul>
&lt;li>Resource: applications/{id}/tags&lt;/li>
&lt;li>Type: list&lt;/li>
&lt;li>Datatype: tag&lt;/li>
&lt;li>Schema: application&lt;/li>
&lt;li>Filtering: no&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: PUT&lt;/li>
&lt;/ul>
&lt;p>List of tags applied to an application entry. Tags can be individually managed
from this resource (and its sub-resources), or collectively defined directly
from application/{id} resources&lt;/p>
&lt;p>Examples:&lt;/p>
&lt;p>*:&lt;/p>
&lt;pre>&lt;code>echo {data} | PUT https://appdb-pi.egi.eu/rest/1.0/applications/123/tags?username={username}&amp;amp;passwd={passwd}&amp;amp;apikey={apikey}
&lt;/code>&lt;/pre>
&lt;p>where {data} is&lt;/p>
&lt;p>*:&lt;/p>
&lt;pre>&lt;code>&amp;lt;application:tag&amp;gt;C++&amp;lt;/application:tag&amp;gt;
&lt;/code>&lt;/pre>
&lt;p>will apply the tag &amp;ldquo;C++&amp;rdquo; to the application with ID 123&lt;/p>
&lt;h2 id="application-tag-entry">Application Tag Entry&lt;/h2>
&lt;ul>
&lt;li>Resource: applications/{id}/tags/{id}&lt;/li>
&lt;li>Type: entry&lt;/li>
&lt;li>Datatype: tag&lt;/li>
&lt;li>Schema: application&lt;/li>
&lt;li>Filtering: N/A&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: DELETE&lt;/li>
&lt;/ul>
&lt;p>Detailed description of a tag applied to an application&lt;/p>
&lt;h2 id="related-application-list">Related Application List&lt;/h2>
&lt;ul>
&lt;li>Resource: applications/{id}/relatedapps&lt;/li>
&lt;li>Type: list&lt;/li>
&lt;li>Datatype: relatedapp&lt;/li>
&lt;li>Schema: application&lt;/li>
&lt;li>Filtering: no&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: none&lt;/li>
&lt;/ul>
&lt;p>List of applications related to an application entry&lt;/p>
&lt;h2 id="application-rating-report">Application Rating Report&lt;/h2>
&lt;ul>
&lt;li>Resource: applications/{id}/ratingsreport&lt;/li>
&lt;li>Type: entry&lt;/li>
&lt;li>Datatype: ratingreport&lt;/li>
&lt;li>Schema: appratingreport&lt;/li>
&lt;li>Filtering: N/A&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: none&lt;/li>
&lt;/ul>
&lt;p>Report on all user ratings of an application entry&lt;/p>
&lt;h2 id="external-application-rating-report">External Application Rating Report&lt;/h2>
&lt;ul>
&lt;li>Resource: applications/{id}/ratingsreport/internal&lt;/li>
&lt;li>Type: entry&lt;/li>
&lt;li>Datatype: ratingreport&lt;/li>
&lt;li>Schema: appratingreport&lt;/li>
&lt;li>Filtering: N/A&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: none&lt;/li>
&lt;/ul>
&lt;p>Report on user ratings of an application entry made by registered users&lt;/p>
&lt;h2 id="internal-application-rating-report">Internal Application Rating Report&lt;/h2>
&lt;ul>
&lt;li>Resource: applications/{id}/ratingsreport/external&lt;/li>
&lt;li>Type: entry&lt;/li>
&lt;li>Datatype: ratingreport&lt;/li>
&lt;li>Schema: appratingreport&lt;/li>
&lt;li>Filtering: N/A&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: none&lt;/li>
&lt;/ul>
&lt;p>Report on user ratings of an application entry made by anonymous users&lt;/p>
&lt;h2 id="application-rating-list">Application Rating List&lt;/h2>
&lt;ul>
&lt;li>Resource: applications/{id}/ratings&lt;/li>
&lt;li>Type: list&lt;/li>
&lt;li>Datatype: rating&lt;/li>
&lt;li>Schema: apprating&lt;/li>
&lt;li>Filtering: no&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: none&lt;/li>
&lt;/ul>
&lt;p>List of user rating entries applied to an application entry&lt;/p>
&lt;h2 id="application-rating-entry">Application Rating Entry&lt;/h2>
&lt;ul>
&lt;li>Resource: applications/{id}/ratings/{id}&lt;/li>
&lt;li>Type: entry&lt;/li>
&lt;li>Datatype: rating&lt;/li>
&lt;li>Schema: application&lt;/li>
&lt;li>Filtering: N/A&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: none&lt;/li>
&lt;/ul>
&lt;p>Detailed description of a rating entry applied to an application entry&lt;/p>
&lt;h2 id="application-state-history-list">Application State History List&lt;/h2>
&lt;ul>
&lt;li>Resource: applications/{id}/history&lt;/li>
&lt;li>Type: list&lt;/li>
&lt;li>Datatype: history&lt;/li>
&lt;li>Schema: history&lt;/li>
&lt;li>Filtering: no&lt;/li>
&lt;li>Public Operations: none&lt;/li>
&lt;li>Authenticated Operations: GET&lt;/li>
&lt;/ul>
&lt;p>List of previous states of an application entry. Administrative access only.&lt;/p>
&lt;h2 id="application-state-history-entry">Application State History Entry&lt;/h2>
&lt;ul>
&lt;li>Resource: applications/{id}/history/{id}&lt;/li>
&lt;li>Type: entry&lt;/li>
&lt;li>Datatype: history&lt;/li>
&lt;li>Schema: history&lt;/li>
&lt;li>Filtering: no&lt;/li>
&lt;li>Public Operations: none&lt;/li>
&lt;li>Authenticated Operations: GET&lt;/li>
&lt;/ul>
&lt;p>Detailed description of a previous state of an application entry. Administrative
access only.&lt;/p>
&lt;h2 id="bookmarked-application-list">Bookmarked Application List&lt;/h2>
&lt;ul>
&lt;li>Resource: people/{id}/applications/bookmarked&lt;/li>
&lt;li>Type: list&lt;/li>
&lt;li>Datatype: application&lt;/li>
&lt;li>Schema: application&lt;/li>
&lt;li>Filtering: yes&lt;/li>
&lt;li>Public Operations: none&lt;/li>
&lt;li>Authenticated Operations: GET PUT&lt;/li>
&lt;/ul>
&lt;p>List of application entries bookmarked by a user&lt;/p>
&lt;p>Examples:&lt;/p>
&lt;p>*:&lt;/p>
&lt;pre>&lt;code>GET http://appdb-pi.egi.eu/rest/1.0/people/123/applications/bookmarked?flt=discipline:chemistry
&lt;/code>&lt;/pre>
&lt;p>will return all application entries with a discipline related to chemistry and
which have been bookmarked by the user with ID 123&lt;/p>
&lt;h2 id="bookmarked-application-entry">Bookmarked Application Entry&lt;/h2>
&lt;ul>
&lt;li>Resource: people/{id}/applications/bookmarked/{id}&lt;/li>
&lt;li>Type: entry&lt;/li>
&lt;li>Datatype: application&lt;/li>
&lt;li>Schema: application&lt;/li>
&lt;li>Filtering: N/A&lt;/li>
&lt;li>Public Operations: none&lt;/li>
&lt;li>Authenticated Operations: DELETE&lt;/li>
&lt;/ul>
&lt;p>Detailed description of an application entry bookmarked by a user&lt;/p>
&lt;p>Examples:&lt;/p>
&lt;p>*:&lt;/p>
&lt;pre tabindex="0">&lt;code> DELETE https://appdb-pi.egi.eu/rest/1.0/people/123/applications/bookmarked/111?username={username}&amp;amp;passwd={passwd}&amp;amp;apikey={apikey}
&lt;/code>&lt;/pre>&lt;p>will delete the application with ID 111 from the list of bookmarked applications
of the user with ID 123&lt;/p>
&lt;h2 id="editable-application-list">Editable Application List&lt;/h2>
&lt;ul>
&lt;li>Resource: people/{id}/applications/editable&lt;/li>
&lt;li>Type: list&lt;/li>
&lt;li>Datatype: application&lt;/li>
&lt;li>Schema: application&lt;/li>
&lt;li>Filtering: yes&lt;/li>
&lt;li>Public Operations: none&lt;/li>
&lt;li>Authenticated Operations: GET&lt;/li>
&lt;/ul>
&lt;p>List of application entries that a user has permission to edit&lt;/p>
&lt;h2 id="owned-application-list">Owned Application List&lt;/h2>
&lt;ul>
&lt;li>Resource: people/{id}/applications/owned&lt;/li>
&lt;li>Type: list&lt;/li>
&lt;li>Datatype: application&lt;/li>
&lt;li>Schema: application&lt;/li>
&lt;li>Filtering: no&lt;/li>
&lt;li>Public Operations: none&lt;/li>
&lt;li>Authenticated Operations: GET&lt;/li>
&lt;/ul>
&lt;p>List of application entries that a user holds ownership of&lt;/p>
&lt;h2 id="associated-application-list">Associated Application List&lt;/h2>
&lt;ul>
&lt;li>Resource: people/{id}/applications/associated&lt;/li>
&lt;li>Type: list&lt;/li>
&lt;li>Datatype: application&lt;/li>
&lt;li>Schema: application&lt;/li>
&lt;li>Filtering: no&lt;/li>
&lt;li>Public Operations: none&lt;/li>
&lt;li>Authenticated Operations: GET&lt;/li>
&lt;/ul>
&lt;p>List of application entries that a user is associated to, as a member of the
application&amp;rsquo;s contact list&lt;/p>
&lt;h2 id="people-list">People List&lt;/h2>
&lt;ul>
&lt;li>Resource: people/&lt;/li>
&lt;li>Type: list&lt;/li>
&lt;li>Datatype: person&lt;/li>
&lt;li>Schema: person&lt;/li>
&lt;li>Filtering: yes&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: PUT POST&lt;/li>
&lt;/ul>
&lt;p>List of users (people) that have registered with the database&lt;/p>
&lt;p>Examples:&lt;/p>
&lt;p>*:&lt;/p>
&lt;pre>&lt;code>GET http://appdb-pi.egi.eu/rest/1.0/people/?flt={flt}
&lt;/code>&lt;/pre>
&lt;p>where {flt} is the URL-encoded representation of&lt;/p>
&lt;ul>
&lt;li>
&lt;pre>&lt;code> &amp;gt;=registeredon:2012-02 +=vo.name:SEE -country:Greece
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;p>will return a list of all people who have registered after or in Feb 2012, have
a relation to the VO named SEE and that are not related with Greece&lt;/p>
&lt;h2 id="person-entry">Person Entry&lt;/h2>
&lt;ul>
&lt;li>Resource: people/{id}&lt;/li>
&lt;li>Type: entry&lt;/li>
&lt;li>Datatype: person&lt;/li>
&lt;li>Schema: person&lt;/li>
&lt;li>Filtering: N/A&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: DELETE&lt;/li>
&lt;/ul>
&lt;p>Detailed description of a user entry&lt;/p>
&lt;h2 id="regional-information-list">Regional Information List&lt;/h2>
&lt;ul>
&lt;li>Resource: regional/&lt;/li>
&lt;li>Type: list&lt;/li>
&lt;li>Datatype: regional&lt;/li>
&lt;li>Schema: regional&lt;/li>
&lt;li>Filtering: no&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: none&lt;/li>
&lt;/ul>
&lt;p>List of countries, regions, and service providers participating in the
&lt;a href="http://www.egi.eu">EGI project&lt;/a> and available to application and user entries&lt;/p>
&lt;h2 id="application-category-list">Application Category List&lt;/h2>
&lt;ul>
&lt;li>Resource: applications/categories/&lt;/li>
&lt;li>Type: list&lt;/li>
&lt;li>Datatype: category&lt;/li>
&lt;li>Schema: application&lt;/li>
&lt;li>Filtering: no&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: none&lt;/li>
&lt;/ul>
&lt;p>List of category types available for application entries&lt;/p>
&lt;h2 id="disciplinesubdiscipline-list">Discipline/Subdiscipline List&lt;/h2>
&lt;ul>
&lt;li>Resource: disciplines/&lt;/li>
&lt;li>Type: list&lt;/li>
&lt;li>Datatype: discipline&lt;/li>
&lt;li>Schema: discipline&lt;/li>
&lt;li>Filtering: no&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: none&lt;/li>
&lt;/ul>
&lt;p>List of discipline and subdiscipline types available for application entries&lt;/p>
&lt;h2 id="middleware-list">Middleware List&lt;/h2>
&lt;ul>
&lt;li>Resource: middlewares/&lt;/li>
&lt;li>Type: list&lt;/li>
&lt;li>Datatype: middleware&lt;/li>
&lt;li>Schema: middleware&lt;/li>
&lt;li>Filtering: no&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: none&lt;/li>
&lt;/ul>
&lt;p>List of grid middlewares supported by application entries and VOs&lt;/p>
&lt;h2 id="application-status-list">Application Status List&lt;/h2>
&lt;ul>
&lt;li>Resource: applications/statuses/&lt;/li>
&lt;li>Type: list&lt;/li>
&lt;li>Datatype: status&lt;/li>
&lt;li>Schema: application&lt;/li>
&lt;li>Filtering: no&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: none&lt;/li>
&lt;/ul>
&lt;p>List of status states available to application entries&lt;/p>
&lt;h2 id="vo-list">VO List&lt;/h2>
&lt;ul>
&lt;li>Resource: vos/&lt;/li>
&lt;li>Type: list&lt;/li>
&lt;li>Datatype: vo&lt;/li>
&lt;li>Schema: vo&lt;/li>
&lt;li>Filtering: yes&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: none&lt;/li>
&lt;/ul>
&lt;p>List of VOs registered with the
&lt;a href="http://operations-portal.egi.eu/vo">EGI Operations Portal&lt;/a> and available to
application entries&lt;/p>
&lt;p>Examples:&lt;/p>
&lt;p>*:&lt;/p>
&lt;pre>&lt;code>GET http://appdb-pi.egi.eu/rest/1.0/vos/?flt={flt}
&lt;/code>&lt;/pre>
&lt;p>where {flt} is the URL-encoded representation of&lt;/p>
&lt;ul>
&lt;li>
&lt;pre>&lt;code> application:CMS +description:CERN
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;p>will return the list of VOs that contain the word CERN in their description, and
that are related to any application that mentions CMS in any of its properties&lt;/p>
&lt;h2 id="vo-entry">VO Entry&lt;/h2>
&lt;ul>
&lt;li>Resource: vos/{id}&lt;/li>
&lt;li>Type: entry&lt;/li>
&lt;li>Datatype: vo&lt;/li>
&lt;li>Schema: vo&lt;/li>
&lt;li>Filtering: N/A&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: none&lt;/li>
&lt;/ul>
&lt;p>Detailed description of a VO registered with the
&lt;a href="http://operations-portal.egi.eu/vo">EGI Operations Portal&lt;/a> and available to
application entries&lt;/p>
&lt;h2 id="user-role-list">User Role List&lt;/h2>
&lt;ul>
&lt;li>Resource: people/roles/&lt;/li>
&lt;li>Type: list&lt;/li>
&lt;li>Datatype: role&lt;/li>
&lt;li>Schema: person&lt;/li>
&lt;li>Filtering: no&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: none&lt;/li>
&lt;/ul>
&lt;p>List of user roles available, which define base user privileges&lt;/p>
&lt;h2 id="available-tag-list">Available Tag List&lt;/h2>
&lt;ul>
&lt;li>Resource: applications/tags/&lt;/li>
&lt;li>Type: list&lt;/li>
&lt;li>Datatype: tag&lt;/li>
&lt;li>Schema: application&lt;/li>
&lt;li>Filtering: no&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: none&lt;/li>
&lt;/ul>
&lt;p>List of all tag entries that have been attached at least once on any application
entry&lt;/p>
&lt;h2 id="contact-type-list">Contact Type List&lt;/h2>
&lt;ul>
&lt;li>Resource: people/contacttypes/&lt;/li>
&lt;li>Type: list&lt;/li>
&lt;li>Datatype: tag&lt;/li>
&lt;li>Schema: person&lt;/li>
&lt;li>Filtering: no&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: none&lt;/li>
&lt;/ul>
&lt;p>List of contact types available to user contact information entries&lt;/p>
&lt;h2 id="application-filter-normalization">Application Filter Normalization&lt;/h2>
&lt;ul>
&lt;li>Resource: applications/filter/normalize&lt;/li>
&lt;li>Type: entry&lt;/li>
&lt;li>Datatype: filter&lt;/li>
&lt;li>Schema: filter&lt;/li>
&lt;li>Filtering: N/A&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: none&lt;/li>
&lt;/ul>
&lt;p>Validates and normalizes a filter expression for application searches, defined
by the querystring parameter &lt;em>flt&lt;/em>&lt;/p>
&lt;h2 id="application-filter-reflection">Application Filter Reflection&lt;/h2>
&lt;ul>
&lt;li>Resource: applications/filter/reflect&lt;/li>
&lt;li>Type: entry&lt;/li>
&lt;li>Datatype: filter&lt;/li>
&lt;li>Schema: filter&lt;/li>
&lt;li>Filtering: N/A&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: none&lt;/li>
&lt;/ul>
&lt;p>Returns a nested representation of the filtering expression specifiers available
to application searches&lt;/p>
&lt;h2 id="person-filter-normalization">Person Filter Normalization&lt;/h2>
&lt;ul>
&lt;li>Resource: people/filter/normalize&lt;/li>
&lt;li>Type: entry&lt;/li>
&lt;li>Datatype: filter&lt;/li>
&lt;li>Schema: filter&lt;/li>
&lt;li>Filtering: N/A&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: none&lt;/li>
&lt;/ul>
&lt;p>Validates and normalizes a filter expression for user searches, defined by the
querystring parameter &lt;em>flt&lt;/em>&lt;/p>
&lt;h2 id="person-filter-reflection">Person Filter Reflection&lt;/h2>
&lt;ul>
&lt;li>Resource: people/filter/reflect&lt;/li>
&lt;li>Type: entry&lt;/li>
&lt;li>Datatype: filter&lt;/li>
&lt;li>Schema: filter&lt;/li>
&lt;li>Filtering: N/A&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: none&lt;/li>
&lt;/ul>
&lt;p>Returns a nested representation of the filtering expression specifiers available
to user searches&lt;/p>
&lt;h2 id="vo-filter-normalization">VO Filter Normalization&lt;/h2>
&lt;ul>
&lt;li>Resource: vos/filter/normalize&lt;/li>
&lt;li>Type: entry&lt;/li>
&lt;li>Datatype: filter&lt;/li>
&lt;li>Schema: filter&lt;/li>
&lt;li>Filtering: N/A&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: none&lt;/li>
&lt;/ul>
&lt;p>Validates and normalizes a filter expression for VO searches, defined by the
querystring parameter &lt;em>flt&lt;/em>&lt;/p>
&lt;h2 id="vo-filter-reflection">VO Filter Reflection&lt;/h2>
&lt;ul>
&lt;li>Resource: vos/filter/reflect&lt;/li>
&lt;li>Type: entry&lt;/li>
&lt;li>Datatype: filter&lt;/li>
&lt;li>Schema: filter&lt;/li>
&lt;li>Filtering: N/A&lt;/li>
&lt;li>Public Operations: GET&lt;/li>
&lt;li>Authenticated Operations: none&lt;/li>
&lt;/ul>
&lt;p>Returns a nested representation of the filtering expression specifiers available
to VO searches&lt;/p>
&lt;h2 id="dissemination-log-list">Dissemination Log List&lt;/h2>
&lt;ul>
&lt;li>Resource: dissemination/&lt;/li>
&lt;li>Type: list&lt;/li>
&lt;li>Datatype: dissemination&lt;/li>
&lt;li>Schema: dissemination&lt;/li>
&lt;li>Filtering: no&lt;/li>
&lt;li>Public Operations: none&lt;/li>
&lt;li>Authenticated Operations: GET&lt;/li>
&lt;/ul>
&lt;p>List of dissemination messages that have been dispatched to registered users.
Administrative access only.&lt;/p>
&lt;h2 id="dissemination-log-entry">Dissemination Log Entry&lt;/h2>
&lt;ul>
&lt;li>Resource: dissemination/{id}&lt;/li>
&lt;li>Type: entry&lt;/li>
&lt;li>Datatype: dissemination&lt;/li>
&lt;li>Schema: dissemination&lt;/li>
&lt;li>Filtering: N/A&lt;/li>
&lt;li>Public Operations: none&lt;/li>
&lt;li>Authenticated Operations: GET&lt;/li>
&lt;/ul>
&lt;p>Detailed description of a dissemination message that has been dispatched to
registered users. Administrative access only.&lt;/p></description></item><item><title>Users: Frequently Asked Questions</title><link>/users/compute/cloud-compute/faq/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/users/compute/cloud-compute/faq/</guid><description>
&lt;h2 id="basics">Basics&lt;/h2>
&lt;h3 id="how-can-i-get-access-to-the-cloud-compute-service">How can I get access to the cloud compute service?&lt;/h3>
&lt;p>There is a VO available for 6 months piloting activities that any researcher in
Europe can join. Just request access to the
&lt;a href="../auth/#pilot-vo">pilot Virtual Organisation&lt;/a>.&lt;/p>
&lt;h3 id="how-can-i-get-an-oauth20-token">How can I get an OAuth2.0 token?&lt;/h3>
&lt;p>Authentication via CLI or API requires a valid Access Token from Check-in. The
&lt;a href="https://aai.egi.eu/token">EGI Check-in Token Portal&lt;/a> allows you to get one as
needed. Check the &lt;a href="../auth">Authentication and Authorisation&lt;/a> guide for more
information.&lt;/p>
&lt;h3 id="is-occi-still-supported">Is OCCI still supported?&lt;/h3>
&lt;p>OCCI is now deprecated as API for the EGI Cloud providers using OpenStack. Some
providers still support OCCI (a list of active endpoints can be queried at
&lt;a href="https://goc.egi.eu/portal/index.php?Page_Type=Services&amp;amp;serviceType=eu.egi.cloud.vm-management.occi&amp;amp;selectItemserviceType=eu.egi.cloud.vm-management.occi&amp;amp;ngi=&amp;amp;searchTerm=&amp;amp;production=TRUE&amp;amp;monitored=&amp;amp;certStatus=Certified&amp;amp;mscope%5B%5D=FedCloud&amp;amp;selectItemmscope%5B%5D=FedCloud&amp;amp;scopeMatch=all&amp;amp;servKeyNames=&amp;amp;servKeyValue=">GOCDB&lt;/a>)
but it should note be used for any new developments.&lt;/p>
&lt;p>Migration from rOCCI CLI to OpenStack CLI is quite straightforward, we summarize
the main commands in rOCCI and OpenStack equivalent in the table below:&lt;/p>
&lt;!-- markdownlint-disable line-length -->
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Action&lt;/th>
&lt;th>rOCCI&lt;/th>
&lt;th>OpenStack&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>List images&lt;/td>
&lt;td>&lt;code>occi -a list -r os_tpl&lt;/code>&lt;/td>
&lt;td>&lt;code>openstack image list&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Describe images&lt;/td>
&lt;td>&lt;code>occi -a describe -r &amp;lt;image_id&amp;gt;&lt;/code>&lt;/td>
&lt;td>&lt;code>openstack image show &amp;lt;image_id&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>List flavors&lt;/td>
&lt;td>&lt;code>occi -a list -r resorce_tpl&lt;/code>&lt;/td>
&lt;td>&lt;code>openstack flavor list&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Describe flavors&lt;/td>
&lt;td>&lt;code>occi -a describe -r &amp;lt;template_id&amp;gt;&lt;/code>&lt;/td>
&lt;td>&lt;code>openstack flavor show &amp;lt;image_id&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Create VM&lt;/td>
&lt;td>&lt;code>occi -a create -r compute -t occi.core.title=&amp;quot;MyFirstVM&amp;quot; -M &amp;lt;flavor id&amp;gt; -M &amp;lt;image id&amp;gt; -T user_data=&amp;quot;file://&amp;lt;file&amp;gt;&amp;quot;&lt;/code>&lt;/td>
&lt;td>&lt;code>openstack server create --flavor &amp;lt;flavor&amp;gt; --image &amp;lt;image&amp;gt; --user-data &amp;lt;file&amp;gt; MyFirstVM&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Describe VM&lt;/td>
&lt;td>&lt;code>occi -a describe -r &amp;lt;vm id&amp;gt;&lt;/code>&lt;/td>
&lt;td>&lt;code>openstack server show &amp;lt;vm id&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Delete VM&lt;/td>
&lt;td>&lt;code>occi -a delete -r &amp;lt;vm id&amp;gt;&lt;/code>&lt;/td>
&lt;td>&lt;code>openstack server delete &amp;lt;vm id&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Create volume&lt;/td>
&lt;td>&lt;code>occi -a create -r storage -t occi.storage.size='num(&amp;lt;site in GB&amp;gt;)' -t occi.core.title=&amp;lt;storage_resource_name&amp;gt;&lt;/code>&lt;/td>
&lt;td>&lt;code>openstack volume create --size &amp;lt;size in GB&amp;gt; &amp;lt;storage resource name&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>List volume&lt;/td>
&lt;td>&lt;code>occi -a list -r storage&lt;/code>&lt;/td>
&lt;td>&lt;code>openstack volume list&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Attach volume&lt;/td>
&lt;td>&lt;code>occi -a link -r &amp;lt;vm_id&amp;gt; -j &amp;lt;storage_resource_id&amp;gt;&lt;/code>&lt;/td>
&lt;td>&lt;code>openstack server add volume &amp;lt;vm id&amp;gt; &amp;lt;volume id&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Dettach volume&lt;/td>
&lt;td>&lt;code>occi -a unlink -r &amp;lt;storage_link_id&amp;gt;&lt;/code>&lt;/td>
&lt;td>&lt;code>openstack server remove volume &amp;lt;vm id&amp;gt; &amp;lt;volume id&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Delete volume&lt;/td>
&lt;td>&lt;code>occi -a delete -r &amp;lt;volume id&amp;gt;&lt;/code>&lt;/td>
&lt;td>&lt;code>openstack volume delete &amp;lt;volume id&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Attach public IP&lt;/td>
&lt;td>&lt;code>occi -a link -r &amp;lt;vm id&amp;gt; --link /network/public&lt;/code>&lt;/td>
&lt;td>&lt;code>openstack server add floating ip &amp;lt;vm id&amp;gt; &amp;lt;ip&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;!-- markdownlint-enable line-length -->
&lt;p>If you still rely on OCCI for your access, please contact us at
&lt;code>support _at_ egi.eu&lt;/code> for support on the migration.&lt;/p>
&lt;h2 id="discovery">Discovery&lt;/h2>
&lt;h3 id="how-can-i-get-the-list-of-the-egi-cloud-providers">How can I get the list of the EGI Cloud providers?&lt;/h3>
&lt;p>The list of certified providers is available in &lt;a href="https://goc.egi.eu">GOCDB&lt;/a>. The
following command with the &lt;a href="https://fedcloudclient.fedcloud.eu/">fedcloud&lt;/a>
client can help you to get that list:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ fedcloud site list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>100IT
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>BIFI
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>CESGA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>CESNET-MCC
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>CETA-GRID
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>CLOUDIFIN
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>CYFRONET-CLOUD
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>DESY-HH
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GSI-LCG2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>IFCA-LCG2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>IISAS-FedCloud
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>IISAS-GPUCloud
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>IN2P3-IRES
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>INFN-CATANIA-STACK
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>INFN-CLOUD-BARI
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>INFN-PADOVA-STACK
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Kharkov-KIPT-LCG2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>NCG-INGRID-PT
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>SCAI
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>TR-FC1-ULAKBIM
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>UA-BITP
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>UNIV-LILLE
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fedcloud.srce.hr
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>The providers also generate dynamic information about their characteristics via
the Argo Messaging System which is easily browsable from AppDB.&lt;/p>
&lt;h3 id="how-can-i-choose-which-site-to-use">How can I choose which site to use?&lt;/h3>
&lt;p>Sites offer their resources to users through Virtual Organisations (VO). First,
you need to join a Virtual Organisation that matches your research interests,
see &lt;a href="../auth">authorisation section&lt;/a> on how VOs work. AppDB shows the supported
VOs and for each VO you can browse the resource providers that support it.&lt;/p>
&lt;h3 id="how-can-i-get-information-about-the-available-vm-images">How can I get information about the available VM images?&lt;/h3>
&lt;p>The &lt;a href="https://appdb.egi.eu">Application Database&lt;/a> contains information about the
VM images available in the EGI Cloud. Within the AppDB Cloud Marketplace, you
can look for a VM and get all the information about which VO the VM is
associated, the sites where the VM is available and the endpoints and
identifiers to use it in practice.&lt;/p>
&lt;h2 id="managing-vms">Managing VMs&lt;/h2>
&lt;h3 id="the-disk-on-my-vm-is-full-how-can-i-get-more-space">The disk on my VM is full, how can I get more space?&lt;/h3>
&lt;p>There are several ways to increase the disk space available at the VM. The
fastest and easiest one is to use block storage, creating a new storage disk
device and attaching it to the VM. Check the
&lt;a href="../../../data/storage">storage guide&lt;/a> for more information.&lt;/p>
&lt;h3 id="how-can-i-keep-my-data-after-the-vm-is-stopped">How can I keep my data after the VM is stopped?&lt;/h3>
&lt;p>After a VM has been stopped and unless backed up in a block storage volume, all
data in the VM is destroyed and cannot be recovered. To ensure your data will be
available after the VM is deleted, you need to use some form of persistent
storage.&lt;/p>
&lt;h3 id="how-can-i-assign-a-public-ip-to-my-vm">How can I assign a public IP to my VM?&lt;/h3>
&lt;p>Some providers do not automatically assign a public IP address to a VM during
the creation phase. In this case, you can attach a public IP by first allocating
a new public IP and then assigning it to the VM.&lt;/p>
&lt;h3 id="how-can-i-assign-a-dns-name-to-my-vm">How can I assign a DNS name to my VM?&lt;/h3>
&lt;p>If you need a domain name for your VMs, we offer a Dynamic DNS service that
allows any EGI user to create names for VMs under the &lt;em>fedcloud.eu&lt;/em> domain.&lt;/p>
&lt;p>Just go to &lt;a href="https://nsupdate.fedcloud.eu">EGI Cloud nsupdate&lt;/a> and login with
your Check-in account. Once in, you can click on &amp;quot;Add host&amp;quot; to register a new
hostname in an available domain.&lt;/p>
&lt;h3 id="what-is-contextualisation">What is contextualisation?&lt;/h3>
&lt;p>Contextualisation is the process of installing, configuring and preparing
software upon boot time on a predefined virtual machine image. This way, the
predefined images can be stored as generic and small as possible, since
customisations will take place on boot time.&lt;/p>
&lt;p>Contextualisation is particularly useful for:&lt;/p>
&lt;ul>
&lt;li>Configuration not known until instantiation (e.g. data location).&lt;/li>
&lt;li>Private Information (e.g. host certs)&lt;/li>
&lt;li>Software that changes frequently or under development.&lt;/li>
&lt;/ul>
&lt;p>Contextualisation requires passing some data to the VMs on instantiation (the
context) and handling that context in the VM.&lt;/p>
&lt;h3 id="how-can-i-inject-my-public-ssh-key-into-the-machine">How can I inject my public SSH key into the machine?&lt;/h3>
&lt;p>The best way to login into the virtual server is to use SSH keys. If you don't
have one, you need to generate it with the &lt;code>ssh-keygen&lt;/code> command:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>ssh-keygen -f fedcloud
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>This will generate two files:&lt;/p>
&lt;ul>
&lt;li>&lt;code>fedcloud&lt;/code>, the private key. This file should never be shared&lt;/li>
&lt;li>&lt;code>fedcloud.pub&lt;/code>, the public key. That will be sent to your VM.&lt;/li>
&lt;/ul>
&lt;p>To inject the public SSH key into the VM you can use the &lt;code>key-name&lt;/code> option when
creating the VM in OpenStack. Check
&lt;a href="https://docs.openstack.org/python-openstackclient/pike/cli/command-objects/keypair.html">keypair management&lt;/a>
option in OpenStack documentation. This key will be available for the default
configured user of the VM (e.g. &lt;code>ubuntu&lt;/code> for Ubuntu, &lt;code>centos&lt;/code> for CentOS).&lt;/p>
&lt;p>You can also create users with keys with a contextualisation file:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">#cloud-config&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">users&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#204a87;font-weight:bold">name&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">cloudadm&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">sudo&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">ALL=(ALL) NOPASSWD:ALL&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">lock-passwd&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">ssh-import-id&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">cloudadm&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">ssh-authorized-keys&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">&amp;lt;paste here the contents of your SSH key pub file&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Warning&lt;/h4>
YAML format requires that the
spaces at the beginning of each line is respected in order to be correctly
parsed by &lt;code>cloud-init&lt;/code>.
&lt;/div>
&lt;h3 id="how-can-i-use-a-contextualisation-file">How can I use a contextualisation file?&lt;/h3>
&lt;p>If you have a contextualisation file, you can use it with the &lt;code>--user-data&lt;/code>
option to &lt;code>server create&lt;/code> in OpenStack.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>openstack server create --flavor &amp;lt;your-flavor&amp;gt; --image &amp;lt;your image&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --user-data &amp;lt;your contextualisation file&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> &amp;lt;server name&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
We recommend using &lt;code>cloud-init&lt;/code> for
contextualisation. EGI images in AppDB do support &lt;code>cloud-init&lt;/code>. Check the
&lt;a href="https://cloudinit.readthedocs.io/">documentation&lt;/a> for more information.
&lt;/div>
&lt;h3 id="how-can-i-pass-secrets-to-my-vms">How can I pass secrets to my VMs?&lt;/h3>
&lt;p>EGI Cloud endpoints use &lt;strong>HTTPS&lt;/strong> so information passed to contextualise the VMs
can be assumed to be safe and only readable within your VM. However, take into
account that anyone with access to the VM may be able to access also the
contextualisation information.&lt;/p>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Warning&lt;/h4>
Take into account that anyone with
access to the VM may be able to access also the contextualisation information,
so ensure that no sensitive data like clear text passwords is used during
contextualisation.
&lt;/div>
&lt;h3 id="how-can-i-use-ansible">How can I use ansible?&lt;/h3>
&lt;p>Ansible relies on ssh for accessing the servers it will configure. VMs at EGI
Cloud can be also accessed via ssh, just make sure you inject the correct public
keys in the VMs to be able to access.&lt;/p>
&lt;p>If you don't have public IPs for all the VMs to be managed, you can also use
one as a gateway as described in the
&lt;a href="https://docs.ansible.com/ansible/latest/reference_appendices/faq.html#how-do-i-configure-a-jump-host-to-access-servers-that-i-have-no-direct-access-to">Ansible FAQ&lt;/a>.&lt;/p>
&lt;h3 id="how-can-i-release-resources-without-destroying-my-data">How can I release resources without destroying my data?&lt;/h3>
&lt;p>Whenever you delete a VM, the ephemeral disks associated with it will be also
deleted. If you don&amp;rsquo;t plan to use your VM for some time, there are several ways
to release resources consumed by the VM (e.g. CPU, RAM) and recover the the data
or boot your VM in a previous state when you need it back. We list below the
main strategies you can use:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Use a volume to store the data to be kept: Check the
&lt;a href="../../../data/storage/block-storage">Storage section of the documentation&lt;/a> to
learn how to use volumes. If you start your VM from a volume, the VM can be
destroyed and recreated easily. OpenStack documentation cover how to
&lt;a href="https://docs.openstack.org/nova/latest/user/launch-instance-from-volume.html">start a VM from a volume with CLI&lt;/a>
or
&lt;a href="https://docs.openstack.org/horizon/latest/user/launch-instances.html">using the Horizon dashboard&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Suspend or shelve instance: Suspending a VM will pause a VM, releasing CPU and
memory, and allowing to resume later in time at the exact same state. Shelving
shuts down the VM, thus RAM contents will be lost but disk will be kept. This
releases more resources from the provider while still allows to easily boot
the VM back without losing disk contents.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Create snapshot of instance: a snapshot will create a new VM image at your
provider that can be used to boot a new instance of the VM with the same disk
content. You can use this technique for creating a base template image that
can be later re-used to start similar VMs easily.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="how-can-i-find-all-the-vms-that-i-own-in-the-egi-federated-cloud">How can I find all the VMs that I own in the EGI Federated Cloud?&lt;/h3>
&lt;p>We suggest using the &lt;a href="../../../../users/getting-started/cli/">fedcloudclient&lt;/a>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># list the Virtual Organisations that you belong to&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fedcloud token list-vos
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># then, for each VO, run:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>list-all-my-own-vms.sh --vo &amp;lt;virtual-organisation&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>See the &lt;a href="https://fedcloudclient.fedcloud.eu/cheat.html#useful-commands">fedcloudclient documentation&lt;/a>
for more information.&lt;/p></description></item></channel></rss>