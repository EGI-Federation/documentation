<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>EGI Docs – Operations manuals and How-Tos</title><link>/providers/operations-manuals/</link><description>Recent content in Operations manuals and How-Tos on EGI Docs</description><generator>Hugo -- gohugo.io</generator><atom:link href="/providers/operations-manuals/index.xml" rel="self" type="application/rss+xml"/><item><title>Providers: MAN01 How to publish site information</title><link>/providers/operations-manuals/man01_how_to_publish_site_information/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/man01_how_to_publish_site_information/</guid><description>
&lt;h2 id="document-control">Document control&lt;/h2>
&lt;!-- markdownlint-disable line-length -->
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Value&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Title&lt;/td>
&lt;td>How to publish Site Information&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Policy Group&lt;/td>
&lt;td>Operations Management Board (OMB)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Document status&lt;/td>
&lt;td>Approved&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Procedure Statement&lt;/td>
&lt;td>Publishing site information in the Information Discovery System&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Owner&lt;/td>
&lt;td>SDIS team&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;!-- markdownlint-enable line-length -->
&lt;p>&lt;a href="https://documents.egi.eu/public/ShowDocument?docid=1324">EGI profile for the use of the GLUE 2.0 Information Schema&lt;/a>
specifies how the GLUE 2.0 information schema should be used in EGI. It gives
detailed guidance on what should be published, how the information should be
interpreted, what kinds of uses are likely, and how the information may be
validated to ensure accuracy.&lt;/p>
&lt;h2 id="configuring-a-site-bdii">Configuring a site BDII&lt;/h2>
&lt;p>The site BDII needs to be configured to read from every node in the site which
publishes information (meaning that it runs a so-called resource BDII). In YAIM
this is defined with the &lt;code>BDII_REGIONS&lt;/code> variable, which contains a list of node
names which in turn refer to variables called &lt;code>BDII_&amp;lt;NODE&amp;gt;_URL&lt;/code> which specify
the LDAP URL of each resource BDII.&lt;/p>
&lt;p>Some services may have DNS aliases for multiple hosts, but the &lt;code>BDII_REGIONS&lt;/code>
must contain the real hostnames for each underlying node - the information in
the resource BDII is different for each node, so reading it via an alias would
produce inconsistent results. However, it will usually be desirable for the
published endpoint URLs to contain the alias rather than the real hostname; that
can often be defined with a YAIM variable for the service. For the site BDII
itself this variable is &lt;code>SITE_BDII_HOST&lt;/code>. (If multiple site or top BDIIs are
configured identically their content will also be identical, so reading via an
alias does not produce any inconsistencies.)&lt;/p>
&lt;p>Most services now publish themselves, so sites should check that all relevant
services are included. In particular, VOMS servers have only published
themselves comparatively recently so may be missing from the configuration. If
the glite-CLUSTER node type is used this must also be included. Publication has
been enabled for Argus in EMI 2, so this may also need to be added. Common
services which do not currently publish are APEL and Squid. See the table below
for more detailed information.&lt;/p>
&lt;p>It is important to realise that the site BDII itself has a resource BDII, and
this must be explicitly included in the configuration, e.g. with something like&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">&lt;span style="color:#000">BDII_REGIONS&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;CE SE BDII&amp;#34;&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;span style="color:#000">BDII_BDII_URL&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;ldap://&lt;/span>&lt;span style="color:#000">$SITE_BDII_HOST&lt;/span>&lt;span style="color:#4e9a06">:2170/mds-vo-name=resource,o=grid&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>In the past it was common for the site BDII to be co-located with the CE so it
did not need to be listed explicitly, but if installed on a dedicated node
(which is now the recommended deployment) it must be included.&lt;/p>
&lt;p>To check that all expected services are published the following command can be
used:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ ldapsearch -x -h &lt;span style="color:#000">$SITE_BDII_HOST&lt;/span> -p &lt;span style="color:#0000cf;font-weight:bold">2170&lt;/span> -b mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000">$SITE_NAME&lt;/span>,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> &lt;span style="color:#000">objectclass&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GlueService &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> perl -p00e &lt;span style="color:#4e9a06">&amp;#39;s/\r?\n //g&amp;#39;&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> grep Endpoint:
&lt;/code>&lt;/pre>&lt;/div>&lt;p>(replacing &lt;code>SITE_BDII_HOST&lt;/code>; and &lt;code>SITE_NAME&lt;/code> with the values for your site),
which should list all the service URLs.&lt;/p>
&lt;p>In addition, most services should now be published in GLUE 2 format. There is no
explicit configuration needed for GLUE 2, but one thing to be aware of is that
the site name (and the other parts like o=grid) in the GIIS URL field in the
GOCDB must have the correct case as GLUE 2 is case-sensitive.&lt;/p>
&lt;p>To verify the GLUE 2 publication use the command:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ ldapsearch -x -h &lt;span style="color:#000">$SITE_BDII_HOST&lt;/span> -p &lt;span style="color:#0000cf;font-weight:bold">2170&lt;/span> -b &lt;span style="color:#000">GLUE2DomainID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000">$SITE_NAME&lt;/span>,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>glue &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> &lt;span style="color:#000">objectclass&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GLUE2Endpoint &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> perl -p00e &lt;span style="color:#4e9a06">&amp;#39;s/\r?\n //g&amp;#39;&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> grep URL:
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Some services, notably storage elements, may be missing or incomplete in GLUE 2
if they are older than the EMI 2 release. The following table shows the
publishing status for gLite and WLCG node types (ARC and Unicore have a
different structure).&lt;/p>
&lt;!-- markdownlint-disable line-length -->
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Node type&lt;/th>
&lt;th>GLUE 1&lt;/th>
&lt;th>GLUE 2&lt;/th>
&lt;th>Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>LCG-CE&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>No&lt;/td>
&lt;td>Obsolete&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>CREAM&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Full publication only in EMI 2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>CLUSTER&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Full publication only in EMI 2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>WMS&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>LB&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>DPM&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>EMI 2&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>dCache&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>EMI 2&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>StoRM&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>EMI 2&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>LFC&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>EMI 2&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>FTS&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>EMI 2&lt;/td>
&lt;td>Channels not yet published in GLUE 2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Hydra&lt;/td>
&lt;td>EMI 2&lt;/td>
&lt;td>EMI 2&lt;/td>
&lt;td>Not yet released in EMI 2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>AMGA&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>EMI 2&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>VOMS&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MyProxy&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Argus&lt;/td>
&lt;td>No&lt;/td>
&lt;td>EMI 2&lt;/td>
&lt;td>Internal service, publication for deployment monitoring&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Site BDII&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Top BDII&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>R-GMA&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>No&lt;/td>
&lt;td>Obsolete&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>VOBOX&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Apel&lt;/td>
&lt;td>No&lt;/td>
&lt;td>No&lt;/td>
&lt;td>Internal service, publishing not yet requested&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Squid&lt;/td>
&lt;td>No&lt;/td>
&lt;td>No&lt;/td>
&lt;td>Configuration exists but not enabled&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Nagios&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;!-- markdownlint-enable line-length -->
&lt;h3 id="service-related-documentation">Service-related documentation&lt;/h3>
&lt;h4 id="federated-cloud-bdii-configuration">Federated Cloud BDII configuration&lt;/h4>
&lt;p>For information about configuration of a Federated Cloud BDII, please look at
the HOWTO15:
&lt;a href="https://wiki.egi.eu/wiki/HOWTO15">HOWTO15 How to configure the Federated Cloud BDII&lt;/a>.&lt;/p>
&lt;h2 id="gluesite-object">GlueSite Object&lt;/h2>
&lt;p>These are the existing well established attributes in the &lt;code>GlueSite&lt;/code> object. All
of these MUST remain.&lt;/p>
&lt;!-- markdownlint-disable line-length no-bare-urls -->
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Attribute&lt;/th>
&lt;th>Example&lt;/th>
&lt;th>Schema&lt;/th>
&lt;th>Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>GlueSiteName&lt;/td>
&lt;td>RAL-LCG2&lt;/td>
&lt;td>Free Text, No White Space&lt;/td>
&lt;td>Same as GOCDB name if in GOCDB, your choice.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GlueSiteUniqueID&lt;/td>
&lt;td>RAL-LCG2&lt;/td>
&lt;td>Identical to your !GlueSiteName&lt;/td>
&lt;td>Same as GlueSiteName&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GlueSiteWeb&lt;/td>
&lt;td>&lt;code>https://cern.ch/it&lt;/code>&lt;/td>
&lt;td>Free Text&lt;/td>
&lt;td>Valid URL about the site.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GlueSiteLatitude&lt;/td>
&lt;td>52.42&lt;/td>
&lt;td>NN.NN&lt;/td>
&lt;td>Site Latitute.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GlueSiteLongitude&lt;/td>
&lt;td>16.91&lt;/td>
&lt;td>NN.NN&lt;/td>
&lt;td>Longitude of Site.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GlueSiteDescription&lt;/td>
&lt;td>Rutherford Lab&lt;/td>
&lt;td>Free Text&lt;/td>
&lt;td>A long name for the site.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GlueSiteLocation&lt;/td>
&lt;td>Dublin, Ireland&lt;/td>
&lt;td>Town, City, Country&lt;/td>
&lt;td>An decreasing resolution ending with Country, agree a country name within a country. i.e UK != United Kingdom. Scotland and the Balkans should write a dynamic provider.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>!GlueSiteUserSupportContact&lt;/td>
&lt;td>&lt;code>mailto:helpdesk@example.com&lt;/code>&lt;/td>
&lt;td>Valid URL&lt;/td>
&lt;td>URL for getting support. A ticket&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>system if available.&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>!GlueSiteSysAdminContact&lt;/td>
&lt;td>&lt;code>xmpp://admins@jabber.org&lt;/code>&lt;/td>
&lt;td>Valid URL&lt;/td>
&lt;td>How to contact the admins.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>!GlueSiteSecurityContact&lt;/td>
&lt;td>&lt;code>mailto:security@example.com&lt;/code>&lt;/td>
&lt;td>Valid URL&lt;/td>
&lt;td>How to contact for security related matters.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;!-- markdownlint-enable line-length no-bare-urls -->
&lt;p>The &lt;code>GlueSite&lt;/code> object in the 1.3 Glue Schema contains an attribute
&lt;code>GlueSiteOtherInfo&lt;/code>. To quote.&lt;/p>
&lt;blockquote>
&lt;p>The attribute is to be used to publish data that does not fit any other
attribute of the site entity. A &lt;code>name=value&lt;/code> pair or an XML structure are
example[s] of usage.&lt;/p>
&lt;/blockquote>
&lt;p>All this extra configuration will be with in the static information for the glue
site within the Grid Information Provider system.&lt;/p>
&lt;h3 id="guidelines-for-gluesite-object">Guidelines for GlueSite Object&lt;/h3>
&lt;p>A format for publishing useful information about sites within the
&lt;code>!GlueSiteOtherInfo&lt;/code> is needed, as shown in the following table.&lt;/p>
&lt;!-- markdownlint-disable line-length no-bare-urls -->
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Key&lt;/th>
&lt;th>Example&lt;/th>
&lt;th>Type&lt;/th>
&lt;th>Notes&lt;/th>
&lt;th>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>GRID&lt;/td>
&lt;td>EGI&lt;/td>
&lt;td>[#validgrid List of valid grid names]&lt;/td>
&lt;td>Multiple ones can be defined.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>WLCG_TIER&lt;/td>
&lt;td>1&lt;/td>
&lt;td>Tier level of site in WLCG context.&lt;/td>
&lt;td>Either 0, 1 , 2 , 3 , 4&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>WLCG_PARENT&lt;/td>
&lt;td>UK-T1-RAL&lt;/td>
&lt;td>Name of the higher (administrative) tier site in WLCG&lt;/td>
&lt;td>The WLCG_NAME of the site at a higher tier with WLCG&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>WLCG_NAME&lt;/td>
&lt;td>IT-ATLAS-federation&lt;/td>
&lt;td>[#lcgnames Valid WLCG Names]&lt;/td>
&lt;td>An official WLCG name.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>WLCG_NAMEICON&lt;/td>
&lt;td>&lt;code>https://example.com/tier2.png&lt;/code>&lt;/td>
&lt;td>Valid URL&lt;/td>
&lt;td>URL to WLCGNAME icon, ideally 80x80 pixels.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>EGEE_ROC&lt;/td>
&lt;td>Russia&lt;/td>
&lt;td>Valid federated Operations Centre name&lt;/td>
&lt;td>Only applicable if your site is still part of a federated [[Glossary#Operations_Centre&lt;/td>
&lt;td>Operations Centre]] (&amp;ldquo;ROC&amp;rdquo; according to the old EGEE terminology). Name MUST match the Operations Centre name declared in [https://goc.egi.eu/ GOCDB]. Note. If the site is now part of a NGI, then EGI_NGI MUST be used (see below).&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>EGI_NGI&lt;/td>
&lt;td>NGI_CZ&lt;/td>
&lt;td>Valid NGI&lt;/td>
&lt;td>Must agree with the GOC DB&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>EGEE_SERVICE&lt;/td>
&lt;td>prod&lt;/td>
&lt;td>prod, pps or cert&lt;/td>
&lt;td>Which EGEE grid your site is part of, multiple attributes is okay. Obsolete in EGI.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>OLDNAME&lt;/td>
&lt;td>Bristol&lt;/td>
&lt;td>text&lt;/td>
&lt;td>If your !GlueSiteName changes at some point please record your old name here.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ICON&lt;/td>
&lt;td>&lt;code>https://example.com/icon.png&lt;/code>&lt;/td>
&lt;td>Valid URL&lt;/td>
&lt;td>Icon Image for your site, ideally 80x80 pixels&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>BLOG&lt;/td>
&lt;td>&lt;code>https://scotgrid.blogspot.com/feeds/posts/default&lt;/code>&lt;/td>
&lt;td>Valid RSS or Atom Feed&lt;/td>
&lt;td>Your site blog if you have one&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>CONFIG&lt;/td>
&lt;td>yaim&lt;/td>
&lt;td>yaim, puppet, quattor, &amp;hellip;&lt;/td>
&lt;td>The configuration tool(s) used at the site&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;!-- markdownlint-enable line-length no-bare-urls -->
&lt;p>Note. Keywords starting with one of the grid names are to some extent reserved
for that grid.&lt;/p>
&lt;h3 id="example">Example&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">GlueSiteName: RAL-LCG2
GlueSiteOtherInfo: &lt;span style="color:#000">BLOG&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>https://example.com/blog/feed
GlueSiteOtherInfo: &lt;span style="color:#000">EGI_NGI&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>NGI_UK
GlueSiteOtherInfo: &lt;span style="color:#000">GRID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>EGI
GlueSiteOtherInfo: &lt;span style="color:#000">GRID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRIDPP
GlueSiteOtherInfo: &lt;span style="color:#000">GRID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>WLCG
GlueSiteOtherInfo: &lt;span style="color:#000">ICON&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>https://example.com/images/tierOneSmall.png
GlueSiteOtherInfo: &lt;span style="color:#000">WLCG_PARENT&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>CERN-PROD
GlueSiteOtherInfo: &lt;span style="color:#000">WLCG_TIER&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="distributed-tier1s-and-tier2s">Distributed Tier1s and Tier2s&lt;/h3>
&lt;p>Within an WLCG context for instance there are instances of distributed Tier2s
and Tier1s. If separate component sites want to exist as a single WLCG tier then
they might contain common values for their WLCGNAME.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">GlueSiteName: CSCS-LCG2
GlueSiteOtherInfo: &lt;span style="color:#000">CONFIG&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>yaim
GlueSiteOtherInfo: &lt;span style="color:#000">EGI_NGI&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>NGI_CH
GlueSiteOtherInfo: &lt;span style="color:#000">GRID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>EGI
GlueSiteOtherInfo: &lt;span style="color:#000">GRID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>WLCG
GlueSiteOtherInfo: &lt;span style="color:#000">WLCG_NAME&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>CH-CHIPP-CSCS
GlueSiteOtherInfo: &lt;span style="color:#000">WLCG_PARENT&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>FZK-LCG2
GlueSiteOtherInfo: &lt;span style="color:#000">WLCG_TIER&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Note that &lt;code>WLCG_PARENT&lt;/code> is an accounting unit defined in the MOU document, as
shown in &lt;a href="https://wlcg-cric-2.cern.ch">WLCG CRIC&lt;/a>.&lt;/p>
&lt;h3 id="established-grid-name">Established Grid Name&lt;/h3>
&lt;!-- markdownlint-disable line-length no-bare-urls -->
&lt;!-- markdown-link-check-disable -->
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Short Name&lt;/th>
&lt;th>Long Name&lt;/th>
&lt;th>URL&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>EGI&lt;/td>
&lt;td>European Grid Initiative&lt;/td>
&lt;td>&lt;a href="https://www.egi.eu">https://www.egi.eu&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>EELA&lt;/td>
&lt;td>Europe and Latin America&lt;/td>
&lt;td>&lt;a href="https://www.eu-eela.eu/">https://www.eu-eela.eu/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>WLCG&lt;/td>
&lt;td>World LHC Computing Grid&lt;/td>
&lt;td>&lt;a href="https://cern.ch/lcg">https://cern.ch/lcg&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GRIDPP&lt;/td>
&lt;td>UK Particle Physics Grid&lt;/td>
&lt;td>&lt;a href="https://www.gridpp.ac.uk">https://www.gridpp.ac.uk&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>UKNGS&lt;/td>
&lt;td>National UK Grid Service&lt;/td>
&lt;td>&lt;a href="https://www.ngs.ac.uk">https://www.ngs.ac.uk&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>OSG&lt;/td>
&lt;td>Open Science Grid (US)&lt;/td>
&lt;td>&lt;a href="https://www.opensciencegrid.org/">https://www.opensciencegrid.org/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NDGF&lt;/td>
&lt;td>Nordic DataGrid Facility&lt;/td>
&lt;td>&lt;a href="https://www.ndgf.org/">https://www.ndgf.org/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>LondonGrid&lt;/td>
&lt;td>London Grid&lt;/td>
&lt;td>&lt;a href="https://www.gridpp.ac.uk/tier2/london/">https://www.gridpp.ac.uk/tier2/london/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NORTHGRID&lt;/td>
&lt;td>Northern (UK) Grid&lt;/td>
&lt;td>&lt;a href="https://www.gridpp.ac.uk/northgrid/">https://www.gridpp.ac.uk/northgrid/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SCOTGRID&lt;/td>
&lt;td>Scottish Grid&lt;/td>
&lt;td>&lt;a href="https://www.scotgrid.ac.uk/">https://www.scotgrid.ac.uk/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SOUTHGRID&lt;/td>
&lt;td>Southern (UK) Grid&lt;/td>
&lt;td>&lt;a href="https://www.gridpp.ac.uk/southgrid/">https://www.gridpp.ac.uk/southgrid/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Academic Grid Malaysia&lt;/td>
&lt;td>Malaysian Grid&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>UPM Campus Grid&lt;/td>
&lt;td>Universiti Putra Malaysia&lt;/td>
&lt;td>&lt;a href="https://www.upm.edu.my/">https://www.upm.edu.my/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>AEGIS&lt;/td>
&lt;td>Academic and Educational Grid Initiative of Serbia&lt;/td>
&lt;td>&lt;a href="https://www.aegis.rs/">https://www.aegis.rs/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>BIGGRID&lt;/td>
&lt;td>Dutch e-science Grid&lt;/td>
&lt;td>&lt;a href="https://www.biggrid.nl/">https://www.biggrid.nl/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Consorzio Cometa&lt;/td>
&lt;td>Consorzio Multi-Ente per la promozione e l&amp;rsquo;adozione di Tecnologie di calcolo Avanzato (Italy)&lt;/td>
&lt;td>&lt;a href="https://www.consorzio-cometa.it/en">https://www.consorzio-cometa.it/en&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>D-Grid&lt;/td>
&lt;td>German Grid&lt;/td>
&lt;td>&lt;a href="https://www.d-grid-gmbh.de/index.php?id=1&amp;amp;amp;L=1">https://www.d-grid-gmbh.de/index.php?id=1&amp;amp;amp;L=1&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>EUMED&lt;/td>
&lt;td>EU/Mediterranean Grid&lt;/td>
&lt;td>&lt;a href="https://www.eumedgrid.eu/">https://www.eumedgrid.eu/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GILDA&lt;/td>
&lt;td>Grid INFN Laboratory for Dissemination Activities (Italy)&lt;/td>
&lt;td>&lt;a href="https://gilda.ct.infn.it/">https://gilda.ct.infn.it/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GISELA&lt;/td>
&lt;td>Grid Initiative for e-Science virtual communities in Europe and Latin America&lt;/td>
&lt;td>&lt;a href="https://www.gisela-grid.eu/">https://www.gisela-grid.eu/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GRISU&lt;/td>
&lt;td>Griglia del Sud (Southern Italy Grid)&lt;/td>
&lt;td>&lt;a href="https://www.grisu-org.it/">https://www.grisu-org.it/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NEUGRID&lt;/td>
&lt;td>Neuroscience Grid&lt;/td>
&lt;td>&lt;a href="https://neugrid4you.eu/background">https://neugrid4you.eu/background&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>RDIG&lt;/td>
&lt;td>Russian Data Intensive Grid&lt;/td>
&lt;td>&lt;a href="https://grid-eng.jinr.ru/?page_id=43">https://grid-eng.jinr.ru/?page_id=43&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SEE-GRID&lt;/td>
&lt;td>South Eastern European GRid-enabled eInfrastructure Development&lt;/td>
&lt;td>&lt;a href="https://www.see-grid.org/">https://www.see-grid.org/&lt;/a>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;!-- markdown-link-check-enable -->
&lt;!-- markdownlint-enable line-length no-bare-urls -->
&lt;blockquote>
&lt;p>Important: The EGEE Grid name was decomissioned on
[[Agenda-14-02-2011|14-02-2011]]. All sites need to replace this grid name
with EGI.&lt;/p>
&lt;/blockquote>
&lt;p>Being part of a grid is just a reference that your site is in some way
associated with a particular Resource Infrastructure Provider either technically
or as part of a collaboration. The list of Grids can be extended. Please contact
&lt;a href="mailto:operations@egi.eu">operations@egi.eu&lt;/a> to request changes.&lt;/p>
&lt;h3 id="valid-wlcg-names">Valid WLCG Names&lt;/h3>
&lt;p>The WLCG names are the site names that appear within the LCG MOU concerning
commitments to LHC computing.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>WLCG Name&lt;/th>
&lt;th>Current GlueSiteName&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>CA-TRIUMF&lt;/td>
&lt;td>TRIUMF-LCG2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>CERN&lt;/td>
&lt;td>CERN-PROD&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>DE-KIT&lt;/td>
&lt;td>FZK-LCG2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ES-PIC&lt;/td>
&lt;td>pic&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>FR-CCIN2P3&lt;/td>
&lt;td>IN2P3-CC&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>IT-INFN-CNAF&lt;/td>
&lt;td>INFN-T1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NDGF&lt;/td>
&lt;td>NGDF-T1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NL-T1&lt;/td>
&lt;td>SARA-MATRIX&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>TW-ASGC&lt;/td>
&lt;td>Taiwan-LCG2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>UK-T1-RAL&lt;/td>
&lt;td>RAL-LCG2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>US-FNAL-CMS&lt;/td>
&lt;td>USCMS-FNAL-W1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>US-T1-BNL&lt;/td>
&lt;td>BNL-LCG2&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>For the tier two names please consult &lt;a href="https://wlcg-cric-2.cern.ch/">WLCG CRIC&lt;/a>.
The column marked &lt;code>Accounting Name&lt;/code> are the WLCG Names which in the case of
Tier2s are the GOCDB names. Use your site GOCDB name as your WLCG_NAME.&lt;/p>
&lt;p>Also some tier2s live under more than 1 tier1 perhaps for different for
different VOs. If your tier2 has more that one WLCG_PARENT then just add two
distinct records to show this. Also some tier2s do not have a WLCGNAME at all.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">GlueSiteUniqueId: EENet
GlueSiteName: EENet
GlueSiteOtherInfo: &lt;span style="color:#000">GRID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>WLCG
GlueSiteOtherInfo: &lt;span style="color:#000">GRID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>EGI
GlueSiteOtherInfo: &lt;span style="color:#000">EGI_NGI&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>NGI_NL
GlueSiteOtherInfo: &lt;span style="color:#000">WLCG_TIER&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>
GlueSiteOtherInfo: &lt;span style="color:#000">WLCG_PARENT&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>UK-T1-RAL
GlueSiteOtherInfo: &lt;span style="color:#000">WLCG_PARENT&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>NL-T1
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="valid-egi-ngi-names">Valid EGI NGI Names&lt;/h3>
&lt;p>The valid names are those published on
&lt;a href="https://goc.egi.eu/portal/index.php?Page_Type=NGIs">GOCDB&lt;/a>.&lt;/p>
&lt;h2 id="yaim-instructions">YAIM Instructions&lt;/h2>
&lt;p>YAIM will have to be updated for those sites using yaim. This will be done and
submitted to sites in the normal way.&lt;/p>
&lt;!-- markdownlint-disable line-length no-bare-urls no-inline-html -->
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>YAIM Variable and Value&lt;/th>
&lt;th>Resulting Glue Attribute and Value&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>SITE_NAME=RAL_LCG2&lt;/td>
&lt;td>GlueSiteName: RAL-LCG2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_DESC=&amp;ldquo;Rutherford Lab&amp;rdquo;&lt;/td>
&lt;td>GlueSiteDescription: Rutherford Lab&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_EMAIL= &lt;a href="mailto:steve@example.com">steve@example.com&lt;/a>&lt;/td>
&lt;td>GlueSiteSysAdminContact: mailto:steve@example.com&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_SUPPORT_EMAIL= &lt;a href="mailto:steve@example.com">steve@example.com&lt;/a>&lt;/td>
&lt;td>GlueSiteUserSupportContact: mailto:steve@example.com&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_SECURITY_EMAIL= &lt;a href="mailto:steve@example.com">steve@example.com&lt;/a>&lt;/td>
&lt;td>GlueSiteSecurityContact: mailto:steve@example.com&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_LOC=&amp;ldquo;Soho, London, United Kingdom&amp;rdquo;&lt;/td>
&lt;td>GlueSiteLocation: Soho, London, United Kingdom&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_LONG=52.45&lt;/td>
&lt;td>GlueSiteLongitude: 52.45&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_LAT=-12.34&lt;/td>
&lt;td>GlueSiteLatitude: -12.34&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_WEB=&amp;ldquo;&lt;a href="https://example.com/%22">https://example.com/&amp;quot;&lt;/a>&lt;/td>
&lt;td>GlueSiteWeb: &lt;a href="https://example.com/">https://example.com/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_OTHER_GRID=&amp;ldquo;EGI|WLCG&amp;rdquo;&lt;/td>
&lt;td>GlueSiteOtherInfo: GRID=EGI&lt;br />GlueSiteOtherInfo: GRID=WLCG&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_OTHER_EGEE_ROC=&amp;ldquo;UK/I&amp;rdquo;&lt;/td>
&lt;td>GlueSiteOtherInfo: EGEE_ROC=UK/I&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_OTHER_EGI_NGI=&amp;ldquo;NGI_CZ&amp;rdquo;&lt;/td>
&lt;td>GlueSiteOtherInfo: EGI_NGI=NGI_CZ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_OTHER_EGEE_SERVICE=&amp;ldquo;prod&amp;rdquo;&lt;/td>
&lt;td>GlueSiteOtherInfo: EGEE_SERVICE=prod&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_OTHER_WLCG_TIER=2&lt;/td>
&lt;td>GlueSiteOtherInfo: WLCG_TIER=2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_OTHER*&lt;KEY>=&amp;quot;&lt;VALUE1>|&lt;VALUE2>&amp;rdquo;&lt;/td>
&lt;td>GlueSiteOtherInfo: KEY=&lt;VALUE1>GlueSiteOtherInfo: KEY=&lt;VALUE2>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;!-- markdownlint-enable line-length no-bare-urls no-inline-html -->
&lt;p>If multiple values for &lt;code>GlueSiteOtherInfo&lt;/code> are needed, then just delimit your
values with a &lt;code>|&lt;/code>. The character &lt;code>|&lt;/code> must be avoided in values.&lt;/p>
&lt;h2 id="check-your-own-gluesite-object">Check your own GlueSite Object&lt;/h2>
&lt;p>The information published can be checked through an ldap search:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ ldapsearch -x -H ldap://&lt;span style="color:#000">$SITE_BDII_HOST&lt;/span>:2170 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -b &lt;span style="color:#4e9a06">&amp;#39;Mds-Vo-Name=$SITE_NAME,o=Grid&amp;#39;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;(ObjectClass=GlueSite)&amp;#39;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>In addition, &lt;a href="https://operations-portal.egi.eu/vapor/">VAPOR&lt;/a> is a tool which
provides a GUI for different views of published information, including a LDAP
view.&lt;/p>
&lt;h2 id="site-information-in-glue-2">Site information in GLUE 2&lt;/h2>
&lt;p>The GLUE 2 equivalent of the GlueSite object is the &lt;code>GLUE2AdminDomain&lt;/code>. The same
information should be present although in a slightly different format, and there
are separate &lt;code>GLUE2Contact&lt;/code> and &lt;code>GLUE2Location&lt;/code> objects.&lt;/p></description></item><item><title>Providers: MAN02 Service intervention management</title><link>/providers/operations-manuals/man02_service_intervention_management/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/man02_service_intervention_management/</guid><description>
&lt;h2 id="document-control">Document control&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Value&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Title&lt;/td>
&lt;td>Service Intervention Management&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Policy Group&lt;/td>
&lt;td>Operations Management Board (OMB)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Document status&lt;/td>
&lt;td>Approved&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Procedure Statement&lt;/td>
&lt;td>Managing Service interventions&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Owner&lt;/td>
&lt;td>SDIS team&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="service-intervention">Service Intervention&lt;/h2>
&lt;p>A &lt;strong>service intervention&lt;/strong> is defined as an action which will involve or lead to
the possibility of a loss, or noticeable degradation of a service. Depending on
the planning of the outage, we have two types of intervention:&lt;/p>
&lt;ol>
&lt;li>&lt;strong>Scheduled&lt;/strong> interventions: planned and agreed in advance&lt;/li>
&lt;li>&lt;strong>Unscheduled&lt;/strong> interventions: unplanned, usually triggered by an unexpected
failure&lt;/li>
&lt;/ol>
&lt;h2 id="how-to-manage-an-intervention">How to manage an intervention&lt;/h2>
&lt;p>Interventions are recorded through the
&lt;a href="../../../internal/configuration-database">Configuration Database&lt;/a>. For more
information, have a look at the
&lt;a href="https://wiki.egi.eu/wiki/GOCDB/Input_System_User_Documentation#Downtimes">description&lt;/a>.&lt;/p>
&lt;h3 id="scheduled-interventions">Scheduled interventions&lt;/h3>
&lt;ul>
&lt;li>Scheduled interventions &lt;strong>MUST&lt;/strong> be declared at least 24 h in advance,
specifying reason and duration.&lt;/li>
&lt;li>Existing scheduled interventions &lt;strong>CAN&lt;/strong> be extended, provided that it’s done
24 hours in advance.&lt;/li>
&lt;/ul>
&lt;h3 id="unscheduled-interventions">Unscheduled interventions&lt;/h3>
&lt;ul>
&lt;li>Any intervention declared less than 24 h in advance will be considered
&lt;strong>unscheduled&lt;/strong>.&lt;/li>
&lt;li>Sites &lt;strong>MUST&lt;/strong> declare unscheduled interventions as soon as they are detected
to inform the users. Unscheduled interventions CAN be declared up to 48 hours
in the past (retroactive information to the user community).&lt;/li>
&lt;/ul>
&lt;h3 id="required-information">Required information&lt;/h3>
&lt;p>The required information to fill in when declaring an intervention is:&lt;/p>
&lt;ul>
&lt;li>Severity (Outage or Warning)&lt;/li>
&lt;li>Description&lt;/li>
&lt;li>Timezone&lt;/li>
&lt;li>Starting and ending dates&lt;/li>
&lt;li>Affected site / Affected services and endpoints&lt;/li>
&lt;/ul>
&lt;h2 id="recommendations">Recommendations&lt;/h2>
&lt;ul>
&lt;li>For interventions that impact end users, the downtime &lt;strong>SHOULD&lt;/strong> be declared 5
working days in advance, specifying reason and duration.&lt;/li>
&lt;li>A post−mortem &lt;strong>SHOULD&lt;/strong> be included in the downtime report.&lt;/li>
&lt;/ul>
&lt;h2 id="notifications">Notifications&lt;/h2>
&lt;p>Intervention notifications (through broadcasts, RSS feeds, etc) as specified in
the following procedures are automatically sent when declaring a downtime in
&lt;a href="../../../internal/configuration-database">Configuration Database&lt;/a>: at
declaration time, 24 h in advance and 1 h before the intervention.&lt;/p>
&lt;h2 id="suspension-policy">Suspension policy&lt;/h2>
&lt;p>Sites on downtime for more than 1 month will be suspended/uncertified. &lt;code>AT_RISK&lt;/code>
downtime declarations are only for providing warnings to users, and are ignored
for calculating site availability (actual status will be used).&lt;/p></description></item><item><title>Providers: MAN04 Tool Intervention Management</title><link>/providers/operations-manuals/man04_tool_intervention_management/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/man04_tool_intervention_management/</guid><description>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Value&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Title&lt;/td>
&lt;td>Tool Intervention Management&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Policy Group&lt;/td>
&lt;td>Operations Management Board (OMB)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Document status&lt;/td>
&lt;td>Approved&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Procedure Statement&lt;/td>
&lt;td>How to manage central operational tool unscheduled downtimes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Owner&lt;/td>
&lt;td>SDIS team&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>The purpose of this document is to describe the intervention in case of
unscheduled failure of central operational tool.&lt;/p>
&lt;h2 id="scope">Scope&lt;/h2>
&lt;p>This manual only applies to unscheduled downtimes of central operational tools.
The list of central operational tool is available
&lt;a href="https://wiki.egi.eu/wiki/Tools">here&lt;/a>.&lt;/p>
&lt;p>Note: Scheduled downtimes are management according to existing procedures
(&lt;a href="../man02_service_intervention_management">MAN02&lt;/a>).&lt;/p>
&lt;h2 id="announcements">Announcements&lt;/h2>
&lt;p>All announcements should be sent with the Operations Portal Broadcast tool.&lt;/p>
&lt;p>When using Operations Portal Broadcast tool the following groups should be
included:&lt;/p>
&lt;ul>
&lt;li>LCG Rollout Mailing List&lt;/li>
&lt;li>Operators Mailing lists&lt;/li>
&lt;li>OSG Mailing list&lt;/li>
&lt;li>Tool Admins Mailing List&lt;/li>
&lt;li>WLCG Tier 1 contacts&lt;/li>
&lt;li>NGI managers&lt;/li>
&lt;li>VO managers&lt;/li>
&lt;li>VO users&lt;/li>
&lt;li>Site administrators&lt;/li>
&lt;li>Operation tools&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Notice:&lt;/strong> Individual notification templates together with targets are
predefined in Operations Portal Broadcast tool. Administrators are advised to
use such predefined templates.&lt;/p>
&lt;h2 id="procedure">Procedure&lt;/h2>
&lt;p>In the following sections several relevant scenarios are covered.&lt;/p>
&lt;h3 id="case-1-short-undetected-downtime">Case 1: short &amp;ldquo;undetected&amp;rdquo; downtime&lt;/h3>
&lt;p>&lt;strong>Description:&lt;/strong> Service fails and recovers before administrator manages to
react (e.g. short power or network outage).&lt;/p>
&lt;p>&lt;strong>Action:&lt;/strong> Administrator announces the failure by using the following template:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-text" data-lang="text">Subject:
[SERVICE_NAME] unscheduled downtime
Message:
Dear all,
[SERVICE_NAME] experienced unscheduled downtime between [START] and [END].
[DETAILED_FAILURE_DESCRIPTION]
Apologies for any inconvenience caused.
Best Regards
[SERVICE_TEAM]
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="case-2-long-detected-outage">Case 2: long &amp;ldquo;detected&amp;rdquo; outage&lt;/h3>
&lt;p>Service fails and administrator detects the problem. The problem takes at least
&lt;strong>1 hour&lt;/strong> time to recover. In the sections below individual situations are
described.&lt;/p>
&lt;h4 id="1-outage">1. Outage&lt;/h4>
&lt;p>&lt;strong>Description:&lt;/strong> Service failure is detected.&lt;/p>
&lt;p>&lt;strong>Action:&lt;/strong> Administrator announces the failure by using the following template:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-text" data-lang="text">Subject:
[SERVICE_NAME] outage
Message:
Dear all,
[SERVICE_NAME] is experiencing unscheduled downtime.
[ADDITIONAL_INFO]
Apologies for any inconvenience caused.
Best Regards
[SERVICE_TEAM]
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="2-extended-downtime">2. Extended downtime&lt;/h4>
&lt;p>&lt;strong>Description:&lt;/strong> Service recovery is delayed. Update should be sent at least
every &lt;strong>24h&lt;/strong>.&lt;/p>
&lt;p>&lt;strong>Action:&lt;/strong> The administrator announces that recovery is taking longer by using
the following template:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-text" data-lang="text">Subject:
[SERVICE_NAME] extended outage
Message:
Dear all,
Outage of [SERVICE_NAME] is extended.
[ADDITIONAL_INFO]
Apologies for any inconvenience caused.
Best Regards
[SERVICE_TEAM]
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Note:&lt;/strong> In this template &lt;code>[ADDITIONAL_INFO]&lt;/code> should indicate the estimated
time of recovery.&lt;/p>
&lt;h4 id="3-recovery">3. Recovery&lt;/h4>
&lt;p>&lt;strong>Description:&lt;/strong> Service is recovered.&lt;/p>
&lt;p>&lt;strong>Actions:&lt;/strong> At the time of recovery the administrator announces the recovery by
using the following template:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-text" data-lang="text">Subject:
[SERVICE_NAME] recovery
Message:
Dear all,
[SERVICE_NAME] is back online.
[ADDITIONAL_INFO]
Best Regards
[SERVICE_TEAM]
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="4-post-mortem-analysis">4. Post mortem analysis&lt;/h4>
&lt;p>&lt;strong>Description:&lt;/strong> Service failure required further time to investigate the source
of the problem. This action is required only if the post mortem analysis is
needed.&lt;/p>
&lt;p>&lt;strong>Actions:&lt;/strong> The administrator announces the post mortem analysis of failure by
using the following notification template:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-text" data-lang="text">Subject:
[SERVICE_NAME] outage analysis
Message:
Dear all,
[SERVICE_NAME] experienced unscheduled downtime between [START] and [END].
[DETAILED_FAILURE_DESCRIPTION]
Best Regards
[SERVICE_TEAM]
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Providers: HOWTO01 Site Certification Required Information</title><link>/providers/operations-manuals/howto01_site_certification_required_information/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/howto01_site_certification_required_information/</guid><description>
&lt;p>With the help of its NGI Operation Center, the site has to register their own
resources in a central database named the
&lt;a href="../../../internal/configuration-database">Configuration Database&lt;/a>. The
following is an example of how to fill in the database which should be to sent
(by email) to the NGI manager(s).&lt;/p>
&lt;h2 id="required-information">Required information&lt;/h2>
&lt;p>The following fields are mandatory and must be sent with the application.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ROC&lt;/strong>: the ROC/NGI (e.g. &lt;code>NGI_France&lt;/code> or &lt;code>ROC_LA&lt;/code>)&lt;/li>
&lt;li>&lt;strong>Country&lt;/strong>: the country (e.g. &lt;code>Italy&lt;/code>)&lt;/li>
&lt;li>&lt;strong>Domain&lt;/strong>: DNS domain used by the machines at this site (eg: &lt;code>cnaf.infn.it&lt;/code>)&lt;/li>
&lt;li>&lt;strong>Short Name&lt;/strong>: Generic name for the site (Alphanumeric, dot dash and
underscore, eg: &lt;code>INFN-CNAF&lt;/code>)&lt;/li>
&lt;li>&lt;strong>Official Name&lt;/strong>: Official name (Alphanumeric and basic punctuation), e.g.
&lt;code>Mysite, University of Mytown, Mycountry&lt;/code>&lt;/li>
&lt;li>&lt;strong>E-Mail&lt;/strong>: Generic contact used for broadcasts, notifications and general
purpose contact. The mailing list must include all the site managers
responsible for that site. A suggested e-mail alias would take the form of
&lt;code>grid-prod@site-domain.tld&lt;/code>&lt;/li>
&lt;li>&lt;strong>Contact Telephone Number&lt;/strong>: Generic phone contact (numbers, optional +, dots
spaces or dashes)&lt;/li>
&lt;li>&lt;strong>Security Contact E-mail&lt;/strong>: A mailing list for security information
communication. The mailing list must be closed and its archives not published.
A suggested e-mail alias would take the form of &lt;code>grid-sec@site-domain.tld&lt;/code>&lt;/li>
&lt;li>&lt;strong>Security Contact Telephone Number&lt;/strong>: Site&amp;rsquo;s Computer Security Incident
Response Team (CSIRT) telephone number (numbers, optional +, dots spaces or
dashes)&lt;/li>
&lt;/ul>
&lt;h2 id="additional-information">Additional information&lt;/h2>
&lt;p>This information should be filled in at a later time. Although it is not
required, it is recommended to complete this as much as possible.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Timezone&lt;/strong>: e.g. Europe/Amsterdam&lt;/li>
&lt;li>&lt;strong>Home URL&lt;/strong>: Site web homepage if any (eg: &lt;code>http://www.cnaf.infn.it&lt;/code>)&lt;/li>
&lt;li>&lt;strong>GIIS URL&lt;/strong>: SITE-BDII ldap url, e.g.
&lt;code>ldap://sibilla.cnaf.infn.it:2170/mds-vo-name=infn-cnaf,o=grid&lt;/code>&lt;/li>
&lt;li>&lt;strong>IP Range&lt;/strong>: (a.b.c.d/e.f.g.h) for the case of no firewall:
&lt;code>0.0.0.0/255.255.255.255&lt;/code>&lt;/li>
&lt;li>&lt;strong>Location&lt;/strong>: An increasing resolution ending with Country (Town, City,
Country), e.g. &lt;code>Soho, London, United Kingdom&lt;/code> (Alphanumeric and basic
punctuation)&lt;/li>
&lt;li>&lt;strong>Latitude&lt;/strong>: Latitude of the site e.g. &lt;code>52.370216&lt;/code> (+/-a.b)&lt;/li>
&lt;li>&lt;strong>Longitude&lt;/strong>: Longitude of the site e.g. &lt;code>4.895168&lt;/code> (+/-a.b)&lt;/li>
&lt;li>&lt;strong>Description&lt;/strong>: (Alphanumeric and basic punctuation)&lt;/li>
&lt;li>&lt;strong>Emergency Telephone Number&lt;/strong>: phone contact for emergency procedure
(numbers, optional +, dots spaces or dashes)&lt;/li>
&lt;li>&lt;strong>Alarm E-Mail&lt;/strong>: (for LCG Tier 1 sites) (valid email format)&lt;/li>
&lt;li>&lt;strong>Helpdesk E-Mail&lt;/strong>: endpoint to the local helpdesk for direct ticketing from
GGUS. If not set, the ROC/NGI helpdesk contact will be used instead (valid
email format)&lt;/li>
&lt;/ul>
&lt;p>See to Resource Centre registration and certification procedure
&lt;a href="https://confluence.egi.eu/display/EGIPP/PROC09+Resource+Centre+Registration+and+Certification">PROC09&lt;/a>.&lt;/p></description></item><item><title>Providers: HOWTO02 Site Certification Required Documentation</title><link>/providers/operations-manuals/howto02_site_certification_required_documentation/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/howto02_site_certification_required_documentation/</guid><description>
&lt;p>Documents required for Resource Centre registration and certification.&lt;/p>
&lt;p>The Resource Centre administrators should read and understand the first five
documents. It is a further requirement that the OLA between the NGI and RC, and
the Service Operations Policy are accepted by the Site Operations Manager.
Further, documents referred within the Service Operations Policy should also be
understood.&lt;/p>
&lt;h2 id="documentation">Documentation&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://confluence.egi.eu/display/EGIPP/PROC09+Resource+Centre+Registration+and+Certification">PROC09 Resource Centre Registration and Certification&lt;/a>:
Procedure document describing the steps required to register new Resource
Centres and certify new and suspended ones.&lt;/li>
&lt;li>&lt;a href="https://documents.egi.eu/document/3601">Service Operations Policy&lt;/a>: This
security policy presents the conditions that apply to anyone running a Service
on the Infrastructure, or to anyone providing a Service that is part of the
Infrastructure.&lt;/li>
&lt;li>&lt;a href="https://documents.egi.eu/document/31">Resource Centre Operational Level Agreement (OLA)&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://confluence.egi.eu/display/EGIPP/PROC11+Resource+Centre+Decommissioning">PROC11 Resource Centre Decommissioning Procedure&lt;/a>:
Procedure document describing the steps required to decommission a Resource
Centre.&lt;/li>
&lt;li>&lt;a href="https://confluence.egi.eu/display/EGIPP/PROC12+Production+Service+Decommissioning">PROC12 Production Service Decommissioning Procedure&lt;/a>:
Procedure document describing the steps required to decommission a production
service.&lt;/li>
&lt;li>&lt;a href="../../../internal/helpdesk">Helpdesk&lt;/a> and
&lt;a href="https://wiki.egi.eu/wiki/GGUS:FAQ">FAQs&lt;/a>: A collection of documentation
relevant to the EGI Helpdesk (GGUS). The User Guide and FAQ for direct site
notification are probably the most helpful.&lt;/li>
&lt;/ul>
&lt;h2 id="tools">Tools&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="../../../internal/configuration-database">Configuration Database (GOCDB)&lt;/a>&lt;/li>
&lt;li>&lt;a href="ttp://operations-portal.egi.eu">Operations Portal&lt;/a>&lt;/li>
&lt;li>ARGO Monitoring:
&lt;a href="https://argo.egi.eu/egi/report-status/Critical/SITES">RCs status&lt;/a>,
&lt;a href="https://argo.egi.eu/egi/report-ar/Critical/SITES">A/R reports&lt;/a>: The ARGO
Monitoring service periodically checks the functionality of the production
services.&lt;/li>
&lt;li>&lt;a href="https://documents.egi.eu/document/218">EGI Operations Architecture&lt;/a>: Document
describing the roles and responsibilities of the various layers in EGI and
also the architectural nomenclature.&lt;/li>
&lt;/ul></description></item><item><title>Providers: HOWTO03 Site Certification GIIS Check</title><link>/providers/operations-manuals/howto03_site_certificatoin_giis_check/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/howto03_site_certificatoin_giis_check/</guid><description>
&lt;p>Be sure that Resource Centre GIIS URL is contained in the BDII you use for
certification.&lt;/p>
&lt;h2 id="check-the-consistency-of-the-published-information">Check the consistency of the published information&lt;/h2>
&lt;p>These are the main branches of the LDAP tree:&lt;/p>
&lt;ul>
&lt;li>&lt;code>GlueSiteUniqueID&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueSubClusterUniqueID&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueCEUniqueID&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueCESEBind&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueSEUniqueID&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueServiceUniqueID&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>It is recommended to use the
&lt;a href="http://directory.apache.org/studio/">Apache Studio LDAP browser&lt;/a>, although in
this page &lt;code>ldapsearch&lt;/code> queries are shown.&lt;/p>
&lt;h3 id="contact-information">Contact information&lt;/h3>
&lt;p>Under the branch &lt;code>GlueSiteUniqueID&lt;/code> check the values of the following fields:&lt;/p>
&lt;ul>
&lt;li>&lt;code>GlueSiteName&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueSiteUserSupportContact&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueSiteSysAdminContact&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueSiteSecurityContact&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueSiteOtherInfo&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Example:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ ldapsearch -x -LLL -H ldap://sibilla.cnaf.infn.it:2170 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -b mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid &lt;span style="color:#4e9a06">&amp;#39;objectClass=GlueSite&amp;#39;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> GlueSiteName GlueSiteUserSupportContact GlueSiteSysAdminContact &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> GlueSiteSecurityContact GlueSiteOtherInfo
dn: &lt;span style="color:#000">GlueSiteUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueSiteSecurityContact: mailto:grid-sec@cnaf.infn.it
GlueSiteSysAdminContact: mailto:grid-operations@lists.cnaf.infn.it
GlueSiteName: INFN-CNAF
GlueSiteOtherInfo: &lt;span style="color:#000">CONFIG&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>yaim
GlueSiteOtherInfo: &lt;span style="color:#000">EGEE_SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
GlueSiteOtherInfo: &lt;span style="color:#000">EGI_NGI&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>NGI_IT
GlueSiteOtherInfo: &lt;span style="color:#000">GRID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>WLCG
GlueSiteOtherInfo: &lt;span style="color:#000">GRID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>EGI
GlueSiteOtherInfo: &lt;span style="color:#000">WLCG_TIER&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">3&lt;/span>
GlueSiteUserSupportContact: mailto:grid-operations@lists.cnaf.infn.it
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="information-related-to-software-environment">Information related to software environment&lt;/h3>
&lt;p>Under the branch &lt;code>GlueSubClusterUniqueID&lt;/code> check the values of the following
fields:&lt;/p>
&lt;ul>
&lt;li>Check that the &lt;code>GlueHostApplicationSoftwareRunTimeEnvironment&lt;/code> contains a list
of software tags supported by the site.
&lt;ul>
&lt;li>The list can include VO-specific software tags.&lt;/li>
&lt;li>In order to ensure backwards compatibility it should include the entry
&amp;lsquo;LCG-2&amp;rsquo;, the current middleware version and the list of previous middleware
tags (i.e. LCG-2 LCG-2_1_0 LCG-2_1_1 LCG-2_2_0 LCG-2_3_0 LCG-2_3_1 LCG-2_4_0
LCG-2_5_0 LCG-2_6_0 LCG-2_7_0 GLITE-3_0_0 GLITE-3_1_0 GLITE-3_2_0 R-GMA).&lt;/li>
&lt;li>If the site supports MPI, check
&lt;a href="https://wiki.egi.eu/wiki/MAN03_MPI-Start_Installation_and_Configuration#Information_System">MAN03&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>GlueHostProcessorOtherDescription&lt;/code> (see
&lt;a href="https://wiki.egi.eu/wiki/FAQ_HEP_SPEC06">FAQ HEP SPEC06&lt;/a>)&lt;/li>
&lt;li>&lt;code>GlueHostOperatingSystemName&lt;/code>, &lt;code>GlueHostOperatingSystemVersion&lt;/code> and
&lt;code>GlueHostOperatingSystemRelease&lt;/code> (see
&lt;a href="https://wiki.egi.eu/wiki/HOWTO05_How_to_publish_the_OS_name">HOWTO05&lt;/a>)&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Example:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ ldapsearch -x -LLL -H &lt;span style="color:#4e9a06">`&lt;/span>&amp;lt;ldap://virgo-ce.roma1.infn.it:2170&amp;gt;&lt;span style="color:#4e9a06">`&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -b mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid &lt;span style="color:#4e9a06">&amp;#39;objectClass=GlueSubCluster&amp;#39;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> GlueHostProcessorOtherDescription
dn: &lt;span style="color:#000">GlueSubClusterUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>virgo-ce.roma1.infn.it,GlueClusterUniqueID&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>virgo-ce.roma1.infn.it,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueHostProcessorOtherDescription: &lt;span style="color:#000">Cores&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>4, &lt;span style="color:#000">Benchmark&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>7.83-HEP-SPEC06
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="information-about-the-batch-system">Information about the batch system&lt;/h3>
&lt;p>Under the branch &lt;code>GlueCEUniqueID&lt;/code> check the values of the following fields:&lt;/p>
&lt;ul>
&lt;li>&lt;code>GlueCEInfoTotalCPUs&lt;/code>: Check that the value is higher than 0.&lt;/li>
&lt;li>&lt;code>GlueCEStateWaitingJobs&lt;/code>: If there is a “44444”, the information providers are
not working properly.&lt;/li>
&lt;li>&lt;code>GlueCEInfoLRMSType&lt;/code>: any supported batch system (sge, pbs, lsf&amp;hellip;)&lt;/li>
&lt;li>&lt;code>GlueCEStateStatus&lt;/code>: Production, Draining, Queuing or Closed are accepted
values.&lt;/li>
&lt;li>&lt;code>GlueCEAccessControlBaseRule&lt;/code>: VOs enabled on the queue&lt;/li>
&lt;li>&lt;code>GlueCECapability&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Example:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ ldapsearch -x -LLL -H ldap://virgo-ce.roma1.infn.it:2170 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -b mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-VIRGO,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid &lt;span style="color:#4e9a06">&amp;#39;objectClass=GlueCE&amp;#39;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> GlueCEInfoTotalCPUs GlueCEInfoJobManager GlueCEImplementationName
dn: &lt;span style="color:#000">GlueCEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>virgo-ce.roma1.infn.it:2119/jobmanager-lcgpbs-theophys,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-VIRGO,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueCEImplementationName: LCG-CE
GlueCEInfoJobManager: lcgpbs
GlueCEInfoTotalCPUs: &lt;span style="color:#0000cf;font-weight:bold">8&lt;/span>
dn: &lt;span style="color:#000">GlueCEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>virgo-ce.roma1.infn.it:2119/jobmanager-lcgpbs-cert,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-VIRGO,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueCEImplementationName: LCG-CE
GlueCEInfoJobManager: lcgpbs
GlueCEInfoTotalCPUs: &lt;span style="color:#0000cf;font-weight:bold">8&lt;/span>
dn: &lt;span style="color:#000">GlueCEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>virgo-ce.roma1.infn.it:2119/jobmanager-lcgpbs-virgoglong,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-VIRGO,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueCEImplementationName: LCG-CE
GlueCEInfoJobManager: lcgpbs
GlueCEInfoTotalCPUs: &lt;span style="color:#0000cf;font-weight:bold">8&lt;/span>
dn: &lt;span style="color:#000">GlueCEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>virgo-ce.roma1.infn.it:2119/jobmanager-lcgpbs-argo,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-VIRGO,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueCEImplementationName: LCG-CE
GlueCEInfoJobManager: lcgpbs
GlueCEInfoTotalCPUs: &lt;span style="color:#0000cf;font-weight:bold">8&lt;/span>
dn: &lt;span style="color:#000">GlueCEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>virgo-ce.roma1.infn.it:2119/jobmanager-lcgpbs-virgogshort,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-VIRGO,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueCEImplementationName: LCG-CE
GlueCEInfoJobManager: lcgpbs
GlueCEInfoTotalCPUs: &lt;span style="color:#0000cf;font-weight:bold">8&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ ldapsearch -x -LLL -H ldap://cmsrm-bdii.roma1.infn.it:2170 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -b mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-CMS,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid &lt;span style="color:#4e9a06">&amp;#39;objectclass=GlueCE&amp;#39;&lt;/span> GlueCECapability
dn: &lt;span style="color:#000">GlueCEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cmsrm-ce01.roma1.infn.it:2119/jobmanager-lcglsf-cmsgcert,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-CMS,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueCECapability: &lt;span style="color:#000">CPUScalingReferenceSI00&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1515&lt;/span>
GlueCECapability: &lt;span style="color:#000">Share&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cms:100
dn: &lt;span style="color:#000">GlueCEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cmsrm-ce01.roma1.infn.it:2119/jobmanager-lcglsf-cmsglong,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-CMS,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueCECapability: &lt;span style="color:#000">CPUScalingReferenceSI00&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1515&lt;/span>
GlueCECapability: &lt;span style="color:#000">Share&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cms:100
dn: &lt;span style="color:#000">GlueCEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cmsrm-ce01.roma1.infn.it:2119/jobmanager-lcglsf-cmsgshort,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-CMS,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueCECapability: &lt;span style="color:#000">CPUScalingReferenceSI00&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1515&lt;/span>
GlueCECapability: &lt;span style="color:#000">Share&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cms:100
dn: &lt;span style="color:#000">GlueCEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cmsrm-ce02.roma1.infn.it:2119/jobmanager-lcglsf-cmsglong,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-CMS,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueCECapability: &lt;span style="color:#000">CPUScalingReferenceSI00&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1515&lt;/span>
GlueCECapability: &lt;span style="color:#000">Share&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cms:100
dn: &lt;span style="color:#000">GlueCEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cmsrm-ce02.roma1.infn.it:2119/jobmanager-lcglsf-cmsgcert,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-CMS,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueCECapability: &lt;span style="color:#000">CPUScalingReferenceSI00&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1515&lt;/span>
GlueCECapability: &lt;span style="color:#000">Share&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cms:100
dn: &lt;span style="color:#000">GlueCEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cmsrm-ce02.roma1.infn.it:2119/jobmanager-lcglsf-cmsgshort,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-CMS,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueCECapability: &lt;span style="color:#000">CPUScalingReferenceSI00&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1515&lt;/span>
GlueCECapability: &lt;span style="color:#000">Share&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cms:100
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="information-on-computing-element-about-storage-elements">Information on Computing Element about Storage Elements&lt;/h3>
&lt;p>For each SE, on the CEs the following values must be present:&lt;/p>
&lt;ul>
&lt;li>&lt;code>GueCESEBindSEUniqueID&lt;/code>.
&lt;ul>
&lt;li>&lt;code>GlueCESEBindCEAccesspoint&lt;/code> and &lt;code>GlueCESEBindMountInfo&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Example:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ ldapsearch -x -LLL -H ldap://cremino.cnaf.infn.it:2170 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -b mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid &lt;span style="color:#4e9a06">&amp;#39;objectClass=GlueCESEBind&amp;#39;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> GlueCESEBindSEUniqueID GlueCESEBindCEUniqueID GlueCESEBindMountInfo
dn: &lt;span style="color:#000">GlueCESEBindSEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>sunstorm.cnaf.infn.it,GlueCESEBindGroupCEUniqueID&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cremino.cnaf.infn.it:8443/cream-pbs-cert,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueCESEBindSEUniqueID: sunstorm.cnaf.infn.it
GlueCESEBindMountInfo: n.a
GlueCESEBindCEUniqueID: cremino.cnaf.infn.it:8443/cream-pbs-cert
dn: &lt;span style="color:#000">GlueCESEBindSEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>sunstorm.cnaf.infn.it,GlueCESEBindGroupCEUniqueID&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cremino.cnaf.infn.it:8443/cream-pbs-prod,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueCESEBindSEUniqueID: sunstorm.cnaf.infn.it
GlueCESEBindMountInfo: n.a
GlueCESEBindCEUniqueID: cremino.cnaf.infn.it:8443/cream-pbs-prod
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="information-on-storage-elements">Information on Storage Elements&lt;/h3>
&lt;p>Under the branch &lt;code>GlueSEUniqueID&lt;/code> check the values of the following fields:&lt;/p>
&lt;ul>
&lt;li>&lt;code>GlueSALocalID&lt;/code>: VO information&lt;/li>
&lt;li>&lt;code>GlueSEAccessProtocolLocalID&lt;/code> : rfio, srm_v2, gsiftp, gsidcap&lt;/li>
&lt;li>&lt;code>GlueSEImplementationName&lt;/code> (deprecated)&lt;/li>
&lt;li>&lt;code>GlueSEArchitecture&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueSAStateUsedSpace&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueSAStateAvailableSpace&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueSACapability&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Example:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ ldapsearch -x -LLL -H ldap://grid-se.pv.infn.it:2170 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -b mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid &lt;span style="color:#4e9a06">&amp;#39;objectclass=GlueSE&amp;#39;&lt;/span>
dn: &lt;span style="color:#000">GlueSEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid-se.pv.infn.it,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueSEImplementationVersion: 1.7.4
GlueSETotalOnlineSize: &lt;span style="color:#0000cf;font-weight:bold">8795&lt;/span>
GlueSEStatus: Production
objectClass: GlueTop
objectClass: GlueSE
objectClass: GlueKey
objectClass: GlueSchemaVersion
GlueSETotalNearlineSize: &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>
GlueSEArchitecture: multidisk
GlueSESizeTotal: &lt;span style="color:#0000cf;font-weight:bold">8795&lt;/span>
GlueSESizeFree: &lt;span style="color:#0000cf;font-weight:bold">5458&lt;/span>
GlueSEName: INFN-PAVIA DPM server
GlueSchemaVersionMinor: &lt;span style="color:#0000cf;font-weight:bold">3&lt;/span>
GlueSEUsedNearlineSize: &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>
GlueForeignKey: &lt;span style="color:#000">GlueSiteUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-PAVIA
GlueSEUsedOnlineSize: &lt;span style="color:#0000cf;font-weight:bold">3336&lt;/span>
GlueSchemaVersionMajor: &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
GlueSEImplementationName: DPM
GlueSEUniqueID: grid-se.pv.infn.it
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ ldapsearch -x -LLL -H ldap://grid-se.pv.infn.it:2170 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -b mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid &lt;span style="color:#4e9a06">&amp;#39;objectclass=GlueSA&amp;#39;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> GlueSAAccessControlBaseRule GlueSACapability
dn: &lt;span style="color:#000">GlueSALocalID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>storage:replica:online,GlueSEUniqueID&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid-se.pv.infn.it,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueSAAccessControlBaseRule: VO:atlas
GlueSAAccessControlBaseRule: VO:dteam
GlueSAAccessControlBaseRule: VO:infngrid
GlueSAAccessControlBaseRule: VO:ops
GlueSACapability: &lt;span style="color:#000">InstalledOnlineCapacity&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">8258&lt;/span>
GlueSACapability: &lt;span style="color:#000">InstalledNearlineCapacity&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>
dn: &lt;span style="color:#000">GlueSALocalID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>ATLASHOTDISK:SR:replica:online,GlueSEUniqueID&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid-se.pv.infn.it,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueSAAccessControlBaseRule: VOMS:/atlas/Role&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>production
GlueSACapability: &lt;span style="color:#000">InstalledOnlineCapacity&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">536&lt;/span>
GlueSACapability: &lt;span style="color:#000">InstalledNearlineCapacity&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ ldapsearch -x -LLL -H ldap://grid-se.pv.infn.it:2170 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -b mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;span style="color:#4e9a06">&amp;#39;(&amp;amp;(objectclass=GlueSA)(GlueSALocalID=storage:replica:online))&amp;#39;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> GlueSAReservedNearlineSize GlueSAFreeNearlineSize &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> GlueSATotalNearlineSize GlueSAUsedNearlineSize GlueSACapability &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> GlueSATotalOnlineSize GlueSAFreeOnlineSize &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> GlueSAReservedOnlineSize GlueSAStateAvailableSpace &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> GlueSAUsedOnlineSize GlueSAStateUsedSpace
dn: &lt;span style="color:#000">GlueSALocalID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>storage:replica:online,GlueSEUniqueID&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid-se.pv.infn.it,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueSATotalNearlineSize: &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> GlueSAFreeOnlineSize: &lt;span style="color:#0000cf;font-weight:bold">4921&lt;/span>
GlueSAUsedNearlineSize: &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> GlueSAFreeNearlineSize: &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>
GlueSAReservedNearlineSize: &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> GlueSAStateAvailableSpace: &lt;span style="color:#0000cf;font-weight:bold">4921376492&lt;/span>
GlueSAReservedOnlineSize: &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> GlueSAUsedOnlineSize: &lt;span style="color:#0000cf;font-weight:bold">3336&lt;/span>
GlueSAStateUsedSpace: &lt;span style="color:#0000cf;font-weight:bold">3336991982&lt;/span> GlueSATotalOnlineSize: &lt;span style="color:#0000cf;font-weight:bold">8258&lt;/span>
GlueSACapability: &lt;span style="color:#000">InstalledOnlineCapacity&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">8258&lt;/span>
GlueSACapability: &lt;span style="color:#000">InstalledNearlineCapacity&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="information-about-other-services">Information about other services&lt;/h3>
&lt;p>There is a branch &lt;code>GlueServiceUniqueID&lt;/code> for each service published by the site
(WMS, LFC, DPM, GRIDICE, LB, MYPROXY, BDII, etc): what discriminates the
services are the values of &lt;code>GlueServiceType&lt;/code>, example:&lt;/p>
&lt;ul>
&lt;li>&lt;code>lcg-file-catalog&lt;/code>&lt;/li>
&lt;li>&lt;code>org.glite.wms.WMProxy&lt;/code>&lt;/li>
&lt;li>&lt;code>org.glite.lb.Server&lt;/code>&lt;/li>
&lt;li>&lt;code>srm_v1, SRM&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Example:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ ldapsearch -x -LLL -H ldap://sibilla.cnaf.infn.it:2170 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -b mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid &lt;span style="color:#4e9a06">&amp;#39;objectClass=GlueService&amp;#39;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> GlueServiceType GlueServiceEndpoint GlueServiceName
dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>lfcserver.cnaf.infn.it,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueServiceEndpoint: lfcserver.cnaf.infn.it
GlueServiceName: INFN-CNAF-lfc
GlueServiceType: lcg-file-catalog
dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>local-lfcserver.cnaf.infn.it,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueServiceEndpoint: lfcserver.cnaf.infn.it
GlueServiceName: INFN-CNAF-lfc
GlueServiceType: lcg-local-file-catalog
dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;http://lfcserver.cnaf.infn.it:8085/,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid&amp;gt;
GlueServiceEndpoint: &amp;lt;http://lfcserver.cnaf.infn.it:8085/&amp;gt;
GlueServiceName: INFN-CNAF-lfc-dli
GlueServiceType: data-location-interface
dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>myproxy.cnaf.infn.it_MyProxy_4027652676,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueServiceEndpoint: myproxy://myproxy.cnaf.infn.it:7512/
GlueServiceName: INFN-CNAF-MyProxy
GlueServiceType: MyProxy
dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>sibilla.cnaf.infn.it_bdii_site_3877936872,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueServiceEndpoint: &amp;lt;ldap://sibilla.cnaf.infn.it:2170/mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid&amp;gt;
GlueServiceName: INFN-CNAF-bdii_site
GlueServiceType: bdii_site
dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>local-http://lfcserver.cnaf.infn.it:8085/,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueServiceEndpoint: &amp;lt;http://lfcserver.cnaf.infn.it:8085/&amp;gt;
GlueServiceName: INFN-CNAF-lfc-dli
GlueServiceType: local-data-location-interface
dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>mon-it.cnaf.infn.it_Regional-NAGIOS_2937827985,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueServiceEndpoint: &amp;lt;https://mon-it.cnaf.infn.it:443/nagios&amp;gt;
GlueServiceName: INFN-CNAF-Regional-NAGIOS
GlueServiceType: Regional-NAGIOS
dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>httpg://sunstorm.cnaf.infn.it:8444/srm/managerv2,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueServiceEndpoint: httpg://sunstorm.cnaf.infn.it:8444/srm/managerv2
GlueServiceName: INFN-CNAF-SRM
GlueServiceType: SRM
dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>albalonga.cnaf.infn.it_org.glite.lb.server_889826742,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueServiceEndpoint: &amp;lt;https://albalonga.cnaf.infn.it:9003/&amp;gt;
GlueServiceName: INFN-CNAF-server
GlueServiceType: org.glite.lb.server
dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>gridit-ce-001.cnaf.infn.it_org.edg.gatekeeper_715226072,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueServiceEndpoint: gram://gridit-ce-001.cnaf.infn.it:2119/
GlueServiceName: INFN-CNAF-gatekeeper
GlueServiceType: org.edg.gatekeeper
dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>egee-wms-01.cnaf.infn.it_org.glite.wms.WMProxy_2200630265,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueServiceEndpoint: &amp;lt;https://egee-wms-01.cnaf.infn.it:7443/glite_wms_wmproxy_server&amp;gt;
GlueServiceName: INFN-CNAF-WMProxy
GlueServiceType: org.glite.wms.WMProxy
dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cremino.cnaf.infn.it_org.glite.ce.CREAM_860197007,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueServiceEndpoint: &amp;lt;https://cremino.cnaf.infn.it:8443/ce-cream/services&amp;gt;
GlueServiceName: INFN-CNAF-CREAM
GlueServiceType: org.glite.ce.CREAM
dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cremino.cnaf.infn.it_org.glite.ce.Monitor_2670664997,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueServiceEndpoint: &amp;lt;https://cremino.cnaf.infn.it:8443/ce-monitor/services/CEMonitor&amp;gt;
GlueServiceName: INFN-CNAF-Monitor
GlueServiceType: org.glite.ce.Monitor
dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>top-bdii01.cnaf.infn.it_bdii_top_1813027130,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
GlueServiceEndpoint: &amp;lt;ldap://egee-bdii.cnaf.infn.it:2170/mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>local,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid&amp;gt;
GlueServiceName: INFN-CNAF-bdii_top
GlueServiceType: bdii_top
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>See the Site Certification Manual tests
&lt;a href="../howto04_site_certification_manual_tests">HOWTO04&lt;/a>&lt;/p>
&lt;p>See to Resource Centre registration and certification procedure
&lt;a href="https://confluence.egi.eu/display/EGIPP/PROC09+Resource+Centre+Registration+and+Certification">PROC09&lt;/a>.&lt;/p></description></item><item><title>Providers: HOWTO04 Site Certification Manual tests</title><link>/providers/operations-manuals/howto04_site_certification_manual_tests/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/howto04_site_certification_manual_tests/</guid><description>
&lt;p>This page provides instructions on how to test manually the functionality of the
grid and cloud services offered by a site. These checks are executed by the EGI
Operations Team for sites that want to be formally included into EGI Production
infrastructure. The site must successfully pass either the grid or the cloud
certification tests to become part of the EGI Production infrastructure.&lt;/p>
&lt;h2 id="check-the-functionality-of-the-grid-elements">Check the functionality of the grid elements&lt;/h2>
&lt;p>Be sure that the site&amp;rsquo;s GIIS URL is contained in the Top level BDII/Information
System your NGI will use for your certification.&lt;/p>
&lt;p>Note that the examples here use the Italian NGI and sites. Please substitute
with &lt;strong>YOUR OWN&lt;/strong> NGI and site credentials when running the test.&lt;/p>
&lt;h3 id="cream-ce-checks">Cream-CE checks&lt;/h3>
&lt;p>Open in your browser the following URL:
&lt;code>https://&amp;lt;hostname-of-cream-ce&amp;gt;:8443/ce-cream/services&lt;/code>&lt;/p>
&lt;p>A page with link to the CREAM WSDL should be shown.&lt;/p>
&lt;p>Try a gsiftp (e.g. using &lt;code>globus-url-copy&lt;/code> or &lt;code>uberftp&lt;/code>) towards that CREAM CE.
E.g.:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ globus-url-copy &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> gsiftp://&amp;lt;hostname-of-cream-ce&amp;gt;/opt/glite/yaim/etc/versions/glite-yaim-core &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> file:/tmp/yaim-version-test
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Try the following command:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ glite-ce-allowed-submission &amp;lt;hostname-of-cream-ce&amp;gt;:8443
&lt;/code>&lt;/pre>&lt;/div>&lt;p>It should report: &lt;code>Job Submission to this CREAM CE is enabled&lt;/code>.&lt;/p>
&lt;p>Try a submission to Cream-CE using the &lt;code>glite-ce-job-submit&lt;/code> command, e.g.:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ cat sleep.jdl
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>
&lt;span style="color:#000">executable&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;/bin/sleep&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#000">arguments&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;1&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ glite-ce-job-submit -a -r &amp;lt;hostname-of-cream-ce&amp;gt;:8443/&amp;lt;queue&amp;gt; sleep.jdl
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ glite-ce-job-submit -a -r ce-cr-02.ts.infn.it:8443/cream-lsf-cert sleep.jdl
https://ce-cr-02.ts.infn.it:8443/CREAM127814374
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check the status of that job, which eventually should be &lt;code>DONE-OK&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ glite-ce-job-status https://ce-cr-02.ts.infn.it:8443/CREAM127814374
2010-07-27 11:55:37,986 WARN - No configuration file suitable &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> loading. Using built-in configuration
****** &lt;span style="color:#000">JobID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=[&lt;/span>https://ce-cr-02.ts.infn.it:8443/CREAM127814374&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;span style="color:#000">Status&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>DONE-OK&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;span style="color:#000">ExitCode&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>0&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Try a submission to that CE using the &lt;code>glite-ce-job-submit&lt;/code> command, and then
tries to cancel it (using the &lt;code>glite-ce-job-cancel&lt;/code> command):&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ cat sleep2.jdl
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>
&lt;span style="color:#000">executable&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;/bin/sleep&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#000">arguments&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;1000&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ glite-ce-job-submit -a -r cecream-cyb.ca.infn.it:8443/cream-lsf-poncert sleep2.jdl
https://cecream-cyb.ca.infn.it:8443/CREAM126335182
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ glite-ce-job-cancel https://cecream-cyb.ca.infn.it:8443/CREAM126335182
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ glite-ce-job-status https://cecream-cyb.ca.infn.it:8443/CREAM126335182
2010-07-27 12:18:26,973 WARN - No configuration file suitable &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> loading. Using built-in configuration
****** &lt;span style="color:#000">JobID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=[&lt;/span>https://cecream-cyb.ca.infn.it:8443/CREAM126335182&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;span style="color:#000">Status&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>CANCELLED&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;span style="color:#000">ExitCode&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[]&lt;/span>
&lt;span style="color:#000">Description&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>Cancelled by user&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="arc-ce-checks">ARC CE checks&lt;/h3>
&lt;p>A first test can be done using ARC&amp;rsquo;s &lt;code>ngstat&lt;/code> command:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ /usr/bin/ngstat -q -l -c &amp;lt;CE hostname&amp;gt; -t &lt;span style="color:#0000cf;font-weight:bold">20&lt;/span>
...
... plenty of output
...
&lt;/code>&lt;/pre>&lt;/div>&lt;p>If a
&lt;a href="http://wiki.nordugrid.org/wiki/Service_Monitoring">monitoring host of your NGI&lt;/a>
is available, then the probes can easily be executed from there:&lt;/p>
&lt;p>Check the status of the CE with:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ /usr/libexec/grid-monitoring/probes/org.ndgf/ARCCE-status &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -H &amp;lt;CE hostname&amp;gt; -x /etc/nagios/globus/userproxy.pem-ops
Status is active
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Test gsiftp:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ /usr/libexec/grid-monitoring/probes/org.ndgf/ARCCE-auth -H &amp;lt;CE hostname&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -x /etc/nagios/globus/userproxy.pem-ops
gsiftp OK
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Test the versions of the CA&amp;rsquo;s:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ /usr/libexec/grid-monitoring/probes/org.ndgf/ARCCE-caver -H &amp;lt;CE hostname&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -x /etc/nagios/globus/userproxy.pem-ops
&lt;span style="color:#000">version&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> 1.38 - All CAs present
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check the versions of ARC and Globus:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ /usr/libexec/grid-monitoring/probes/org.ndgf/ARCCE-softver &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -H &amp;lt;CE hostname&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -x /etc/nagios/globus/userproxy.pem-ops
nordugrid-arc-0.8.3.1, globus-5.0.3
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Copy a file:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ /usr/libexec/grid-monitoring/probes/org.ndgf/ARCCE-gridftp -H &amp;lt;CE hostname&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -x /etc/nagios/globus/userproxy.pem-ops
Job finished successfully
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Submit a test job:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ /usr/libexec/grid-monitoring/probes/org.ndgf/ARCCE-jobsubmit &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -H &amp;lt;CE hostname&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> --vo ops -x /etc/nagios/globus/userproxy.pem-ops
Job submission successful
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check the LFC:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ /usr/libexec/grid-monitoring/probes/org.ndgf/ARCCE-lfc -H &amp;lt;CE hostname&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -x /etc/nagios/globus/userproxy.pem-ops
Job finished successfully
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check the SRM:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ /usr/libexec/grid-monitoring/probes/org.ndgf/ARCCE-srm -H &amp;lt;CE hostname&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -x /etc/nagios/globus/userproxy.pem-ops
Job finished successfully
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Before continuing, you may want to make sure that the probes for all services
which the CE intends to offer, do actually succeed.&lt;/p>
&lt;h3 id="storage-element-se-checks">Storage Element (SE) checks&lt;/h3>
&lt;p>Check if &lt;code>gridftp&lt;/code> server on SE works:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ uberftp inaf-se-01.ct.pi2s2.it
&lt;/code>&lt;/pre>&lt;/div>&lt;p>For STORM SE: check if SRM client works (on the published information you can
find the right port to use)&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ /opt/storm/srm-clients/bin/clientSRM &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> ping -e httpg://sunstorm.cnaf.infn.it:8444
&lt;span style="color:#ce5c00;font-weight:bold">============================================================&lt;/span>
Sending Ping request to: httpg://sunstorm.cnaf.infn.it:8444
&lt;span style="color:#ce5c00;font-weight:bold">============================================================&lt;/span> Request status:
&lt;span style="color:#000">statusCode&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;SRM_SUCCESS&amp;#34;&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>0&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> &lt;span style="color:#000">explanation&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;SRM server successfully contacted&amp;#34;&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">============================================================&lt;/span> SRM Response:
&lt;span style="color:#000">versionInfo&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;v2.2&amp;#34;&lt;/span> otherInfo &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>&lt;span style="color:#000">size&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>2&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>0&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#000">key&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;backend_type&amp;#34;&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>0&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#000">value&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;StoRM&amp;#34;&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>1&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#000">key&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;backend_version&amp;#34;&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>1&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#000">value&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&amp;lt;FE:1.5.0-1.sl4&amp;gt;&amp;lt;BE:1.5.3-4.sl4&amp;gt;&amp;#34;&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">============================================================&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Try to write on SE. Be sure your UI is pointing to an IS the SE is contained in
(you may use your certification BDII)&lt;/p>
&lt;p>1) Setting a top-bdii that is publishing the SE you have to test&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ &lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">LCG_GFAL_INFOSYS&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;TopBDII hostname&amp;gt;:2170
&lt;/code>&lt;/pre>&lt;/div>&lt;p>2) Copy a file from the local filesystem to the SE, registering it in the LFC.
This command output will return a SURL that you can use latter for other tests.&lt;/p>
&lt;p>A SURL is a path of the type:
&lt;code>srm://srm01.ncg.ingrid.pt/ibergrid/iber/generated/2011-02-01/file4034a935-8d7a-48f4-914f-16f2634d4802&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ lcg-cr -v --vo &amp;lt;VO&amp;gt;-d&amp;lt;Your SE&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -l lfn:/grid/&amp;lt;VO&amp;gt;/test.txt file:&amp;lt;/path/to/your/local/file&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;p>3) Create a new replica in other SE (to check the 3rd party transfer between 2
SEs)&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ lcg-rep -v --vo &amp;lt;VO&amp;gt;-d&amp;lt;Other SE&amp;gt; &amp;lt;SURL&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;p>4) List Replicas&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ lcg-lr -v --vo &amp;lt;VO&amp;gt; lfn:/grid/&amp;lt;VO&amp;gt;/test.txt
&lt;/code>&lt;/pre>&lt;/div>&lt;p>5) Delete all replicas&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ lcg-del -v --vo &amp;lt;VO&amp;gt;-a&amp;lt;guid&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="job-submission">Job submission&lt;/h3>
&lt;p>Submit a test job to &lt;strong>Cream-CE&lt;/strong> through the &lt;strong>WMS&lt;/strong>, i.e. using the
&lt;code>glite-wms-job-submit&lt;/code> command. In case, submit a mpi test job. The NGI_IT
certification WMS is &lt;code>gridit-cert-wms.cnaf.infn.it&lt;/code>.&lt;/p>
&lt;h3 id="registration-into-1st-level-hlr">Registration into 1st level HLR&lt;/h3>
&lt;p>&lt;strong>NOTE: this step is needed if your infrastructure uses DGAS as accounting
system&lt;/strong>&lt;/p>
&lt;p>After the site entered in production, it needs to register the site resources in
the HLR. Ask the site admins to open a ticket towards the HLR administrators,
passing them the following information:&lt;/p>
&lt;ul>
&lt;li>grid queues names, in the form:
&lt;ul>
&lt;li>&lt;code>gridit-ce-001.cnaf.infn.it:2119/jobmanager-lcgpbs-cert&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>not-grid queues names, in the form:
&lt;ul>
&lt;li>&lt;code>hostname:queue&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Name, surname ad certificate subject of each site admin&lt;/li>
&lt;li>Certificate subject of Computing Element&lt;/li>
&lt;/ul>
&lt;p>Eventually, the site admins have to open a ticket to DGAS support unit asking to
enable the forwarding of accounting data from the 2° level HLR to APEL.&lt;/p>
&lt;h3 id="certification-job">Certification Job&lt;/h3>
&lt;p>The &lt;a href="https://wiki.egi.eu/wiki/Certification_Job_template">test job&lt;/a> checks
several things, like the environment on WN and installed RPMs. Moreover it
performs some replica management tests. With a &lt;code>grep TEST&lt;/code> you may get a summary
of the results: in case of errors, you have to see in detail what is gone wrong!&lt;/p>
&lt;p>As already said, if the site supports any flavour of MPI, launch a MPI test job,
like &lt;a href="https://wiki.egi.eu/wiki/MPI_Certification_Job_template">this&lt;/a>.&lt;/p>
&lt;p>Don&amp;rsquo;t forget to set a reasonable value in &lt;code>CPUNumber&lt;/code>: most important is that
your job starts running quickly.&lt;/p>
&lt;p>If you want less stuff in the &lt;code>.out&lt;/code> and &lt;code>.err&lt;/code> files, in the file
&lt;code>mpi-start-wrapper.sh&lt;/code> comment the line&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ &lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">I2G_MPI_START_DEBUG&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>A successful output will look like the following one (extract)&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
mpi-start &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>DEBUG &lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>: using user supplied startup : &lt;span style="color:#4e9a06">&amp;#39;/opt/mpich-1.2.7p1/bin/mpirun &amp;#39;&lt;/span>
mpi-start &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>DEBUG &lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>: &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;gt; &lt;span style="color:#000">MPI_SPECIFIC_PARAMS&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>
mpi-start &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>DEBUG &lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>: &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;gt; &lt;span style="color:#000">I2G_MPI_PRECOMMAND&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>
mpi-start &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>DEBUG &lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>: &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;gt; &lt;span style="color:#000">MPIEXEC&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>/opt/mpich-1.2.7p1/bin/mpirun
mpi-start &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>DEBUG &lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>: &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;gt; &lt;span style="color:#000">I2G_MACHINEFILE_AND_NP&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>-machinefile /tmp/tmp.iBypc12521 -np &lt;span style="color:#0000cf;font-weight:bold">6&lt;/span>
mpi-start &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>DEBUG &lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>: &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;gt; &lt;span style="color:#000">I2G_MPI_APPLICATION&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>/home/dteam022/globus-tmp.t3-wn-13.11955.0/https_3a_2f_2falbalonga.cnaf.infn.it_3a9000_2fI06uWaKi1evxL3tTF-DTOg/hello
mpi-start &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>DEBUG &lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>: &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;gt; &lt;span style="color:#000">I2G_MPI_APPLICATION_ARGS&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>
mpi-start &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>DEBUG &lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>: /opt/mpich-1.2.7p1/bin/mpirun -machinefile /tmp/tmp.iBypc12521 -np &lt;span style="color:#0000cf;font-weight:bold">6&lt;/span> /home/dteam022/globus-tmp.t3-wn-13.11955.0/https_3a_2f_2falbalonga.cnaf.infn.it_3a9000_2fI06uWaKi1evxL3tTF-DTOg/hello
Process &lt;span style="color:#0000cf;font-weight:bold">4&lt;/span> on t3-wn-37.pn.pd.infn.it out of &lt;span style="color:#0000cf;font-weight:bold">6&lt;/span>
Process &lt;span style="color:#0000cf;font-weight:bold">3&lt;/span> on t3-wn-34.pn.pd.infn.it out of &lt;span style="color:#0000cf;font-weight:bold">6&lt;/span>
Process &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> on t3-wn-13.pn.pd.infn.it out of &lt;span style="color:#0000cf;font-weight:bold">6&lt;/span>
Process &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> on t3-wn-34.pn.pd.infn.it out of &lt;span style="color:#0000cf;font-weight:bold">6&lt;/span>
Process &lt;span style="color:#0000cf;font-weight:bold">5&lt;/span> on t3-wn-37.pn.pd.infn.it out of &lt;span style="color:#0000cf;font-weight:bold">6&lt;/span>
Process &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> on t3-wn-13.pn.pd.infn.it out of &lt;span style="color:#0000cf;font-weight:bold">6&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="globus-checks">Globus checks&lt;/h3>
&lt;blockquote>
&lt;p>These checks should be executed depending on the services registered in GOCDB
under a Resource Centre. Not all services are compulsory for a RC, but upon
registration of new ones, the corresponding tests should be executed.&lt;/p>
&lt;/blockquote>
&lt;h4 id="gsissh">GSISSH&lt;/h4>
&lt;p>Initialize grid proxy and check if GSISSH works:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ grid-proxy-init
$ gsissh USER@HOST -p &lt;span style="color:#0000cf;font-weight:bold">2222&lt;/span> /bin/date
&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>Debug with: USER@HOST -vvv -p &lt;span style="color:#0000cf;font-weight:bold">2222&lt;/span> /bin/date&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="gridftp">GridFTP&lt;/h4>
&lt;p>Check if upload works:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ globus-url-copy file:/tmp/test.txt gsiftp://HOST:2811/tmp/test.txt
&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>Debug with: globus-url-copy -dbg -v -vb file:/tmp/test.txt gsiftp://HOST:2811/tmp/test.txt&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check if download works:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ globus-url-copy gsiftp://HOST:2811/tmp/test.txt file:/tmp/test.txt
&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>Debug with: globus-url-copy -dbg -v -vb gsiftp://HOST:2811/tmp/test.txt file:/tmp/test.txt&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Delete the remote file:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ uberftp HOST &lt;span style="color:#4e9a06">&amp;#39;rm /tmp/test.txt&amp;#39;&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>Debug with: uberftp HOST &lt;span style="color:#4e9a06">&amp;#39;rm /tmp/test.txt&amp;#39;&lt;/span> -debug 3&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="gram">GRAM&lt;/h4>
&lt;p>Check authentication:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ globusrun -a -r HOST:2119
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check job submission:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ globusrun -s -r HOST:2119 &lt;span style="color:#4e9a06">&amp;#34;&amp;amp;(executable=&amp;#34;&lt;/span>/bin/date&lt;span style="color:#4e9a06">&amp;#34;)&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="unicore-checks">Unicore checks&lt;/h3>
&lt;p>This testing manual assumes that the test instance has not been added to the
“Global” registry. “Global” registry does not have to be global (for the whole
infrastructure) - is a register used by a group of site which work together. For
example each Resource Infrastructure Provider can have own “Global” registry.&lt;/p>
&lt;p>It is suggested to add the instance to the “Global” registry only if it was
tested and works properly. For this reason this instruction refers to the local
registry.&lt;/p>
&lt;h4 id="preliminary-testing">Preliminary testing&lt;/h4>
&lt;p>After installation and configuration, start all the services and see if
functioning properly. To avoid errors/warnings in the logs first start the TSI
and the Gateway and then the Unicore/X (requires two other servers to operate).
The first step of verification is to verify proper configuration of log files
for all services whether they running. Logs for Unicore/X and Gateway are in
standard locations &lt;code>/var/log/unicore/unicorex/unicorex.log&lt;/code> and
&lt;code>/var/log/unicore/gateway/gateway.log&lt;/code>. In the case where there is no log file,
check the file &lt;code>/var/log/unicore/unicorex/unicorex-startup.log&lt;/code> or
&lt;code>/var/log/unicore/gateway/gateway-startup.log&lt;/code> - those file contain the servers'
standard output  output, and can be useful in case of generic, system-wide
issues as missing  Java virtual machine. Log files should be checked carefully
for warnings and errors. They should show only the information about the start
of the service, without any warnings (the WARN label) or errors (the ERROR
label). In case of problems, you should proceed according to the information
found in the log files. If they are unclear you should increase logging detail
(for Unicore/X and Gateway). This is set in the file
&lt;code>/etc/unicore/gateway/logging.properties&lt;/code> and
&lt;code>/etc/unicore/unicorex/logging.properties&lt;/code>. UNICORE uses log4j logging
subsystem. When you change the login parameters is not required to restart the
component. After the successful initialization of all services you can begin to
test them in practice. Please connect to the site via any UNICORE client (URC or
UCC). Since the registration of newly created VSite was initially turned off in
the global registry, you should use the local registry. The local registry
address is:
&lt;code>https://GATEWAY-ADDESS/VSITE_NAME/services/Registry?res=default_registry&lt;/code>. Is
recommended for test script execution, which displays the user. This should be a
user associated with the certificate.&lt;/p>
&lt;h4 id="testing-using-the-urc">Testing using the URC&lt;/h4>
&lt;ol>
&lt;li>Testing should start from setting up the user&amp;rsquo;s credentials,&lt;/li>
&lt;li>A local registry should be added in URC Grid Browser view..&lt;/li>
&lt;li>The registry contents should be listed, by double clicking on its node. It is
worth to enable the display of all sites by clicking on the Grid Browser the
&amp;ldquo;Show&amp;rdquo; button and selecting from the list &amp;ldquo;All services&amp;rdquo;. If you see a red
cross on the service, click on it and see the details of the error message in
the URC and the error on the server side.&lt;/li>
&lt;li>If all services are available, you can send the job. At the same time it is
recommended to monitor the logs Unicore/X and TSI for errors.&lt;/li>
&lt;/ol>
&lt;h4 id="testing-using-the-ucc">Testing using the UCC&lt;/h4>
&lt;ol>
&lt;li>Configure UCC credentials&lt;/li>
&lt;li>Configure the registry in UCC preferences file (the registry property).&lt;/li>
&lt;li>Invoke:&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">/ucc shell
ucc&amp;gt; connect
You can access &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> target system&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>s&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>.
ucc&amp;gt; list-sites
VSITE_NAME https://GATEWAY_ADDRESS/VSITE_NAME/services/TargetSystemService?res&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
ucc&amp;gt; list-storages
SHARE https://GATEWAY_ADDRESS/VSITE_NAME/services/services/StorageManagement?res&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>default_storage
ucc&amp;gt; ls u6://SHARE
/a5063ea0-ecbe-4097-9abc-f55ec9437376
/3f501d37-5851-4c9e-a1da-5ad7b9f16633
/3bf169c2-2149-4564-b827-0b6560a3dd35
...
ucc&amp;gt; list-applications
Applications on target system &amp;lt;VSITE_NAME&amp;gt;
R 2.10.0
BLAST 2.2.22
POVRay 3.6.1
...
&lt;/code>&lt;/pre>&lt;/div>&lt;p>We should get a message similar to the above. Then test the file transfer:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">ucc&amp;gt; put-file -s LOCAL_FILE_PATH &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -t https://GATEWAY_ADDRESS/VSITE_NAME/services/StorageManagement?res&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>default_storage#TARGET_FILE_NAME
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And job submission:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">ucc&amp;gt; run -s VSITE_NAME JOB_FILE_PATH.u
SUCCESSFUL &lt;span style="color:#204a87">exit&lt;/span> code: &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>If an error occurs, you can on each of these commands add the &amp;ldquo;-v&amp;rdquo; flag, what
increases  UCC verbosity. As in the URC case it is advised to simultaneously
monitor Unicore / Xa and TSI log files.&lt;/p>
&lt;h5 id="after-testing">After testing&lt;/h5>
&lt;p>If testing was successful, you can unlock the registration system in the global
registry.&lt;/p>
&lt;h2 id="qcg-checks">QCG checks&lt;/h2>
&lt;h3 id="qcg-computhng-checks">QCG Computhng checks&lt;/h3>
&lt;p>The presented tests of QCG-Computing service use the qcg-comp, the client
program for QCG-Computing, that may be installed from provided RPMS. In order to
connect to QCG-Computing the grid proxy must be created.&lt;/p>
&lt;p>&lt;strong>Generate user’s proxy:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ grid-proxy-init
Your identity: /C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Mariusz Mamonski
Enter GRID pass phrase &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> this identity:
Creating proxy ............................ Done
Your proxy is valid &lt;span style="color:#204a87;font-weight:bold">until&lt;/span>: Fri Jun &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> 06:23:32 &lt;span style="color:#0000cf;font-weight:bold">2011&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Query the QCG-Computing service:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">&lt;span style="color:#8f5902;font-style:italic"># the xmllint is used only to present the result in more pleasant way&lt;/span>
$ qcg-comp -G &lt;span style="color:#000;font-weight:bold">|&lt;/span> xmllint --format -
&amp;lt;bes-factory:FactoryResourceAttributesDocument xmlns:bes-factory&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;http://schemas.ggf.org/bes/2006/08/bes-factory&amp;#34;&lt;/span>&amp;gt;
… a lot of information …   
&amp;lt;/bes-factory:FactoryResourceAttributesDocument&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Submit a sample job:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ qcg-comp -c -J /opt/plgrid/qcg/share/qcg-comp/doc/examples/date.xml
Activity Id: ccb6b04a-887b-4027-633f-412375559d73
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Query its status:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ qcg-comp -s -a ccb6b04a-887b-4027-633f-412375559d73
&lt;span style="color:#000">status&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> Executing
$ qcg-comp -s -a ccb6b04a-887b-4027-633f-412375559d73
&lt;span style="color:#000">status&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> Finished
&lt;span style="color:#204a87">exit&lt;/span> &lt;span style="color:#000">status&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="qcg-notification-checks">QCG Notification checks&lt;/h3>
&lt;p>The tests of QCG-Notification require &lt;code>qcg-ntf-client&lt;/code> program to be installed
in a system. The program is provided in RPM package.&lt;/p>
&lt;p>&lt;strong>Create a sample subscription:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ qcg-ntf-client -d &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -S &lt;span style="color:#4e9a06">&amp;#34;cons=http://127.0.0.1:2212 top=http://schemas.qoscosgrid.org/comp/2011/04/notification/topic;//*;Full&amp;#34;&lt;/span>
...
INF May &lt;span style="color:#0000cf;font-weight:bold">17&lt;/span> 14:15:51 &lt;span style="color:#0000cf;font-weight:bold">1128&lt;/span> 0xa0262720 &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>qcg-client-gsoa&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> Subscribed, subRef: &lt;span style="color:#4e9a06">&amp;#39;810917963&amp;#39;&lt;/span>
...
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Remove the created subscription:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ qcg-ntf-client -d -U &lt;span style="color:#4e9a06">&amp;#34;id=810917963&amp;#34;&lt;/span>
...
INF May &lt;span style="color:#0000cf;font-weight:bold">17&lt;/span> 14:41:48 &lt;span style="color:#0000cf;font-weight:bold">3318&lt;/span> 0xa0262720 &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>qcg-client-gsoa&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> Unsubscribed: &lt;span style="color:#4e9a06">&amp;#39;810917963&amp;#39;&lt;/span>
…
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Checking the connection with QCG-Computing:&lt;/strong> In one shell run ‘tail -f’ on
the QCG-Computing log file and in the other try to submit a sample job using the
qcg-comp program (as described above). Check the tail output if there are no
error messages on sending notifications. E.g. the following lines means that the
connection problems occurred:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ tail -f /opt/qcg/var/log/qcg-comp/qcg-compd.log
INF Oct &lt;span style="color:#0000cf;font-weight:bold">04&lt;/span> 10:55:33 &lt;span style="color:#0000cf;font-weight:bold">18929&lt;/span> 0x2adadc2abe30 &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>notification_ws&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> Sending notify: 320f014c-3181-4daf-bbd9-1824b7d8216a -&amp;gt; Queued
NOT Oct &lt;span style="color:#0000cf;font-weight:bold">04&lt;/span> 10:55:33 &lt;span style="color:#0000cf;font-weight:bold">18929&lt;/span> 0x2adadc2abe30 &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>.....ntf_client&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> FaultCode: &lt;span style="color:#4e9a06">&amp;#39;SOAP-ENV:Client&amp;#39;&lt;/span>
NOT Oct &lt;span style="color:#0000cf;font-weight:bold">04&lt;/span> 10:55:33 &lt;span style="color:#0000cf;font-weight:bold">18929&lt;/span> 0x2adadc2abe30 &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>.....ntf_client&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> FaultString: &lt;span style="color:#4e9a06">&amp;#39;smcm:ActivityState&amp;#39;&lt;/span>
NOT Oct &lt;span style="color:#0000cf;font-weight:bold">04&lt;/span> 10:55:33 &lt;span style="color:#0000cf;font-weight:bold">18929&lt;/span> 0x2adadc2abe30 &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>.....ntf_client&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> FaultDetail: &lt;span style="color:#4e9a06">&amp;#39;&amp;lt;SOAP-ENV:Detail xmlns:SOAP-ENV=&amp;#34;http://schemas.xmlsoap.org/soap/envelope/&amp;#34;&amp;gt;connect failed in tcp_connect()&amp;lt;/SOAP-ENV:Detail&amp;gt;&amp;#39;&lt;/span>
ERR Oct &lt;span style="color:#0000cf;font-weight:bold">04&lt;/span> 10:55:33 &lt;span style="color:#0000cf;font-weight:bold">18929&lt;/span> 0x2adadc2abe30 &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>notification_ws&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> Failed to send notification to http://grass1.man.poznan.pl:19011/
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="qcg-broker-checks">QCG Broker checks&lt;/h3>
&lt;p>The basic tests of QCG-Broker service may be proceeded with help of
&lt;code>qcg-simple-client&lt;/code>, the software that provides a set of commands for
interaction with QCG-Broker. &lt;code>qcg-simple-client&lt;/code> may be installed from RPMs.&lt;/p>
&lt;p>&lt;strong>Create a sample job description:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ cat &amp;gt; sleep.qcg &lt;span style="color:#4e9a06">&amp;lt;&amp;lt; EOF
&lt;/span>&lt;span style="color:#4e9a06">#!/bin/bash
&lt;/span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;span style="color:#4e9a06">#QCG queue=plgrid
&lt;/span>&lt;span style="color:#4e9a06">#QCG host=nova.wcss.wroc.pl
&lt;/span>&lt;span style="color:#4e9a06">#QCG persistent
&lt;/span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;span style="color:#4e9a06">sleep 30
&lt;/span>&lt;span style="color:#4e9a06">EOF&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Submit a job:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ qcg-sub sleep.qcg
https://qcg-broker.man.poznan.pl:8443/qcg/services/
/C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>qcg-broker/qcg-broker.man.poznan.pl
Your identity: &lt;span style="color:#000">C&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL,O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID,O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC,CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Bartosz Bosak
Enter GRID pass phrase &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> this identity:
Creating proxy, please wait...
Proxy verify OK
Your proxy is valid &lt;span style="color:#204a87;font-weight:bold">until&lt;/span> Tue Mar &lt;span style="color:#0000cf;font-weight:bold">12&lt;/span> 14:50:27 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
&lt;span style="color:#000">UserDN&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> /C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Bartosz Bosak
&lt;span style="color:#000">ProxyLifetime&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">24&lt;/span> Days &lt;span style="color:#0000cf;font-weight:bold">23&lt;/span> Hours &lt;span style="color:#0000cf;font-weight:bold">59&lt;/span> Minutes &lt;span style="color:#0000cf;font-weight:bold">58&lt;/span> Seconds
&lt;span style="color:#000">jobId&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> J1360936230540__0152
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Check the job statuses:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ qcg-info
https://qcg-broker.man.poznan.pl:8443/qcg/services/
/C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>qcg-broker/qcg-broker.man.poznan.pl
&lt;span style="color:#000">UserDN&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> /C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Bartosz Bosak
&lt;span style="color:#000">ProxyLifetime&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">24&lt;/span> Days &lt;span style="color:#0000cf;font-weight:bold">23&lt;/span> Hours &lt;span style="color:#0000cf;font-weight:bold">59&lt;/span> Minutes &lt;span style="color:#0000cf;font-weight:bold">49&lt;/span> Seconds
Command translated to:
&lt;span style="color:#4e9a06">&amp;#34;task_info&amp;#34;&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;J1360936230540__0152&amp;#34;&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;task&amp;#34;&lt;/span>
Note:
UserDN: /C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Bartosz Bosak
TaskType: SINGLE
SubmissionTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:31 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
FinishTime:
ProxyLifetime: PT0S
Status: PREPROCESSING
StatusDesc:
StartTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:33 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
Allocation:
HostName: nova.wcss.wroc.pl
ProcessesCount: &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
ProcessesGroupId:
Status: PREPROCESSING
StatusDescription:
SubmissionTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:32 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
FinishTime:
LocalSubmissionTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:37 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
LocalStartTime:
LocalFinishTime:
$ qcg-info
https://qcg-broker.man.poznan.pl:8443/qcg/services/
/C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>qcg-broker/qcg-broker.man.poznan.pl
&lt;span style="color:#000">UserDN&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> /C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Bartosz Bosak
&lt;span style="color:#000">ProxyLifetime&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">24&lt;/span> Days &lt;span style="color:#0000cf;font-weight:bold">23&lt;/span> Hours &lt;span style="color:#0000cf;font-weight:bold">59&lt;/span> Minutes &lt;span style="color:#0000cf;font-weight:bold">23&lt;/span> Seconds
Command translated to:
&lt;span style="color:#4e9a06">&amp;#34;task_info&amp;#34;&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;J1360936230540__0152&amp;#34;&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;task&amp;#34;&lt;/span>
Note:
UserDN: /C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Bartosz Bosak
TaskType: SINGLE
SubmissionTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:31 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
FinishTime:
ProxyLifetime: PT0S
Status: RUNNING
StatusDesc:
StartTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:33 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
Allocation:
HostName: nova.wcss.wroc.pl
ProcessesCount: &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
ProcessesGroupId:
Status: RUNNING
StatusDescription:
SubmissionTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:32 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
FinishTime:
LocalSubmissionTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:37 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
LocalStartTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:47 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
LocalFinishTime:
$ qcg-info
https://qcg-broker.man.poznan.pl:8443/qcg/services/
/C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>qcg-broker/qcg-broker.man.poznan.pl
&lt;span style="color:#000">UserDN&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> /C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Bartosz Bosak
&lt;span style="color:#000">ProxyLifetime&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">24&lt;/span> Days &lt;span style="color:#0000cf;font-weight:bold">23&lt;/span> Hours &lt;span style="color:#0000cf;font-weight:bold">56&lt;/span> Minutes &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> Seconds
Command translated to:
&lt;span style="color:#4e9a06">&amp;#34;task_info&amp;#34;&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;J1360936230540__0152&amp;#34;&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;task&amp;#34;&lt;/span>
Note:
UserDN: /C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Bartosz Bosak
TaskType: SINGLE
SubmissionTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:31 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
FinishTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:52:17 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
ProxyLifetime: PT0S
Status: FINISHED
StatusDesc:
StartTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:33 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
Allocation:
HostName: nova.wcss.wroc.pl
ProcessesCount: &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
ProcessesGroupId:
Status: FINISHED
StatusDescription:
SubmissionTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:32 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
FinishTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:52:12 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
LocalSubmissionTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:37 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
LocalStartTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:47 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
LocalFinishTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:52:09 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="check-the-functionality-of-the-cloud-elements">Check the functionality of the cloud elements&lt;/h2>
&lt;p>Sites can provide any (not necessarily all) of the interfaces listed below:&lt;/p>
&lt;ul>
&lt;li>OCCI for VM Management&lt;/li>
&lt;li>OpenStack Compute for VM Management&lt;/li>
&lt;li>CDMI for Object Storage&lt;/li>
&lt;/ul>
&lt;h3 id="cloud-compute-occiopenstack-checks-prerequisites">Cloud Compute (OCCI/OpenStack) checks prerequisites&lt;/h3>
&lt;h4 id="appdb-integration">AppDB integration&lt;/h4>
&lt;p>&lt;em>NOTE:&lt;/em> Prerequisite: run the following commands is the installation of the EGI
rOCCI CLI environment, according to
&lt;a href="https://wiki.egi.eu/wiki/Fedcloud-tf:CLI_Environment">this guide&lt;/a>.&lt;/p>
&lt;p>Go to AppDB and look for a OS image member of the &lt;code>fedcloud.egi.eu&lt;/code> VO (all
sites should support), e.g.
&lt;a href="https://appdb.egi.eu/store/vappliance/egi.centos.7">EGI CentOS 7 image&lt;/a>&lt;/p>
&lt;p>Check that the site is visible in to the AppDB &amp;ldquo;Availability and Usage&amp;rdquo; panel
for the image. If not, probably the site has not registered the FedCloud VO into
their middleware (vmcatcher) or it did not properly configured the BDII provider
script.&lt;/p>
&lt;p>From that &amp;ldquo;Availability and Usage&amp;rdquo; panel, click on the Site name, then on the
latest VM Image version, select a resource template (preferably with the
smallest quantity of resources (RAM &amp;amp; CPU)) and click on the &amp;ldquo;get IDs&amp;rdquo; button on
the right of the resource template. You will get the &amp;ldquo;Site Endpoint&amp;rdquo;, &amp;ldquo;Template
ID&amp;rdquo; and &amp;ldquo;OCCI ID&amp;rdquo;. Save these values since they will be needed in the next
steps.&lt;/p>
&lt;h4 id="credentials">Credentials&lt;/h4>
&lt;p>Generate a set of keys for your user (it is not required to set a phassphrase
for the keys, since these are just temporary keys for the test), make sure to
set key permissions to &lt;code>400&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ ssh-keygen -t rsa -b &lt;span style="color:#0000cf;font-weight:bold">2048&lt;/span> -f tempkey
Generating public/private rsa key pair.
Enter passphrase &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>empty &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> no passphrase&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>:
Enter same passphrase again:
Your identification has been saved in tempkey.
Your public key has been saved in tempkey.pub.
The key fingerprint is:
&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
$ chmod &lt;span style="color:#0000cf;font-weight:bold">400&lt;/span> tempkey
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create a simple contextualization script, to setup access keys on the machine
and test contextualization&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ cat &lt;span style="color:#4e9a06">&amp;lt;&amp;lt; EOF &amp;gt; ctx.txt
&lt;/span>&lt;span style="color:#4e9a06">Content-Type: multipart/mixed; boundary=&amp;#34;===============4393449873403893838==&amp;#34;
&lt;/span>&lt;span style="color:#4e9a06">MIME-Version: 1.0
&lt;/span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;span style="color:#4e9a06">--===============4393449873403893838==
&lt;/span>&lt;span style="color:#4e9a06">Content-Type: text/x-shellscript; charset=&amp;#34;us-ascii&amp;#34;
&lt;/span>&lt;span style="color:#4e9a06">MIME-Version: 1.0
&lt;/span>&lt;span style="color:#4e9a06">Content-Transfer-Encoding: 7bit
&lt;/span>&lt;span style="color:#4e9a06">Content-Disposition: attachment; filename=&amp;#34;deploy.sh&amp;#34;
&lt;/span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;span style="color:#4e9a06">#!/bin/bash
&lt;/span>&lt;span style="color:#4e9a06">echo &amp;#34;OK&amp;#34; &amp;gt; /tmp/deployment.log
&lt;/span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;span style="color:#4e9a06">--===============4393449873403893838==
&lt;/span>&lt;span style="color:#4e9a06">Content-Type: text/cloud-config; charset=&amp;#34;us-ascii&amp;#34;
&lt;/span>&lt;span style="color:#4e9a06">MIME-Version: 1.0
&lt;/span>&lt;span style="color:#4e9a06">Content-Transfer-Encoding: 7bit
&lt;/span>&lt;span style="color:#4e9a06">Content-Disposition: attachment; filename=&amp;#34;userdata.txt&amp;#34;
&lt;/span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;span style="color:#4e9a06">#cloud-config
&lt;/span>&lt;span style="color:#4e9a06">users:
&lt;/span>&lt;span style="color:#4e9a06">- name: testadm
&lt;/span>&lt;span style="color:#4e9a06"> sudo: ALL=(ALL) NOPASSWD:ALL
&lt;/span>&lt;span style="color:#4e9a06"> lock-passwd: true
&lt;/span>&lt;span style="color:#4e9a06"> ssh-import-id: testadm
&lt;/span>&lt;span style="color:#4e9a06"> ssh-authorized-keys:
&lt;/span>&lt;span style="color:#4e9a06"> - `cat tempkey.pub`
&lt;/span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;span style="color:#4e9a06">--===============4393449873403893838==--
&lt;/span>&lt;span style="color:#4e9a06">EOF&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create a proxy in &lt;strong>RFC&lt;/strong> format for your tests:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ voms-proxy-init -rfc -voms fedcloud.egi.eu
Your identity: /DC&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>es/DC&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>irisgrid/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>ifca/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Enol-Fernandez-delCastillo
Creating temporary proxy .......................................................................... Done
Contacting voms2.grid.cesnet.cz:15002 &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>/DC&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>org/DC&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>terena/DC&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>tcs/OU&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Domain Control Validated/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>voms2.grid.cesnet.cz&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;fedcloud.egi.eu&amp;#34;&lt;/span> Done
Creating proxy .............................................................................. Done
Your proxy is valid &lt;span style="color:#204a87;font-weight:bold">until&lt;/span> Fri Nov &lt;span style="color:#0000cf;font-weight:bold">14&lt;/span> 04:59:26 &lt;span style="color:#0000cf;font-weight:bold">2014&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="occi-checks-euegicloudvm-managementocci-service-type">OCCI checks (eu.egi.cloud.vm-management.occi service type)&lt;/h3>
&lt;p>&lt;em>NOTE:&lt;/em> Prerequisite: run the following commands is the installation of the EGI
EGI CLI environment, according to
&lt;a href="https://wiki.egi.eu/wiki/Fedcloud-tf:CLI_Environment">this guide&lt;/a>.&lt;/p>
&lt;p>Describe OS templates (&lt;code>occi_endpoint&lt;/code> is the one retrieved from AppDB). Check
also that the OCCI ID provided by in AppDB is listed:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ occi -e &amp;lt;occi_endpoint&amp;gt; -n x509 -x &lt;span style="color:#000">$X509_USER_PROXY&lt;/span> -X -a describe -r os_tpl
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">[[&lt;/span>/_http://occi.carach5.ics.muni.cz/occi/infrastructure/os_tpl#uuid_ubuntu_server_14_04_lts_fedcloud_dukan_84_&lt;span style="color:#000;font-weight:bold">|&lt;/span> http://occi.carach5.ics.muni.cz/occi/infrastructure/os_tpl#uuid_ubuntu_server_14_04_lts_fedcloud_dukan_84 &lt;span style="color:#ce5c00;font-weight:bold">]]&lt;/span>
title: Ubuntu-Server-14.04-LTS@fedcloud-dukan
term: uuid_ubuntu_server_14_04_lts_fedcloud_dukan_84
location: /mixin/os_tpl/uuid_ubuntu_server_14_04_lts_fedcloud_dukan_84/
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Describe the resource templates, and check that the resource ID provided but
AppDB is returned:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ occi -e &amp;lt;occi_endpoint&amp;gt; -n x509 -x &lt;span style="color:#000">$X509_USER_PROXY&lt;/span> -X -a describe &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -r resource_tpl
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">[[&lt;/span>/_http://schema.fedcloud.egi.eu/occi/infrastructure/resource_tpl#small_&lt;span style="color:#000;font-weight:bold">|&lt;/span> http://schema.fedcloud.egi.eu/occi/infrastructure/resource_tpl#small &lt;span style="color:#ce5c00;font-weight:bold">]]&lt;/span>
title: Small Instance - &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> core and &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> GB RAM term: small
location: /mixin/resource_tpl/small/
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Start a VM (using the OCCI ID and Resource ID as provided by AppDB for the
mixins, and for context the file created above). The returned ID will be used in
the commands below:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ occi -e &amp;lt;occi_endpoint&amp;gt; -n x509 -x &lt;span style="color:#000">$X509_USER_PROXY&lt;/span> -X &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -a create -r compute -M &amp;lt;resource_id&amp;gt; -M &amp;lt;occi_id&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -t occi.core.title&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;My OCCI VM&amp;#34;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -T &lt;span style="color:#000">user_data&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &amp;lt;file://&lt;span style="color:#000">$PWD&lt;/span>/ctx.txt&amp;gt;
https://carach5.ics.muni.cz:11443/compute/46934
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check that the VM is active by describing it (it may take a few minutes):&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ occi -e &amp;lt;occi_endpoint&amp;gt; -n x509 -x &lt;span style="color:#000">$X509_USER_PROXY&lt;/span> -X -a describe -r &amp;lt;vm_id&amp;gt;
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
occi.compute.state &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> active
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
occi.networkinterface.address &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> 147.251.3.62
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>If the VM does not have a public IP, you will need to get an IP for it&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ occi -e &amp;lt;occi_endpoint&amp;gt; -n x509 -x &lt;span style="color:#000">$X509_USER_PROXY&lt;/span> -X -a link &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -r &amp;lt;vm_id&amp;gt; -j /network/public
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ssh to the machine to the provided IP (the options avoid problems when different
VMs have the same IP, don&amp;rsquo;t use them in production) and check that
contextualization script was executed:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ ssh -i tempkey -o &lt;span style="color:#000">StrictHostKeyChecking&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>no -o &lt;span style="color:#000">UserKnownHostsFile&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>/dev/null &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> testadm@ &amp;lt;ip_addr&amp;gt; &lt;span style="color:#4e9a06">&amp;#34;sudo cat /tmp/deployment.log&amp;#34;&lt;/span>
OK
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create a block storage entity of 1 GB and save the ID returned:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ occi -e &amp;lt;occi_endpoint&amp;gt; -n x509 -x &lt;span style="color:#000">$X509_USER_PROXY&lt;/span> -X &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -a create -r storage -t occi.storage.size&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>num&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>1&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -t occi.core.title&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>storage_test
https://carach5.ics.muni.cz:11443/storage/296
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Describe the newly created storage ID:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ occi -e &amp;lt;occi_endpoint&amp;gt; -n x509 -x &lt;span style="color:#000">$X509_USER_PROXY&lt;/span> -X &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -a describe -r &amp;lt;storage_id&amp;gt;
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
occi.storage.size &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> 1.0
occi.storage.state &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> online
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Link that storage to the running VM:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ occi -e &amp;lt;occi_endpoint&amp;gt; -n x509 -x &lt;span style="color:#000">$X509_USER_PROXY&lt;/span> -X &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -a link -r &amp;lt;vm_id&amp;gt; -j &amp;lt;storage_id&amp;gt;
https://carach5.ics.muni.cz:11443/link/storagelink/compute_46936_disk_2
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check the device where the storage is attached:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ occi -e &amp;lt;occi_endpoint&amp;gt; -n x509 -x &lt;span style="color:#000">$X509_USER_PROXY&lt;/span> -X &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -a describe -r &amp;lt;storage_link_id&amp;gt;
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
occi.storagelink.deviceid &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> /dev/xvdb
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And login into the machine to create a filesystem, mount it, create a file, and
umount:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ ssh -i tempkey -o &lt;span style="color:#000">StrictHostKeyChecking&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>no -o &lt;span style="color:#000">UserKnownHostsFile&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>/dev/null &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> testadm@ &amp;lt;ip_addr&amp;gt;
testadm $ sudo mke2fs &amp;lt;device_id&amp;gt;
mke2fs 1.42.9 &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>4-Feb-2014&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> Filesystem &lt;span style="color:#000">label&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> OS type: Linux
Block &lt;span style="color:#000">size&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">4096&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>&lt;span style="color:#000">log&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>2&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> Fragment &lt;span style="color:#000">size&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">4096&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>&lt;span style="color:#000">log&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>2&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;span style="color:#000">Stride&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> blocks, Stripe &lt;span style="color:#000">width&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> blocks &lt;span style="color:#0000cf;font-weight:bold">65536&lt;/span> inodes, &lt;span style="color:#0000cf;font-weight:bold">262144&lt;/span> blocks
&lt;span style="color:#0000cf;font-weight:bold">13107&lt;/span> blocks &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>5.00%&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> reserved &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> the super user First data &lt;span style="color:#000">block&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>
Maximum filesystem &lt;span style="color:#000">blocks&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">268435456&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">8&lt;/span> block groups
&lt;span style="color:#0000cf;font-weight:bold">32768&lt;/span> blocks per group, &lt;span style="color:#0000cf;font-weight:bold">32768&lt;/span> fragments per group &lt;span style="color:#0000cf;font-weight:bold">8192&lt;/span> inodes per group
Superblock backups stored on blocks: 32768, 98304, 163840, &lt;span style="color:#0000cf;font-weight:bold">229376&lt;/span>
Allocating group tables: &lt;span style="color:#204a87;font-weight:bold">done&lt;/span> Writing inode tables: &lt;span style="color:#204a87;font-weight:bold">done&lt;/span>
Writing superblocks and filesystem accounting information: &lt;span style="color:#204a87;font-weight:bold">done&lt;/span>
testadm $ sudo mount &amp;lt;device_id&amp;gt; /mnt
testadm $ touch /mnt/test
testadm $ ls -l /mnt/
total &lt;span style="color:#0000cf;font-weight:bold">16&lt;/span> drwx------ &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> root root &lt;span style="color:#0000cf;font-weight:bold">16384&lt;/span> Nov &lt;span style="color:#0000cf;font-weight:bold">13&lt;/span> 17:43 lost+found
-rw-r--r-- &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> root root &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> Nov &lt;span style="color:#0000cf;font-weight:bold">13&lt;/span> 17:45 &lt;span style="color:#204a87">test&lt;/span>
testadm $ sudo umount /mnt
testadm $ &lt;span style="color:#204a87">exit&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Unlink the storage from that VM and start a new one with that storage attached:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ occi -a unlink -r &amp;lt;storage_link_id&amp;gt;
$ occi -e &amp;lt;occi_endpoint&amp;gt; -n x509 -x &lt;span style="color:#000">$X509_USER_PROXY&lt;/span> -X &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -a create -r compute -M &amp;lt;resource_id&amp;gt; -M &amp;lt;occi_id&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -t occi.core.title&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;My OCCI VM&amp;#34;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -T &lt;span style="color:#000">user_data&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &amp;lt;file://&lt;span style="color:#000">$PWD&lt;/span>/ctx.txt&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -j &amp;lt;storage_id&amp;gt;** https://carach5.ics.muni.cz:11443/compute/46936
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check the IP of the new VM and login:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ occi -e &amp;lt;occi_endpoint&amp;gt; -n x509 -x &lt;span style="color:#000">$X509_USER_PROXY&lt;/span> -X &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -a describe -r &amp;lt;new_vm_id&amp;gt;**
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
occi.compute.state &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> active
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&amp;gt;&amp;gt; location: /link/storagelink/compute_46936_disk_2
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
occi.storagelink.deviceid &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> /dev/xvdb
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
occi.networkinterface.address &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> 147.251.3.63
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
$ ssh -i tempkey -o &lt;span style="color:#000">StrictHostKeyChecking&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>no -o &lt;span style="color:#000">UserKnownHostsFile&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>/dev/null &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> testadm@ &amp;lt;new_vm_ip_addr&amp;gt;
testadm $ sudo mount &amp;lt;device_id&amp;gt; /mnt
testadm $ ls -ltr /mnt/
total &lt;span style="color:#0000cf;font-weight:bold">16&lt;/span>
drwx------ &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> root root &lt;span style="color:#0000cf;font-weight:bold">16384&lt;/span> Nov &lt;span style="color:#0000cf;font-weight:bold">13&lt;/span> 17:43 lost+found
-rw-r--r-- &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> root root &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> Nov &lt;span style="color:#0000cf;font-weight:bold">13&lt;/span> 17:45 &lt;span style="color:#204a87">test&lt;/span>
testadm $ sudo umount /mnt
testadm $ &lt;span style="color:#204a87">exit&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Clean up by unlinking the storage, and removing VMs and storage:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ occi -e &amp;lt;occi_endpoint&amp;gt; -n x509 -x &lt;span style="color:#000">$X509_USER_PROXY&lt;/span> -X &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -a unlink -r &amp;lt;new_storage_link_id&amp;gt;
$ occi -e &amp;lt;occi_endpoint&amp;gt; -n x509 -x &lt;span style="color:#000">$X509_USER_PROXY&lt;/span> -X &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -a delete -r &amp;lt;vm_id&amp;gt;
$ occi -e &amp;lt;occi_endpoint&amp;gt; -n x509 -x &lt;span style="color:#000">$X509_USER_PROXY&lt;/span> -X &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -a delete -r &amp;lt;new_vm_id&amp;gt;
$ occi -e &amp;lt;occi_endpoint&amp;gt; -n x509 -x &lt;span style="color:#000">$X509_USER_PROXY&lt;/span> -X &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> -a delete -r &amp;lt;storage_id&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Finally check that the VMs and storage are not listed by occi:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ occi -e &amp;lt;occi_endpoint&amp;gt; -n x509 -x &lt;span style="color:#000">$X509_USER_PROXY&lt;/span> -X -a list -r compute
$ occi -e &amp;lt;occi_endpoint&amp;gt; -n x509 -x &lt;span style="color:#000">$X509_USER_PROXY&lt;/span> -X -a list -r storage
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="openstack-compute-checks-orgopenstacknova-service-type">OpenStack Compute checks (org.openstack.nova service type)&lt;/h3>
&lt;p>&lt;em>NOTE:&lt;/em> Prerequisite: run the following commands is the installation of the
OpenStack CLI with VOMS extensions, as shown in
&lt;a href="https://wiki.egi.eu/wiki/Federated_Cloud_APIs_and_SDKs#CLI_2">on the API and SDK guide&lt;/a>.&lt;/p>
&lt;p>Export the following variables on your shell (keystone URL can be obtained from
GOCDB URL of the endpoint)&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ &lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">OS_AUTH_URL&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &amp;lt;keystone URL&amp;gt;
$ &lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">OS_AUTH_TYPE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>v2voms
$ &lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">OS_X509_USER_PROXY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000">$X509_USER_PROXY&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Get the list of tenants supporting your proxy&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ keystone_tenants
Tenant id: 999f045cb1ff4684a15ebb338af69460
Tenant name: VO:fedcloud.egi.eu Enabled: True
Description: VO fedcloud.egi.eu
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Export the tenant name as shown from the command in the following variable:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ &lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">OS_PROJECT_NAME&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;VO:fedcloud.egi.eu&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Describe the available flavors, check also that the template ID provided by
AppDB is listed:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ openstack flavor list
+----+-----------+-------+------+-----------+-------+-----------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> ID &lt;span style="color:#000;font-weight:bold">|&lt;/span> Name &lt;span style="color:#000;font-weight:bold">|&lt;/span> RAM &lt;span style="color:#000;font-weight:bold">|&lt;/span> Disk &lt;span style="color:#000;font-weight:bold">|&lt;/span> Ephemeral &lt;span style="color:#000;font-weight:bold">|&lt;/span> VCPUs &lt;span style="color:#000;font-weight:bold">|&lt;/span> Is Public &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+----+-----------+-------+------+-----------+-------+-----------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> m1.tiny &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">512&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> True &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> m1.small &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">2000&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">20&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> True &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">3&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> m1.medium &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">4000&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">40&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> True &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">4&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> m1.large &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">7000&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">20&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">80&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">4&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> True &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">5&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> m1.xlarge &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">14000&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">30&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">160&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">8&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> True &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+----+-----------+-------+------+-----------+-------+-----------+
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Describe available images, again check that the ID provided by AppDb is listed&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ openstack image list
+--------------------------------------+----------------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> ID &lt;span style="color:#000;font-weight:bold">|&lt;/span> Name &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+--------------------------------------+----------------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> 1414f242-d6d1-4a8c-8b26-8c0ada32f343 &lt;span style="color:#000;font-weight:bold">|&lt;/span> IFCA Fedora Cloud &lt;span style="color:#0000cf;font-weight:bold">23&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> 8a700834-04b4-4e91-a3d5-9246ef95167e &lt;span style="color:#000;font-weight:bold">|&lt;/span> LW Jupyter-R Ubuntu 14.04 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> 7f361fba-21d6-40ca-892d-17aa60b63a66 &lt;span style="color:#000;font-weight:bold">|&lt;/span> IFCA CentOS &lt;span style="color:#0000cf;font-weight:bold">7&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> f3544cc8-421f-4d93-ac35-eba7fdc75329 &lt;span style="color:#000;font-weight:bold">|&lt;/span> IFCA CentOS &lt;span style="color:#0000cf;font-weight:bold">6&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
...
+--------------------------------------+----------------------------------------------+
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Start a VM (using the flavor and images checked above and the context file
created previously). The returned ID will be used in the following commands:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ openstack server create &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> --flavor &amp;lt;flavor&amp;gt; --image &amp;lt;image id&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> --user-data ctx.txt &lt;span style="color:#204a87">test&lt;/span>
+--------------------------------------+------------------------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> Field &lt;span style="color:#000;font-weight:bold">|&lt;/span> Value &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+--------------------------------------+------------------------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-DCF:diskConfig &lt;span style="color:#000;font-weight:bold">|&lt;/span> MANUAL &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-EXT-AZ:availability_zone &lt;span style="color:#000;font-weight:bold">|&lt;/span> nova &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-EXT-STS:power_state &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-EXT-STS:task_state &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-EXT-STS:vm_state &lt;span style="color:#000;font-weight:bold">|&lt;/span> building &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-SRV-USG:launched_at &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-SRV-USG:terminated_at &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> accessIPv4 &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> accessIPv6 &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> addresses &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> config_drive &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> created &lt;span style="color:#000;font-weight:bold">|&lt;/span> 2016-03-01T13:07:10Z &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> flavor &lt;span style="color:#000;font-weight:bold">|&lt;/span> m1.tiny &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>1&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> hostId &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> id &lt;span style="color:#000;font-weight:bold">|&lt;/span> 5d3ed7d6-d5ac-4f09-a353-0c2bd0fbd0ea &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> image &lt;span style="color:#000;font-weight:bold">|&lt;/span> IFCA CentOS &lt;span style="color:#0000cf;font-weight:bold">7&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>7f361fba-21d6-40ca-892d-17aa60b63a66&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> key_name &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> name &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">test&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> os-extended-volumes:volumes_attached &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[]&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> progress &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> project_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> 999f045cb1ff4684a15ebb338af69460 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> properties &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> security_groups &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[{&lt;/span>u&lt;span style="color:#4e9a06">&amp;#39;name&amp;#39;&lt;/span>: u&lt;span style="color:#4e9a06">&amp;#39;default&amp;#39;&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">}]&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> status &lt;span style="color:#000;font-weight:bold">|&lt;/span> BUILD &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> updated &lt;span style="color:#000;font-weight:bold">|&lt;/span> 2016-03-01T13:07:11Z &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> user_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> a31b8c452b594369a49a8329103e241a &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+--------------------------------------+------------------------------------------------------+
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check that the VM is active by describing it (it may take a few minutes):&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ openstack server show &amp;lt;vm id&amp;gt;
+---------------------+--------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> Field &lt;span style="color:#000;font-weight:bold">|&lt;/span> Value &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+---------------------+--------+
&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-EXT-STS:vm_state &lt;span style="color:#000;font-weight:bold">|&lt;/span> active &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
+---------------------+--------+
&lt;/code>&lt;/pre>&lt;/div>&lt;p>If the VM does not have a public IP, you will need to get an IP for it&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ openstack ip floating pool list
+-------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> Name &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+-------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> nova &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+-------------+
$ openstack ip floating pool create &amp;lt;pool name&amp;gt;
+-------------+----------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> Field &lt;span style="color:#000;font-weight:bold">|&lt;/span> Value &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+-------------+----------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> fixed_ip &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> id &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1265&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> instance_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> ip &lt;span style="color:#000;font-weight:bold">|&lt;/span> 193.146.75.245 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> pool &lt;span style="color:#000;font-weight:bold">|&lt;/span> nova &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+-------------+----------------+
$ openstack ip floating add &amp;lt;ip&amp;gt; &amp;lt;vm id&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The VM should have now a public IP available when shown:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ openstack server show &amp;lt;vm id&amp;gt;
+-----------+-------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> Field &lt;span style="color:#000;font-weight:bold">|&lt;/span> Value &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+-----------+-------------------------------------+
&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> addresses &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000">private&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>172.16.8.14, 193.146.75.245 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
+-----------+-------------------------------------+
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ssh to the machine to the provided IP (the options avoid problems when different
VMs have the same IP, don&amp;rsquo;t use them in production) and check that
contextualization script was executed:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ ssh -i tempkey -o &lt;span style="color:#000">StrictHostKeyChecking&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>no -o &lt;span style="color:#000">UserKnownHostsFile&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>/dev/null &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> testadm@ &amp;lt;ip&amp;gt; &lt;span style="color:#4e9a06">&amp;#34;cat /tmp/deployment.log&amp;#34;&lt;/span>
Warning: Permanently added &lt;span style="color:#4e9a06">&amp;#39;193.146.75.245&amp;#39;&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>ECDSA&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> to the list of known hosts.
OK
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create a storage volume:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ openstack volume create --size &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> &lt;span style="color:#204a87">test&lt;/span>
+---------------------+--------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> Field &lt;span style="color:#000;font-weight:bold">|&lt;/span> Value &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+---------------------+--------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> attachments &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[]&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> availability_zone &lt;span style="color:#000;font-weight:bold">|&lt;/span> nova &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> bootable &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">false&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> created_at &lt;span style="color:#000;font-weight:bold">|&lt;/span> 2016-03-01T13:29:44.392423 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> display_description &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> display_name &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">test&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> id &lt;span style="color:#000;font-weight:bold">|&lt;/span> 8f46046d-cd9b-4219-9ce7-f0abe30ad992 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> properties &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> size &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> snapshot_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> source_volid &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> status &lt;span style="color:#000;font-weight:bold">|&lt;/span> creating &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">type&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+---------------------+--------------------------------------+
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And show its status:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ openstack volume show &amp;lt;vol id&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Attach it to the running VM:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ openstack server add volume &amp;lt;vm id&amp;gt; &amp;lt;vol id&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And check it&amp;rsquo;s attached:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ openstack volume show 8f46046d-cd9b-4219-9ce7-f0abe30ad992
+---------------------+---------------------------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> Field &lt;span style="color:#000;font-weight:bold">|&lt;/span> Value &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+---------------------+---------------------------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> attachments &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[{&lt;/span>u&lt;span style="color:#4e9a06">&amp;#39;device&amp;#39;&lt;/span>: u&lt;span style="color:#4e9a06">&amp;#39;/dev/vdb&amp;#39;&lt;/span>, &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> u&lt;span style="color:#4e9a06">&amp;#39;server_id&amp;#39;&lt;/span>: u&lt;span style="color:#4e9a06">&amp;#39;21f6123f-926c-4816-b4fb-53df91907a63&amp;#39;&lt;/span>, &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> u&lt;span style="color:#4e9a06">&amp;#39;id&amp;#39;&lt;/span>: u&lt;span style="color:#4e9a06">&amp;#39;8f46046d-cd9b-4219-9ce7-f0abe30ad992&amp;#39;&lt;/span>, &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> u&lt;span style="color:#4e9a06">&amp;#39;volume_id&amp;#39;&lt;/span>: u&lt;span style="color:#4e9a06">&amp;#39;8f46046d-cd9b-4219-9ce7-f0abe30ad992&amp;#39;&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">}]&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> availability_zone &lt;span style="color:#000;font-weight:bold">|&lt;/span> nova &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> bootable &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">false&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> created_at &lt;span style="color:#000;font-weight:bold">|&lt;/span> 2016-03-01T13:29:44.000000 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> display_description &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> display_name &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">test&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> id &lt;span style="color:#000;font-weight:bold">|&lt;/span> 8f46046d-cd9b-4219-9ce7-f0abe30ad992 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> properties &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> size &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> snapshot_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> source_volid &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> status &lt;span style="color:#000;font-weight:bold">|&lt;/span> in-use &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">type&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+---------------------+---------------------------------------------------------+
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And login into the machine to create a filesystem, mount it, create a file, and
umount:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ ssh -i tempkey -o &lt;span style="color:#000">StrictHostKeyChecking&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>no -o &lt;span style="color:#000">UserKnownHostsFile&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>/dev/null &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> testadm@ &amp;lt;ip_addr&amp;gt;
testadm $ sudo mke2fs &amp;lt;device_id&amp;gt;
&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
testadm $ sudo mount &amp;lt;device_id&amp;gt; /mnt
testadm $ touch /mnt/test
testadm $ ls -l /mnt/
total &lt;span style="color:#0000cf;font-weight:bold">16&lt;/span> drwx------ &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> root root &lt;span style="color:#0000cf;font-weight:bold">16384&lt;/span> Nov &lt;span style="color:#0000cf;font-weight:bold">13&lt;/span> 17:43 lost+found
-rw-r--r-- &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> root root &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> Nov &lt;span style="color:#0000cf;font-weight:bold">13&lt;/span> 17:45 &lt;span style="color:#204a87">test&lt;/span>
testadm $ sudo umount /mnt
testadm $ &lt;span style="color:#204a87">exit&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Delete the VM:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ openstack server delete &amp;lt;vm id&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And create a new one with the volume attached directly (substitute vdb for the
same device name shown above):&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ openstack server create &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> --flavor &amp;lt;flavor&amp;gt; --image &amp;lt;image id&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> --block-device-mapping &lt;span style="color:#000">vdb&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &amp;lt;volume id&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> --user-data ctx.txt &lt;span style="color:#204a87">test&lt;/span>
+-----------------------------+---------------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> Field &lt;span style="color:#000;font-weight:bold">|&lt;/span> Value &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+-----------------------------+---------------------------------------------+
&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-DCF:diskConfig &lt;span style="color:#000;font-weight:bold">|&lt;/span> MANUAL &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-EXT-AZ:availability_zone &lt;span style="color:#000;font-weight:bold">|&lt;/span> nova &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-EXT-STS:power_state &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-EXT-STS:task_state &lt;span style="color:#000;font-weight:bold">|&lt;/span> scheduling &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-EXT-STS:vm_state &lt;span style="color:#000;font-weight:bold">|&lt;/span> building &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> accessIPv4 &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> accessIPv6 &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> addresses &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> adminPass &lt;span style="color:#000;font-weight:bold">|&lt;/span> 9imSRC9EZhhX &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> config_drive &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> created &lt;span style="color:#000;font-weight:bold">|&lt;/span> 2016-03-01T13:45:21Z &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> flavor &lt;span style="color:#000;font-weight:bold">|&lt;/span> m1.tiny &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>1&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> hostId &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> id &lt;span style="color:#000;font-weight:bold">|&lt;/span> 10000d50-239b-4e86-bbd8-224143d6d346 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> image &lt;span style="color:#000;font-weight:bold">|&lt;/span> Image &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> EGI Centos &lt;span style="color:#0000cf;font-weight:bold">6&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>CentOS/6/KVM&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>_egi &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> key_name &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> name &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">test&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> progress &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> project_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> fffd98393bae4bf0acf66237c8f292ad &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> properties &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> security_groups &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[{&lt;/span>u&lt;span style="color:#4e9a06">&amp;#39;name&amp;#39;&lt;/span>: u&lt;span style="color:#4e9a06">&amp;#39;default&amp;#39;&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">}]&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> status &lt;span style="color:#000;font-weight:bold">|&lt;/span> BUILD &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> updated &lt;span style="color:#000;font-weight:bold">|&lt;/span> 2016-03-01T13:45:23Z &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;span style="color:#000;font-weight:bold">|&lt;/span> user_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> 6c254b295af64644904a813db0d3d88a &lt;span style="color:#000;font-weight:bold">|&lt;/span>
+-----------------------------+---------------------------------------------+
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Assign the public IP (if it does not have one already):&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ openstack ip floating add &amp;lt;ip&amp;gt; &amp;lt;vm id&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And check that the volume is attached and usable:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ ssh -i tempkey -o &lt;span style="color:#000">StrictHostKeyChecking&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>no -o &lt;span style="color:#000">UserKnownHostsFile&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>/dev/null &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> testadm@ &amp;lt;new_vm_ip_addr&amp;gt;
testadm $ sudo mount &amp;lt;device_id&amp;gt; /mnt
testadm $ ls -ltr /mnt/
total &lt;span style="color:#0000cf;font-weight:bold">16&lt;/span>
drwx------ &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> root root &lt;span style="color:#0000cf;font-weight:bold">16384&lt;/span> Nov &lt;span style="color:#0000cf;font-weight:bold">13&lt;/span> 17:43 lost+found
-rw-r--r-- &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> root root &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> Nov &lt;span style="color:#0000cf;font-weight:bold">13&lt;/span> 17:45 &lt;span style="color:#204a87">test&lt;/span>
testadm $ sudo umount /mnt
testadm $ &lt;span style="color:#204a87">exit&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">Finally delete VM, volume and IP address &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>NOTE: use the id of the IP as returned
by openstack ip floating list&lt;span style="color:#4e9a06">\!&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>:
$ openstack server delete &amp;lt;vm id&amp;gt;
$ openstack volume delete &amp;lt;volume id&amp;gt;
$ openstack ip floating delete &amp;lt;ip id&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="cloud-storage-cdmi-checks-euegicloudstorage-managementcdmi-service-type">Cloud Storage (CDMI) checks (eu.egi.cloud.storage-management.cdmi service type)&lt;/h3>
&lt;p>&lt;em>NOTE:&lt;/em> Prerequisite: run the following commands is the installation of the
EGI CLI environment, according to
&lt;a href="https://wiki.egi.eu/wiki/Fedcloud-tf:CLI_Environment">this guide&lt;/a>.&lt;/p>
&lt;p>List the content of the repository:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ bcdmi -e &amp;lt;cdmi_endpoint&amp;gt; list /
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create a test directory:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ bcdmi -e &amp;lt;cdmi_endpoint&amp;gt; mkdir &lt;span style="color:#204a87">test&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">{&lt;/span>
&lt;span style="color:#4e9a06">&amp;#34;completionStatus&amp;#34;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#34;Complete&amp;#34;&lt;/span>,
&lt;span style="color:#4e9a06">&amp;#34;objectName&amp;#34;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#34;test/&amp;#34;&lt;/span>,
&lt;span style="color:#4e9a06">&amp;#34;capabilitiesURI&amp;#34;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#34;/cdmi/AUTH_df37f5b1ebc94604964c2854b9c0551f/cdmi_capabilities/container/&amp;#34;&lt;/span>,
&lt;span style="color:#4e9a06">&amp;#34;parentURI&amp;#34;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#34;/cdmi/AUTH_df37f5b1ebc94604964c2854b9c0551f/&amp;#34;&lt;/span>,
&lt;span style="color:#4e9a06">&amp;#34;objectType&amp;#34;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#34;application/cdmi-container&amp;#34;&lt;/span>,
&lt;span style="color:#4e9a06">&amp;#34;metadata&amp;#34;&lt;/span>: &lt;span style="color:#ce5c00;font-weight:bold">{}&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create a test file and upload it to the created directory:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ &lt;span style="color:#204a87">echo&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;TEST OK&amp;#34;&lt;/span> &amp;gt; testfile
$ bcdmi -e &amp;lt;cdmi_endpoint&amp;gt; put -T testfile
test/test.txt**
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Try to download back the file and compare to previous:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ bcdmi -e &amp;lt;cdmi_endpoint&amp;gt; get test/test.txt -o testfile.downloaded
$ diff testfile testfile.downloaded &lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#204a87">echo&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Files are equal&amp;#34;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">||&lt;/span> &lt;span style="color:#204a87">echo&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Files differ&amp;#34;&lt;/span>
Files are equal
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Delete the file:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ bcdmi -e &amp;lt;cdmi_endpoint&amp;gt; delete test/test.txt
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check that the file is not present anymore&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ bcdmi -e &amp;lt;cdmi_endpoint&amp;gt; list test/
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Upload the file again and recursively delete the directory:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ bcdmi -e &amp;lt;cdmi_endpoint&amp;gt; put -T testfile test/test.txt
$ bcdmi -e &amp;lt;cdmi_endpoint&amp;gt; delete -r test/
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check that the folder does not exist anymore&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ bcdmi -e &amp;lt;cdmi_endpoint&amp;gt; list /
&lt;/code>&lt;/pre>&lt;/div>&lt;p>See Site Certification GIIS Check &lt;a href="../howto03_site_certificatoin_giis_check">HOWTO03&lt;/a>.&lt;/p>
&lt;p>See to Resource Centre registration and certification procedure
&lt;a href="https://confluence.egi.eu/display/EGIPP/PROC09+Resource+Centre+Registration+and+Certification">PROC09&lt;/a>.&lt;/p></description></item><item><title>Providers: MAN05 top-BDII and site-BDII High Availability</title><link>/providers/operations-manuals/man05_top_bdii_and_site_bdii_high_availability/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/man05_top_bdii_and_site_bdii_high_availability/</guid><description>
&lt;p>&lt;a href="../../Category:Operations_Manuals" title="wikilink">Category:Operations Manuals&lt;/a>&lt;/p>
&lt;h1 id="emiglite-top-bdii-and-site-bdii-high-availability">(EMI.gLite) top-BDII and site-BDII High Availability&lt;/h1>
&lt;p>This document objective is to provide guidelines to improve the
availability of the information system, addressing three main areas:&lt;/p>
&lt;ol>
&lt;li>Requirements to deploy a TopBDII (siteBDII) service&lt;/li>
&lt;li>High Availability from a client perspective&lt;/li>
&lt;li>Configuration of a High Availability TopBDII (siteBDII) service&lt;/li>
&lt;/ol>
&lt;h1 id="requirements-to-deploy-a-topbdii-sitebdii-service">Requirements to deploy a TopBDII (siteBDII) service&lt;/h1>
&lt;h2 id="hardware">Hardware&lt;/h2>
&lt;ul>
&lt;li>dual core CPU&lt;/li>
&lt;li>10GB of hard disk space&lt;/li>
&lt;li>2-3 GB RAM. If you decide to set BDII_RAM_DISK=yes in your YAIM
configuration, it&amp;rsquo;s advisable to have 4GB of RAM.&lt;/li>
&lt;/ul>
&lt;h2 id="co-hosting">Co-hosting&lt;/h2>
&lt;ul>
&lt;li>Due to the critical nature of the information system with respect to
the operation of the grid, the TopBDII (siteBDII) should be
installed as a stand-alone service to ensure that problems with
other services do not affect the BDII. In no circumstances should
the BDII be co-hosted with a service which has the potential to
generate a high load.&lt;/li>
&lt;/ul>
&lt;h2 id="physical-vs-virtual-machines">Physical vs Virtual Machines&lt;/h2>
&lt;ul>
&lt;li>There is no clear vision on this topic. Some managers complain that
there are performance issues related to deploying a TopBDII
(siteBDII) service under a virtual machine. Others argue that such
performance issues are related to the configuration of the service
itself. The only agreed feature is that the management and disaster
recovery of any service deployed under a virtual machine is more
flexible and easier. This could be an important point to take into
account considering the critical importance of the TopBDII
(siteBDII) service.&lt;/li>
&lt;/ul>
&lt;h1 id="best-practices-from-a-client-perspective-for-top-bdii">Best practices from a client perspective for top-BDII&lt;/h1>
&lt;ul>
&lt;li>In gLite 3.2 and EMI you can set up redundancy of TopBDIIs for the
clients (WNs and UIs) setting up a list of TopBDII instances to
support the automatic failover in the GFAL clients. If the first Top
level BDII fails to be contacted, the second will be used in its
place, and so on. This mechanism is implemented defining the
&lt;strong>BDII_LIST&lt;/strong> YAIM variable according to the following syntax:&lt;/li>
&lt;/ul>
&lt;p>&lt;code>BDII_LIST=topbdii.domain.one:2170[,topbdii.domain.two:2170[...]]. &lt;/code>&lt;/p>
&lt;ul>
&lt;li>After running YAIM, the client enviroment should contain the
following definition:&lt;/li>
&lt;/ul>
&lt;p>&lt;code>LCG_GFAL_INFOSYS=topbdii.domain.one:2170,topbdii.domain.two:2170 &lt;/code>&lt;/p>
&lt;ul>
&lt;li>The data management tools (lcg_utils) contact the information
system for every operation (lcg-cr, lcg-cp, &amp;hellip;). So, if you have
your client properly configured with redundancy for the information
system, the lcg_utils tools will use that mechanism in a
transparent way. Be aware that lcg-infosites doesn&amp;rsquo;t work with
multiple BDIIs. Only gfal, lcg_utils, lcg-info and glite-sd-query.&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ul>
&lt;li>Site administrators should configure their services with this
failover mechanism where the first TopBDII of the list should be the
default TopBDII provided by their NGI.&lt;/li>
&lt;/ul>
&lt;h1 id="best-practices-for-a-topbdii-sitebdii-high-availability-service">Best practices for a TopBDII (siteBDII) High Availability service&lt;/h1>
&lt;ul>
&lt;li>The best practice proposal to provide a high availability TopBDII
(siteBDII) service is based on two mechanisms working as main
building blocks:&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ol>
&lt;li>&lt;big>&lt;strong>DNS round robin load balacing&lt;/strong>&lt;/big>&lt;/li>
&lt;li>&lt;big>&lt;strong>A fault tolerance DNS Updater&lt;/strong>&lt;/big>&lt;/li>
&lt;/ol>
&lt;p>We will provide a short introduction to some of these DNS mechanisms but
for further information on specific implementations, please contact your
DNS administrator.&lt;/p>
&lt;h2 id="dns-round-robin-load-balacing">DNS round robin load balacing&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="http://en.wikipedia.org/wiki/Load_distribution">Load balancing&lt;/a> is
a technique to distribute workload evenly across two or more
resources. A load balancing method, which does not necessarily
require a dedicated software or hardware node, is called &lt;a href="http://en.wikipedia.org/wiki/Round-robin_DNS">round
robin DNS&lt;/a>.&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ul>
&lt;li>We can assume that all transactions (queries to top-bdii (siteBDII))
generate the same resource load. For an effective load balancing,
all top-bdii (siteBDII) instances should have the same hardware
configurations. In other case, a load balancing arbiter is needed.&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ul>
&lt;li>Simple round robin DNS load balancing is easy to deploy. Assuming
that there is a primary DNS server (dns.top.domain) where the DNS
load balancing will be implemented, one simply has to add multiple A
records mapping the same hostname to multiple IP addresses under the
core.top.domain &lt;a href="http://en.wikipedia.org/wiki/DNS_zone">DNS zone&lt;/a>.
It is equally applicable to site BDII.&lt;/li>
&lt;/ul>
&lt;p>&lt;code># In dns.top.domain: Add multiple A records mapping the same hostname to multiple IP addresses&lt;/code>
&lt;code>Zone core.top.domain&lt;/code>
&lt;code>topbdii.core.top.domain IN A x.x.x.x&lt;/code>
&lt;code>topbdii.core.top.domain IN A y.y.y.y&lt;/code>
&lt;code>topbdii.core.top.domain IN A z.z.z.z&lt;/code>&lt;/p>
&lt;ul>
&lt;li>The 3 records are always served as answer but the order of the
records will rotate in each DNS query&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ul>
&lt;li>&lt;strong>This does NOT provide fault tolerance against problems in the
TopBDIIs (siteBDIIs) themselves&lt;/strong>&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ol>
&lt;li>if one TopBDII (siteBDII) fails its DNS “A” record will still be
served&lt;/li>
&lt;li>one in each three DNS queries will provide the failed TopBDII
(siteBDII) first answer&lt;/li>
&lt;/ol>
&lt;h2 id="fault-tolerance-dns-updater">Fault tolerance DNS Updater&lt;/h2>
&lt;ul>
&lt;li>The DNS Updater is a mechanism (to be implemented by you) which
tests the different TopBDIIs (siteBDII) and decides to remove or add
DNS entries through DNS dynamic updates. The fault tolerance is
implemented by dynamically removing the DNS “A” records of
unavailable TopBDII(s) (siteBDIIs).
&lt;a href="http://linux.yyz.us/nsupdate/">nsupdate&lt;/a> introduced in bind V8
offers the possibility of changing DNS records dynamically:&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ol>
&lt;li>The nsupdate tool connects to a bind server on port 53 (TCP or UDP)
and can update zone records&lt;/li>
&lt;li>Updates are authorized based on keys&lt;/li>
&lt;li>Updates can only be performed on the DNS primary server&lt;/li>
&lt;li>In the DNS bind implementation, the entire zone is rewritten by the
DNS server upon “stop” to reflect the changes. Thefore, the zone
should not be managed manually; and the changes are kept in a zone
journal file until a “stop” happens.&lt;/li>
&lt;/ol>
&lt;h3 id="implementation">Implementation&lt;/h3>
&lt;ul>
&lt;li>There are several alternatives to implement the DNS Updater:&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ol>
&lt;li>NAGIOS based tests&lt;/li>
&lt;li>a demonized service&lt;/li>
&lt;li>scripts running as crons&lt;/li>
&lt;/ol>
&lt;h3 id="what-to-test-bdii-metrics">What to test: BDII metrics&lt;/h3>
&lt;ul>
&lt;li>Status information about the BDII is available by querying the
o=infosys root for the UpdateStats object. This entry contains a
number of metrics relating to the latest update such as the time to
update the database and the total number of entries. And example of
such entry is shown below.&lt;/li>
&lt;/ul>
&lt;p>&lt;code>$ ldapsearch -x -h &lt;/code>&amp;lt;TopBDII/siteBDII&amp;gt;&lt;code> -p 2170 -b &amp;quot;o=infosys&amp;quot; &lt;/code>
&lt;code>(...)&lt;/code>
&lt;code>dn: Hostname=localhost,o=infosys&lt;/code>
&lt;code>objectClass: UpdateStats&lt;/code>
&lt;code>Hostname: lxbra2510.cern.ch&lt;/code>
&lt;code>FailedDeletes: 0&lt;/code>
&lt;code>ModifiedEntries: 4950&lt;/code>
&lt;code>DeletedEntries: 1318&lt;/code>
&lt;code>UpdateTime: 150&lt;/code>
&lt;code>FailedAdds: 603&lt;/code>
&lt;code>FailedModifies: 0&lt;/code>
&lt;code>TotalEntries: 52702&lt;/code>
&lt;code>QueryTime: 8&lt;/code>
&lt;code>NewEntries: 603&lt;/code>
&lt;code>DBUpdateTime: 11&lt;/code>
&lt;code>ReadTime: 0&lt;/code>
&lt;code>PluginsTime: 4&lt;/code>
&lt;code>ProvidersTime: 113&lt;/code>&lt;/p>
&lt;ul>
&lt;li>More extensive information can be obtained
(modifyTimestamp,createTimestamp) adding the &lt;em>+&lt;/em>:&lt;/li>
&lt;/ul>
&lt;p>&lt;code>$ ldapsearch -x -h &lt;/code>&amp;lt;TopBDII/siteBDII&amp;gt;&lt;code> -p 2170 -b &amp;quot;o=infosys&amp;quot; +&lt;/code>
&lt;code>(...)&lt;/code>
&lt;code># localhost, infosys&lt;/code>
&lt;code>dn: Hostname=localhost,o=infosys&lt;/code>
&lt;code>structuralObjectClass: UpdateStats&lt;/code>
&lt;code>entryUUID: 09bf40e0-7b23-4992-af55-fd74f036a454&lt;/code>
&lt;code>creatorsName: o=infosys&lt;/code>
&lt;code>createTimestamp: 20110612223435Z&lt;/code>
&lt;code>entryCSN: 20110615120723.216201Z#000000#000#000000&lt;/code>
&lt;code>modifiersName: o=infosys&lt;/code>
&lt;code>modifyTimestamp: 20110615120723Z&lt;/code>
&lt;code>entryDN: Hostname=localhost,o=infosys&lt;/code>
&lt;code>subschemaSubentry: cn=Subschema&lt;/code>
&lt;code>hasSubordinates: FALSE&lt;/code>&lt;/p>
&lt;ul>
&lt;li>The following table shows the meaning of the most relevant metrics:&lt;/li>
&lt;/ul>
&lt;center>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Metric&lt;/th>
&lt;th>Desciption&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>ModifiedEntries&lt;/td>
&lt;td>The number of objects to modify&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>DeletedEntries&lt;/td>
&lt;td>The number of objects to delete&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>UpdateTime&lt;/td>
&lt;td>To total update time in seconds&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>FailedAdds&lt;/td>
&lt;td>The number of add statements which failed&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>FailedModifies&lt;/td>
&lt;td>The number of modify statements which failed&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>TotalEntries&lt;/td>
&lt;td>The total number of entries in the database&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>QueryTime&lt;/td>
&lt;td>The time taken to query the database&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NewEntries&lt;/td>
&lt;td>The number of new objects&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>DBUpdateTime&lt;/td>
&lt;td>The time taken to update the database in seconds&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ReadTime&lt;/td>
&lt;td>The time taken to read the LDIF sources in seconds&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>PluginsTime&lt;/td>
&lt;td>The time taken to run the plugins in seconds&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ProvidersTime&lt;/td>
&lt;td>The time taken to run the information providers in seconds&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/center>
&lt;ul>
&lt;li>Previous BDII metrics can be checked to take a decision regarding
the reliability and availability of a TopBDII (siteBDII) instance.&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ul>
&lt;li>More information is available in &lt;a href="https://twiki.cern.ch/twiki/bin/view/EGEE/BDII#Monitoring_the_BDII_Instance">gLite-BDII_top
Monitoring&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h3 id="dns-caching">DNS caching&lt;/h3>
&lt;ul>
&lt;li>DNS records obtained in queries are cached by the DNS servers
(usually during 24 hours). Therefore to propagate DNS changes fast
enough it is important to have very short TTL lifetimes.&lt;/li>
&lt;li>DNS has not been built to have very short TTL values and these may
increase highly the number of queries and as result increase the
load of the DNS server&lt;/li>
&lt;li>The TTL lifetime to be used will have to be tested.&lt;/li>
&lt;li>If the top BDII are only used by sites in the region and if queries
are only from the DNS servers of these few sites then the number of
queries may be low enough to allow for a very small TTL&lt;/li>
&lt;li>This value should not be lower than 30s - 60s&lt;/li>
&lt;/ul>
&lt;h3 id="example-1-the-igi-nagios-based-mechanism">Example 1: The IGI Nagios based mechanism&lt;/h3>
&lt;ul>
&lt;li>In IGI, the DNS update of the number of instances participating in
the DNS round robin mechanism depends on the results provided by a
Nagios instance.&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ul>
&lt;li>When Nagios needs to check the status of a service it will execute a
plugin and pass information about what needs to be checked. The
plugin verifies the operational state of the service and reports the
results back to the Nagios daemon.&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ul>
&lt;li>Nagios will process the results of the service check and take
appropriate action as necessary (e.g. send notifications, run event
handlers, etc).&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ul>
&lt;li>Each instance is checked every 5 minutes. If a failure occurs,
Nagios runs the event handler to restart the BDII service AND remove
the instance from the DNS round robin set using dnsupdate:&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ol>
&lt;li>an email is sent as notification;&lt;/li>
&lt;li>If 4 (out of 5) instances are failing, a SMS message is sent as
notification;&lt;/li>
&lt;/ol>
&lt;!-- end list -->
&lt;ul>
&lt;li>If a failed instance appears to be restored, nagios will re-add it
to the DNS round robin mechanism.&lt;/li>
&lt;/ul>
&lt;p>&lt;a href="../../File:DNSUpdater@IGI.png" title="wikilink">center|800px&lt;/a>&lt;/p>
&lt;ul>
&lt;li>This approach has some single points of failures:&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ol>
&lt;li>The Nagios instance can fail&lt;/li>
&lt;li>The master DNS where the DNS entries are updated can fail&lt;/li>
&lt;/ol>
&lt;h3 id="example-2-the-ibergrid-scripting-based-mechanism">Example 2: The IBERGRID scripting based mechanism&lt;/h3>
&lt;ul>
&lt;li>In IBERGRID, an application (developed by LIP) verifies the health
of each TopBDII. The application can connect to the DNS servers and
remove the “A” records of TopBDIIs that become unavailable (non
responsive to tests).&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ul>
&lt;li>The monitoring application (nsupdater) is a simple program that
performs tests, and based on their result acts upon DNS entries&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ol>
&lt;li>Written in perl&lt;/li>
&lt;li>Can be run as daemon or at the command prompt&lt;/li>
&lt;li>The tests are programs that are forked&lt;/li>
&lt;li>Tests are added in a &amp;ldquo;module&amp;rdquo; fashion way&lt;/li>
&lt;li>Can be used to manage several DNS round robin scenarios&lt;/li>
&lt;li>Can manage multiple DNS servers&lt;/li>
&lt;/ol>
&lt;p>&lt;a href="../../File:nsupdater@IBERGRID.png" title="wikilink">center|800px&lt;/a>&lt;/p>
&lt;ul>
&lt;li>To remove the DNS single point of failure as in previous example,
one could configure all DNS servers serving the core.ibergrid.eu
domain as primary&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ol>
&lt;li>Three primary servers would then exist for core.ibergrid.eu&lt;/li>
&lt;li>All three DNS servers could be dynamically updated independently&lt;/li>
&lt;li>The monitoring application should also have three instances, one
running at each site&lt;/li>
&lt;li>The downside is that DNS information can become incoherent. It would
be up to the monitoring application to manage the three DNS servers
content and their cohe&lt;/li>
&lt;/ol>
&lt;p>&lt;a href="../../File:nsupdater@IBERGRID2.png" title="wikilink">center|800px&lt;/a>&lt;/p>
&lt;h1 id="revision-history">Revision history&lt;/h1>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Version&lt;/th>
&lt;th>Authors&lt;/th>
&lt;th>Date&lt;/th>
&lt;th>Comments&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1.0&lt;/td>
&lt;td>Goncalo Borges, Jorge Gomes, Paolo Veronesi&lt;/td>
&lt;td>2011-06-15&lt;/td>
&lt;td>first draft&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>1.1&lt;/td>
&lt;td>Paolo Veronesi&lt;/td>
&lt;td>2012-06-21&lt;/td>
&lt;td>This manual is equally applicable to site BDII, added some notes about it.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>M. Krakowian&lt;/td>
&lt;td>19 August 2014&lt;/td>
&lt;td>Change contact group -&amp;gt; Operations support&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Providers: MAN06 Failover for MySQL grid based services</title><link>/providers/operations-manuals/man06_failover_for_mysql_grid_based_services/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/man06_failover_for_mysql_grid_based_services/</guid><description>
&lt;p>&lt;a href="../../Category:Operations_Manuals" title="wikilink">Category:Operations Manuals&lt;/a>&lt;/p>
&lt;p>&lt;code> &lt;/code>&lt;/p>
&lt;h1 id="introduction">Introduction&lt;/h1>
&lt;ul>
&lt;li>Several critical grid services such as the Logical File Catalogue
(LFC) or the VO Management Service (VOMS) server represent single
points of failure in a grid infrastructure. When unavailable, a user
can no longer access to the infrastructure since it is prevented
from issuing new proxies, or is no longer able to access to the
physical location of his data.&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ul>
&lt;li>However, those services rely on MySQL backends which opens a window
to replicate the relevant databases to different / backup services
which could be used when the primary instances are unavailable. The
MySQL DB replication process is one of the ways to get scability and
higher availability.&lt;/li>
&lt;/ul>
&lt;h1 id="architecture">Architecture&lt;/h1>
&lt;p>In this document we propose to follow a Master-Slave architecture for
the MySQL replication, consisting in keeping DB copies of a main host
(MASTER) in a secondary host (SLAVE). The slave host will only have read
access to the Database entries.&lt;/p>
&lt;h1 id="security">Security&lt;/h1>
&lt;ul>
&lt;li>For better availability, it is preferable to deploy the Master and
the Slave services in different geographical locations, which
normally means exposing the generated traffic to the internet. In
that case, you will have to find a mechanims to encrypt the
communication between the two hosts.&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ul>
&lt;li>In this document, we propose to use &lt;strong>Stunnel&lt;/strong>:&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ol>
&lt;li>Stunnel is a free multi-platform computer program, used to provide
universal TLS/SSL tunneling service.&lt;/li>
&lt;li>Stunnel can be used to provide secure encrypted connections for
clients or servers that do not speak TLS or SSL natively. It runs on
a variety of operating systems, including most Unix-like operating
systems and Windows.&lt;/li>
&lt;li>Stunnel relies on a separate library such as OpenSSL or SSLeay to
implement the underlying TLS or SSL protocol.&lt;/li>
&lt;li>Stunnel uses Public-key cryptography with X.509 digital certificates
to secure the SSL connection. Clients can optionally be
authenticated via a certificate too&lt;/li>
&lt;li>For more references, please check
&lt;a href="http://www.stunnel.org/">www.stunnel.org&lt;/a>&lt;/li>
&lt;/ol>
&lt;!-- end list -->
&lt;ul>
&lt;li>There are other possibilities for encryption, like enabling SSL
Support directly in MySQL, but these approach was not tested.
Details can be obtained
&lt;a href="http://www.howtoforge.com/how-to-set-up-mysql-database-replication-with-ssl-encryption-on-centos-5.4">here&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h1 id="mysql-replication">MySQL replication&lt;/h1>
&lt;h2 id="assumptions">Assumptions&lt;/h2>
&lt;p>We are assuming that both grid services instances were previously
installed and configured (manually or via YAIM) so that they support the
same VOs.&lt;/p>
&lt;h2 id="generic-information">Generic information&lt;/h2>
&lt;center>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Description&lt;/th>
&lt;th>Value&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>MASTER hostname&lt;/td>
&lt;td>server1.domain.one&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MASTER username&lt;/td>
&lt;td>root&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MASTER mysql superuser&lt;/td>
&lt;td>root&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MASTER mysql replication user&lt;/td>
&lt;td>db_rep&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SLAVE hostname&lt;/td>
&lt;td>server2.domain.two&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SLAVE username&lt;/td>
&lt;td>root&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SLAVE mysql superuser&lt;/td>
&lt;td>root&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>DB to replicate&lt;/td>
&lt;td>DB_1 DB_2 &amp;hellip;&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/center>
&lt;h2 id="setup-the-mysql-master-for-replication">Setup the MySQL MASTER for replication&lt;/h2>
&lt;ul>
&lt;li>&lt;strong>Step 1&lt;/strong>: Install stunnel. It is available in the SL5
repositories.&lt;/li>
&lt;/ul>
&lt;p>&lt;code>$ yum install stunnel&lt;/code>
&lt;code>(...)&lt;/code>&lt;/p>
&lt;p>&lt;code>$ date; rpm -qa | grep stunnel&lt;/code>
&lt;code>Wed Jun 15 16:00:23 WEST 2011&lt;/code>
&lt;code>stunnel-4.15-2.el5.1&lt;/code>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Step 2&lt;/strong>: Configure stunnel (via /etc/stunnel/stunnel.conf) to:&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ol>
&lt;li>Accept incoming connections on port 3307, and allow to connect to
port 3306&lt;/li>
&lt;li>Use the server X509 certificates to encrypt data&lt;/li>
&lt;/ol>
&lt;p>&lt;code>$ cat  /etc/stunnel/stunnel.conf&lt;/code>
&lt;code># Authentication stuff&lt;/code>
&lt;code>verify = 2&lt;/code>
&lt;code>CApath = /etc/grid-security/certificates&lt;/code>
&lt;code>cert = /etc/grid-security/hostcert.pem&lt;/code>
&lt;code>key = /etc/grid-security/hostkey.pem&lt;/code>&lt;/p>
&lt;p>&lt;code># Auth fails in chroot because CApath is not accessible&lt;/code>
&lt;code>#chroot = /var/run/stunnel&lt;/code>
&lt;code>#debug = 7&lt;/code>
&lt;code>output = /var/log/stunnel.log&lt;/code>
&lt;code>pid = /var/run/stunnel/master.pid&lt;/code>&lt;/p>
&lt;p>&lt;code>setuid = nobody&lt;/code>
&lt;code>setgid = nobody&lt;/code>&lt;/p>
&lt;p>&lt;code># Service-level configuration&lt;/code>
&lt;code>[mysql]&lt;/code>
&lt;code>accept  = 3307&lt;/code>
&lt;code>connect = 127.0.0.1:3306&lt;/code>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Step 3&lt;/strong>: Start the stunnel service and add it to rc.local&lt;/li>
&lt;/ul>
&lt;p>&lt;code>$ mkdir /var/run/stunnel&lt;/code>
&lt;code>$ chown nobody:nobody /var/run/stunnel&lt;/code>
&lt;code>$ stunnel /etc/stunnel.conf&lt;/code>
&lt;code>$ echo 'stunnel /etc/stunnel.conf' &amp;gt;&amp;gt; /etc/rc.local&lt;/code>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Step 4&lt;/strong>: Setup the firewall to allow connections from the SLAVE
instance (server2.domain.two with IP XXX.XXX.XXX.XXX) on port 3307
TCP&lt;/li>
&lt;/ul>
&lt;p>&lt;code># MySQL replication&lt;/code>
&lt;code>-A INPUT -s XXX.XXX.XXX.XXX -m state --state NEW -m tcp -p tcp --dport 3307 -j ACCEPT&lt;/code>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Step 5&lt;/strong>: Configure MySQL (via /etc/my.cnf) setting up the Master
server-id (usually 1), and declaring the path for the MySQL binary
log and the DBs to be replicated. Please make sure that the path
declared under log-bin has the mysql:mysql ownerships, and that the
binary log exists.&lt;/li>
&lt;/ul>
&lt;p>&lt;code>$ cat /etc/my.cnf&lt;/code>
&lt;code>(...)&lt;/code>
&lt;code>[mysqld]&lt;/code>
&lt;code>server-id=1&lt;/code>
&lt;code>log-bin = /path_to_log_file/log_file.index&lt;/code>
&lt;code>binlog-do-db=DB_2&lt;/code>
&lt;code>binlog-do-db=DB_1&lt;/code>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Step 6&lt;/strong>: Restart MySQL&lt;/li>
&lt;/ul>
&lt;p>&lt;code>$ /etc/init.d/mysqld restart&lt;/code>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Step 7&lt;/strong>: Add a specific user for the MySQL replication&lt;/li>
&lt;/ul>
&lt;p>&lt;code>mysql &amp;gt; GRANT REPLICATION SLAVE ON *.* TO 'db_rep'@'127.0.0.1' IDENTIFIED BY '16_char_password';&lt;/code>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Step 8&lt;/strong>: Backup the databases using the following command. Please
note tha the option &amp;ldquo;&amp;ndash;master-data=2&amp;rdquo; writes a comment on dump.sql
that shows the log file and the ID to be used on the Slave setup.
This option also locks all the tables while they are beeing copied,
avoiding problems.&lt;/li>
&lt;/ul>
&lt;p>&lt;code>$ mysqldump -u root -p --default-character-set=latin1 --master-data=2 --databases DB_1 DB_2 &amp;gt; dump.sql&lt;/code>&lt;/p>
&lt;h2 id="setup-the-mysql-slave-for-replication">Setup the MySQL SLAVE for replication&lt;/h2>
&lt;p>&lt;strong>Step 1&lt;/strong>: Configure stunnel (via /etc/stunnel/stunnel.conf) to:&lt;/p>
&lt;ol>
&lt;li>Accept incoming SSL connections on port 3307, and allow to connect
to server1.domain.one on port 3307&lt;/li>
&lt;li>Use the server X509 certificates to encrypt data&lt;/li>
&lt;/ol>
&lt;p>&lt;code>$ cat /etc/stunnel/stunnel.conf&lt;/code>
&lt;code># Authentication stuff&lt;/code>
&lt;code>verify = 2&lt;/code>
&lt;code>CApath = /etc/grid-security/certificates&lt;/code>
&lt;code>cert = /etc/grid-security/hostcert.pem&lt;/code>
&lt;code>key = /etc/grid-security/hostkey.pem&lt;/code>&lt;/p>
&lt;p>&lt;code># Auth fails in chroot because CApath is not accessible&lt;/code>
&lt;code>#chroot = /var/run/stunnel&lt;/code>
&lt;code>#debug = 7&lt;/code>
&lt;code>output = /var/log/stunnel.log&lt;/code>
&lt;code>pid = /var/run/stunnel/master.pid&lt;/code>&lt;/p>
&lt;p>&lt;code>setuid = nobody&lt;/code>
&lt;code>setgid = nobody&lt;/code>&lt;/p>
&lt;p>&lt;code># Use it for client mode&lt;/code>
&lt;code>client = yes&lt;/code>&lt;/p>
&lt;p>&lt;code># Service-level configuration&lt;/code>
&lt;code>[mysql]&lt;/code>
&lt;code>accept  = 127.0.0.1:3307&lt;/code>
&lt;code>connect = server1.domain.one:3307&lt;/code>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Step 2&lt;/strong>: Start stunnel and add it to rc.local&lt;/li>
&lt;/ul>
&lt;p>&lt;code>$ mkdir /var/run/stunnel&lt;/code>
&lt;code>$ chown nobody:nobody /var/run/stunnel&lt;/code>
&lt;code>$ stunnel /etc/stunnel.conf&lt;/code>
&lt;code>$ echo 'stunnel /etc/stunnel.conf' &amp;gt;&amp;gt; /etc/rc.local&lt;/code>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Step 3&lt;/strong>: Configure MySQL to include the SLAVE server-id
(typically 2) and the replicated databases&lt;/li>
&lt;/ul>
&lt;p>&lt;code>$ cat /etc/my.cnf&lt;/code>
&lt;code>(...)&lt;/code>
&lt;code>[mysqld]&lt;/code>
&lt;code>server-id=2&lt;/code>
&lt;code>replicate-do-db=DB_1&lt;/code>
&lt;code>replicate-do-db=DB_2&lt;/code>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Step 4&lt;/strong>: Restart MySQL and insert the dump.sql created on the
Master&lt;/li>
&lt;/ul>
&lt;p>&lt;code>$ /etc/init.d/mysql restart&lt;/code>
&lt;code>$ mysql -u root -p &amp;lt; dump.sql&lt;/code>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Step 5&lt;/strong>: Start the Slave loging in the mysql of slave, and
running the following queries, changing the values xxxxx and yyyyy
by the values on top of dump.sql file:&lt;/li>
&lt;/ul>
&lt;p>&lt;code>mysql &amp;gt; CHANGE MASTER TO MASTER_HOST='127.0.0.1', MASTER_PORT=3307, MASTER_USER='db_rep', MASTER_PASSWORD='16_char_password',&lt;/code>
&lt;code>        MASTER_LOG_FILE='xxxxx', MASTER_LOG_POS=yyyyy;&lt;/code>
&lt;code>mysql &amp;gt; SLAVE START;&lt;/code>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Step 6&lt;/strong>: Your replication should be up and running. In case of
troubles, check the Troubleshooting section.&lt;/li>
&lt;/ul>
&lt;h2 id="troubleshooting">Troubleshooting&lt;/h2>
&lt;h3 id="on-the-slave">On the Slave&lt;/h3>
&lt;ul>
&lt;li>Check if you can connect to the Master on port 3307 from the Slave&lt;/li>
&lt;/ul>
&lt;p>&lt;code>[root@server2.domain.two]$ telnet server1.domain.one 3307&lt;/code>&lt;/p>
&lt;ul>
&lt;li>Check the /var/log/stunnel.log on the Slave to see if stunnel is
working. For established connections, you should find a message
like:&lt;/li>
&lt;/ul>
&lt;p>&lt;code>2011.05.30 11:57:45 LOG5[9000:1076156736]: mysql connected from XXX.XXX.XXX.XXX:PORTY&lt;/code>
&lt;code>2011.05.30 11:57:45 LOG5[9000:1076156736]: VERIFY OK: depth=1, /DC=COUNTRY/DC=CA/CN=NAME&lt;/code>
&lt;code>2011.05.30 11:57:45 LOG5[9000:1076156736]: VERIFY OK: depth=0, /DC=COUNTRY/DC=CA/O=INSTITUTE/CN=host/HOSTNAME&lt;/code>&lt;/p>
&lt;ul>
&lt;li>Check the MySQL process list. You should get an answer like the one
bellow:&lt;/li>
&lt;/ul>
&lt;p>&lt;code>mysql&amp;gt; SHOW PROCESSLIST;&lt;/code>
&lt;code>+--------+-------------+-----------+------+---------+---------+-----------------------------------------------------------------------------+------------------+&lt;/code>
&lt;code>| Id     | User        | Host      | db   | Command | Time    | State                                                                       | Info             |&lt;/code>
&lt;code>+--------+-------------+-----------+------+---------+---------+-----------------------------------------------------------------------------+------------------+&lt;/code>
&lt;code>|      1 | system user |           | NULL | Connect | 1236539 | Waiting for master to send event                                            | NULL             |&lt;/code>
&lt;code>|      2 | system user |           | NULL | Connect |   90804 | Slave has read all relay log; waiting for the slave I/O thread to update it | NULL             | &lt;/code>
&lt;code>+--------+-------------+-----------+------+---------+---------+-----------------------------------------------------------------------------+------------------+&lt;/code>&lt;/p>
&lt;ul>
&lt;li>Check the status of the slave&lt;/li>
&lt;/ul>
&lt;p>&lt;code>mysql&amp;gt; SHOW SLAVE STATUS;&lt;/code>
&lt;code>+----------------------------------+-------------+------------------+---------------------+&lt;/code>
&lt;code>| Slave_IO_State                   | Master_Port | Master_Log_File  | Read_Master_Log_Pos |&lt;/code>
&lt;code>+----------------------------------+-------------+------------------+---------------------+&lt;/code>
&lt;code>| Waiting for master to send event |        3307 | mysql-bin.000001 |          126167682  |  &lt;/code>
&lt;code>+----------------------------------+-------------+------------------+---------------------+&lt;/code>&lt;/p>
&lt;h3 id="on-the-master">On the Master&lt;/h3>
&lt;ul>
&lt;li>Check the /var/log/stunnel.log on the Slave to see if stunnel is
working. For established connections, you should find a message
like:&lt;/li>
&lt;/ul>
&lt;p>&lt;code>2011.05.30 11:57:45 LOG5[9000:1076156736]: mysql connected from XXX.XXX.XXX.XXX:PORTY&lt;/code>
&lt;code>2011.05.30 11:57:45 LOG5[9000:1076156736]: VERIFY OK: depth=1, /DC=COUNTRY/DC=CA/CN=NAME&lt;/code>
&lt;code>2011.05.30 11:57:45 LOG5[9000:1076156736]: VERIFY OK: depth=0, /DC=COUNTRY/DC=CA/O=INSTITUTE/CN=host/HOSTNAME&lt;/code>&lt;/p>
&lt;ul>
&lt;li>Check if you have established connections from the Slave on port
3307&lt;/li>
&lt;/ul>
&lt;p>&lt;code>$ netstat -tapn | grep 3307&lt;/code>
&lt;code>tcp        0      0 0.0.0.0:3307                0.0.0.0:*                   LISTEN      9000/stunnel        &lt;/code>
&lt;code>tcp        0      0 XXX.XXX.XXX.XXX:3307        YYY.YYY.YYY.YYY:34378       ESTABLISHED 9000/stunnel        &lt;/code>&lt;/p>
&lt;ul>
&lt;li>Check the Master status on MySQL. You should get an answer like:&lt;/li>
&lt;/ul>
&lt;p>&lt;code>mysql&amp;gt; SHOW MASTER STATUS;&lt;/code>
&lt;code>+------------------+-----------+--------------+------------------+&lt;/code>
&lt;code>| File             | Position  | Binlog_Do_DB | Binlog_Ignore_DB |&lt;/code>
&lt;code>+------------------+-----------+--------------+------------------+&lt;/code>
&lt;code>| mysql-bin.000001 | 126167682 | DB_1         |                  | &lt;/code>
&lt;code>+------------------+-----------+--------------+------------------+&lt;/code>
&lt;code>1 row in set (0.00 sec)&lt;/code>&lt;/p>
&lt;ul>
&lt;li>Check the MySQL process list. You should get an answer like the one
bellow:&lt;/li>
&lt;/ul>
&lt;p>&lt;code>mysql&amp;gt; SHOW PROCESSLIST;&lt;/code>
&lt;code>+------+-----------+--------------------+--------+-------------+---------+----------------------------------------------------------------+------------------+&lt;/code>
&lt;code>| Id   | User      | Host               | db     | Command     | Time    | State                                                          | Info             |&lt;/code>
&lt;code>+------+-----------+--------------------+--------+-------------+---------+----------------------------------------------------------------+------------------+                                                | NULL             | &lt;/code>
&lt;code>| 2778 | ibrepifca | localhost:42281    | NULL   | Binlog Dump | 1400477 | Has sent all binlog to slave; waiting for binlog to be updated | NULL             | &lt;/code>
&lt;code>+------+-----------+--------------------+--------+-------------+---------+----------------------------------------------------------------+------------------+&lt;/code>&lt;/p>
&lt;h2 id="the-lfc-case">The LFC case&lt;/h2>
&lt;h3 id="an-working-example">An working example&lt;/h3>
&lt;p>Using the MySQL replication mechanism, you can setup a read-only LFC
which can start to operate if the primary LFC is unavailable. The
following workflow tries to demonstrate how the mechanism is working:&lt;/p>
&lt;ul>
&lt;li>Only the primary LFC is available in the information system&lt;/li>
&lt;/ul>
&lt;p>&lt;code>$ lcg-infosites --vo ict.vo.ibergrid.eu lfc&lt;/code>
&lt;code>lfc01.ncg.ingrid.pt&lt;/code>&lt;/p>
&lt;ul>
&lt;li>If LFC_HOST env variable is not defined, lcg_utils will query the
information system to get the VO LFC&lt;/li>
&lt;/ul>
&lt;p>&lt;code>06/15/11-18:19:53 --&amp;gt; unset LFC_HOST env variable&lt;/code>
&lt;code>06/15/11-18:19:53 --&amp;gt; copy data to SE and register it on the catalogue&lt;/code>
&lt;code>06/15/11-18:19:53 --&amp;gt; running command: lcg-cr -v --vo ict.vo.ibergrid.eu -d se01-tic.ciemat.es -l lfn:/grid/ict.vo.ibergrid.eu/goncalo_borges/mytest.txt &lt;/code>&lt;a href="file:/home/ingrid/csys/goncalo/scriptInputData.jdl">file:/home/ingrid/csys/goncalo/scriptInputData.jdl&lt;/a>
&lt;code>Using grid catalog type: lfc&lt;/code>
&lt;code>Using grid catalog : lfc01.ncg.ingrid.pt&lt;/code>
&lt;code>Checksum type: None&lt;/code>
&lt;code>SE type: SRMv2&lt;/code>
&lt;code>Destination SURL : srm://se01-tic.ciemat.es/dpm/ciemat.es/home/ict.vo.ibergrid.eu/generated/2011-06-15/filea0e24e4a-4caf-4d31-a871-da0138bca1b6&lt;/code>
&lt;code>Source SRM Request Token: da0f6de5-3dad-4d14-bd17-a5ae601043ec&lt;/code>
&lt;code>Source URL: &lt;/code>&lt;a href="file:/home/ingrid/csys/goncalo/scriptInputData.jdl">file:/home/ingrid/csys/goncalo/scriptInputData.jdl&lt;/a>
&lt;code>File size: 565&lt;/code>
&lt;code>VO name: ict.vo.ibergrid.eu&lt;/code>
&lt;code>Destination specified: se01-tic.ciemat.es&lt;/code>
&lt;code>Destination URL for copy: gsiftp://se01-tic.ciemat.es/se01-tic.ciemat.es:/storage10/ict.vo.ibergrid.eu/2011-06-15/filea0e24e4a-4caf-4d31-a871-da0138bca1b6.1488163.0&lt;/code>
&lt;code># streams: 1&lt;/code>
&lt;code>         565 bytes      1.19 KB/sec avg      1.19 KB/sec inst&lt;/code>
&lt;code>Transfer took 1020 ms&lt;/code>
&lt;code>Using LFN: lfn:/grid/ict.vo.ibergrid.eu/goncalo_borges/mytest.txt&lt;/code>
&lt;code>Using GUID: guid:f602407d-bc36-4c0b-8346-219fb14f830b&lt;/code>
&lt;code>Registering LFN: /grid/ict.vo.ibergrid.eu/goncalo_borges/mytest.txt (f602407d-bc36-4c0b-8346-219fb14f830b)&lt;/code>
&lt;code>Registering SURL: srm://se01-tic.ciemat.es/dpm/ciemat.es/home/ict.vo.ibergrid.eu/generated/2011-06-15/filea0e24e4a-4caf-4d31-a871-da0138bca1b6 (f602407d-bc36-4c0b-8346-219fb14f830b)&lt;/code>
&lt;code>guid:f602407d-bc36-4c0b-8346-219fb14f830b&lt;/code>&lt;/p>
&lt;ul>
&lt;li>We now explicitly switch to the backup LFC (not being published in
the information system), and we do see that the file already appears
there registered.&lt;/li>
&lt;/ul>
&lt;p>&lt;code>06/15/11-18:20:01 --&amp;gt; export LFC_HOST to backup LFC&lt;/code>
&lt;code>06/15/11-18:20:01 --&amp;gt; running command: export LFC_HOST=ibergrid-lfc.ifca.es&lt;/code>
&lt;code>06/15/11-18:20:01 --&amp;gt; list the backup LFC&lt;/code>
&lt;code>06/15/11-18:20:01 --&amp;gt; running command: lfc-ls /grid/ict.vo.ibergrid.eu/goncalo_borges/mytest.txt&lt;/code>
&lt;code>/grid/ict.vo.ibergrid.eu/goncalo_borges/mytest.txt&lt;/code>&lt;/p>
&lt;ul>
&lt;li>We can copy data around reading entries from the backup LFC&lt;/li>
&lt;/ul>
&lt;p>&lt;code>06/15/11-18:20:01 --&amp;gt; Copy data using the backup LFC&lt;/code>
&lt;code>06/15/11-18:20:01 --&amp;gt; running command: lcg-cp -v --vo ict.vo.ibergrid.eu lfn:/grid/ict.vo.ibergrid.eu/goncalo_borges/mytest.txt &lt;/code>&lt;a href="file:/home/ingrid/csys/goncalo/scriptInputData.jdl2">file:/home/ingrid/csys/goncalo/scriptInputData.jdl2&lt;/a>
&lt;code>Using grid catalog type: LFC&lt;/code>
&lt;code>Using grid catalog : ibergrid-lfc.ifca.es&lt;/code>
&lt;code>VO name: ict.vo.ibergrid.eu&lt;/code>
&lt;code>Checksum type: None&lt;/code>
&lt;code>Trying SURL srm://se01-tic.ciemat.es/dpm/ciemat.es/home/ict.vo.ibergrid.eu/generated/2011-06-15/filea0e24e4a-4caf-4d31-a871-da0138bca1b6 ...&lt;/code>
&lt;code>Source SE type: SRMv2&lt;/code>
&lt;code>Source SRM Request Token: 3e0be4f1-f9e9-40f4-8f9f-321a115840ba&lt;/code>
&lt;code>Source URL: /grid/ict.vo.ibergrid.eu/goncalo_borges/mytest.txt&lt;/code>
&lt;code>File size: 565&lt;/code>
&lt;code>Source URL for copy: gsiftp://se01-tic.ciemat.es/se01-tic.ciemat.es:/storage10/ict.vo.ibergrid.eu/2011-06-15/filea0e24e4a-4caf-4d31-a871-da0138bca1b6.1488163.0&lt;/code>
&lt;code>Destination URL: &lt;/code>&lt;a href="file:/home/ingrid/csys/goncalo/scriptInputData.jdl2">file:/home/ingrid/csys/goncalo/scriptInputData.jdl2&lt;/a>
&lt;code># streams: 1&lt;/code>
&lt;code>           0 bytes      0.00 KB/sec avg      0.00 KB/sec inst&lt;/code>
&lt;code>Transfer took 1030 ms&lt;/code>&lt;/p>
&lt;ul>
&lt;li>However, we can not register new files in the backup LFC&lt;/li>
&lt;/ul>
&lt;p>&lt;code>06/15/11-18:30:10 --&amp;gt; copy data to SE and register it on the catalogue&lt;/code>
&lt;code>06/15/11-18:30:10 --&amp;gt; running command: lcg-cr -v --vo ict.vo.ibergrid.eu -d se01-tic.ciemat.es -l lfn:/grid/ict.vo.ibergrid.eu/goncalo_borges/mytest2.txt &lt;/code>&lt;a href="file:/home/ingrid/csys/goncalo/scriptInputData.jdl">file:/home/ingrid/csys/goncalo/scriptInputData.jdl&lt;/a>
&lt;code>Using grid catalog type: lfc&lt;/code>
&lt;code>Using grid catalog : ibergrid-lfc.ifca.es&lt;/code>
&lt;code>Checksum type: None&lt;/code>
&lt;code>SE type: SRMv2&lt;/code>
&lt;code>Destination SURL : srm://se01-tic.ciemat.es/dpm/ciemat.es/home/ict.vo.ibergrid.eu/generated/2011-06-15/file8a30add9-b247-4037-9d42-981728ae3e76&lt;/code>
&lt;code>Source SRM Request Token: 4029fcc2-281f-4e9a-a843-e8a3a67623ff&lt;/code>
&lt;code>Source URL: &lt;/code>&lt;a href="file:/home/ingrid/csys/goncalo/scriptInputData.jdl">file:/home/ingrid/csys/goncalo/scriptInputData.jdl&lt;/a>
&lt;code>File size: 565&lt;/code>
&lt;code>VO name: ict.vo.ibergrid.eu&lt;/code>
&lt;code>Destination specified: se01-tic.ciemat.es&lt;/code>
&lt;code>Destination URL for copy: gsiftp://se01-tic.ciemat.es/se01-tic.ciemat.es:/storage17/ict.vo.ibergrid.eu/2011-06-15/file8a30add9-b247-4037-9d42-981728ae3e76.1488174.0&lt;/code>
&lt;code># streams: 1&lt;/code>
&lt;code>         565 bytes      1.28 KB/sec avg      1.28 KB/sec inst&lt;/code>
&lt;code>Transfer took 1020 ms&lt;/code>
&lt;code>Using LFN: lfn:/grid/ict.vo.ibergrid.eu/goncalo_borges/mytest2.txt&lt;/code>
&lt;code>Using GUID: guid:e1b977c7-290a-410f-ad31-be4feeb67b11&lt;/code>
&lt;code>Registering LFN: /grid/ict.vo.ibergrid.eu/goncalo_borges/mytest2.txt (e1b977c7-290a-410f-ad31-be4feeb67b11)&lt;/code>
&lt;code>[LFC][lfc_creatg][] ibergrid-lfc.ifca.es: guid:e1b977c7-290a-410f-ad31-be4feeb67b11: Read-only file system&lt;/code>
&lt;code>srm://se01-tic.ciemat.es/dpm/ciemat.es/home/ict.vo.ibergrid.eu/generated/2011-06-15/file8a30add9-b247-4037-9d42-981728ae3e76: Registration failed, please register it by hand, when the problem will be solved&lt;/code>
&lt;code>guid:e1b977c7-290a-410f-ad31-be4feeb67b11&lt;/code>
&lt;code>lcg_cr: Communication error on send&lt;/code>&lt;/p>
&lt;h3 id="swapping-between-lfcs">Swapping between LFCs&lt;/h3>
&lt;ul>
&lt;li>Unfortunately the middleware does not offer an automatic way to swap
to the backup LFC in case the primary fails. Therefore, it is up to
the user (or to the application) to determine if a given LFC is
available or not.&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ul>
&lt;li>In the previous example, we have followed the approach where only
the primary LFC is available through the information system. One can
assume that, if the primary LFC is not available in the information
system, it means that either it is down or unreachable. In that
case, the user or application could switch to the backup LFC.&lt;/li>
&lt;/ul>
&lt;p>&lt;code>$ export LFC_HOST=`lcg-infosites --vo ict.vo.ibergrid.eu lfc`&lt;/code>
&lt;code>$ if [ &amp;quot;X$LFC_HOST&amp;quot; == &amp;quot;X&amp;quot; ]; then export LFC_HOST=&lt;/code>&lt;backup LFC FQDN>&lt;code>; fi&lt;/code>&lt;/p>
&lt;h2 id="the-voms-case">The VOMS case&lt;/h2>
&lt;h3 id="a-working-example">A working example&lt;/h3>
&lt;ul>
&lt;li>It is also possible to deploy a backup VOMS server with a MySQL
replica of the main VOMS server. This will enable users to still
start proxies even if the main VOMS server is down.&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ul>
&lt;li>The VOMS Admin interface of the backup VOMS server should be
switched off so that new users can only request registration via the
main VOMS Admin Web interface.&lt;/li>
&lt;/ul>
&lt;!-- end list -->
&lt;ul>
&lt;li>User interfaces should be configured to use both VOMS servers&lt;/li>
&lt;/ul>
&lt;p>&lt;code>$ voms-proxy-init --voms ict.vo.ibergrid.eu&lt;/code>
&lt;code>Enter GRID pass phrase:&lt;/code>
&lt;code>Your identity: /C=PT/O=LIPCA/O=LIP/OU=Lisboa/CN=Goncalo Borges&lt;/code>
&lt;code>Creating temporary proxy .............................................................. Done&lt;/code>
&lt;code>Contacting  voms01.ncg.ingrid.pt:40008 [/C=PT/O=LIPCA/O=LIP/OU=Lisboa/CN=voms01.ncg.ingrid.pt] &amp;quot;ict.vo.ibergrid.eu&amp;quot; Done&lt;/code>
&lt;code>Creating proxy .......................................................................................................................................................... Done&lt;/code>
&lt;code>Your proxy is valid until Thu Jun 16 07:27:31 2011&lt;/code>&lt;/p>
&lt;p>&lt;code>$ voms-proxy-init --voms ict.vo.ibergrid.eu&lt;/code>
&lt;code>Enter GRID pass phrase:&lt;/code>
&lt;code>Your identity: /C=PT/O=LIPCA/O=LIP/OU=Lisboa/CN=Goncalo Borges&lt;/code>
&lt;code>Creating temporary proxy ............................................................. Done&lt;/code>
&lt;code>Contacting  ibergrid-voms.ifca.es:40008 [/DC=es/DC=irisgrid/O=ifca/CN=host/ibergrid-voms.ifca.es] &amp;quot;ict.vo.ibergrid.eu&amp;quot; Done&lt;/code>
&lt;code>Creating proxy ............................................................................ Done&lt;/code>
&lt;code>Your proxy is valid until Thu Jun 16 07:27:37 2011&lt;/code>&lt;/p>
&lt;h1 id="revision-history">Revision history&lt;/h1>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Version&lt;/th>
&lt;th>Authors&lt;/th>
&lt;th>Date&lt;/th>
&lt;th>Comments&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1.0&lt;/td>
&lt;td>Goncalo Borges&lt;/td>
&lt;td>2011-06-16&lt;/td>
&lt;td>first draft&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>M. Krakowian&lt;/td>
&lt;td>19 August 2014&lt;/td>
&lt;td>Change contact group -&amp;gt; Operations support&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Providers: MAN07 VOMS Replication</title><link>/providers/operations-manuals/man07_voms_replication/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/man07_voms_replication/</guid><description>
&lt;p>&lt;a href="../../Category:Operations_Manuals" title="wikilink">Category:Operations Manuals&lt;/a>&lt;/p>
&lt;h2 id="introduction">Introduction&lt;/h2>
&lt;p>In this manual we will show you how to implement a MySQL VOMS server
replication: you need one master server, on which you can perform
writing operations, and you can have from 1 to &amp;ldquo;n&amp;rdquo; replica servers that
will work in read-only mode. In such a scenario you can do a whatever
intervention on one of the servers without breaking the service, i.e.
proxies creation and grid-mapfile downloads: just the users registration
and the usual VOs management operations might be forbidden during an
intervention on the master server (because it is the only server in
writing mode).&lt;/p>
&lt;p>This failover procedure is simply based on mysql replication therefore
every mysql setting is referred to the current mysql version (5.0.77 in
this moment)&lt;/p>
&lt;h2 id="settings-on-the-master-server">Settings on the MASTER SERVER&lt;/h2>
&lt;p>In order to allow the replica server to read the master database, you
have to create an user with which the slave will connect to the master.
Suppose the replica hostname is vomsrep.cnaf.infn.it, the user is
bonjovi and the password is always: what you have to launch on the
master server is&lt;/p>
&lt;p>&lt;code>mysql -p -e &amp;quot;grant super, reload , replication slave, replication client on *.* to bonjovi@'vomsrep.cnaf.infn.it' identified by 'always'&amp;quot; ;&lt;/code>&lt;/p>
&lt;p>Then for each DB (VO) you want to replicate, you have to assign the
right permissions, by launching:&lt;/p>
&lt;p>&lt;code>mysql -p -e &amp;quot;grant select, lock tables on voms_myvo.* to bonjovi@'vomsrep.cnaf.infn.it'&amp;quot;&lt;/code>&lt;/p>
&lt;p>Eventually you have to modify the file &lt;em>/etc/my.cnf&lt;/em> by adding the
following lines into the section &amp;ldquo;[mysqld]&amp;quot;:&lt;/p>
&lt;p>&lt;code>log-bin=mysql-bin&lt;/code>
&lt;code>server-id=1&lt;/code>
&lt;code>innodb_flush_log_at_trx_commit=1&lt;/code>
&lt;code>sync_binlog=1&lt;/code>&lt;/p>
&lt;p>It is important that on the master server it is set &amp;ldquo;server-id=1&amp;rdquo;: it is
the identification number that distinguish a master from its several
slaves (each slave will have a unique number starting from 2)&lt;/p>
&lt;p>For example, the content of my.cnf file may appear like this:&lt;/p>
&lt;p>&lt;code># less /etc/my.cnf &lt;/code>
&lt;code>[mysqld]&lt;/code>
&lt;code>datadir=/var/lib/mysql&lt;/code>
&lt;code>socket=/var/lib/mysql/mysql.sock&lt;/code>
&lt;code>user=mysql&lt;/code>
&lt;code># Default to using old password format for compatibility with mysql 3.x&lt;/code>
&lt;code># clients (those using the mysqlclient10 compatibility package).&lt;/code>
&lt;code>old_passwords=1&lt;/code>&lt;/p>
&lt;p>&lt;code>max_connections = 800&lt;/code>
&lt;code>log-bin=mysql-bin&lt;/code>
&lt;code>server-id=1&lt;/code>
&lt;code>innodb_flush_log_at_trx_commit=1&lt;/code>
&lt;code>sync_binlog=1&lt;/code>
&lt;code># Disabling symbolic-links is recommended to prevent assorted security risks;&lt;/code>
&lt;code># to do so, uncomment this line:&lt;/code>
&lt;code># symbolic-links=0&lt;/code>&lt;/p>
&lt;p>&lt;code>[mysqld_safe]&lt;/code>
&lt;code>log-error=/var/log/mysqld.log&lt;/code>
&lt;code>pid-file=/var/run/mysqld/mysqld.pid&lt;/code>&lt;/p>
&lt;p>At this point, you have to restart mysql, by launching:&lt;/p>
&lt;p>&lt;code>service mysqld restart&lt;/code>&lt;/p>
&lt;p>In order to check that on the master side the mechanism is working, you
can launch for example:&lt;/p>
&lt;p>&lt;code>mysql&amp;gt; show master status;&lt;/code>
&lt;code>+------------------+----------+--------------+------------------+&lt;/code>
&lt;code>| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB |&lt;/code>
&lt;code>+------------------+----------+--------------+------------------+&lt;/code>
&lt;code>| mysql-bin.000001 |    24844 |              |                  | &lt;/code>
&lt;code>+------------------+----------+--------------+------------------+&lt;/code>
&lt;code>1 row in set (0.00 sec)&lt;/code>&lt;/p>
&lt;p>Eventually, through the web interface, in the ACL section of each VO you
want to replicate, add an entry granting all the permissions to the
slave server:&lt;/p>
&lt;ul>
&lt;li>select &amp;ldquo;a non VO member&amp;rdquo; from the menu&lt;/li>
&lt;li>fill in the replica server DN and a reference email address&lt;/li>
&lt;li>select &amp;ldquo;all&amp;rdquo; for the permissions and tick the &amp;ldquo;Propagate entry to
children contexts&amp;rdquo; option&lt;/li>
&lt;/ul>
&lt;p>In this way, when the slave server copies the DB, it will have the
proper permissions on acting on the DB. Morover, in order to avoid the
sending of notification to the email address you filled in before,
connect to the mysql DB and do the following:&lt;/p>
&lt;p>&lt;code>mysql&amp;gt; use voms_myvo;&lt;/code>
&lt;code>mysql&amp;gt; update admins set email_address=NULL where email_address=&amp;quot;what you filled before&amp;quot;;&lt;/code>&lt;/p>
&lt;h2 id="settings-on-the-slave-server">Settings on the SLAVE SERVER&lt;/h2>
&lt;p>Install a VOMS server as usual, configuring the VOs you want to
replicate: keep in mind that every modification done on the slave DB
breaks the replica mechanism, so that on this server disable the users
registration, by setting the yaim variable&lt;/p>
&lt;p>&lt;code>VOMS_ADMIN_WEB_REGISTRATION_DISABLE=true&lt;/code>&lt;/p>
&lt;p>and therefore ask the VO managers to not perform any action on the slave
server web interface.&lt;/p>
&lt;p>Then launch the following scripts:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="../../VOMS_Replication_first_replica" title="wikilink">first_replica.sh&lt;/a> for
the first database you want to replicate or in the case it is the
only one&lt;/li>
&lt;li>&lt;a href="../../VOMS_Replication_next_replicas" title="wikilink">next_replicas.sh&lt;/a> for
the next databases (one database for each launch)&lt;/li>
&lt;/ul>
&lt;p>For both the scripts, set the following variables:&lt;/p>
&lt;ul>
&lt;li>master_host, master_mysql_user, master_mysql_pwd that refers to
the master server and to the user created on it&lt;/li>
&lt;li>mysql_username_admin e mysql_password_admin that refers to the
slave&lt;/li>
&lt;/ul>
&lt;p>EXAMPLE:&lt;/p>
&lt;p>&lt;code>voms_database=&amp;quot;&amp;quot;                                    # VOMS database (leave unset)&lt;/code>
&lt;code>master_host=&amp;quot;voms.cnaf.infn.it&amp;quot;                     # Master hostname&lt;/code>
&lt;code>master_mysql_user=&amp;quot;bonjovi&amp;quot;                         # Master MySQL admin user for replication&lt;/code>
&lt;code>master_mysql_pwd=&amp;quot;always&amp;quot;                           # Master MySQL admin pass for replication user&lt;/code>
&lt;code>master_log_file=&amp;quot;&amp;quot;                                  # Master LOG file (leave unset)&lt;/code>
&lt;code>master_log_pos=&amp;quot;&amp;quot;                                   # Master LOG file (leave unset)&lt;/code>
&lt;code>mysql_username_admin=&amp;quot;root&amp;quot;                         # Slave MySQL admin username&lt;/code>
&lt;code>mysql_password_admin=&amp;quot;secret&amp;quot;                       # Slave MySQL admin pass&lt;/code>&lt;/p>
&lt;p>with the launch of first-replica.sh, the file /etc/my.cnf will be
properly written; if you need to replicate further databases, modify
/etc/my.cnf adding the following lines related to the db you are
replicating (similar to the first db you&amp;rsquo;ve replicated):&lt;/p>
&lt;p>&lt;code>replicate-do-db=&lt;/code>&amp;lt;master_vo_db_name&amp;gt;
&lt;code>replicate-ignore-table=&lt;/code>&amp;lt;master_vo_db_name&amp;gt;&lt;code>.seqnumber&lt;/code>
&lt;code>replicate-ignore-table=&lt;/code>&amp;lt;master_vo_db_name&amp;gt;&lt;code>.realtime&lt;/code>
&lt;code>replicate-ignore-table=&lt;/code>&amp;lt;master_vo_db_name&amp;gt;&lt;code>.transactions&lt;/code>
&lt;code>replicate-ignore-table=&lt;/code>&amp;lt;slave_vo_db_name&amp;gt;&lt;code>.seqnumber&lt;/code>
&lt;code>replicate-ignore-table=&lt;/code>&amp;lt;slave_vo_db_name&amp;gt;&lt;code>.realtime&lt;/code>
&lt;code>replicate-ignore-table=&lt;/code>&amp;lt;slave_vo_db_name&amp;gt;&lt;code>.transactions&lt;/code>&lt;/p>
&lt;p>Having set the variables in the way shown above, for replicating the
first database the scripts launch syntax is the following:&lt;/p>
&lt;p>&lt;code>./first_replica.sh --master-db=voms_myvo --db=voms_myvo&lt;/code>&lt;/p>
&lt;p>In your /etc/my.cnf file you will find lines like the following:&lt;/p>
&lt;p>&lt;code># Connection with master&lt;/code>
&lt;code>server-id=2&lt;/code>
&lt;code>master-host=voms.cnaf.infn.it&lt;/code>
&lt;code>master-user=bonjovi&lt;/code>
&lt;code>master-password=always&lt;/code>&lt;/p>
&lt;p>&lt;code># Replicas settings&lt;/code>
&lt;code>replicate-do-db=voms_myvo&lt;/code>
&lt;code>replicate-ignore-table=voms_myvo.seqnumber&lt;/code>
&lt;code>replicate-ignore-table=voms_myvo.realtime&lt;/code>
&lt;code>replicate-ignore-table=voms_myvo.transactions&lt;/code>
&lt;code>replicate-ignore-table=voms_myvo.seqnumber&lt;/code>
&lt;code>replicate-ignore-table=voms_myvo.realtime&lt;/code>
&lt;code>replicate-ignore-table=voms_myvo.transactions&lt;/code>&lt;/p>
&lt;p>now you may want to replicate a second database, let&amp;rsquo;s say voms_hervo:
therefore in my.cnf file add the following lines:&lt;/p>
&lt;p>&lt;code>replicate-do-db=voms_hervo&lt;/code>
&lt;code>replicate-ignore-table=voms_hervo.seqnumber&lt;/code>
&lt;code>replicate-ignore-table=voms_hervo.realtime&lt;/code>
&lt;code>replicate-ignore-table=voms_hervo.transactions&lt;/code>
&lt;code>replicate-ignore-table=voms_hervo.seqnumber&lt;/code>
&lt;code>replicate-ignore-table=voms_hervo.realtime&lt;/code>
&lt;code>replicate-ignore-table=voms_hervo.transactions&lt;/code>&lt;/p>
&lt;p>modify the script next_replicas.sh in according to the VO parameters
and launch it:&lt;/p>
&lt;p>&lt;code>./next_replicas.sh --master-db=voms_hervo --db=voms_hervo&lt;/code>&lt;/p>
&lt;p>when you finished to replicate all the desired VOs, in order to make
active the database modifications, restart voms and voms-admin:&lt;/p>
&lt;p>&lt;code>/etc/init.d/voms-admin stop&lt;/code>
&lt;code>/etc/init.d/voms stop&lt;/code>
&lt;code>/etc/init.d/voms start&lt;/code>
&lt;code>/etc/init.d/voms-admin start&lt;/code>&lt;/p>
&lt;p>Keep in mind that every modification done on the slave DB breaks the
replica mechanism, so that on this server disable the users
registration, by setting the yaim variable:&lt;/p>
&lt;p>&lt;code>VOMS_ADMIN_WEB_REGISTRATION_DISABLE=true&lt;/code>&lt;/p>
&lt;p>and ask the VO managers to not perform any action on the slave server
web interface&lt;/p>
&lt;h2 id="revision-history">Revision History&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Version&lt;/th>
&lt;th>Authors&lt;/th>
&lt;th>Date&lt;/th>
&lt;th>Comments&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1.0&lt;/td>
&lt;td>Alessandro Paolini&lt;/td>
&lt;td>2011-10-14&lt;/td>
&lt;td>First Draft&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>M. Krakowian&lt;/td>
&lt;td>19 August 2014&lt;/td>
&lt;td>Change contact group -&amp;gt; Operations support&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Providers: MAN09 Accounting data publishing</title><link>/providers/operations-manuals/man09_accounting_data_publishing/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/man09_accounting_data_publishing/</guid><description>
&lt;h2 id="introduction">Introduction&lt;/h2>
&lt;p>In this manual we will show you how to publish accounting information
from different middlewares.&lt;/p>
&lt;h2 id="general-information">General information&lt;/h2>
&lt;h3 id="publishing-with-the-apel-clientssm">Publishing with the APEL Client/SSM&lt;/h3>
&lt;p>To start sending accounting records:&lt;/p>
&lt;ol>
&lt;li>register each endpoint sending the accounting records to the central
repository as &amp;lsquo;gLite-APEL&amp;rsquo; endpoint in GOCDB with host DN
information
&lt;ul>
&lt;li>either HTCondorCE or ARC-CE endpoints&lt;/li>
&lt;li>it is needed to authorise the endpoint to use the ARGO Message
Service (AMS)&lt;/li>
&lt;li>Changes in GOCDB can take up to 4 hours to make it to AMS.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>install the APEL client and APEL SSM on your publisher host and edit
client.cfg and sender.cfg&lt;/li>
&lt;li>install the APEL parser relevant to your batch system on each CE and
edit parser.cfg
&lt;ul>
&lt;li>documentation for APEL
here: &lt;a href="https://twiki.cern.ch/twiki/bin/view/EMI/EMI3APELClient">https://twiki.cern.ch/twiki/bin/view/EMI/EMI3APELClient&lt;/a>
&lt;ul>
&lt;li>&lt;a href="https://github.com/apel/apel">https://github.com/apel/apel&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/apel/ssm">https://github.com/apel/ssm&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>The old ActiveMQ network was dismissed: have a look at the new
settings to properly publish the accounting records via AMS:
&lt;a href="https://github.com/apel/ssm/blob/dev/migrating_to_ams.md">https://github.com/apel/ssm/blob/dev/migrating_to_ams.md&lt;/a>&lt;/li>
&lt;li>configure the client to publish data from the start of the current
month. &lt;/li>
&lt;li>Run the parser(s) and client. &lt;/li>
&lt;li>If there are no errors messages and the client says it has sent
messages then wait a day and you should see summaries here:
&lt;a href="http://goc-accounting.grid-support.ac.uk/apel/summaries2.html">http://goc-accounting.grid-support.ac.uk/apel/summaries2.html&lt;/a>&lt;/li>
&lt;li>If it doesn&amp;rsquo;t open a GGUS ticket for the APEL Team.&lt;/li>
&lt;/ol>
&lt;h3 id="monitoring-the-accounting-data-publication">Monitoring the accounting data publication&lt;/h3>
&lt;p>In order to monitor the regular publication of accounting data, it is
enough registering only one CE with the &amp;ldquo;&lt;strong>APEL&lt;/strong>&amp;rdquo; service type&lt;/p>
&lt;p>See here the details about the related nagios probes:
&lt;a href="https://wiki.egi.eu/wiki/APEL/Tests">https://wiki.egi.eu/wiki/APEL/Tests&lt;/a>&lt;/p>
&lt;h3 id="publishing-summarized-records-or-single-ones">Publishing summarized records or single ones&lt;/h3>
&lt;p>Sites can send either but the preferred option is summaries. Larger
sites are recommended to send summaries.&lt;/p>
&lt;h3 id="the-frequency-for-sending-aggregatedsummary-records-to-apel-database">The frequency for sending aggregated/summary records to Apel database?&lt;/h3>
&lt;p>We recommend sending data daily for all sites, whether sending summaries
or individual records. I think this is in the interests of people who
are using the portal so that what they see is accurate. The summaries
are for a complete month or the current month so far.&lt;/p>
&lt;h3 id="authorization-and-authentication">Authorization and authentication&lt;/h3>
&lt;p>Authorization and authentication is made by the host certificate (which
is signed by a trusted CA from the ca_policy_core package).
Certificate should be registered in GOC DB. The certificate must not
have the x509 extension: &amp;ldquo;Netscape Cert Type: SSL Server&amp;rdquo; because the
message brokers will reject it.&lt;/p>
&lt;h2 id="arc">ARC&lt;/h2>
&lt;p>ARC uses its own system to publish the accounting data through AMS, so
please refer to the NorduGrid ARC 6 documentation:&lt;/p>
&lt;ul>
&lt;li>Information relevant only for 6.4 ARC releases and beyond:
&lt;a href="http://www.nordugrid.org/documents/arc6/tech/accounting/accounting-ng.html#accounting-ng-tech">http://www.nordugrid.org/documents/arc6/tech/accounting/accounting-ng.html#accounting-ng-tech&lt;/a>&lt;/li>
&lt;li>The old ActiveMQ network was dissmissed. ARC 6.12 introduces new
settings for publishing the accounting records via AMS:
&lt;a href="http://www.nordugrid.org/arc/releases/6.12/release_notes_6.12.html">http://www.nordugrid.org/arc/releases/6.12/release_notes_6.12.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="htcondor-ce">HTCondor-CE&lt;/h2>
&lt;p>To collect and publish the accounting data you need to install the APEL
software as explained in the general information section.&lt;/p>
&lt;h2 id="revision-history">Revision History&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Version&lt;/th>
&lt;th>Authors&lt;/th>
&lt;th>Date&lt;/th>
&lt;th>Comments&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>Alessandro Paolini&lt;/td>
&lt;td>2021-08-06&lt;/td>
&lt;td>updated the General Information and ARC sections; removed Globus, QCG, and Unicore sections&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>Alessandro Paolini&lt;/td>
&lt;td>2019-10-08&lt;/td>
&lt;td>added link to specific ARC 6 documentation&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>Alessandro Paolini&lt;/td>
&lt;td>2019-09-13&lt;/td>
&lt;td>updating the general information&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>JC Gordon&lt;/td>
&lt;td>17 Sept. 2014&lt;/td>
&lt;td>Remove requirement to test APEL client&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>M. Krakowian&lt;/td>
&lt;td>19 August 2014&lt;/td>
&lt;td>Change contact group -&amp;gt; Operations support&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;a href="../../Category:Operations_Manuals" title="wikilink">Category:Operations_Manuals&lt;/a>&lt;/p></description></item></channel></rss>