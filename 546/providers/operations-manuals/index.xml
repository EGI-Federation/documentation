<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>EGI Documentation – Operations manuals and How-Tos</title><link>/providers/operations-manuals/</link><description>Recent content in Operations manuals and How-Tos on EGI Documentation</description><generator>Hugo -- gohugo.io</generator><atom:link href="/providers/operations-manuals/index.xml" rel="self" type="application/rss+xml"/><item><title>Providers: Operations Start Guide</title><link>/providers/operations-manuals/operations-start-guide/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/operations-start-guide/</guid><description>
&lt;h2 id="introduction">Introduction&lt;/h2>
&lt;p>The Operations Start Guide will help you start with EGI Operations duties. It
covers the responsibilities of the various parties involved in the running of
the
&lt;a href="https://confluence.egi.eu/display/EGIG/EGI+Infrastructure">EGI infrastructure&lt;/a>
and guide how to join operations. As a newcomer, you need to understand the
structure of the infrastructure and roles of operators at different levels.
Reading the whole document will give you a complete overall picture of daily
operations within EGI.&lt;/p>
&lt;h2 id="resource-centres-and-resource-infrastructures">Resource Centres and Resource Infrastructures&lt;/h2>
&lt;p>Resources are geographically distributed and are contributed by
&lt;a href="https://confluence.egi.eu/display/EGIG/Resource+Centre">Resource Centres&lt;/a>. A
Resource Centre is the smallest resource administration domain within EGI. It
can be either localized or geographically distributed. A Resource Centre is also
known as a &lt;em>site&lt;/em>. It provides a minimum set of local or remote IT Services,
such as High Throughput Compute (HTC), Cloud Compute, Storage and Data Transfer,
compliant to well-defined IT Capabilities necessary to make resources accessible
to authorised users. Users can access the services using common interfaces.&lt;/p>
&lt;p>The EGI Federation is a
&lt;a href="https://confluence.egi.eu/display/EGIG/Resource+Infrastructure">Resource Infrastructure&lt;/a>
federating Resource Centres to constitute a homogeneous operational domain, and
the
&lt;a href="https://confluence.egi.eu/display/EGIG/Resource+Infrastructure+Provider">Resource Infrastructure Provider&lt;/a>
is the legal organisation that is responsible of establishing, managing and of
operating directly or indirectly the operational services to an agreed level of
quality needed by the Resource Centres and the user community. It holds the
responsibility of integrating them in EGI to enable uniform resource access and
sharing for the benefit of their consuming end users. Examples of a Resource
infrastructure Provider are the
&lt;a href="https://confluence.egi.eu/display/EGIG/European+Intergovernmental+Research+Organisation">European Intergovernmental Research Organisations (EIRO)&lt;/a>
and the &lt;a href="https://confluence.egi.eu/display/EGIG/NGI">NGIs&lt;/a>.&lt;/p>
&lt;p>In Europe, Resource Centres are required to be affiliated to the respective
NGIs, which (a) have a mandate to represent their national users community in
all matters falling within the scope of the EGI Infrastructure, and (b) are the
only organization having the mandate described in (a) for its country and thus
provide a single contact point at the national level.&lt;/p>
&lt;h2 id="operations-centres">Operations Centres&lt;/h2>
&lt;p>A Resource Infrastructure Provider is responsible for delivering, to different
groups of customers, a number of services, either technical or humans : services
supporting the activities of the given Resource Infrastructure Provider and
facilitating and making secure the access to the provided resources and
services.&lt;/p>
&lt;p>In order to contribute resources to EGI, a Resource Infrastructure Provider must
be associated to an
&lt;a href="https://confluence.egi.eu/display/EGIG/Operations+Centre">Operations Centre&lt;/a>
which will deliver the services on behalf of them.&lt;/p>
&lt;p>A single Operations Centre can be federated and operate services for multiple
Resource Infrastructure Providers. Federation of operations can be a
cost-effective approach for Resource Infrastructure Providers wishing to share
their effort and services, or in order to operate the infrastructures in an
early stage of maturity.&lt;/p>
&lt;p>The Operations Centre provides services in collaboration with the respective
Resource Centres via the Resource Centre Operations Manager, and globally with
EGI Foundation and other Operations Centres.&lt;/p>
&lt;ul>
&lt;li>Locally, Operations Centres are responsible for supporting the Resource
Centres, for monitoring their Quality of Service (QoS), for collecting
requirements and representing them in the EGI operations boards.&lt;/li>
&lt;li>Globally they are in charge of contributing to the evolution of the EGI
Infrastructure.&lt;/li>
&lt;/ul>
&lt;h2 id="roles">Roles&lt;/h2>
&lt;p>The following sections covers the roles that are commonly involved in the
operations of the EGI Infrastructure. The correspondent
&lt;a href="../../../internal/configuration-database/users-roles/managing-roles/#roles">roles defined in Configuration Database (GOCDB)&lt;/a>
give specific rights in the Configuration Database itself and in other EGI
services. There are roles whose scope is limited to the operation of a Resource
Centre. A number of other roles act on a higher level, involving the operations
activities related either to the NGI (Regional level) or to the EGI
infrastructure as a whole (global level). Other terms and definitions can be
found in the &lt;a href="https://go.egi.eu/glossary">EGI Glossary&lt;/a>.&lt;/p>
&lt;h3 id="resource-centre-level">Resource Centre level&lt;/h3>
&lt;h4 id="resource-centre-administrator">Resource Centre Administrator&lt;/h4>
&lt;p>An individual responsible for installing, operating, maintaining and supporting
one or more Resources or IT Services in a Resource Centre. In the scope of
Operations, Resource Centres (RC) administrators primarily receive and react on
incidents at their Resource Centre and on service requests notified through
tickets created on the &lt;a href="../../../internal/helpdesk">EGI Helpdesk service&lt;/a>. They
should respond to the tickets in a suitable time frame as defined in the
&lt;a href="https://documents.egi.eu/document/31">Resource Centre Operational Level Agreement (OLA)&lt;/a>
and be aware of the alarms at their site, eg. through the
&lt;a href="https://operations-portal.egi.eu">Operations Dashboard&lt;/a>. Sites &lt;strong>MUST&lt;/strong> only
operate supported middleware versions. This implies upgrading it regularly.
Emergency releases are treated in a special way. Resource Centre Administrators
&lt;strong>MUST&lt;/strong> react to security issues that are at a global level, but affect their
site. See
&lt;a href="https://go.egi.eu/sec03">SEC03 EGI-CSIRT Critical Vulnerability Handling&lt;/a>.&lt;/p>
&lt;h4 id="resource-centre-operations-manager">Resource Centre Operations Manager&lt;/h4>
&lt;p>An individual who leads the Resource Centre operations, who is the official
technical contact person in the connected organisation, and who is locally
supported by a team of Resource Centre Administrators. The Resource Centre
Operations Manager is responsible for the site at the political and legal levels
and for signing the
&lt;a href="https://documents.egi.eu/public/ShowDocument?docid=31">Operational Level Agreement&lt;/a>)
between the Resource Centre and its hosting NGI. The Resource Centre Operations
Manager is also responsible for enforcing the EGI policies and procedures by the
Resource Centre and for assigning and approving the other site roles in the
Configuration Database. Further, they should ensure that administrators are
subscribed to the relevant mailing lists.&lt;/p>
&lt;h4 id="resource-centre-security-officer">Resource Centre Security Officer&lt;/h4>
&lt;p>The person responsible for keeping the site compliant with the
&lt;a href="https://go.egi.eu/policies-and-procedures">EGI security policies&lt;/a>. They are the
primary contact for the &lt;a href="#ngi-security-officer">NGI Security officer&lt;/a> and
&lt;a href="#egi-csirt">EGI Computer Security Incident Response Team (CSIRT)&lt;/a>. The Site
Security Officer deals with security incidents and shall respond to enquiries in
a timely fashion as defined in the collection of
&lt;a href="https://go.egi.eu/policies-and-procedures">security procedures and policies&lt;/a>.&lt;/p>
&lt;h3 id="regional-level">Regional level&lt;/h3>
&lt;h4 id="regional-operator-on-duty-rod">Regional Operator on Duty (ROD)&lt;/h4>
&lt;p>A team responsible for solving problems and incidents in the infrastructure
according to agreed procedures. ROD teams monitor the Resource Centres in their
region, react to incidents identified by the monitoring tools, and oversee
incidents and related problems through to their resolution. They ensure that
incidents are properly recorded and that the solutions progress according to
specified time lines. They also provide support to Resource Centres and Virtual
Organisations (VOs) and provide support to oversight bodies in cases of
unresponsive Resource Centres. They ensure that all the necessary information is
available to all parties. The team is provided by each NGI and requires
procedural knowledge on the process (rather than technical skills) for their
work. New ROD team members are required to read the
&lt;a href="https://wiki.egi.eu/wiki/Regional_Operator_on_Duty_welcome">ROD Welcome page&lt;/a>
and be familiar with
&lt;a href="https://wiki.egi.eu/wiki/Regional_Operator_on_Duty">ROD wiki page&lt;/a>.&lt;/p>
&lt;h4 id="ngi-security-officer">NGI Security officer&lt;/h4>
&lt;p>The NGI Security Officer is member of the &lt;a href="#egi-csirt">EGI-CSIRT&lt;/a>.&lt;/p>
&lt;p>The NGI Security Officer coordinates the security activities within its NGI and
serves as the primary contact for all security related requests, in particular
from &lt;a href="#egi-csirts-irtf">EGI-CSIRT&amp;rsquo;s IRTF&lt;/a> concerning issues with the sites
within the NGI.&lt;/p>
&lt;p>Further, the NGI Security Officer is responsible for overseeing the security
related aspects of the operations of the NGI and coordinates the security
activities within its NGI.&lt;/p>
&lt;p>NGIs and Sites &lt;strong>MUST&lt;/strong> respond in a timely manner to the security requests and
alerts coming from the EGI-CSIRT&amp;rsquo;s IRTF.&lt;/p>
&lt;p>The NGI Security Officer name and contact address needs to be registered in the
&lt;a href="https://goc.egi.eu">Configuration Database (GOCDB)&lt;/a> and the information
maintained by the NGI.&lt;/p>
&lt;h4 id="ngi-operations-manager">NGI Operations manager&lt;/h4>
&lt;p>The NGI Operations manager is the contact point for all operational matters and
represents the NGI within the
&lt;a href="https://confluence.egi.eu/display/EGIBG/Operations+Management+Board">Operations Management Board (OMB)&lt;/a>.&lt;/p>
&lt;p>They are mainly responsible for:&lt;/p>
&lt;ul>
&lt;li>keeping up to date the NGI entry in the Configuration Database and managing
the status of all sites under their NGI, and ensuring their information is
also kept current&lt;/li>
&lt;li>addressing problems with Site availability or reliability. The reports are
issued on a monthly basis and the NGI operations managers have 10 days to
respond to identified problems&lt;/li>
&lt;li>attending regular
&lt;a href="https://indico.egi.eu/category/19/">Operations Management Board meetings&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>All NGI operations management responsibilities are listed in the
&lt;a href="https://documents.egi.eu/document/463">Resource Infrastructure Provider OLA document&lt;/a>.&lt;/p>
&lt;h3 id="global-level">Global level&lt;/h3>
&lt;h4 id="chief-operations-officer">Chief Operations Officer&lt;/h4>
&lt;p>The Chief Operations Officer leads EGI Operations, and is responsible for
coordinating the operations of the infrastructure across the project.&lt;/p>
&lt;h4 id="egi-csirt">EGI-CSIRT&lt;/h4>
&lt;p>&lt;a href="https://csirt.egi.eu">EGI-CSIRT&lt;/a> is the official security coordination team and
contact point at project level.&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://csirt.egi.eu">EGI-CSIRT site&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://confluence.egi.eu/display/EGIBG/EGI+CSIRT+-+RFC+2350">EGI-CSIRT profile according to RFC-2350&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://csirt.egi.eu/files/2020/11/EGI-CSIRT-ToR_V2_20190819.pdf">EGI-CSIRT Terms of References&lt;/a>&lt;/li>
&lt;/ul>
&lt;h5 id="egi-csirts-irtf">EGI-CSIRT&amp;rsquo;s IRTF&lt;/h5>
&lt;p>The Incident Response Team for the Federation (IRTF) is a subgroup of EGI-CSIRT
which acts as the primary contact for all security related requests concerning
the Federation and the projects the EGI Foundation is involved in.&lt;/p>
&lt;p>EGI-CSIRTs IRTF provides the Security Officer on Duty role on a weekly rota
basis. Details are in the
&lt;a href="https://csirt.egi.eu/files/2020/11/EGI-CSIRT-ToR_V2_20190819.pdf">EGI-CSIRT Terms of References&lt;/a>.&lt;/p>
&lt;h4 id="egi-security-officer">EGI Security Officer&lt;/h4>
&lt;p>The EGI Security Officer, having the EGI CSIRT Officer role in the Configuration
Database, is leading and coordinating EGI-CSIRT.&lt;/p>
&lt;p>The role of the EGI Security Officer is provided by a member of EGI-CSIRT&amp;rsquo;s IRTF
on a weekly rota basis.&lt;/p>
&lt;h4 id="egi-foundation-sdis-team">EGI Foundation SDIS team&lt;/h4>
&lt;p>The &lt;a href="https://confluence.egi.eu/display/EGIG/EGI+Foundation">EGI Foundation&lt;/a>
Service Delivery and Information Security (SDIS) team, formerly known as the EGI
Operations team, is responsible of
&lt;a href="https://confluence.egi.eu/display/EGIPP/EGI+Infrastructure+operations+oversight">coordinating and supporting the operational activities&lt;/a>
of all the EGI Infrastructure.&lt;/p>
&lt;h4 id="vo">VO&lt;/h4>
&lt;p>A
&lt;a href="https://confluence.egi.eu/display/EGIG/Virtual+organisation">Virtual Organisation (VO)&lt;/a>
is a group of users and, optionally, resources, often not bound to a single
institution or national borders, who, by reason of their common membership and
in sharing a common goal, are given authority to use a set of resources. Each VO
member signs the VO Acceptable Usage Policy (AUP) (during registration) which is
the policy describing the goals of the VO thereby defining the expected and
acceptable use of the resources by the users of the VO. User documentation can
be found &lt;a href="../../../users/">in the users section&lt;/a>.&lt;/p>
&lt;h4 id="vo-manager">VO manager&lt;/h4>
&lt;p>An individual responsible for the management of the membership registry of the
VO ensuring its accuracy and integrity.&lt;/p>
&lt;h2 id="joining-operations">Joining operations&lt;/h2>
&lt;p>In order to join any of the organisational groups in your NGI, you will need to
go through the following steps in order:&lt;/p>
&lt;h3 id="authentication">Authentication&lt;/h3>
&lt;p>In general the authentication in EGI infrastructure works either with X509
personal certificates or through federated identities using
&lt;a href="../../check-in">Check-in&lt;/a>. For some services (HTC and Storage) the access is
granted only by using a X509 personal certificate due to legacy reasons: the
process of moving the authentication and authorisation mechanism to federated
identities has started but it will takes time before having everything compliant
with federated identities.&lt;/p>
&lt;h4 id="obtaining-a-x509-personal-certificate">Obtaining a X509 personal certificate&lt;/h4>
&lt;p>If you do not already have a X509 personal certificate
&lt;a href="https://www.eugridpma.org/members/worldmap/">the EUGridPMA worlmap&lt;/a> provides a
map of all certification authorities according to the country (or NGI). Select
your country on the map to find out who is your local CA. Follow the procedure
of your local CA to request a certificate. When you have received your
certificate, install it into your web browser.&lt;/p>
&lt;p>If case of setting up a new Resource Centre please request Host certificates.&lt;/p>
&lt;p>EUGridPMA provides
&lt;a href="https://www.eugridpma.org/your-identity/">a web page allowing to test your certificate&lt;/a>.
Please use this resource and contact your CA if your certificate does not work.&lt;/p>
&lt;h4 id="create-a-federated-identity-registration-in-egi-check-in">Create a federated identity: registration in EGI Check-in&lt;/h4>
&lt;p>As soon as you try to access an EGI service with your federated identity, you
will be requested to register an account in EGI Check-in if not existing yet.
The &lt;a href="../../../users/aai/check-in/signup">Check-in sign up guide&lt;/a> explains how to
sign up for an EGI account. If you already own an account, you will be simply
asked to login through EGI Check-in.&lt;/p>
&lt;h3 id="joining-dteam-vo">Joining dteam VO&lt;/h3>
&lt;p>It is recommended to join the &lt;a href="https://wiki.egi.eu/wiki/Dteam_vo">dteam VO&lt;/a> at
the &lt;a href="https://voms2.hellasgrid.gr:8443/voms/dteam/">dteam Registration&lt;/a> page. You
should request group membership for &lt;code>/dteam&lt;/code> and &lt;code>/dteam/YOUR_NGI&lt;/code>. The dteam
group manager will then be notified and review your application. The membership
to dteam VO is possible only by using a X09 personal certificate and it is
useful to test the RCs and to debug related issues.&lt;/p>
&lt;h3 id="requesting-gocdb-access">Requesting GOCDB access&lt;/h3>
&lt;ul>
&lt;li>Read
&lt;a href="../../../internal/configuration-database">Input System User Documentation&lt;/a>
first.&lt;/li>
&lt;li>Go to the &lt;a href="https://goc.egi.eu/">Configuration Database&lt;/a> and follow
&lt;a href="../../../internal/configuration-database/users-roles/managing-roles/#roles">the instruction&lt;/a>.&lt;/li>
&lt;/ul>
&lt;p>All members &lt;strong>should notify their NGI operations manager&lt;/strong> about their role
requests, to be sure they are considered on time.&lt;/p>
&lt;h3 id="registering-into-ggus">Registering into GGUS&lt;/h3>
&lt;p>To register into GGUS please follow the
&lt;a href="https://ggus.eu/?mode=register">Central GGUS registration&lt;/a> link. GGUS can be
accessed either with your X509 personal certificate or with your federated
identity. Do not forget to apply for
&lt;a href="https://ggus.eu/?mode=register">the support role&lt;/a> as well. (The GGUS support
staff will approve you quickly as they get the notification automatically). To
get the supporter role with your federated identity, please enroll to the
&lt;a href="https://aai.egi.eu/registry/co_petitions/start/coef:69">GGUS Supporters group&lt;/a>
in Check-in.&lt;/p>
&lt;p>If your NGI also have a local helpdesk interfaced with GGUS, please ensure that
you are properly registered also there: your NGI managers will take care of
that.&lt;/p>
&lt;h3 id="subscribing-to-mailing-lists">Subscribing to mailing lists&lt;/h3>
&lt;p>NGIs and Sites have local mailing lists for ROD team members and Site
Administrators respectively. Please ensure that you subscribe to them. Depending
on your role ask your NGI operations manager or Site operations manager to have
you included on the necessary mailing lists if there is no automatic
subscription process.&lt;/p>
&lt;p>NGI operations manager should contact &lt;code>operations@egi.eu&lt;/code> and state that wish to
be subscribed to noc-managers mailing list &lt;code>noc-managers@mailman.egi.eu&lt;/code>.&lt;/p>
&lt;h2 id="documentation">Documentation&lt;/h2>
&lt;p>Procedures and policies are accessible on the
&lt;a href="https://confluence.egi.eu/display/EGIPP/EGI+Federation+Procedures">EGI Policies and Procedures space&lt;/a>.
Additional documentation relevant to EGI operations is available at
&lt;a href="../../../../en">EGI Documentation&lt;/a>.&lt;/p>
&lt;h2 id="tools">Tools&lt;/h2>
&lt;p>A list of services relevant to EGI operations can be found at
&lt;a href="../../../internal">the section about internal services&lt;/a>.&lt;/p></description></item><item><title>Providers: Resource Centre Integration Check List</title><link>/providers/operations-manuals/integration-checklist/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/integration-checklist/</guid><description>
&lt;p>This page provides an overview of what are the required steps to get a new
Resource Centre integrated into the EGI Federation.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Be aware of the
&lt;a href="https://go.egi.eu/policies-and-procedures">security policies&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Acceptance of the
&lt;a href="https://documents.egi.eu/public/ShowDocument?docid=31">RC OLA&lt;/a> (agreed with
the NGI the RC belongs to).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Registration on the
&lt;a href="../../../internal/configuration-database">Configuration Database&lt;/a>:&lt;/p>
&lt;ul>
&lt;li>an entry for the resource centre was created&lt;/li>
&lt;li>Required mailing lists are registered&lt;/li>
&lt;li>people operating the services are registered&lt;/li>
&lt;li>service endpoints are registered associated to the proper service types
(&lt;a href="../../cloud-compute/registration">e.g. for cloud providers&lt;/a>), and the
flags &lt;em>monitored&lt;/em> and &lt;em>production&lt;/em> are set to &lt;em>yes&lt;/em>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Support through the &lt;a href="../../../internal/helpdesk">EGI Helpdesk service&lt;/a>:&lt;/p>
&lt;ul>
&lt;li>The RC name is listed in the GGUS fields “Affected site” and “Notify Site”&lt;/li>
&lt;li>The site administrators can modify and reply to the tickets assigned to
their RC
&lt;ul>
&lt;li>The Supporter role can be requested either directly on GGUS by using the
own X509 personal certificate or by
&lt;a href="https://aai.egi.eu/registry/co_petitions/start/coef:69">enrolling to the ggus-supporters&lt;/a>
group in Check-in.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Security:&lt;/p>
&lt;ul>
&lt;li>HTC: &lt;a href="../../../internal/security-coordination/monitoring/pakiti">pakiti&lt;/a> is
installed and the outcome of the EGI CSIRT assessment is positive;&lt;/li>
&lt;li>Cloud: the &lt;a href="https://survey.egi.eu/327232">EGI security Survey&lt;/a> was sent to
the EGI CSIRT and the outcome was positive.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>AAI:&lt;/p>
&lt;ul>
&lt;li>HTC/Storage Compliant with X509 certificates and VOMS attributes&lt;/li>
&lt;li>&lt;a href="../../cloud-compute/openstack/#egi-aai">OpenStack clouds integration with Check-in&lt;/a>&lt;/li>
&lt;li>&lt;a href="../../check-in/sp/">General integration with Check-in for SPs&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Monitoring: the registered endpoints are automaticall detected by
&lt;a href="../../../internal/monitoring">ARGO&lt;/a> and monitored according to their type
registered in the Configuration Database.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="../../../internal/accounting">Accounting&lt;/a>: The accounting records are
properly sent to the accounting repository and displayed by the
&lt;a href="https://accounting.egi.eu/">Accounting Portal&lt;/a>.&lt;/p>
&lt;ul>
&lt;li>Accounting probes and &lt;a href="https://github.com/apel/ssm">APEL SSM&lt;/a> are properlly
installed and configured:
&lt;ul>
&lt;li>HTC: &lt;a href="https://github.com/apel/apel">APEL client&lt;/a>&lt;/li>
&lt;li>Cloud: &lt;a href="https://github.com/IFCA/caso">cASO&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Information discovery:&lt;/p>
&lt;ul>
&lt;li>HTC/Storage: the information about compute and storage endpoints are
&lt;a href="../../operations-manuals/man01_how_to_publish_site_information/">published by the site-bdii into the Top-BDIIs&lt;/a>.&lt;/li>
&lt;li>Cloud: site is
&lt;a href="../../cloud-compute/openstack/#catch-all-operations">added to the fedcloud-catchall-operations repository&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Middleware: latest version of technology products are installed using the
&lt;a href="https://confluence.egi.eu/display/EGIBG/Unified+Middleware+Distribution">UMD&lt;/a>
and
&lt;a href="https://confluence.egi.eu/display/EGIBG/Cloud+Middleware+Distribution">CMD&lt;/a>
releases.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Software distribution:&lt;/p>
&lt;ul>
&lt;li>HTC (Optional): &lt;a href="https://github.com/cvmfs-contrib/egi-cvmfs">CVMFS&lt;/a>&lt;/li>
&lt;li>Cloud: VM image synchronisation is configured with a HEPIX VM image list
compliant software (e.g.
&lt;a href="https://github.com/the-cloudkeeper-project/cloudkeeper">cloudkeeper&lt;/a>)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol></description></item><item><title>Providers: MAN01 How to publish site information</title><link>/providers/operations-manuals/man01_how_to_publish_site_information/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/man01_how_to_publish_site_information/</guid><description>
&lt;h2 id="document-control">Document control&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Value&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Title&lt;/td>
&lt;td>How to publish Site Information&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Policy Group&lt;/td>
&lt;td>Operations Management Board (OMB)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Document status&lt;/td>
&lt;td>Approved&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Procedure Statement&lt;/td>
&lt;td>Publishing site information in the Information Discovery System&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Owner&lt;/td>
&lt;td>SDIS team&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;a href="https://documents.egi.eu/public/ShowDocument?docid=1324">EGI profile for the use of the GLUE 2.0 Information Schema&lt;/a>
specifies how the GLUE 2.0 information schema should be used in EGI. It gives
detailed guidance on what should be published, how the information should be
interpreted, what kinds of uses are likely, and how the information may be
validated to ensure accuracy.&lt;/p>
&lt;h2 id="configuring-a-site-bdii">Configuring a site BDII&lt;/h2>
&lt;p>The site BDII needs to be configured to read from every node in the site which
publishes information (meaning that it runs a so-called resource BDII). In YAIM
this is defined with the &lt;code>BDII_REGIONS&lt;/code> variable, which contains a list of node
names which in turn refer to variables called &lt;code>BDII_&amp;lt;NODE&amp;gt;_URL&lt;/code> which specify
the LDAP URL of each resource BDII.&lt;/p>
&lt;p>Some services may have DNS aliases for multiple hosts, but the &lt;code>BDII_REGIONS&lt;/code>
must contain the real hostnames for each underlying node - the information in
the resource BDII is different for each node, so reading it via an alias would
produce inconsistent results. However, it will usually be desirable for the
published endpoint URLs to contain the alias rather than the real hostname; that
can often be defined with a YAIM variable for the service. For the site BDII
itself this variable is &lt;code>SITE_BDII_HOST&lt;/code>. (If multiple site or top BDIIs are
configured identically their content will also be identical, so reading via an
alias does not produce any inconsistencies.)&lt;/p>
&lt;p>Most services now publish themselves, so sites should check that all relevant
services are included. In particular, VOMS servers have only published
themselves comparatively recently so may be missing from the configuration. If
the glite-CLUSTER node type is used this must also be included. Publication has
been enabled for Argus in EMI 2, so this may also need to be added. Common
services which do not currently publish are APEL and Squid. See the table below
for more detailed information.&lt;/p>
&lt;p>It is important to realise that the site BDII itself has a resource BDII, and
this must be explicitly included in the configuration, e.g. with something like&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">BDII_REGIONS&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;CE SE BDII&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">BDII_BDII_URL&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;ldap://&lt;/span>&lt;span style="color:#000">$SITE_BDII_HOST&lt;/span>&lt;span style="color:#4e9a06">:2170/mds-vo-name=resource,o=grid&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>In the past it was common for the site BDII to be colocated with the CE so it
did not need to be listed explicitly, but if installed on a dedicated node
(which is now the recommended deployment) it must be included.&lt;/p>
&lt;p>To check that all expected services are published the following command can be
used:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ldapsearch -x -h &lt;span style="color:#000">$SITE_BDII_HOST&lt;/span> -p &lt;span style="color:#0000cf;font-weight:bold">2170&lt;/span> -b mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000">$SITE_NAME&lt;/span>,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> &lt;span style="color:#000">objectclass&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GlueService &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> perl -p00e &lt;span style="color:#4e9a06">&amp;#39;s/\r?\n //g&amp;#39;&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> grep Endpoint:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>(replacing &lt;code>SITE_BDII_HOST&lt;/code>; and &lt;code>SITE_NAME&lt;/code> with the values for your site),
which should list all the service URLs.&lt;/p>
&lt;p>In addition, most services should now be published in GLUE 2 format. There is no
explicit configuration needed for GLUE 2, but one thing to be aware of is that
the site name (and the other parts like o=grid) in the GIIS URL field in the
GOCDB must have the correct case as GLUE 2 is case-sensitive.&lt;/p>
&lt;p>To verify the GLUE 2 publication use the command:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ldapsearch -x -h &lt;span style="color:#000">$SITE_BDII_HOST&lt;/span> -p &lt;span style="color:#0000cf;font-weight:bold">2170&lt;/span> -b &lt;span style="color:#000">GLUE2DomainID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000">$SITE_NAME&lt;/span>,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>glue &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> &lt;span style="color:#000">objectclass&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GLUE2Endpoint &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> perl -p00e &lt;span style="color:#4e9a06">&amp;#39;s/\r?\n //g&amp;#39;&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> grep URL:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Some services, notably storage elements, may be missing or incomplete in GLUE 2
if they are older than the EMI 2 release. The following table shows the
publishing status for gLite and WLCG node types (ARC and Unicore have a
different structure).&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Node type&lt;/th>
&lt;th>GLUE 1&lt;/th>
&lt;th>GLUE 2&lt;/th>
&lt;th>Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>LCG-CE&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>No&lt;/td>
&lt;td>Obsolete&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>CREAM&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Full publication only in EMI 2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>CLUSTER&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Full publication only in EMI 2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>WMS&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>LB&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>DPM&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>EMI 2&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>dCache&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>EMI 2&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>StoRM&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>EMI 2&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>LFC&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>EMI 2&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>FTS&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>EMI 2&lt;/td>
&lt;td>Channels not yet published in GLUE 2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Hydra&lt;/td>
&lt;td>EMI 2&lt;/td>
&lt;td>EMI 2&lt;/td>
&lt;td>Not yet released in EMI 2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>AMGA&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>EMI 2&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>VOMS&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MyProxy&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Argus&lt;/td>
&lt;td>No&lt;/td>
&lt;td>EMI 2&lt;/td>
&lt;td>Internal service, publication for deployment monitoring&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Site BDII&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Top BDII&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>R-GMA&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>No&lt;/td>
&lt;td>Obsolete&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>VOBOX&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Apel&lt;/td>
&lt;td>No&lt;/td>
&lt;td>No&lt;/td>
&lt;td>Internal service, publishing not yet requested&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Squid&lt;/td>
&lt;td>No&lt;/td>
&lt;td>No&lt;/td>
&lt;td>Configuration exists but not enabled&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Nagios&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="service-related-documentation">Service-related documentation&lt;/h3>
&lt;h4 id="federated-cloud-bdii-configuration">Federated Cloud BDII configuration&lt;/h4>
&lt;p>For information about configuration of a Federated Cloud BDII, please look at
the &lt;a href="../../cloud-compute/openstack/#egi-information-system">EGI Information System&lt;/a>.&lt;/p>
&lt;h2 id="gluesite-object">GlueSite Object&lt;/h2>
&lt;p>These are the existing well established attributes in the &lt;code>GlueSite&lt;/code> object. All
of these MUST remain.&lt;/p>
&lt;!-- markdownlint-disable no-bare-urls -->
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Attribute&lt;/th>
&lt;th>Example&lt;/th>
&lt;th>Schema&lt;/th>
&lt;th>Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>GlueSiteName&lt;/td>
&lt;td>RAL-LCG2&lt;/td>
&lt;td>Free text, no whitespace&lt;/td>
&lt;td>Same as GOCDB name if in GOCDB, your choice.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GlueSiteUniqueID&lt;/td>
&lt;td>RAL-LCG2&lt;/td>
&lt;td>Identical to your !GlueSiteName&lt;/td>
&lt;td>Same as GlueSiteName&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GlueSiteWeb&lt;/td>
&lt;td>&lt;code>https://cern.ch/it&lt;/code>&lt;/td>
&lt;td>Free Text&lt;/td>
&lt;td>Valid URL about the site.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GlueSiteLatitude&lt;/td>
&lt;td>52.42&lt;/td>
&lt;td>NN.NN&lt;/td>
&lt;td>Site Latitute.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GlueSiteLongitude&lt;/td>
&lt;td>16.91&lt;/td>
&lt;td>NN.NN&lt;/td>
&lt;td>Longitude of Site.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GlueSiteDescription&lt;/td>
&lt;td>Rutherford Lab&lt;/td>
&lt;td>Free Text&lt;/td>
&lt;td>A long name for the site.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GlueSiteLocation&lt;/td>
&lt;td>Dublin, Ireland&lt;/td>
&lt;td>Town, City, Country&lt;/td>
&lt;td>An decreasing resolution ending with Country, agree a country name within a country. i.e UK != United Kingdom. Scotland and the Balkans should write a dynamic provider.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>!GlueSiteUserSupportContact&lt;/td>
&lt;td>&lt;code>mailto:helpdesk@example.com&lt;/code>&lt;/td>
&lt;td>Valid URL&lt;/td>
&lt;td>URL for getting support. A ticket&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>system if available.&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>!GlueSiteSysAdminContact&lt;/td>
&lt;td>&lt;code>xmpp://admins@jabber.org&lt;/code>&lt;/td>
&lt;td>Valid URL&lt;/td>
&lt;td>How to contact the admins.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>!GlueSiteSecurityContact&lt;/td>
&lt;td>&lt;code>mailto:security@example.com&lt;/code>&lt;/td>
&lt;td>Valid URL&lt;/td>
&lt;td>How to contact for security related matters.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;!-- markdownlint-enable no-bare-urls -->
&lt;p>The &lt;code>GlueSite&lt;/code> object in the 1.3 Glue Schema contains an attribute
&lt;code>GlueSiteOtherInfo&lt;/code>. To quote.&lt;/p>
&lt;blockquote>
&lt;p>The attribute is to be used to publish data that does not fit any other
attribute of the site entity. A &lt;code>name=value&lt;/code> pair or an XML structure are
example[s] of usage.&lt;/p>
&lt;/blockquote>
&lt;p>All this extra configuration will be with in the static information for the glue
site within the Grid Information Provider system.&lt;/p>
&lt;h3 id="guidelines-for-gluesite-object">Guidelines for GlueSite Object&lt;/h3>
&lt;p>A format for publishing useful information about sites within the
&lt;code>!GlueSiteOtherInfo&lt;/code> is needed, as shown in the following table.&lt;/p>
&lt;!-- markdownlint-disable no-bare-urls -->
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Key&lt;/th>
&lt;th>Example&lt;/th>
&lt;th>Type&lt;/th>
&lt;th>Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>GRID&lt;/td>
&lt;td>EGI&lt;/td>
&lt;td>[#validgrid List of valid grid names]&lt;/td>
&lt;td>Multiple ones can be defined.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>WLCG_TIER&lt;/td>
&lt;td>1&lt;/td>
&lt;td>Tier level of site in WLCG context.&lt;/td>
&lt;td>Either 0, 1 , 2 , 3 , 4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>WLCG_PARENT&lt;/td>
&lt;td>UK-T1-RAL&lt;/td>
&lt;td>Name of the higher (administrative) tier site in WLCG&lt;/td>
&lt;td>The WLCG_NAME of the site at a higher tier with WLCG&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>WLCG_NAME&lt;/td>
&lt;td>IT-ATLAS-federation&lt;/td>
&lt;td>[#lcgnames Valid WLCG Names]&lt;/td>
&lt;td>An official WLCG name.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>WLCG_NAMEICON&lt;/td>
&lt;td>&lt;code>https://example.com/tier2.png&lt;/code>&lt;/td>
&lt;td>Valid URL&lt;/td>
&lt;td>URL to WLCGNAME icon, ideally 80x80 pixels.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>EGEE_ROC&lt;/td>
&lt;td>Russia&lt;/td>
&lt;td>Valid federated Operations Centre name&lt;/td>
&lt;td>Only applicable if your site is still part of a federated Operations Centre (&amp;ldquo;ROC&amp;rdquo; according to the old EGEE terminology). Name MUST match the Operations Centre name declared in &lt;a href="https://goc.egi.eu/">GOCDB&lt;/a>. Note. If the site is now part of a NGI, then EGI_NGI MUST be used (see below).&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>EGI_NGI&lt;/td>
&lt;td>NGI_CZ&lt;/td>
&lt;td>Valid NGI&lt;/td>
&lt;td>Must agree with the GOC DB&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>EGEE_SERVICE&lt;/td>
&lt;td>prod&lt;/td>
&lt;td>prod, pps or cert&lt;/td>
&lt;td>Which EGEE grid your site is part of, multiple attributes is okay. Obsolete in EGI.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>OLDNAME&lt;/td>
&lt;td>Bristol&lt;/td>
&lt;td>text&lt;/td>
&lt;td>If your !GlueSiteName changes at some point please record your old name here.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ICON&lt;/td>
&lt;td>&lt;code>https://example.com/icon.png&lt;/code>&lt;/td>
&lt;td>Valid URL&lt;/td>
&lt;td>Icon Image for your site, ideally 80x80 pixels&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>BLOG&lt;/td>
&lt;td>&lt;code>https://scotgrid.blogspot.com/feeds/posts/default&lt;/code>&lt;/td>
&lt;td>Valid RSS or Atom Feed&lt;/td>
&lt;td>Your site blog if you have one&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>CONFIG&lt;/td>
&lt;td>yaim&lt;/td>
&lt;td>yaim, puppet, quattor, &amp;hellip;&lt;/td>
&lt;td>The configuration tool(s) used at the site&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;!-- markdownlint-enable no-bare-urls -->
&lt;p>Note. Keywords starting with one of the grid names are to some extent reserved
for that grid.&lt;/p>
&lt;h3 id="example">Example&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>GlueSiteName: RAL-LCG2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">BLOG&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>https://example.com/blog/feed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">EGI_NGI&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>NGI_UK
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">GRID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>EGI
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">GRID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRIDPP
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">GRID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>WLCG
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">ICON&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>https://example.com/images/tierOneSmall.png
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">WLCG_PARENT&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>CERN-PROD
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">WLCG_TIER&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="distributed-tier1s-and-tier2s">Distributed Tier1s and Tier2s&lt;/h3>
&lt;p>Within an WLCG context for instance there are instances of distributed Tier2s
and Tier1s. If separate component sites want to exist as a single WLCG tier then
they might contain common values for their WLCGNAME.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>GlueSiteName: CSCS-LCG2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">CONFIG&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>yaim
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">EGI_NGI&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>NGI_CH
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">GRID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>EGI
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">GRID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>WLCG
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">WLCG_NAME&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>CH-CHIPP-CSCS
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">WLCG_PARENT&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>FZK-LCG2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">WLCG_TIER&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Note that &lt;code>WLCG_PARENT&lt;/code> is an accounting unit defined in the MOU document, as
shown in &lt;a href="https://wlcg-cric-2.cern.ch">WLCG CRIC&lt;/a>.&lt;/p>
&lt;h3 id="established-grid-name">Established Grid Name&lt;/h3>
&lt;!-- markdownlint-disable no-bare-urls -->
&lt;!-- markdown-link-check-disable -->
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Short Name&lt;/th>
&lt;th>Long Name&lt;/th>
&lt;th>URL&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>EGI&lt;/td>
&lt;td>European Grid Initiative&lt;/td>
&lt;td>&lt;a href="https://www.egi.eu">https://www.egi.eu&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>EELA&lt;/td>
&lt;td>Europe and Latin America&lt;/td>
&lt;td>&lt;a href="https://www.eu-eela.eu/">https://www.eu-eela.eu/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>WLCG&lt;/td>
&lt;td>World LHC Computing Grid&lt;/td>
&lt;td>&lt;a href="https://cern.ch/lcg">https://cern.ch/lcg&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GRIDPP&lt;/td>
&lt;td>UK Particle Physics Grid&lt;/td>
&lt;td>&lt;a href="https://www.gridpp.ac.uk">https://www.gridpp.ac.uk&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>UKNGS&lt;/td>
&lt;td>National UK Grid Service&lt;/td>
&lt;td>&lt;a href="https://www.ngs.ac.uk">https://www.ngs.ac.uk&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>OSG&lt;/td>
&lt;td>Open Science Grid (US)&lt;/td>
&lt;td>&lt;a href="https://www.opensciencegrid.org/">https://www.opensciencegrid.org/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NDGF&lt;/td>
&lt;td>Nordic DataGrid Facility&lt;/td>
&lt;td>&lt;a href="https://www.ndgf.org/">https://www.ndgf.org/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>LondonGrid&lt;/td>
&lt;td>London Grid&lt;/td>
&lt;td>&lt;a href="https://www.gridpp.ac.uk/tier2/london/">https://www.gridpp.ac.uk/tier2/london/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NORTHGRID&lt;/td>
&lt;td>Northern (UK) Grid&lt;/td>
&lt;td>&lt;a href="https://www.gridpp.ac.uk/northgrid/">https://www.gridpp.ac.uk/northgrid/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SCOTGRID&lt;/td>
&lt;td>Scottish Grid&lt;/td>
&lt;td>&lt;a href="https://www.scotgrid.ac.uk/">https://www.scotgrid.ac.uk/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SOUTHGRID&lt;/td>
&lt;td>Southern (UK) Grid&lt;/td>
&lt;td>&lt;a href="https://www.gridpp.ac.uk/southgrid/">https://www.gridpp.ac.uk/southgrid/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Academic Grid Malaysia&lt;/td>
&lt;td>Malaysian Grid&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>UPM Campus Grid&lt;/td>
&lt;td>Universiti Putra Malaysia&lt;/td>
&lt;td>&lt;a href="https://www.upm.edu.my/">https://www.upm.edu.my/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>AEGIS&lt;/td>
&lt;td>Academic and Educational Grid Initiative of Serbia&lt;/td>
&lt;td>&lt;a href="https://www.aegis.rs/">https://www.aegis.rs/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>BIGGRID&lt;/td>
&lt;td>Dutch e-science Grid&lt;/td>
&lt;td>&lt;a href="https://www.biggrid.nl/">https://www.biggrid.nl/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Consorzio Cometa&lt;/td>
&lt;td>Consorzio Multi-Ente per la promozione e l&amp;rsquo;adozione di Tecnologie di calcolo Avanzato (Italy)&lt;/td>
&lt;td>&lt;a href="https://www.consorzio-cometa.it/en">https://www.consorzio-cometa.it/en&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>D-Grid&lt;/td>
&lt;td>German Grid&lt;/td>
&lt;td>&lt;a href="https://www.d-grid-gmbh.de/index.php?id=1&amp;amp;amp;L=1">https://www.d-grid-gmbh.de/index.php?id=1&amp;amp;amp;L=1&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>EUMED&lt;/td>
&lt;td>EU/Mediterranean Grid&lt;/td>
&lt;td>&lt;a href="https://www.eumedgrid.eu/">https://www.eumedgrid.eu/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GILDA&lt;/td>
&lt;td>Grid INFN Laboratory for Dissemination Activities (Italy)&lt;/td>
&lt;td>&lt;a href="https://gilda.ct.infn.it/">https://gilda.ct.infn.it/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GISELA&lt;/td>
&lt;td>Grid Initiative for e-Science virtual communities in Europe and Latin America&lt;/td>
&lt;td>&lt;a href="https://www.gisela-grid.eu/">https://www.gisela-grid.eu/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GRISU&lt;/td>
&lt;td>Griglia del Sud (Southern Italy Grid)&lt;/td>
&lt;td>&lt;a href="https://www.grisu-org.it/">https://www.grisu-org.it/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NEUGRID&lt;/td>
&lt;td>Neuroscience Grid&lt;/td>
&lt;td>&lt;a href="https://neugrid4you.eu/background">https://neugrid4you.eu/background&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>RDIG&lt;/td>
&lt;td>Russian Data Intensive Grid&lt;/td>
&lt;td>&lt;a href="https://grid-eng.jinr.ru/?page_id=43">https://grid-eng.jinr.ru/?page_id=43&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SEE-GRID&lt;/td>
&lt;td>South Eastern European GRid-enabled eInfrastructure Development&lt;/td>
&lt;td>&lt;a href="https://www.see-grid.org/">https://www.see-grid.org/&lt;/a>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;!-- markdown-link-check-enable -->
&lt;!-- markdownlint-enable no-bare-urls -->
&lt;blockquote>
&lt;p>Important: The EGEE Grid name was decomissioned on
[[Agenda-14-02-2011|14-02-2011]]. All sites need to replace this grid name
with EGI.&lt;/p>
&lt;/blockquote>
&lt;p>Being part of a grid is just a reference that your site is in some way
associated with a particular Resource Infrastructure Provider either technically
or as part of a collaboration. The list of Grids can be extended. Please contact
&lt;a href="mailto:operations@egi.eu">operations@egi.eu&lt;/a> to request changes.&lt;/p>
&lt;h3 id="valid-wlcg-names">Valid WLCG Names&lt;/h3>
&lt;p>The WLCG names are the site names that appear within the LCG MOU concerning
commitments to LHC computing.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>WLCG Name&lt;/th>
&lt;th>Current GlueSiteName&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>CA-TRIUMF&lt;/td>
&lt;td>TRIUMF-LCG2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>CERN&lt;/td>
&lt;td>CERN-PROD&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>DE-KIT&lt;/td>
&lt;td>FZK-LCG2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ES-PIC&lt;/td>
&lt;td>pic&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>FR-CCIN2P3&lt;/td>
&lt;td>IN2P3-CC&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>IT-INFN-CNAF&lt;/td>
&lt;td>INFN-T1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NDGF&lt;/td>
&lt;td>NGDF-T1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NL-T1&lt;/td>
&lt;td>SARA-MATRIX&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>TW-ASGC&lt;/td>
&lt;td>Taiwan-LCG2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>UK-T1-RAL&lt;/td>
&lt;td>RAL-LCG2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>US-FNAL-CMS&lt;/td>
&lt;td>USCMS-FNAL-W1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>US-T1-BNL&lt;/td>
&lt;td>BNL-LCG2&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>For the tier two names please consult &lt;a href="https://wlcg-cric-2.cern.ch/">WLCG CRIC&lt;/a>.
The column marked &lt;code>Accounting Name&lt;/code> are the WLCG Names which in the case of
Tier2s are the GOCDB names. Use your site GOCDB name as your WLCG_NAME.&lt;/p>
&lt;p>Also some tier2s live under more than 1 tier1 perhaps for different for
different VOs. If your tier2 has more that one WLCG_PARENT then just add two
distinct records to show this. Also some tier2s do not have a WLCGNAME at all.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>GlueSiteUniqueId: EENet
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteName: EENet
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">GRID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>WLCG
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">GRID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>EGI
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">EGI_NGI&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>NGI_NL
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">WLCG_TIER&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">WLCG_PARENT&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>UK-T1-RAL
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">WLCG_PARENT&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>NL-T1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="valid-egi-ngi-names">Valid EGI NGI Names&lt;/h3>
&lt;p>The valid names are those published on
&lt;a href="https://goc.egi.eu/portal/index.php?Page_Type=NGIs">GOCDB&lt;/a>.&lt;/p>
&lt;h2 id="yaim-instructions">YAIM Instructions&lt;/h2>
&lt;p>YAIM will have to be updated for those sites using yaim. This will be done and
submitted to sites in the normal way.&lt;/p>
&lt;!-- markdownlint-disable no-bare-urls no-inline-html -->
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>YAIM Variable and Value&lt;/th>
&lt;th>Resulting Glue Attribute and Value&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>SITE_NAME=RAL_LCG2&lt;/td>
&lt;td>GlueSiteName: RAL-LCG2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_DESC=&amp;ldquo;Rutherford Lab&amp;rdquo;&lt;/td>
&lt;td>GlueSiteDescription: Rutherford Lab&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_EMAIL= &lt;a href="mailto:steve@example.com">steve@example.com&lt;/a>&lt;/td>
&lt;td>GlueSiteSysAdminContact: mailto:steve@example.com&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_SUPPORT_EMAIL= &lt;a href="mailto:steve@example.com">steve@example.com&lt;/a>&lt;/td>
&lt;td>GlueSiteUserSupportContact: mailto:steve@example.com&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_SECURITY_EMAIL= &lt;a href="mailto:steve@example.com">steve@example.com&lt;/a>&lt;/td>
&lt;td>GlueSiteSecurityContact: mailto:steve@example.com&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_LOC=&amp;ldquo;Soho, London, United Kingdom&amp;rdquo;&lt;/td>
&lt;td>GlueSiteLocation: Soho, London, United Kingdom&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_LONG=52.45&lt;/td>
&lt;td>GlueSiteLongitude: 52.45&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_LAT=-12.34&lt;/td>
&lt;td>GlueSiteLatitude: -12.34&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_WEB=&amp;ldquo;&lt;a href="https://example.com/%22">https://example.com/&amp;quot;&lt;/a>&lt;/td>
&lt;td>GlueSiteWeb: &lt;a href="https://example.com/">https://example.com/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_OTHER_GRID=&amp;ldquo;EGI|WLCG&amp;rdquo;&lt;/td>
&lt;td>GlueSiteOtherInfo: GRID=EGI&lt;br />GlueSiteOtherInfo: GRID=WLCG&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_OTHER_EGEE_ROC=&amp;ldquo;UK/I&amp;rdquo;&lt;/td>
&lt;td>GlueSiteOtherInfo: EGEE_ROC=UK/I&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_OTHER_EGI_NGI=&amp;ldquo;NGI_CZ&amp;rdquo;&lt;/td>
&lt;td>GlueSiteOtherInfo: EGI_NGI=NGI_CZ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_OTHER_EGEE_SERVICE=&amp;ldquo;prod&amp;rdquo;&lt;/td>
&lt;td>GlueSiteOtherInfo: EGEE_SERVICE=prod&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_OTHER_WLCG_TIER=2&lt;/td>
&lt;td>GlueSiteOtherInfo: WLCG_TIER=2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SITE_OTHER*&lt;KEY>=&amp;quot;&lt;VALUE1>|&lt;VALUE2>&amp;rdquo;&lt;/td>
&lt;td>GlueSiteOtherInfo: KEY=&lt;VALUE1>GlueSiteOtherInfo: KEY=&lt;VALUE2>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;!-- markdownlint-enable no-bare-urls no-inline-html -->
&lt;p>If multiple values for &lt;code>GlueSiteOtherInfo&lt;/code> are needed, then just delimit your
values with a &lt;code>|&lt;/code>. The character &lt;code>|&lt;/code> must be avoided in values.&lt;/p>
&lt;h2 id="check-your-own-gluesite-object">Check your own GlueSite Object&lt;/h2>
&lt;p>The information published can be checked through an ldap search:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ldapsearch -x -H ldap://&lt;span style="color:#000">$SITE_BDII_HOST&lt;/span>:2170 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> -b &lt;span style="color:#4e9a06">&amp;#39;Mds-Vo-Name=$SITE_NAME,o=Grid&amp;#39;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;(ObjectClass=GlueSite)&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>In addition, &lt;a href="https://operations-portal.egi.eu/vapor/">VAPOR&lt;/a> is a tool which
provides a GUI for different views of published information, including a LDAP
view.&lt;/p>
&lt;h2 id="site-information-in-glue-2">Site information in GLUE 2&lt;/h2>
&lt;p>The GLUE 2 equivalent of the GlueSite object is the &lt;code>GLUE2AdminDomain&lt;/code>. The same
information should be present although in a slightly different format, and there
are separate &lt;code>GLUE2Contact&lt;/code> and &lt;code>GLUE2Location&lt;/code> objects.&lt;/p></description></item><item><title>Providers: MAN02 Service intervention management</title><link>/providers/operations-manuals/man02_service_intervention_management/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/man02_service_intervention_management/</guid><description>
&lt;h2 id="document-control">Document control&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Value&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Title&lt;/td>
&lt;td>Service Intervention Management&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Policy Group&lt;/td>
&lt;td>Operations Management Board (OMB)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Document status&lt;/td>
&lt;td>Approved&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Procedure Statement&lt;/td>
&lt;td>Managing Service interventions&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Owner&lt;/td>
&lt;td>SDIS team&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="service-intervention">Service Intervention&lt;/h2>
&lt;p>A &lt;strong>service intervention&lt;/strong> is defined as an action which will involve or lead to
the possibility of a loss, or noticeable degradation of a service. Depending on
the planning of the outage, we have two types of intervention:&lt;/p>
&lt;ol>
&lt;li>&lt;strong>Scheduled&lt;/strong> interventions: planned and agreed in advance&lt;/li>
&lt;li>&lt;strong>Unscheduled&lt;/strong> interventions: unplanned, usually triggered by an unexpected
failure&lt;/li>
&lt;/ol>
&lt;h2 id="how-to-manage-an-intervention">How to manage an intervention&lt;/h2>
&lt;p>Interventions are recorded through the
&lt;a href="../../../internal/configuration-database">Configuration Database&lt;/a>. For more
information, have a look at the
&lt;a href="../../../internal/configuration-database/downtimes">description&lt;/a>.&lt;/p>
&lt;h3 id="scheduled-interventions">Scheduled interventions&lt;/h3>
&lt;ul>
&lt;li>Scheduled interventions &lt;strong>MUST&lt;/strong> be declared at least 24 h in advance,
specifying reason and duration.&lt;/li>
&lt;li>Existing scheduled interventions &lt;strong>CAN&lt;/strong> be extended, provided that it’s done
24 hours in advance.&lt;/li>
&lt;/ul>
&lt;h3 id="unscheduled-interventions">Unscheduled interventions&lt;/h3>
&lt;ul>
&lt;li>Any intervention declared less than 24 h in advance will be considered
&lt;strong>unscheduled&lt;/strong>.&lt;/li>
&lt;li>Sites &lt;strong>MUST&lt;/strong> declare unscheduled interventions as soon as they are detected
to inform the users. Unscheduled interventions CAN be declared up to 48 hours
in the past (retroactive information to the user community).&lt;/li>
&lt;/ul>
&lt;h3 id="required-information">Required information&lt;/h3>
&lt;p>The required information to fill in when declaring an intervention is:&lt;/p>
&lt;ul>
&lt;li>Severity (Outage or Warning)&lt;/li>
&lt;li>Description&lt;/li>
&lt;li>Timezone&lt;/li>
&lt;li>Starting and ending dates&lt;/li>
&lt;li>Affected site / Affected services and endpoints&lt;/li>
&lt;/ul>
&lt;h2 id="recommendations">Recommendations&lt;/h2>
&lt;ul>
&lt;li>For interventions that impact end users, the downtime &lt;strong>SHOULD&lt;/strong> be declared 5
working days in advance, specifying reason and duration.&lt;/li>
&lt;li>A post−mortem &lt;strong>SHOULD&lt;/strong> be included in the downtime report.&lt;/li>
&lt;/ul>
&lt;h2 id="notifications">Notifications&lt;/h2>
&lt;p>Intervention notifications (through broadcasts, RSS feeds, etc) as specified in
the following procedures are automatically sent when declaring a downtime in
&lt;a href="../../../internal/configuration-database">Configuration Database&lt;/a>: at
declaration time, 24 h in advance and 1 h before the intervention.&lt;/p>
&lt;h2 id="suspension-policy">Suspension policy&lt;/h2>
&lt;p>Sites on downtime for more than 1 month will be suspended/uncertified. &lt;code>AT_RISK&lt;/code>
downtime declarations are only for providing warnings to users, and are ignored
for calculating site availability (actual status will be used).&lt;/p></description></item><item><title>Providers: MAN04 Tool Intervention Management</title><link>/providers/operations-manuals/man04_tool_intervention_management/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/man04_tool_intervention_management/</guid><description>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Value&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Title&lt;/td>
&lt;td>Tool Intervention Management&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Policy Group&lt;/td>
&lt;td>Operations Management Board (OMB)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Document status&lt;/td>
&lt;td>Approved&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Procedure Statement&lt;/td>
&lt;td>How to manage central operational tool unscheduled downtimes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Owner&lt;/td>
&lt;td>SDIS team&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>The purpose of this document is to describe the intervention in case of
unscheduled failure of central operational tool.&lt;/p>
&lt;h2 id="scope">Scope&lt;/h2>
&lt;p>This manual only applies to unscheduled downtimes of central operational tools.
The list of central operational tool is available
&lt;a href="https://www.egi.eu/services/federation/">here&lt;/a>.&lt;/p>
&lt;p>Note: Scheduled downtimes are management according to existing procedures
(&lt;a href="../man02_service_intervention_management">MAN02&lt;/a>).&lt;/p>
&lt;h2 id="announcements">Announcements&lt;/h2>
&lt;p>All announcements should be sent with the Operations Portal Broadcast tool.&lt;/p>
&lt;p>When using Operations Portal Broadcast tool the following groups should be
included:&lt;/p>
&lt;ul>
&lt;li>LCG Rollout Mailing List&lt;/li>
&lt;li>Operators Mailing lists&lt;/li>
&lt;li>OSG Mailing list&lt;/li>
&lt;li>Tool Admins Mailing List&lt;/li>
&lt;li>WLCG Tier 1 contacts&lt;/li>
&lt;li>NGI managers&lt;/li>
&lt;li>VO managers&lt;/li>
&lt;li>VO users&lt;/li>
&lt;li>Site administrators&lt;/li>
&lt;li>Operation tools&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Notice:&lt;/strong> Individual notification templates together with targets are
predefined in Operations Portal Broadcast tool. Administrators are advised to
use such predefined templates.&lt;/p>
&lt;h2 id="procedure">Procedure&lt;/h2>
&lt;p>In the following sections several relevant scenarios are covered.&lt;/p>
&lt;h3 id="case-1-short-undetected-downtime">Case 1: short &amp;ldquo;undetected&amp;rdquo; downtime&lt;/h3>
&lt;p>&lt;strong>Description:&lt;/strong> Service fails and recovers before administrator manages to
react (e.g. short power or network outage).&lt;/p>
&lt;p>&lt;strong>Action:&lt;/strong> Administrator announces the failure by using the following template:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span>Subject:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [SERVICE_NAME] unscheduled downtime
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Message:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Dear all,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [SERVICE_NAME] experienced unscheduled downtime between [START] and [END].
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [DETAILED_FAILURE_DESCRIPTION]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Apologies for any inconvenience caused.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Best Regards
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [SERVICE_TEAM]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="case-2-long-detected-outage">Case 2: long &amp;ldquo;detected&amp;rdquo; outage&lt;/h3>
&lt;p>Service fails and administrator detects the problem. The problem takes at least
&lt;strong>1 hour&lt;/strong> time to recover. In the sections below individual situations are
described.&lt;/p>
&lt;h4 id="1-outage">1. Outage&lt;/h4>
&lt;p>&lt;strong>Description:&lt;/strong> Service failure is detected.&lt;/p>
&lt;p>&lt;strong>Action:&lt;/strong> Administrator announces the failure by using the following template:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span>Subject:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [SERVICE_NAME] outage
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Message:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Dear all,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [SERVICE_NAME] is experiencing unscheduled downtime.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [ADDITIONAL_INFO]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Apologies for any inconvenience caused.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Best Regards
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [SERVICE_TEAM]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="2-extended-downtime">2. Extended downtime&lt;/h4>
&lt;p>&lt;strong>Description:&lt;/strong> Service recovery is delayed. Update should be sent at least
every &lt;strong>24h&lt;/strong>.&lt;/p>
&lt;p>&lt;strong>Action:&lt;/strong> The administrator announces that recovery is taking longer by using
the following template:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span>Subject:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [SERVICE_NAME] extended outage
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Message:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Dear all,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Outage of [SERVICE_NAME] is extended.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [ADDITIONAL_INFO]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Apologies for any inconvenience caused.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Best Regards
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [SERVICE_TEAM]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Note:&lt;/strong> In this template &lt;code>[ADDITIONAL_INFO]&lt;/code> should indicate the estimated
time of recovery.&lt;/p>
&lt;h4 id="3-recovery">3. Recovery&lt;/h4>
&lt;p>&lt;strong>Description:&lt;/strong> Service is recovered.&lt;/p>
&lt;p>&lt;strong>Actions:&lt;/strong> At the time of recovery the administrator announces the recovery by
using the following template:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span>Subject:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [SERVICE_NAME] recovery
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Message:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Dear all,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [SERVICE_NAME] is back online.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [ADDITIONAL_INFO]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Best Regards
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [SERVICE_TEAM]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="4-post-mortem-analysis">4. Post mortem analysis&lt;/h4>
&lt;p>&lt;strong>Description:&lt;/strong> Service failure required further time to investigate the source
of the problem. This action is required only if the post mortem analysis is
needed.&lt;/p>
&lt;p>&lt;strong>Actions:&lt;/strong> The administrator announces the post mortem analysis of failure by
using the following notification template:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span>Subject:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [SERVICE_NAME] outage analysis
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Message:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Dear all,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [SERVICE_NAME] experienced unscheduled downtime between [START] and [END].
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [DETAILED_FAILURE_DESCRIPTION]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Best Regards
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [SERVICE_TEAM]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Providers: MAN05 top and site BDII High Availability</title><link>/providers/operations-manuals/man05_top_and_site_bdii_high_availability/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/man05_top_and_site_bdii_high_availability/</guid><description>
&lt;h2 id="document-control">Document control&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Value&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Title&lt;/td>
&lt;td>MAN05 top and site BDII High Availability&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Policy Group&lt;/td>
&lt;td>Operations Management Board (OMB)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Document status&lt;/td>
&lt;td>Approved&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Procedure Statement&lt;/td>
&lt;td>Deploying top or site BDII service in High Availability&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Owner&lt;/td>
&lt;td>SDIS team&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="top-bdii-and-site-bdii-with-high-availability">Top BDII and Site BDII with High Availability&lt;/h2>
&lt;p>This document objective is to provide guidelines to improve the availability of
the information system, addressing three main areas:&lt;/p>
&lt;ol>
&lt;li>Requirements to deploy a top or site BDII service&lt;/li>
&lt;li>High Availability from a client perspective&lt;/li>
&lt;li>Configuration of a High Availability top or site BDII service&lt;/li>
&lt;/ol>
&lt;h2 id="requirements-to-deploy-a-top-or-site-bdii-service">Requirements to deploy a top or site BDII service&lt;/h2>
&lt;h3 id="hardware">Hardware&lt;/h3>
&lt;ul>
&lt;li>dual core CPU&lt;/li>
&lt;li>10GB of hard disk space&lt;/li>
&lt;li>2-3 GB RAM. If you decide to set &lt;code>BDII_RAM_DISK=yes&lt;/code> in your YAIM
configuration, it&amp;rsquo;s advisable to have 4GB of RAM.&lt;/li>
&lt;/ul>
&lt;h3 id="co-hosting">Co-hosting&lt;/h3>
&lt;ul>
&lt;li>Due to the critical nature of the information system with respect to the
operation of the grid, the top or site BDII should be installed as a
stand-alone service to ensure that problems with other services do not affect
the BDII. In no circumstances should the BDII be co-hosted with a service
which has the potential to generate a high load.&lt;/li>
&lt;/ul>
&lt;h3 id="physical-vs-virtual-machines">Physical vs Virtual Machines&lt;/h3>
&lt;ul>
&lt;li>There is no clear vision on this topic. Some managers complain that there are
performance issues related to deploying a top or site BDII service under a
virtual machine. Others argue that such performance issues are related to the
configuration of the service itself. The only agreed feature is that the
management and disaster recovery of any service deployed under a virtual
machine is more flexible and easier. This could be an important point to take
into account considering the critical importance of the top or site BDII
service.&lt;/li>
&lt;/ul>
&lt;h2 id="best-practices-from-a-client-perspective-for-top-bdii">Best practices from a client perspective for top BDII&lt;/h2>
&lt;ul>
&lt;li>In gLite 3.2 and EMI you can set up redundancy of top BDIIs for the clients
(WNs and UIs) setting up a list of top BDII instances to support the automatic
failover in the GFAL clients. If the first Top level BDII fails to be
contacted, the second will be used in its place, and so on. This mechanism is
implemented defining the &lt;strong>BDII_LIST&lt;/strong> YAIM variable according to the
following syntax:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">BDII_LIST&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>topbdii.domain.one:2170&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>,topbdii.domain.two:2170&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">]]&lt;/span>.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>After running YAIM, the client enviroment should contain the following
definition:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">LCG_GFAL_INFOSYS&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>topbdii.domain.one:2170,topbdii.domain.two:2170
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>
&lt;p>The data management tools (&lt;code>lcg_utils&lt;/code>) contact the information system for
every operation (&lt;code>lcg-cr,&lt;/code> &lt;code>lcg-cp&lt;/code>, &amp;hellip;). So, if you have your client
properly configured with redundancy for the information system, the
&lt;code>lcg_utils&lt;/code> tools will use that mechanism in a transparent way. Be aware that
&lt;code>lcg-infosites&lt;/code> doesn&amp;rsquo;t work with multiple BDIIs. Only &lt;code>gfal&lt;/code>, &lt;code>lcg_utils&lt;/code>,
&lt;code>lcg-info&lt;/code> and &lt;code>glite-sd-query&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Site administrators should configure their services with this failover
mechanism where the first top BDII of the list should be the default top BDII
provided by their NGI.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="best-practices-for-a-top-or-site-bdii-high-availability-service">Best practices for a top or site BDII High Availability service&lt;/h2>
&lt;ul>
&lt;li>The best practice proposal to provide a high availability site or top BDII
service is based on two mechanisms working as main building blocks:&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>DNS round robin load balancing&lt;/li>
&lt;li>A fault tolerance DNS Updater&lt;/li>
&lt;/ol>
&lt;p>We will provide a short introduction to some of these DNS mechanisms but for
further information on specific implementations, please contact your DNS
administrator.&lt;/p>
&lt;h3 id="dns-round-robin-load-balancing">DNS round robin load balancing&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>&lt;a href="http://en.wikipedia.org/wiki/Load_distribution">Load balancing&lt;/a> is a
technique to distribute workload evenly across two or more resources. A load
balancing method, which does not necessarily require a dedicated software or
hardware node, is called
&lt;a href="http://en.wikipedia.org/wiki/Round-robin_DNS">round robin DNS&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>We can assume that all transactions (queries to top or site BDII generate the
same resource load. For an effective load balancing, all top or site BDII
instances should have the same hardware configurations. In other case, a load
balancing arbiter is needed.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Simple round robin DNS load balancing is easy to deploy. Assuming that there
is a primary DNS server (&lt;code>dns.domain.tld&lt;/code>) where the DNS load balancing will
be implemented, one simply has to add multiple A records mapping the same
hostname to multiple IP addresses under the core.top.domain
&lt;a href="http://en.wikipedia.org/wiki/DNS_zone">DNS zone&lt;/a>. It is equally applicable to
site BDII.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bind" data-lang="bind">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a40000">#&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#a40000">In&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#a40000">dns.domain.tld:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#a40000">Add&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#a40000">multiple&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">A&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#a40000">records&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#a40000">mapping&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#a40000">the&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#a40000">same&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#a40000">hostname&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#a40000">to&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#a40000">multiple&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#a40000">IP&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#a40000">addresses&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000">Zone&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#a40000">core.domain.tld&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000">topbdii&lt;/span>&lt;span style="color:#a40000">.core.domain.tld&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">IN&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">A&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#a40000">x.x.x.x&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000">topbdii&lt;/span>&lt;span style="color:#a40000">.core.domain.tld&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">IN&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">A&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#a40000">y.y.y.y&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000">topbdii&lt;/span>&lt;span style="color:#a40000">.core.domain.tld&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">IN&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">A&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#a40000">z.z.z.z&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>
&lt;p>The 3 records are always served as answer but the order of the records will
rotate in each DNS query&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>This does NOT provide fault tolerance against problems in the top or site
BDIIs themselves&lt;/strong>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>if one top or site BDII fails its DNS “A” record will still be served&lt;/li>
&lt;li>one in each three DNS queries will provide the failed top or site BDII first
answer&lt;/li>
&lt;/ol>
&lt;h3 id="fault-tolerance-dns-updater">Fault tolerance DNS Updater&lt;/h3>
&lt;ul>
&lt;li>The DNS Updater is a mechanism (to be implemented by you) which tests the
different top or site BDIIs and decides to remove or add DNS entries through
DNS dynamic updates. The fault tolerance is implemented by dynamically
&lt;a href="https://linux.die.net/man/8/nsupdate">nsupdate&lt;/a> introduced in bind V8 offers
the possibility of changing DNS records dynamically:&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>The nsupdate tool connects to a bind server on port 53 (TCP or UDP) and can
update zone records&lt;/li>
&lt;li>Updates are authorized based on keys&lt;/li>
&lt;li>Updates can only be performed on the DNS primary server&lt;/li>
&lt;li>In the DNS bind implementation, the entire zone is rewritten by the DNS
server upon “stop” to reflect the changes. Therefore, the zone should not be
managed manually; and the changes are kept in a zone journal file until a
“stop” happens.&lt;/li>
&lt;/ol>
&lt;h4 id="implementation">Implementation&lt;/h4>
&lt;ul>
&lt;li>There are several alternatives to implement the DNS Updater:&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>NAGIOS based tests&lt;/li>
&lt;li>a demonized service&lt;/li>
&lt;li>scripts running as crons&lt;/li>
&lt;/ol>
&lt;h4 id="what-to-test-bdii-metrics">What to test: BDII metrics&lt;/h4>
&lt;ul>
&lt;li>Status information about the BDII is available by querying the &lt;code>o=infosys&lt;/code>
root for the &lt;code>UpdateStats&lt;/code> object. This entry contains a number of metrics
relating to the latest update such as the time to update the database and the
total number of entries. And example of such entry is shown below.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ldapsearch -x -h &amp;lt;TopBDII/siteBDII&amp;gt; -p &lt;span style="color:#0000cf;font-weight:bold">2170&lt;/span> -b &lt;span style="color:#4e9a06">&amp;#34;o=infosys&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">Hostname&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>localhost,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>infosys
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>objectClass: UpdateStats
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Hostname: lxbra2510.cern.ch
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FailedDeletes: &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ModifiedEntries: &lt;span style="color:#0000cf;font-weight:bold">4950&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>DeletedEntries: &lt;span style="color:#0000cf;font-weight:bold">1318&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>UpdateTime: &lt;span style="color:#0000cf;font-weight:bold">150&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FailedAdds: &lt;span style="color:#0000cf;font-weight:bold">603&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FailedModifies: &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>TotalEntries: &lt;span style="color:#0000cf;font-weight:bold">52702&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>QueryTime: &lt;span style="color:#0000cf;font-weight:bold">8&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>NewEntries: &lt;span style="color:#0000cf;font-weight:bold">603&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>DBUpdateTime: &lt;span style="color:#0000cf;font-weight:bold">11&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ReadTime: &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>PluginsTime: &lt;span style="color:#0000cf;font-weight:bold">4&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ProvidersTime: &lt;span style="color:#0000cf;font-weight:bold">113&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>More extensive information can be obtained (modifyTimestamp,createTimestamp)
adding the &lt;code>+&lt;/code>:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ldapsearch -x -h &amp;lt;TopBDII/siteBDII&amp;gt; -p &lt;span style="color:#0000cf;font-weight:bold">2170&lt;/span> -b &lt;span style="color:#4e9a06">&amp;#34;o=infosys&amp;#34;&lt;/span> +
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># localhost, infosys&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">Hostname&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>localhost,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>infosys
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>structuralObjectClass: UpdateStats
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>entryUUID: 09bf40e0-7b23-4992-af55-fd74f036a454
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>creatorsName: &lt;span style="color:#000">o&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>infosys
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>createTimestamp: 20110612223435Z
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>entryCSN: 20110615120723.216201Z#000000#000#000000
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>modifiersName: &lt;span style="color:#000">o&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>infosys
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>modifyTimestamp: 20110615120723Z
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>entryDN: &lt;span style="color:#000">Hostname&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>localhost,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>infosys
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>subschemaSubentry: &lt;span style="color:#000">cn&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Subschema
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>hasSubordinates: FALSE
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>The following table shows the meaning of the most relevant metrics:&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Metric&lt;/th>
&lt;th>Desciption&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>ModifiedEntries&lt;/td>
&lt;td>The number of objects to modify&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>DeletedEntries&lt;/td>
&lt;td>The number of objects to delete&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>UpdateTime&lt;/td>
&lt;td>To total update time in seconds&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>FailedAdds&lt;/td>
&lt;td>The number of add statements which failed&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>FailedModifies&lt;/td>
&lt;td>The number of modify statements which failed&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>TotalEntries&lt;/td>
&lt;td>The total number of entries in the database&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>QueryTime&lt;/td>
&lt;td>The time taken to query the database&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NewEntries&lt;/td>
&lt;td>The number of new objects&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>DBUpdateTime&lt;/td>
&lt;td>The time taken to update the database in seconds&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ReadTime&lt;/td>
&lt;td>The time taken to read the LDIF sources in seconds&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>PluginsTime&lt;/td>
&lt;td>The time taken to run the plugins in seconds&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ProvidersTime&lt;/td>
&lt;td>The time taken to run the information providers in seconds&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>
&lt;p>Previous BDII metrics can be checked to take a decision regarding the
reliability and availability of a top or site BDII instance.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>More information is available in
&lt;a href="https://twiki.cern.ch/twiki/bin/view/EGEE/BDII#Monitoring_the_BDII_Instance">gLite-BDII_top Monitoring&lt;/a>.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="dns-caching">DNS caching&lt;/h4>
&lt;ul>
&lt;li>DNS records obtained in queries are cached by the DNS servers (usually during
24 hours). Therefore to propagate DNS changes fast enough it is important to
have very short TTL lifetimes.&lt;/li>
&lt;li>DNS has not been built to have very short TTL values and these may increase
highly the number of queries and as result increase the load of the DNS server&lt;/li>
&lt;li>The TTL lifetime to be used will have to be tested.&lt;/li>
&lt;li>If the top BDII are only used by sites in the region and if queries are only
from the DNS servers of these few sites then the number of queries may be low
enough to allow for a very small TTL.&lt;/li>
&lt;li>This value should not be lower than 30s - 60s.&lt;/li>
&lt;/ul>
&lt;h4 id="example-1-the-igi-nagios-based-mechanism">Example 1: The IGI Nagios based mechanism&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>In IGI, the DNS update of the number of instances participating in the DNS
round robin mechanism depends on the results provided by a Nagios instance.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>When Nagios needs to check the status of a service it will execute a plugin
and pass information about what needs to be checked. The plugin verifies the
operational state of the service and reports the results back to the Nagios
daemon.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nagios will process the results of the service check and take appropriate
action as necessary (e.g. send notifications, run event handlers, etc).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Each instance is checked every 5 minutes. If a failure occurs, Nagios runs the
event handler to restart the BDII service AND remove the instance from the DNS
round robin set using &lt;code>dnsupdate&lt;/code>:&lt;/p>
&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>an email is sent as notification;&lt;/li>
&lt;li>If 4 (out of 5) instances are failing, a SMS message is sent as notification;&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>If a failed instance appears to be restored, Nagios will re-add it to the DNS
round robin mechanism.&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="dnsupdater-igi.png" alt="DNS Updater used at IGI">&lt;/p>
&lt;ul>
&lt;li>This approach has some single points of failures:&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>The Nagios instance can fail&lt;/li>
&lt;li>The master DNS where the DNS entries are updated can fail&lt;/li>
&lt;/ol>
&lt;h4 id="example-2-the-ibergrid-scripting-based-mechanism">Example 2: The IBERGRID scripting based mechanism&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>In IBERGRID, an application (developed by LIP) verifies the health of each top
BDII. The application can connect to the DNS servers and remove the “A”
records of top BDIIs that become unavailable (non responsive to tests).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>The monitoring application (nsupdater) is a simple program that performs
tests, and based on their result acts upon DNS entries&lt;/p>
&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>Written in perl&lt;/li>
&lt;li>Can be run as daemon or at the command prompt&lt;/li>
&lt;li>The tests are programs that are forked&lt;/li>
&lt;li>Tests are added in a &amp;ldquo;module&amp;rdquo; fashion way&lt;/li>
&lt;li>Can be used to manage several DNS round robin scenarios&lt;/li>
&lt;li>Can manage multiple DNS servers&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="nsupdater-ibergrid.png" alt="nsupdater at IBERGRID">&lt;/p>
&lt;ul>
&lt;li>To remove the DNS single point of failure as in previous example, one could
configure all DNS servers serving the core.ibergrid.eu domain as primary&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>Three primary servers would then exist for &lt;code>core.ibergrid.eu&lt;/code>&lt;/li>
&lt;li>All three DNS servers could be dynamically updated independently&lt;/li>
&lt;li>The monitoring application should also have three instances, one running at
each site&lt;/li>
&lt;li>The downside is that DNS information can become incoherent. It would be up to
the monitoring application to manage the three DNS servers content and their
coherence&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="nsupdater-ibergrid-2.png" alt="nsupdater 2 at IBERGRID">&lt;/p></description></item><item><title>Providers: MAN06 Failover for MySQL grid-based services</title><link>/providers/operations-manuals/man06_failover_for_mysql_grid_based_services/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/man06_failover_for_mysql_grid_based_services/</guid><description>
&lt;h2 id="document-control">Document control&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Value&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Title&lt;/td>
&lt;td>MAN06 Failover for MySQL grid-based services&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Policy Group&lt;/td>
&lt;td>Operations Management Board (OMB)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Document status&lt;/td>
&lt;td>Approved&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Procedure Statement&lt;/td>
&lt;td>Implementing failover of MySQL grid-based services.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Owner&lt;/td>
&lt;td>SDIS team&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="introduction">Introduction&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Several critical grid services such as the VO Management Service (VOMS) server
represent single points of failure in a grid infrastructure. When unavailable,
a user can no longer access to the infrastructure since it is prevented from
issuing new proxies, or is no longer able to access to the physical location
of his data.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>However, those services rely on MySQL backends which opens a window to
replicate the relevant databases to different / backup services which could be
used when the primary instances are unavailable. The MySQL DB replication
process is one of the ways to get scalability and higher availability.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="architecture">Architecture&lt;/h2>
&lt;p>In this document we propose to follow a Master-Slave architecture for the MySQL
replication, consisting in keeping DB copies of a main host (MASTER) in a
secondary host (SLAVE). The slave host will only have read access to the
Database entries.&lt;/p>
&lt;h2 id="security">Security&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>For better availability, it is preferable to deploy the Master and the Slave
services in different geographical locations, which normally means exposing
the generated traffic to the internet. In that case, you will have to find a
mechanism to encrypt the communication between the two hosts.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>In this document, we propose to use &lt;code>Stunnel&lt;/code>:&lt;/p>
&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>Stunnel is a free multi-platform computer program, used to provide universal
TLS/SSL tunneling service.&lt;/li>
&lt;li>Stunnel can be used to provide secure encrypted connections for clients or
servers that do not speak TLS or SSL natively. It runs on a variety of
operating systems, including most Unix-like operating systems and Windows.&lt;/li>
&lt;li>Stunnel relies on a separate library such as OpenSSL or SSLeay to implement
the underlying TLS or SSL protocol.&lt;/li>
&lt;li>Stunnel uses Public-key cryptography with X.509 digital certificates to
secure the SSL connection. Clients can optionally be authenticated via a
certificate too&lt;/li>
&lt;li>For more references, please check &lt;a href="http://www.stunnel.org/">www.stunnel.org&lt;/a>&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>There are other possibilities for encryption, like enabling SSL Support
directly in MySQL, but these approach was not tested. Details can be obtained
&lt;a href="http://www.howtoforge.com/how-to-set-up-mysql-database-replication-with-ssl-encryption-on-centos-5.4">here&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h2 id="mysql-replication">MySQL replication&lt;/h2>
&lt;h3 id="assumptions">Assumptions&lt;/h3>
&lt;p>We are assuming that both grid services instances were previously installed and
configured (manually or via YAIM) so that they support the same VOs.&lt;/p>
&lt;h3 id="generic-information">Generic information&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Description&lt;/th>
&lt;th>Value&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>MASTER hostname&lt;/td>
&lt;td>server1.domain.one&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MASTER username&lt;/td>
&lt;td>root&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MASTER mysql superuser&lt;/td>
&lt;td>root&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MASTER mysql replication user&lt;/td>
&lt;td>db_rep&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SLAVE hostname&lt;/td>
&lt;td>server2.domain.two&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SLAVE username&lt;/td>
&lt;td>root&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SLAVE mysql superuser&lt;/td>
&lt;td>root&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>DB to replicate&lt;/td>
&lt;td>DB_1 DB_2 &amp;hellip;&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="setup-the-mysql-master-for-replication">Setup the MySQL MASTER for replication&lt;/h3>
&lt;ul>
&lt;li>&lt;strong>Step 1&lt;/strong>: Install stunnel. It is available in the SL5 repositories.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ yum install stunnel
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ date&lt;span style="color:#000;font-weight:bold">;&lt;/span> rpm -qa &lt;span style="color:#000;font-weight:bold">|&lt;/span> grep stunnel
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Wed Jun &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 16:00:23 WEST &lt;span style="color:#0000cf;font-weight:bold">2011&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>stunnel-4.15-2.el5.1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;strong>Step 2&lt;/strong>: Configure stunnel (via &lt;code>/etc/stunnel/stunnel.conf&lt;/code>) to:&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>Accept incoming connections on port 3307, and allow to connect to port 3306&lt;/li>
&lt;li>Use the server X509 certificates to encrypt data&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ cat /etc/stunnel/stunnel.conf
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Authentication stuff verify = 2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">CApath&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> /etc/grid-security/certificates
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">cert&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> /etc/grid-security/hostcert.pem
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">key&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> /etc/grid-security/hostkey.pem
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Auth fails in chroot because CApath is not accessible&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">#chroot = /var/run/stunnel&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">#debug = 7&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">output&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> /var/log/stunnel.log
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">pid&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> /var/run/stunnel/master.pid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">setuid&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> nobody
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">setgid&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> nobody
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Service-level configuration&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>mysql&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">accept&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">3307&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">connect&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> 127.0.0.1:3306
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;strong>Step 3&lt;/strong>: Start the stunnel service and add it to rc.local&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ mkdir /var/run/stunnel
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ chown nobody:nobody /var/run/stunnel
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ stunnel /etc/stunnel.conf
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#204a87">echo&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;stunnel /etc/stunnel.conf&amp;#39;&lt;/span> &amp;gt;&amp;gt; /etc/rc.local
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;strong>Step 4&lt;/strong>: Setup the firewall to allow connections from the SLAVE instance
(server2.domain.two with IP XXX.XXX.XXX.XXX) on port 3307 TCP&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># MySQL replication&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-A INPUT -s XXX.XXX.XXX.XXX -m state --state NEW -m tcp -p tcp &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --dport &lt;span style="color:#0000cf;font-weight:bold">3307&lt;/span> -j ACCEPT
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;strong>Step 5&lt;/strong>: Configure MySQL (via &lt;code>/etc/my.cnf&lt;/code>) setting up the Master
server-id (usually 1), and declaring the path for the MySQL binary log and the
DBs to be replicated. Please make sure that the path declared under log-bin
has the &lt;code>mysql:mysql&lt;/code> ownerships, and that the binary log exists.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ cat /etc/my.cnf
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>mysqld&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>server-id&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>log-bin &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> /path_to_log_file/log_file.index
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>binlog-do-db&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>DB_2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>binlog-do-db&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>DB_1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;strong>Step 6&lt;/strong>: Restart MySQL&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ /etc/init.d/mysqld restart
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;strong>Step 7&lt;/strong>: Add a specific user for the MySQL replication&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>mysql &amp;gt; GRANT REPLICATION SLAVE ON *.* TO &lt;span style="color:#4e9a06">&amp;#39;db_rep&amp;#39;&lt;/span>@&lt;span style="color:#4e9a06">&amp;#39;127.0.0.1&amp;#39;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> IDENTIFIED BY &lt;span style="color:#4e9a06">&amp;#39;16_char_password&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;strong>Step 8&lt;/strong>: Backup the databases using the following command. Please note tha
the option &lt;code>--master-data=2&lt;/code> writes a comment on &lt;code>dump.sql&lt;/code> that shows the log
file and the ID to be used on the Slave setup. This option also locks all the
tables while they are being copied, avoiding problems.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ mysqldump -u root -p --default-character-set&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>latin1 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --master-data&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> --databases DB_1 DB_2 &amp;gt; dump.sql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="setup-the-mysql-slave-for-replication">Setup the MySQL SLAVE for replication&lt;/h3>
&lt;p>&lt;strong>Step 1&lt;/strong>: Configure stunnel (via /etc/stunnel/stunnel.conf) to:&lt;/p>
&lt;ol>
&lt;li>Accept incoming SSL connections on port 3307, and allow to connect to
&lt;code>server1.domain.one&lt;/code> on port 3307&lt;/li>
&lt;li>Use the server X509 certificates to encrypt data&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ cat /etc/stunnel/stunnel.conf
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Authentication stuff verify = 2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">CApath&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> /etc/grid-security/certificates
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">cert&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> /etc/grid-security/hostcert.pem
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">key&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> /etc/grid-security/hostkey.pem
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Auth fails in chroot because CApath is not accessible&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">#chroot = /var/run/stunnel&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">#debug = 7&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">output&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> /var/log/stunnel.log
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">pid&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> /var/run/stunnel/master.pid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">setuid&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> nobody &lt;span style="color:#000">setgid&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> nobody
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Use it for client mode client = yes&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Service-level configuration [mysql] accept = 127.0.0.1:3307&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">connect&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> server1.domain.one:3307
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;strong>Step 2&lt;/strong>: Start stunnel and add it to rc.local&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ mkdir /var/run/stunnel $ chown nobody:nobody /var/run/stunnel
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ stunnel /etc/stunnel.conf
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#204a87">echo&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;stunnel /etc/stunnel.conf&amp;#39;&lt;/span> &amp;gt;&amp;gt; /etc/rc.local
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;strong>Step 3&lt;/strong>: Configure MySQL to include the SLAVE server-id (typically 2) and
the replicated databases&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ cat /etc/my.cnf
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>mysqld&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>server-id&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>replicate-do-db&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>DB_1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>replicate-do-db&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>DB_2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;strong>Step 4&lt;/strong>: Restart MySQL and insert the dump.sql created on the Master&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ /etc/init.d/mysql restart
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ mysql -u root -p &amp;lt; dump.sql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;strong>Step 5&lt;/strong>: Start the Slave logging in the mysql of slave, and running the
following queries, changing the values xxxxx and yyyyy by the values on top of
&lt;code>dump.sql&lt;/code> file:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>mysql &amp;gt; CHANGE MASTER TO &lt;span style="color:#000">MASTER_HOST&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;127.0.0.1&amp;#39;&lt;/span>, &lt;span style="color:#000">MASTER_PORT&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>3307, &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> &lt;span style="color:#000">MASTER_USER&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;db_rep&amp;#39;&lt;/span>, &lt;span style="color:#000">MASTER_PASSWORD&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;16_char_password&amp;#39;&lt;/span>, &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> &lt;span style="color:#000">MASTER_LOG_FILE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;xxxxx&amp;#39;&lt;/span>, &lt;span style="color:#000">MASTER_LOG_POS&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>yyyyy&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mysql &amp;gt; SLAVE START&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;strong>Step 6&lt;/strong>: Your replication should be up and running. In case of troubles,
check the Troubleshooting section.&lt;/li>
&lt;/ul>
&lt;h3 id="troubleshooting">Troubleshooting&lt;/h3>
&lt;h4 id="on-the-slave">On the Slave&lt;/h4>
&lt;ul>
&lt;li>Check if you can connect to the Master on port 3307 from the Slave&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">#root@server2.domain.two]$ telnet server1.domain.one 3307&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Check the /var/log/stunnel.log on the Slave to see if stunnel is working. For
established connections, you should find a message like:&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code class="language-log" data-lang="log">2011.05.30 11:57:45 LOG5[9000:1076156736]: mysql connected from XXX.XXX.XXX.XXX:PORTY
2011.05.30 11:57:45 LOG5[9000:1076156736]: VERIFY OK: depth=1, /DC=COUNTRY/DC=CA/CN=NAME
2011.05.30 11:57:45 LOG5[9000:1076156736]: VERIFY OK: depth=0, /DC=COUNTRY/DC=CA/O=INSTITUTE/CN=host/HOSTNAME
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>Check the MySQL process list. You should get an answer like the one bellow:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>mysql&amp;gt; SHOW PROCESSLIST&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+----+-------------+------+------+---------+---------+-----------------------------------------------------------------------------+------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> Id &lt;span style="color:#000;font-weight:bold">|&lt;/span> User &lt;span style="color:#000;font-weight:bold">|&lt;/span> Host &lt;span style="color:#000;font-weight:bold">|&lt;/span> db &lt;span style="color:#000;font-weight:bold">|&lt;/span> Command &lt;span style="color:#000;font-weight:bold">|&lt;/span> Time &lt;span style="color:#000;font-weight:bold">|&lt;/span> State &lt;span style="color:#000;font-weight:bold">|&lt;/span> Info &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+----+-------------+------+------+---------+---------+-----------------------------------------------------------------------------+------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> system user &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> NULL &lt;span style="color:#000;font-weight:bold">|&lt;/span> Connect &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1236539&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> Waiting &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> master to send event &lt;span style="color:#000;font-weight:bold">|&lt;/span> NULL &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> system user &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> NULL &lt;span style="color:#000;font-weight:bold">|&lt;/span> Connect &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">90804&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> Slave has &lt;span style="color:#204a87">read&lt;/span> all relay log&lt;span style="color:#000;font-weight:bold">;&lt;/span> waiting &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> the slave I/O thread to update it &lt;span style="color:#000;font-weight:bold">|&lt;/span> NULL &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+----+-------------+------+------+---------+---------+-----------------------------------------------------------------------------+------+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Check the status of the slave&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>mysql&amp;gt; SHOW SLAVE STATUS&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+----------------------------------+-------------+------------------+---------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> Slave_IO_State &lt;span style="color:#000;font-weight:bold">|&lt;/span> Master_Port &lt;span style="color:#000;font-weight:bold">|&lt;/span> Master_Log_File &lt;span style="color:#000;font-weight:bold">|&lt;/span> Read_Master_Log_Pos &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+----------------------------------+-------------+------------------+---------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> Waiting &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> master to send event &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">3307&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> mysql-bin.000001 &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">126167682&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+----------------------------------+-------------+------------------+---------------------+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="on-the-master">On the Master&lt;/h4>
&lt;ul>
&lt;li>Check the /var/log/stunnel.log on the Slave to see if stunnel is working. For
established connections, you should find a message like:&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code class="language-log" data-lang="log">2011.05.30 11:57:45 LOG5[9000:1076156736]: mysql connected from XXX.XXX.XXX.XXX:PORTY
2011.05.30 11:57:45 LOG5[9000:1076156736]: VERIFY OK: depth=1, /DC=COUNTRY/DC=CA/CN=NAME
2011.05.30 11:57:45 LOG5[9000:1076156736]: VERIFY OK: depth=0, /DC=COUNTRY/DC=CA/O=INSTITUTE/CN=host/HOSTNAME
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>Check if you have established connections from the Slave on port 3307&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ netstat -tapn &lt;span style="color:#000;font-weight:bold">|&lt;/span> grep &lt;span style="color:#0000cf;font-weight:bold">3307&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tcp &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 0.0.0.0:3307 0.0.0.0:* LISTEN 9000/stunnel
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tcp &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> XXX.XXX.XXX.XXX:3307 YYY.YYY.YYY.YYY:34378 ESTABLISHED 9000/stunnel
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Check the Master status on MySQL. You should get an answer like:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>mysql&amp;gt; SHOW MASTER STATUS&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+------------------+-----------+--------------+------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> File &lt;span style="color:#000;font-weight:bold">|&lt;/span> Position &lt;span style="color:#000;font-weight:bold">|&lt;/span> Binlog_Do_DB &lt;span style="color:#000;font-weight:bold">|&lt;/span> Binlog_Ignore_DB &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+------------------+-----------+--------------+------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> mysql-bin.000001 &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">126167682&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> DB_1 &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+------------------+-----------+--------------+------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> row in &lt;span style="color:#204a87">set&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>0.00 sec&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Check the MySQL process list. You should get an answer like the one bellow:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>mysql&amp;gt; SHOW PROCESSLIST&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+------+-----------+-----------------+------+-------------+---------+----------------------------------------------------------------+------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> Id &lt;span style="color:#000;font-weight:bold">|&lt;/span> User &lt;span style="color:#000;font-weight:bold">|&lt;/span> Host &lt;span style="color:#000;font-weight:bold">|&lt;/span> db &lt;span style="color:#000;font-weight:bold">|&lt;/span> Command &lt;span style="color:#000;font-weight:bold">|&lt;/span> Time &lt;span style="color:#000;font-weight:bold">|&lt;/span> State &lt;span style="color:#000;font-weight:bold">|&lt;/span> Info &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+------+-----------+-----------------+------+-------------+---------+----------------------------------------------------------------+------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">2778&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> ibrepifca &lt;span style="color:#000;font-weight:bold">|&lt;/span> localhost:42281 &lt;span style="color:#000;font-weight:bold">|&lt;/span> NULL &lt;span style="color:#000;font-weight:bold">|&lt;/span> Binlog Dump &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1400477&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> Has sent all binlog to slave&lt;span style="color:#000;font-weight:bold">;&lt;/span> waiting &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> binlog to be updated &lt;span style="color:#000;font-weight:bold">|&lt;/span> NULL &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+------+-----------+-----------------+------+-------------+---------+----------------------------------------------------------------+------+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="the-voms-case">The VOMS case&lt;/h3>
&lt;h4 id="a-working-example">A working example&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>It is also possible to deploy a backup VOMS server with a MySQL replica of the
main VOMS server. This will enable users to still start proxies even if the
main VOMS server is down.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>The VOMS Admin interface of the backup VOMS server should be switched off so
that new users can only request registration via the main VOMS Admin Web
interface.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>User interfaces should be configured to use both VOMS servers&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ voms-proxy-init --voms ict.vo.ibergrid.eu
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Enter GRID pass phrase:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Your identity: /C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PT/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>LIPCA/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>LIP/OU&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Lisboa/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Goncalo Borges
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Creating temporary proxy .............................................................. Done
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Contacting voms01.ncg.ingrid.pt:40008 &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>/C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PT/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>LIPCA/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>LIP/OU&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Lisboa/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>voms01.ncg.ingrid.pt&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;ict.vo.ibergrid.eu&amp;#34;&lt;/span> Done
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Creating proxy .......................................................................................................................................................... Done
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Your proxy is valid &lt;span style="color:#204a87;font-weight:bold">until&lt;/span> Thu Jun &lt;span style="color:#0000cf;font-weight:bold">16&lt;/span> 07:27:31 &lt;span style="color:#0000cf;font-weight:bold">2011&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ voms-proxy-init --voms ict.vo.ibergrid.eu
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Enter GRID pass phrase:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Your identity: /C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PT/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>LIPCA/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>LIP/OU&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Lisboa/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Goncalo Borges
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Creating temporary proxy ............................................................. Done
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Contacting ibergrid-voms.ifca.es:40008 &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>/DC&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>es/DC&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>irisgrid/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>ifca/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>host/ibergrid-voms.ifca.es&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;ict.vo.ibergrid.eu&amp;#34;&lt;/span> Done
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Creating proxy ............................................................................ Done
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Your proxy is valid &lt;span style="color:#204a87;font-weight:bold">until&lt;/span> Thu Jun &lt;span style="color:#0000cf;font-weight:bold">16&lt;/span> 07:27:37 &lt;span style="color:#0000cf;font-weight:bold">2011&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Providers: MAN07 VOMS Replication</title><link>/providers/operations-manuals/man07_voms_replication/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/man07_voms_replication/</guid><description>
&lt;h2 id="document-control">Document control&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Value&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Title&lt;/td>
&lt;td>MAN07 VOMS Replication&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Policy Group&lt;/td>
&lt;td>Operations Management Board (OMB)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Document status&lt;/td>
&lt;td>Approved&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Procedure Statement&lt;/td>
&lt;td>How to implement a MySQL VOMS server replication&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Owner&lt;/td>
&lt;td>SDIS team&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="introduction">Introduction&lt;/h2>
&lt;p>In this manual we will show you how to implement a MySQL VOMS server
replication: you need one master server, on which you can perform writing
operations, and you can have from 1 to &amp;ldquo;n&amp;rdquo; replica servers that will work in
read-only mode. In such a scenario you can do a whatever intervention on one of
the servers without breaking the service, i.e. proxies creation and
&lt;code>grid-mapfile&lt;/code> downloads: just the users registration and the usual VOs
management operations might be forbidden during an intervention on the master
server (because it is the only server in writing mode).&lt;/p>
&lt;p>This failover procedure is simply based on MySQL replication therefore every
MySQL setting is referred to the current MySQL version (5.0.77 in this moment)&lt;/p>
&lt;h2 id="settings-on-the-master-server">Settings on the MASTER SERVER&lt;/h2>
&lt;p>In order to allow the replica server to read the master database, you have to
create an user with which the slave will connect to the master. Suppose the
replica hostname is &lt;code>vomsrep.cnaf.infn.it&lt;/code>, the user is &lt;code>bonjovi&lt;/code> and the
password is &lt;code>always&lt;/code>. What you have to launch on the master server is:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ mysql -p -e &lt;span style="color:#4e9a06">&amp;#34;grant super, reload, replication slave, replication client \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> on *.* to bonjovi@&amp;#39;vomsrep.cnaf.infn.it&amp;#39; identified by &amp;#39;always&amp;#39;&amp;#34;&lt;/span> &lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Then for each DB (VO) you want to replicate, you have to assign the right
permissions, by launching:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>mysql -p -e &lt;span style="color:#4e9a06">&amp;#34;grant select, lock tables on voms_myvo.* to \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> bonjovi@&amp;#39;vomsrep.cnaf.infn.it&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Eventually you have to modify the file &lt;code>/etc/my.cnf&lt;/code> by adding the following
lines into the section &lt;code>[mysqld]&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-ini" data-lang="ini">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#c4a000">log-bin&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">mysql-bin&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#c4a000">server-id&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#c4a000">innodb_flush_log_at_trx_commit&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#c4a000">sync_binlog&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>It is important that on the master server it is set &lt;code>server-id=1&lt;/code>: it is the
identification number that distinguish a master from its several slaves (each
slave will have a unique number starting from 2)&lt;/p>
&lt;p>For example, the content of &lt;code>my.cnf&lt;/code> file may appear like this:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># less /etc/my.cnf&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>mysqld&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">datadir&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>/var/lib/mysql
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">socket&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>/var/lib/mysql/mysql.sock
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">user&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>mysql
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Default to using old password format for compatibility with mysql 3.x&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># clients (those using the mysqlclient10 compatibility package).&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">old_passwords&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">max_connections&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">800&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>log-bin&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>mysql-bin server-id&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">innodb_flush_log_at_trx_commit&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">sync_binlog&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Disabling symbolic-links is recommended to prevent assorted security risks;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># to do so, uncomment this line: # symbolic-links=0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>mysqld_safe&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>log-error&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>/var/log/mysqld.log
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>pid-file&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>/var/run/mysqld/mysqld.pid
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>At this point, you have to restart MySQL, by launching:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ service mysqld restart
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>In order to check that on the master side the mechanism is working, you can
launch for example:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>mysql&amp;gt; show master status&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+------------------+----------+--------------+------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> File &lt;span style="color:#000;font-weight:bold">|&lt;/span> Position &lt;span style="color:#000;font-weight:bold">|&lt;/span> Binlog_Do_DB &lt;span style="color:#000;font-weight:bold">|&lt;/span> Binlog_Ignore_DB &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+------------------+----------+--------------+------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> mysql-bin.000001 &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">24844&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+------------------+----------+--------------+------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> row in &lt;span style="color:#204a87">set&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>0.00 sec&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Eventually, through the web interface, in the ACL section of each VO you want to
replicate, add an entry granting all the permissions to the slave server:&lt;/p>
&lt;ul>
&lt;li>select &amp;ldquo;a non VO member&amp;rdquo; from the menu&lt;/li>
&lt;li>fill in the replica server DN and a reference email address&lt;/li>
&lt;li>select &amp;ldquo;all&amp;rdquo; for the permissions and tick the &amp;ldquo;Propagate entry to children
contexts&amp;rdquo; option&lt;/li>
&lt;/ul>
&lt;p>In this way, when the slave server copies the DB, it will have the proper
permissions on acting on the DB. Moreover, in order to avoid the sending of
notification to the email address you filled in before, connect to the MySQL
database and do the following:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>mysql&amp;gt; use voms_myvo&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mysql&amp;gt; update admins &lt;span style="color:#204a87">set&lt;/span> &lt;span style="color:#000">email_address&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>NULL where &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> &lt;span style="color:#000">email_address&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;what you filled before&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="settings-on-the-slave-server">Settings on the SLAVE SERVER&lt;/h2>
&lt;p>Install a VOMS server as usual, configuring the VOs you want to replicate: keep
in mind that every modification done on the slave DB breaks the replica
mechanism, so that on this server disable the users registration, by setting the
yaim variable:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">VOMS_ADMIN_WEB_REGISTRATION_DISABLE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#204a87">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Then ask the VO managers to not perform any action on the slave server web
interface.&lt;/p>
&lt;p>Then launch the following scripts:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="first_replica.sh">first_replica.sh&lt;/a> for the first database you want to
replicate or in the case it is the only one&lt;/li>
&lt;li>&lt;a href="next_replicas.sh">next_replicas.sh&lt;/a> for the next databases (one database for
each launch)&lt;/li>
&lt;/ul>
&lt;p>For both the scripts, set the following variables:&lt;/p>
&lt;ul>
&lt;li>&lt;code>master_host&lt;/code>, &lt;code>master_mysql_user&lt;/code>, &lt;code>master_mysql_pwd&lt;/code> that refers to the
master server and to the user created on it&lt;/li>
&lt;li>&lt;code>mysql_username_admin&lt;/code> and &lt;code>mysql_password_admin&lt;/code> that refers to the slave&lt;/li>
&lt;/ul>
&lt;p>Example:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">voms_database&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># VOMS database (leave unset)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">master_host&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;voms.cnaf.infn.it&amp;#34;&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># Master hostname&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">master_mysql_user&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;bonjovi&amp;#34;&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># Master MySQL admin user for replication&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">master_mysql_pwd&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;always&amp;#34;&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># Master MySQL admin pass for replication user&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">master_log_file&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># Master LOG file (leave unset)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">master_log_pos&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># Master LOG file (leave unset)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">mysql_username_admin&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;root&amp;#34;&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># Slave MySQL admin username&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">mysql_password_admin&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;secret&amp;#34;&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># Slave MySQL admin pass&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>With the launch of &lt;code>first-replica.sh&lt;/code>, the file &lt;code>/etc/my.cnf&lt;/code> will be properly
written; if you need to replicate further databases, modify &lt;code>/etc/my.cnf&lt;/code> adding
the following lines related to the db you are replicating (similar to the first
db you&amp;rsquo;ve replicated):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>replicate-do-db&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;master_vo_db_name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>replicate-ignore-table&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;master_vo_db_name&amp;gt;.seqnumber
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>replicate-ignore-table&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;master_vo_db_name&amp;gt;.realtime
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>replicate-ignore-table&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;master_vo_db_name&amp;gt;.transactions
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>replicate-ignore-table&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;slave_vo_db_name&amp;gt;.seqnumber
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>replicate-ignore-table&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;slave_vo_db_name&amp;gt;.realtime
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>replicate-ignore-table&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;slave_vo_db_name&amp;gt;.transactions
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Having set the variables in the way shown above, for replicating the first
database the scripts launch syntax is the following:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ./first_replica.sh --master-db&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>voms_myvo --db&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>voms_myvo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>In your &lt;code>/etc/my.cnf&lt;/code> file you will find lines like the following:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Connection with master&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>server-id&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>master-host&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>voms.cnaf.infn.it
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>master-user&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>bonjovi
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>master-password&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>always
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Replicas settings&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>replicate-do-db&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>voms_myvo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>replicate-ignore-table&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>voms_myvo.seqnumber
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>replicate-ignore-table&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>voms_myvo.realtime
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>replicate-ignore-table&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>voms_myvo.transactions
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>replicate-ignore-table&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>voms_myvo.seqnumber
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>replicate-ignore-table&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>voms_myvo.realtime
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>replicate-ignore-table&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>voms_myvo.transactions
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Now you may want to replicate a second database, let&amp;rsquo;s say &lt;code>voms_hervo&lt;/code>:
therefore in &lt;code>my.cnf&lt;/code> file add the following lines:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>replicate-do-db&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>voms_hervo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>replicate-ignore-table&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>voms_hervo.seqnumber
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>replicate-ignore-table&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>voms_hervo.realtime
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>replicate-ignore-table&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>voms_hervo.transactions
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>replicate-ignore-table&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>voms_hervo.seqnumber
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>replicate-ignore-table&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>voms_hervo.realtime
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>replicate-ignore-table&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>voms_hervo.transactions
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Modify the script &lt;code>next_replicas.sh&lt;/code> in according to the VO parameters and
launch it:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ./next_replicas.sh --master-db&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>voms_hervo --db&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>voms_hervo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>When you finished to replicate all the desired VOs, in order to make active the
database modifications, restart voms and voms-admin:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ /etc/init.d/voms-admin stop
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ /etc/init.d/voms stop
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ /etc/init.d/voms start
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ /etc/init.d/voms-admin start
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Keep in mind that every modification done on the slave DB breaks the replica
mechanism, so that on this server disable the users registration, by setting the
yaim variable:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">VOMS_ADMIN_WEB_REGISTRATION_DISABLE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#204a87">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>And ask the VO managers to not perform any action on the slave server web
interface.&lt;/p></description></item><item><title>Providers: MAN09 Accounting data publishing</title><link>/providers/operations-manuals/man09_accounting_data_publishing/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/man09_accounting_data_publishing/</guid><description>
&lt;h2 id="document-control">Document control&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Value&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Title&lt;/td>
&lt;td>Accounting data publishing&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Policy Group&lt;/td>
&lt;td>Operations Management Board (OMB)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Document status&lt;/td>
&lt;td>Approved&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Procedure Statement&lt;/td>
&lt;td>How to publish accounting information for different middleware&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Owner&lt;/td>
&lt;td>SDIS team&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="introduction">Introduction&lt;/h2>
&lt;p>In this manual we will show you how to publish accounting information from
different middleware.&lt;/p>
&lt;h2 id="general-information">General information&lt;/h2>
&lt;h3 id="publishing-with-the-apel-clientssm">Publishing with the APEL Client/SSM&lt;/h3>
&lt;p>To start sending accounting records:&lt;/p>
&lt;ol>
&lt;li>register each endpoint sending the accounting records to the central
repository as &amp;lsquo;gLite-APEL&amp;rsquo; endpoint in GOCDB with host DN information
&lt;ul>
&lt;li>either &lt;code>HTCondorCE&lt;/code> or &lt;code>ARC-CE&lt;/code> endpoints&lt;/li>
&lt;li>it is needed to authorise the endpoint to use the ARGO Message Service
(AMS)&lt;/li>
&lt;li>Changes in GOCDB can take up to 4 hours to make it to AMS.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>install the APEL client and APEL SSM on your publisher host and edit
&lt;code>client.cfg&lt;/code> and &lt;code>sender.cfg&lt;/code>&lt;/li>
&lt;li>install the APEL parser relevant to your batch system on each CE and edit
&lt;code>parser.cfg&lt;/code>
&lt;ul>
&lt;li>documentation for APEL
&lt;a href="https://twiki.cern.ch/twiki/bin/view/EMI/EMI3APELClient">here&lt;/a>
&lt;ul>
&lt;li>&lt;a href="https://github.com/apel/apel">GitHub apel/apel&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/apel/ssm">GitHub apel/ssm&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>The old ActiveMQ network was dismissed: have a look at the new settings to
properly
&lt;a href="https://github.com/apel/ssm/blob/dev/migrating_to_ams.md">publish the accounting records via AMS&lt;/a>&lt;/li>
&lt;li>configure the client to publish data from the start of the current month.&lt;/li>
&lt;li>Run the parser(s) and client.&lt;/li>
&lt;li>If there are no errors messages and the client says it has sent messages then
wait a day and you should see summaries
&lt;a href="http://goc-accounting.grid-support.ac.uk/apel/summaries2.html">here&lt;/a>&lt;/li>
&lt;li>If it doesn&amp;rsquo;t open a GGUS ticket for the APEL Team.&lt;/li>
&lt;/ol>
&lt;h3 id="monitoring-the-accounting-data-publication">Monitoring the accounting data publication&lt;/h3>
&lt;p>In order to monitor the regular publication of accounting data, it is enough
registering only one CE with the &lt;code>APEL&lt;/code> service type.&lt;/p>
&lt;p>See &lt;a href="https://wiki.egi.eu/wiki/APEL/Tests">here&lt;/a> the details about the related
Nagios probes.&lt;/p>
&lt;h3 id="publishing-summarized-records-or-single-ones">Publishing summarized records or single ones&lt;/h3>
&lt;p>Sites can send either but the preferred option is summaries. Larger sites are
recommended to send summaries.&lt;/p>
&lt;h3 id="the-frequency-for-sending-aggregatedsummary-records-to-apel-database">The frequency for sending aggregated/summary records to APEL database?&lt;/h3>
&lt;p>We recommend sending data daily for all sites, whether sending summaries or
individual records. I think this is in the interests of people who are using the
portal so that what they see is accurate. The summaries are for a complete month
or the current month so far.&lt;/p>
&lt;h3 id="authorization-and-authentication">Authorization and authentication&lt;/h3>
&lt;p>Authorization and authentication is made by the host certificate (which is
signed by a trusted CA from the ca_policy_core package). Certificate should be
registered in GOCDB. The certificate must not have the X509 extension:
&lt;code>Netscape Cert Type: SSL Server&lt;/code> because the message brokers will reject it.&lt;/p>
&lt;h2 id="arc">ARC&lt;/h2>
&lt;p>ARC uses its own system to publish the accounting data through AMS, so please
refer to the NorduGrid ARC 6 documentation:&lt;/p>
&lt;ul>
&lt;li>Information relevant only for 6.4 ARC releases and beyond:
&lt;a href="http://www.nordugrid.org/documents/arc6/tech/accounting/accounting-ng.html#accounting-ng-tech">Accounting-NG&lt;/a>&lt;/li>
&lt;li>The old ActiveMQ network was dismissed.
&lt;a href="https://www.nordugrid.org/arc/releases/6.12/release_notes_6.12.html">ARC 6.12&lt;/a>
introduces new settings for publishing the accounting records via AMS.&lt;/li>
&lt;/ul>
&lt;h2 id="htcondor-ce">HTCondor-CE&lt;/h2>
&lt;p>To collect and publish the accounting data you need to install the APEL software
as explained in the general information section. In addition, HTCondor-CE must
be configured to create accounting records:&lt;/p>
&lt;ul>
&lt;li>Information on configuring HTCondor-CE for APEL accounting:
&lt;a href="../../high-throughput-compute/htcondor-ce-apel">APEL Accounting for HTCondor-CE&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Providers: HOWTO01 Using IGTF CA distribution</title><link>/providers/operations-manuals/howto01_using_igtf_ca_distribution/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/howto01_using_igtf_ca_distribution/</guid><description>
&lt;p>To ensure interoperability within and outside of EGI, the
&lt;a href="https://documents.egi.eu/document/2930">Policy on Acceptable Authentication Assurance&lt;/a>
defined a common set of trust anchors (in a PKIX implementation &amp;ldquo;Certification
Authorities&amp;rdquo;) that all sites in EGI should install. In short, all CAs accredited
to the &lt;a href="http://www.igtf.net/">Interoperable Global Trust Federation&lt;/a> under the
&lt;a href="https://www.igtf.net/ap/classic/">classic&lt;/a>,
&lt;a href="https://www.igtf.net/ap/mics/">MICS&lt;/a> or &lt;a href="https://www.igtf.net/ap/slcs/">SLCS&lt;/a>
&lt;em>Authentication Profiles&lt;/em> are approved for use in EGI. When installing the
&amp;lsquo;combined-assurance&amp;rsquo; bundle, also &lt;a href="https://www.igtf.net/ap/iota/">IOTA&lt;/a> issuers
complying with assurance level DOGWOOD are included. Of course, sites may add
additional CAs as long as the integrity of the infrastructure as a whole is not
compromised. Also, if there are site or national policies/regulations that
prevent you from installing a CA, these regulations take precedence &amp;ndash; but you
then must inform the EGI Security Officer (see
&lt;a href="https://confluence.egi.eu/display/EGIBG/CSIRT">EGI CSIRT&lt;/a>) about this
exception.&lt;/p>
&lt;h2 id="release-notes">Release notes&lt;/h2>
&lt;p>Review the
&lt;a href="http://repository.egi.eu/sw/production/cas/1/current/README.txt">release notes&lt;/a>
containing important notices about the current release, as well as a list of
changes to the trust fabric.&lt;/p>
&lt;h2 id="installation">Installation&lt;/h2>
&lt;p>To install the EGI trust anchors on a system that uses the RedHat Package
Manager (RPM) based package management system, we provide a convenience package
to manage the installation. To install the currently valid distribution, all RPM
packages are provided at&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span>http://repository.egi.eu/sw/production/cas/1/current/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>The current version is based on the
&lt;a href="https://dl.igtf.net/distribution/igtf/current/">IGTF release&lt;/a> with the same
version number. Install the meta-package &lt;code>ca-policy-egi-core&lt;/code> (or
&lt;code>ca-policy-egi-cam&lt;/code>) and its dependencies to implement the core EGI policy on
trusted CAs.&lt;/p>
&lt;h3 id="using-yum-package-management">Using YUM package management&lt;/h3>
&lt;p>Add the following
&lt;a href="http://repository.egi.eu/sw/production/cas/1/current/repo-files/EGI-trustanchors.repo">repo-file&lt;/a>
to the &lt;code>/etc/yum.repos.d/&lt;/code> directory:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-ini" data-lang="ini">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">[EGI-trustanchors]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#c4a000">name&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">EGI-trustanchors&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#c4a000">baseurl&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">http://repository.egi.eu/sw/production/cas/1/current/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#c4a000">gpgkey&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">http://repository.egi.eu/sw/production/cas/1/GPG-KEY-EUGridPMA-RPM-3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#c4a000">gpgcheck&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#c4a000">enabled&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>and then update your installation. How to update depends on your previous
activity:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>if you have previously ever installed the &lt;code>lcg-CA&lt;/code> package&lt;/strong>, remove any
references to &lt;code>http://linuxsoft.cern.ch/LCG-CAs/current&lt;/code> from your YUM setup,
and run&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ yum clean cache metadata
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ yum update lcg-CA
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>
&lt;p>and you are done. This will update the packages installed to the latest
version, and also install the new &lt;code>ca-policy-egi-core&lt;/code> package as well as a
&lt;code>ca-policy-lcg&lt;/code> package. All packages encode the same set of dependencies&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>if you are upgrading from a previous EGI version only&lt;/strong>, just run&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ yum update ca-policy-egi-core
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>although at times you may need to clean the yum cache using&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ yum clean cache metadata
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;strong>if you are installing the EGI trust anchors for the first time&lt;/strong>, run&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ yum install ca-policy-egi-core
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="using-the-distribution-on-a-debian-or-debian-derived-platform">Using the distribution on a Debian or Debian-derived platform&lt;/h3>
&lt;p>The 1.39+ releases experimentally add the option to install the trust anchors
from Debian packages using the APT dependency management system. Although care
has been taken to ensure that this distribution is installable and complete, no
guarantees are given, but you are invited to report your issues through GGUS.
You may have to wait for a subsequent release of the Trust Anchor release to
solve your issue, or may be asked to use a temporary repository. To use it:&lt;/p>
&lt;ul>
&lt;li>Install the EUGridPMA PGP key for apt:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ wget -q -O - &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> https://dist.eugridpma.info/distribution/igtf/current/GPG-KEY-EUGridPMA-RPM-3 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> apt-key add -
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Add the following line to your sources.list file for APT:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">#### EGI Trust Anchor Distribution ####&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>deb http://repository.egi.eu/sw/production/cas/1/current egi-igtf core
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Populate the cache and install the meta-package&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ apt-get update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ apt-get install ca-policy-egi-core
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="using-the-distribution-on-other-non-rpm-platforms">Using the distribution on other (non-RPM) platforms&lt;/h3>
&lt;p>The trust anchors are provided also as simple &amp;rsquo;tar-balls&amp;rsquo; for installation on
other platforms. Since there is no dependency management in this case, please
review the release notes carefully for any security issues or withdrawn CAs. The
tar files can be found in the EGI repository at&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span>http://repository.egi.eu/sw/production/cas/1/current/tgz/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Once you have downloaded the directory, you can unpack all the CA tar,gz as
follows to your certificate directory:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> tgz in &lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>ls &amp;lt;ca download dir&amp;gt;&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span> &lt;span style="color:#204a87;font-weight:bold">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tar xzf &amp;lt;ca download dir&amp;gt;/&lt;span style="color:#000">$tgz&lt;/span> --strip-components&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> -C /etc/grid-security/certificates
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="installing-the-distribution-using-quattor">Installing the distribution using Quattor&lt;/h3>
&lt;p>Quattor templates are povided as drop-in replacements for both QWG and CDB
installations. Update your software repository (re-generating the repository
templates as needed) and obtain the new CA templates from:&lt;/p>
&lt;ul>
&lt;li>&lt;code>http://repository.egi.eu/sw/production/cas/1/current/meta/ca-policy-egi-core.tpl&lt;/code>
for QWG&lt;/li>
&lt;li>&lt;code>http://repository.egi.eu/sw/production/cas/1/current/meta/pro_software_meta_ca_policy_egi_core.tpl&lt;/code>
for CDB&lt;/li>
&lt;/ul>
&lt;p>Make sure to mirror (or refer to) the new repository at
&lt;code>http://repository.egi.eu/sw/production/cas/1/current/&lt;/code> and create the
appropriate repository definition file.&lt;/p>
&lt;p>For WLCG sites that are migrating from the lcg-CA package: the WLCG policy
companion of the EGI templates can be found at
&lt;a href="http://lcg-ca.web.cern.ch/lcg-ca/distribution/current/meta/ca-policy-lcg.tpl">QWG&lt;/a>
and
&lt;a href="http://lcg-ca.web.cern.ch/lcg-ca/distribution/current/meta/pro_software_meta_ca_policy_lcg.tpl">CDB&lt;/a>
and can be included in the profile in parallel with the EGI core template. All
packages needed are also included in the EGI repository, so only a single
repository reference is necessary.&lt;/p>
&lt;h2 id="combined-assuranceadequacy-model">Combined Assurance/Adequacy Model&lt;/h2>
&lt;p>The release contains a &amp;ldquo;cam&amp;rdquo; (combined assurance/adequacy) package based on the
approved policy on differentiated assurance. Technically, this means that you
must &lt;strong>ONLY&lt;/strong> install the new &lt;code>ca-policy-egi-cam&lt;/code> packages if you &lt;strong>ALSO&lt;/strong> at
the same time implement VO-specific authorization controls in your software
stack. This may require reconfiguration or a software update. Otherwise, just
only install or update the regular &lt;code>ca-policy-egi-core&lt;/code> package. There are no
changes in this case. The &lt;code>ca-policy-egi-core&lt;/code> package is approved for all VOs
membership and assurance models. No configuration change is needed.&lt;/p>
&lt;h3 id="acceptable-authentication-assurance">Acceptable Authentication Assurance&lt;/h3>
&lt;p>If a VO registration service or e-infrastructure registration service is
accredited by EGI to meet the approved authentication assurance, an IGTF
&amp;ldquo;DOGWOOD&amp;rdquo; accredited Authority - used solely in combination with said
registration service - is also adequate for user authentication. See
&lt;a href="https://documents.egi.eu/document/2930">the policy&lt;/a> for details.&lt;/p>
&lt;p>This additional restriction policy must be implemented by each service in the
authorization software. The &amp;ldquo;combined assurance&amp;rdquo; model package &lt;strong>MUST NOT&lt;/strong> be
installed unless the additional authorization is in place. You will need to
reconfigure and may need to install upgrades. Not installing the new &amp;ldquo;cam&amp;rdquo;
package does not have any detrimental effect on current users - only a new class
of users (that can only obtain an opaque identifiers and do not do full vetting
at their electronic identity provider) could be affected, and then only those
users that are member of one of the communities that has part of the
combined-assurance programme: LCG-Atlas, LCG-Alice, LCG-LHCb, and LCG-CMS.&lt;/p>
&lt;h2 id="patches-and-workarounds">Patches and workarounds&lt;/h2>
&lt;h3 id="reminder-notice-for-voms-aa-operators">Reminder notice for VOMS AA operators&lt;/h3>
&lt;p>Several updates to this trust anchor distribution incorporate changes to the
name of the issuing authority, but the name of the end-entities and the users
remains exactly the same. To make the change transparent, all operators of VOMS
and VOMS-Admin services are requested to enable the subject-only name resolution
mechanisms in VOMS and VOMS Admin, see additional documentation in
&lt;a href="https://italiangrid.github.io/voms/documentation/sysadmin-guide/3.0.14/configuration.html">VOMS services configuration reference&lt;/a>:&lt;/p>
&lt;ul>
&lt;li>on the VOMS core Attribute Authority service, configure the &lt;code>-skipcacheck&lt;/code>
flag on start-up.&lt;/li>
&lt;li>Set &lt;code>voms.skip_ca_check=True&lt;/code> in the service properties.&lt;/li>
&lt;/ul>
&lt;h2 id="concerns-issues-and-verification">Concerns, issues and verification&lt;/h2>
&lt;p>If you experience problems with the installation or upgrade of your trust
anchors, or with the repository, please report such an issue through the GGUS
system. For issues with the contents of the distribution, concerns about the
trust fabric, or with questions about the integrity of the distribution, please
contact the EGI IGTF liaison at &lt;code>egi-igtf-liaison@nikhef.nl&lt;/code>.&lt;/p>
&lt;p>You can verify the contents of the EGI Trust Anchor (CA) release with those of
the
&lt;a href="https://dist.eugridpma.info/distribution/igtf/current/">International Grid Trust Federation&lt;/a>,
or its &lt;a href="https://www.apgridpma.org/distribution/">mirror&lt;/a>. See the IGTF and
EUGridPMA web pages for additional information.&lt;/p>
&lt;p>Make sure to verify your trust anchors with &lt;a href="https://www.tacar.org/">TACAR&lt;/a>, the
&lt;a href="http://www.terena.org">TERENA&lt;/a> Academic CA Repository, where applicable.&lt;/p></description></item><item><title>Providers: HOWTO02 Site Certification Required Documentation</title><link>/providers/operations-manuals/howto02_site_certification_required_documentation/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/howto02_site_certification_required_documentation/</guid><description>
&lt;p>Documents required for Resource Centre registration and certification.&lt;/p>
&lt;p>The Resource Centre administrators should read and understand the first five
documents. It is a further requirement that the OLA between the NGI and RC, and
the Service Operations Policy are accepted by the Site Operations Manager.
Further, documents referred within the Service Operations Policy should also be
understood.&lt;/p>
&lt;h2 id="documentation">Documentation&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://confluence.egi.eu/display/EGIPP/PROC09+Resource+Centre+Registration+and+Certification">PROC09 Resource Centre Registration and Certification&lt;/a>:
Procedure document describing the steps required to register new Resource
Centres and certify new and suspended ones.&lt;/li>
&lt;li>&lt;a href="https://documents.egi.eu/document/3601">Service Operations Policy&lt;/a>: This
security policy presents the conditions that apply to anyone running a Service
on the Infrastructure, or to anyone providing a Service that is part of the
Infrastructure.&lt;/li>
&lt;li>&lt;a href="https://documents.egi.eu/document/31">Resource Centre Operational Level Agreement (OLA)&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://confluence.egi.eu/display/EGIPP/PROC11+Resource+Centre+Decommissioning">PROC11 Resource Centre Decommissioning Procedure&lt;/a>:
Procedure document describing the steps required to decommission a Resource
Centre.&lt;/li>
&lt;li>&lt;a href="https://confluence.egi.eu/display/EGIPP/PROC12+Production+Service+Decommissioning">PROC12 Production Service Decommissioning Procedure&lt;/a>:
Procedure document describing the steps required to decommission a production
service.&lt;/li>
&lt;li>&lt;a href="../../../internal/helpdesk">Helpdesk&lt;/a>: A collection of documentation
relevant to the EGI Helpdesk (GGUS).&lt;/li>
&lt;/ul>
&lt;h2 id="tools">Tools&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="../../../internal/configuration-database">Configuration Database (GOCDB)&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://operations-portal.egi.eu">Operations Portal&lt;/a>&lt;/li>
&lt;li>ARGO Monitoring:
&lt;a href="https://argo.egi.eu/egi/report-status/Critical/SITES">RCs status&lt;/a>,
&lt;a href="https://argo.egi.eu/egi/report-ar/Critical/SITES">A/R reports&lt;/a>: The ARGO
Monitoring service periodically checks the functionality of the production
services.&lt;/li>
&lt;li>&lt;a href="https://documents.egi.eu/document/218">EGI Operations Architecture&lt;/a>: Document
describing the roles and responsibilities of the various layers in EGI and
also the architectural nomenclature.&lt;/li>
&lt;/ul></description></item><item><title>Providers: HOWTO03 Site Certification GIIS Check</title><link>/providers/operations-manuals/howto03_site_certificatoin_giis_check/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/howto03_site_certificatoin_giis_check/</guid><description>
&lt;p>Be sure that Resource Centre GIIS URL is contained in the BDII you use for
certification.&lt;/p>
&lt;h2 id="check-the-consistency-of-the-published-information">Check the consistency of the published information&lt;/h2>
&lt;p>These are the main branches of the LDAP tree:&lt;/p>
&lt;ul>
&lt;li>&lt;code>GlueSiteUniqueID&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueSubClusterUniqueID&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueCEUniqueID&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueCESEBind&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueSEUniqueID&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueServiceUniqueID&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>It is recommended to use the
&lt;a href="http://directory.apache.org/studio/">Apache Studio LDAP browser&lt;/a>, although in
this page &lt;code>ldapsearch&lt;/code> queries are shown.&lt;/p>
&lt;h3 id="contact-information">Contact information&lt;/h3>
&lt;p>Under the branch &lt;code>GlueSiteUniqueID&lt;/code> check the values of the following fields:&lt;/p>
&lt;ul>
&lt;li>&lt;code>GlueSiteName&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueSiteUserSupportContact&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueSiteSysAdminContact&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueSiteSecurityContact&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueSiteOtherInfo&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Example:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ldapsearch -x -LLL -H ldap://sibilla.cnaf.infn.it:2170 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> -b mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid &lt;span style="color:#4e9a06">&amp;#39;objectClass=GlueSite&amp;#39;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> GlueSiteName GlueSiteUserSupportContact GlueSiteSysAdminContact &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> GlueSiteSecurityContact GlueSiteOtherInfo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueSiteUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteSecurityContact: mailto:grid-sec@cnaf.infn.it
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteSysAdminContact: mailto:grid-operations@lists.cnaf.infn.it
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteName: INFN-CNAF
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">CONFIG&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>yaim
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">EGEE_SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">EGI_NGI&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>NGI_IT
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">GRID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>WLCG
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">GRID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>EGI
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteOtherInfo: &lt;span style="color:#000">WLCG_TIER&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSiteUserSupportContact: mailto:grid-operations@lists.cnaf.infn.it
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="information-related-to-software-environment">Information related to software environment&lt;/h3>
&lt;p>Under the branch &lt;code>GlueSubClusterUniqueID&lt;/code> check the values of the following
fields:&lt;/p>
&lt;ul>
&lt;li>Check that the &lt;code>GlueHostApplicationSoftwareRunTimeEnvironment&lt;/code> contains a list
of software tags supported by the site.
&lt;ul>
&lt;li>The list can include VO-specific software tags.&lt;/li>
&lt;li>In order to ensure backwards compatibility it should include the entry
&amp;lsquo;LCG-2&amp;rsquo;, the current middleware version and the list of previous middleware
tags (i.e. LCG-2 LCG-2_1_0 LCG-2_1_1 LCG-2_2_0 LCG-2_3_0 LCG-2_3_1 LCG-2_4_0
LCG-2_5_0 LCG-2_6_0 LCG-2_7_0 GLITE-3_0_0 GLITE-3_1_0 GLITE-3_2_0 R-GMA).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>GlueHostProcessorOtherDescription&lt;/code> (see &lt;a href="../faq-hepspec06">FAQ HEP SPEC06&lt;/a>)&lt;/li>
&lt;li>&lt;code>GlueHostOperatingSystemName&lt;/code>, &lt;code>GlueHostOperatingSystemVersion&lt;/code> and
&lt;code>GlueHostOperatingSystemRelease&lt;/code> (see
&lt;a href="#publishing-the-os-name">publishing the OS name&lt;/a>).&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Example:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ldapsearch -x -LLL -H &lt;span style="color:#4e9a06">`&lt;/span>&amp;lt;ldap://virgo-ce.roma1.infn.it:2170&amp;gt;&lt;span style="color:#4e9a06">`&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> -b mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid &lt;span style="color:#4e9a06">&amp;#39;objectClass=GlueSubCluster&amp;#39;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> GlueHostProcessorOtherDescription
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueSubClusterUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>virgo-ce.roma1.infn.it,GlueClusterUniqueID&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>virgo-ce.roma1.infn.it,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueHostProcessorOtherDescription: &lt;span style="color:#000">Cores&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>4, &lt;span style="color:#000">Benchmark&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>7.83-HEP-SPEC06
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="publishing-the-os-name">Publishing the OS name&lt;/h4>
&lt;p>It has been decided that the 3 fields&lt;/p>
&lt;ul>
&lt;li>&lt;code>GlueHostOperatingSystemName&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueHostOperatingSystemRelease&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueHostOperatingSystemVersion&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>should be parsed from the output of &lt;code>/usr/bin/lsb_release&lt;/code>, like this:&lt;/p>
&lt;ul>
&lt;li>&lt;code>GlueHostOperatingSystemName&lt;/code>: &lt;code>lsb_release -i | cut -f2&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueHostOperatingSystemRelease&lt;/code>: &lt;code>lsb_release -r | cut -f2&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueHostOperatingSystemVersion&lt;/code>: &lt;code>lsb_release -c | cut -f2&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>yielding values like&lt;/p>
&lt;ul>
&lt;li>&lt;code>GlueHostOperatingSystemName&lt;/code>: CentOS&lt;/li>
&lt;li>&lt;code>GlueHostOperatingSystemRelease&lt;/code>: 7.9.2009&lt;/li>
&lt;li>&lt;code>GlueHostOperatingSystemVersion&lt;/code>: Core&lt;/li>
&lt;/ul>
&lt;p>This has been tested on various Linux flavours and should work on every serious
GNU/Linux distribution.&lt;/p>
&lt;h3 id="information-about-the-batch-system">Information about the batch system&lt;/h3>
&lt;p>Under the branch &lt;code>GlueCEUniqueID&lt;/code> check the values of the following fields:&lt;/p>
&lt;ul>
&lt;li>&lt;code>GlueCEInfoTotalCPUs&lt;/code>: Check that the value is higher than 0.&lt;/li>
&lt;li>&lt;code>GlueCEStateWaitingJobs&lt;/code>: If there is a “44444”, the information providers are
not working properly.&lt;/li>
&lt;li>&lt;code>GlueCEInfoLRMSType&lt;/code>: any supported batch system (sge, pbs, lsf&amp;hellip;)&lt;/li>
&lt;li>&lt;code>GlueCEStateStatus&lt;/code>: Production, Draining, Queuing or Closed are accepted
values.&lt;/li>
&lt;li>&lt;code>GlueCEAccessControlBaseRule&lt;/code>: VOs enabled on the queue&lt;/li>
&lt;li>&lt;code>GlueCECapability&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Example:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ldapsearch -x -LLL -H ldap://virgo-ce.roma1.infn.it:2170 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> -b mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-VIRGO,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid &lt;span style="color:#4e9a06">&amp;#39;objectClass=GlueCE&amp;#39;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> GlueCEInfoTotalCPUs GlueCEInfoJobManager GlueCEImplementationName
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueCEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>virgo-ce.roma1.infn.it:2119/jobmanager-lcgpbs-theophys,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-VIRGO,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCEImplementationName: LCG-CE
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCEInfoJobManager: lcgpbs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCEInfoTotalCPUs: &lt;span style="color:#0000cf;font-weight:bold">8&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueCEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>virgo-ce.roma1.infn.it:2119/jobmanager-lcgpbs-cert,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-VIRGO,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCEImplementationName: LCG-CE
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCEInfoJobManager: lcgpbs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCEInfoTotalCPUs: &lt;span style="color:#0000cf;font-weight:bold">8&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueCEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>virgo-ce.roma1.infn.it:2119/jobmanager-lcgpbs-virgoglong,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-VIRGO,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCEImplementationName: LCG-CE
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCEInfoJobManager: lcgpbs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCEInfoTotalCPUs: &lt;span style="color:#0000cf;font-weight:bold">8&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueCEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>virgo-ce.roma1.infn.it:2119/jobmanager-lcgpbs-argo,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-VIRGO,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCEImplementationName: LCG-CE
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCEInfoJobManager: lcgpbs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCEInfoTotalCPUs: &lt;span style="color:#0000cf;font-weight:bold">8&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueCEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>virgo-ce.roma1.infn.it:2119/jobmanager-lcgpbs-virgogshort,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-VIRGO,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCEImplementationName: LCG-CE
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCEInfoJobManager: lcgpbs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCEInfoTotalCPUs: &lt;span style="color:#0000cf;font-weight:bold">8&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ldapsearch -x -LLL -H ldap://cmsrm-bdii.roma1.infn.it:2170 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> -b mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-CMS,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid &lt;span style="color:#4e9a06">&amp;#39;objectclass=GlueCE&amp;#39;&lt;/span> GlueCECapability
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueCEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cmsrm-ce01.roma1.infn.it:2119/jobmanager-lcglsf-cmsgcert,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-CMS,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCECapability: &lt;span style="color:#000">CPUScalingReferenceSI00&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1515&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCECapability: &lt;span style="color:#000">Share&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cms:100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueCEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cmsrm-ce01.roma1.infn.it:2119/jobmanager-lcglsf-cmsglong,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-CMS,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCECapability: &lt;span style="color:#000">CPUScalingReferenceSI00&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1515&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCECapability: &lt;span style="color:#000">Share&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cms:100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueCEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cmsrm-ce01.roma1.infn.it:2119/jobmanager-lcglsf-cmsgshort,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-CMS,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCECapability: &lt;span style="color:#000">CPUScalingReferenceSI00&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1515&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCECapability: &lt;span style="color:#000">Share&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cms:100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueCEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cmsrm-ce02.roma1.infn.it:2119/jobmanager-lcglsf-cmsglong,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-CMS,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCECapability: &lt;span style="color:#000">CPUScalingReferenceSI00&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1515&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCECapability: &lt;span style="color:#000">Share&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cms:100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueCEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cmsrm-ce02.roma1.infn.it:2119/jobmanager-lcglsf-cmsgcert,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-CMS,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCECapability: &lt;span style="color:#000">CPUScalingReferenceSI00&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1515&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCECapability: &lt;span style="color:#000">Share&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cms:100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueCEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cmsrm-ce02.roma1.infn.it:2119/jobmanager-lcglsf-cmsgshort,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-ROMA1-CMS,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCECapability: &lt;span style="color:#000">CPUScalingReferenceSI00&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1515&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCECapability: &lt;span style="color:#000">Share&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cms:100
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="information-on-computing-element-about-storage-elements">Information on Computing Element about Storage Elements&lt;/h3>
&lt;p>For each SE, on the CEs the following values must be present:&lt;/p>
&lt;ul>
&lt;li>&lt;code>GueCESEBindSEUniqueID&lt;/code>.
&lt;ul>
&lt;li>&lt;code>GlueCESEBindCEAccesspoint&lt;/code> and &lt;code>GlueCESEBindMountInfo&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Example:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ldapsearch -x -LLL -H ldap://cremino.cnaf.infn.it:2170 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> -b mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid &lt;span style="color:#4e9a06">&amp;#39;objectClass=GlueCESEBind&amp;#39;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> GlueCESEBindSEUniqueID GlueCESEBindCEUniqueID GlueCESEBindMountInfo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueCESEBindSEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>sunstorm.cnaf.infn.it,GlueCESEBindGroupCEUniqueID&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cremino.cnaf.infn.it:8443/cream-pbs-cert,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCESEBindSEUniqueID: sunstorm.cnaf.infn.it
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCESEBindMountInfo: n.a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCESEBindCEUniqueID: cremino.cnaf.infn.it:8443/cream-pbs-cert
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueCESEBindSEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>sunstorm.cnaf.infn.it,GlueCESEBindGroupCEUniqueID&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cremino.cnaf.infn.it:8443/cream-pbs-prod,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCESEBindSEUniqueID: sunstorm.cnaf.infn.it
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCESEBindMountInfo: n.a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueCESEBindCEUniqueID: cremino.cnaf.infn.it:8443/cream-pbs-prod
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="information-on-storage-elements">Information on Storage Elements&lt;/h3>
&lt;p>Under the branch &lt;code>GlueSEUniqueID&lt;/code> check the values of the following fields:&lt;/p>
&lt;ul>
&lt;li>&lt;code>GlueSALocalID&lt;/code>: VO information&lt;/li>
&lt;li>&lt;code>GlueSEAccessProtocolLocalID&lt;/code> : rfio, srm_v2, gsiftp, gsidcap&lt;/li>
&lt;li>&lt;code>GlueSEImplementationName&lt;/code> (deprecated)&lt;/li>
&lt;li>&lt;code>GlueSEArchitecture&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueSAStateUsedSpace&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueSAStateAvailableSpace&lt;/code>&lt;/li>
&lt;li>&lt;code>GlueSACapability&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Example:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ldapsearch -x -LLL -H ldap://grid-se.pv.infn.it:2170 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> -b mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid &lt;span style="color:#4e9a06">&amp;#39;objectclass=GlueSE&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueSEUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid-se.pv.infn.it,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSEImplementationVersion: 1.7.4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSETotalOnlineSize: &lt;span style="color:#0000cf;font-weight:bold">8795&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSEStatus: Production
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>objectClass: GlueTop
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>objectClass: GlueSE
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>objectClass: GlueKey
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>objectClass: GlueSchemaVersion
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSETotalNearlineSize: &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSEArchitecture: multidisk
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSESizeTotal: &lt;span style="color:#0000cf;font-weight:bold">8795&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSESizeFree: &lt;span style="color:#0000cf;font-weight:bold">5458&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSEName: INFN-PAVIA DPM server
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSchemaVersionMinor: &lt;span style="color:#0000cf;font-weight:bold">3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSEUsedNearlineSize: &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueForeignKey: &lt;span style="color:#000">GlueSiteUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-PAVIA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSEUsedOnlineSize: &lt;span style="color:#0000cf;font-weight:bold">3336&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSchemaVersionMajor: &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSEImplementationName: DPM
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSEUniqueID: grid-se.pv.infn.it
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ldapsearch -x -LLL -H ldap://grid-se.pv.infn.it:2170 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> -b mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid &lt;span style="color:#4e9a06">&amp;#39;objectclass=GlueSA&amp;#39;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> GlueSAAccessControlBaseRule GlueSACapability
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueSALocalID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>storage:replica:online,GlueSEUniqueID&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid-se.pv.infn.it,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSAAccessControlBaseRule: VO:atlas
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSAAccessControlBaseRule: VO:dteam
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSAAccessControlBaseRule: VO:infngrid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSAAccessControlBaseRule: VO:ops
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSACapability: &lt;span style="color:#000">InstalledOnlineCapacity&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">8258&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSACapability: &lt;span style="color:#000">InstalledNearlineCapacity&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueSALocalID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>ATLASHOTDISK:SR:replica:online,GlueSEUniqueID&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid-se.pv.infn.it,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSAAccessControlBaseRule: VOMS:/atlas/Role&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>production
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSACapability: &lt;span style="color:#000">InstalledOnlineCapacity&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">536&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSACapability: &lt;span style="color:#000">InstalledNearlineCapacity&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ldapsearch -x -LLL -H ldap://grid-se.pv.infn.it:2170 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> -b mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#39;(&amp;amp;(objectclass=GlueSA)(GlueSALocalID=storage:replica:online))&amp;#39;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> GlueSAReservedNearlineSize GlueSAFreeNearlineSize &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> GlueSATotalNearlineSize GlueSAUsedNearlineSize GlueSACapability &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> GlueSATotalOnlineSize GlueSAFreeOnlineSize &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> GlueSAReservedOnlineSize GlueSAStateAvailableSpace &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> GlueSAUsedOnlineSize GlueSAStateUsedSpace
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueSALocalID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>storage:replica:online,GlueSEUniqueID&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid-se.pv.infn.it,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>resource,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSATotalNearlineSize: &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> GlueSAFreeOnlineSize: &lt;span style="color:#0000cf;font-weight:bold">4921&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSAUsedNearlineSize: &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> GlueSAFreeNearlineSize: &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSAReservedNearlineSize: &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> GlueSAStateAvailableSpace: &lt;span style="color:#0000cf;font-weight:bold">4921376492&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSAReservedOnlineSize: &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> GlueSAUsedOnlineSize: &lt;span style="color:#0000cf;font-weight:bold">3336&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSAStateUsedSpace: &lt;span style="color:#0000cf;font-weight:bold">3336991982&lt;/span> GlueSATotalOnlineSize: &lt;span style="color:#0000cf;font-weight:bold">8258&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSACapability: &lt;span style="color:#000">InstalledOnlineCapacity&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">8258&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueSACapability: &lt;span style="color:#000">InstalledNearlineCapacity&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="information-about-other-services">Information about other services&lt;/h3>
&lt;p>There is a branch &lt;code>GlueServiceUniqueID&lt;/code> for each service published by the site
(WMS, LFC, DPM, GRIDICE, LB, MYPROXY, BDII, etc): what discriminates the
services are the values of &lt;code>GlueServiceType&lt;/code>, example:&lt;/p>
&lt;ul>
&lt;li>&lt;code>lcg-file-catalog&lt;/code>&lt;/li>
&lt;li>&lt;code>org.glite.wms.WMProxy&lt;/code>&lt;/li>
&lt;li>&lt;code>org.glite.lb.Server&lt;/code>&lt;/li>
&lt;li>&lt;code>srm_v1, SRM&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Example:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ldapsearch -x -LLL -H ldap://sibilla.cnaf.infn.it:2170 &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> -b mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid &lt;span style="color:#4e9a06">&amp;#39;objectClass=GlueService&amp;#39;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> GlueServiceType GlueServiceEndpoint GlueServiceName
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>lfcserver.cnaf.infn.it,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceEndpoint: lfcserver.cnaf.infn.it
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceName: INFN-CNAF-lfc
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceType: lcg-file-catalog
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>local-lfcserver.cnaf.infn.it,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceEndpoint: lfcserver.cnaf.infn.it
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceName: INFN-CNAF-lfc
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceType: lcg-local-file-catalog
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;http://lfcserver.cnaf.infn.it:8085/,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceEndpoint: &amp;lt;http://lfcserver.cnaf.infn.it:8085/&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceName: INFN-CNAF-lfc-dli
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceType: data-location-interface
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>myproxy.cnaf.infn.it_MyProxy_4027652676,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceEndpoint: myproxy://myproxy.cnaf.infn.it:7512/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceName: INFN-CNAF-MyProxy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceType: MyProxy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>sibilla.cnaf.infn.it_bdii_site_3877936872,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceEndpoint: &amp;lt;ldap://sibilla.cnaf.infn.it:2170/mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceName: INFN-CNAF-bdii_site
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceType: bdii_site
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>local-http://lfcserver.cnaf.infn.it:8085/,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceEndpoint: &amp;lt;http://lfcserver.cnaf.infn.it:8085/&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceName: INFN-CNAF-lfc-dli
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceType: local-data-location-interface
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>mon-it.cnaf.infn.it_Regional-NAGIOS_2937827985,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceEndpoint: &amp;lt;https://mon-it.cnaf.infn.it:443/nagios&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceName: INFN-CNAF-Regional-NAGIOS
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceType: Regional-NAGIOS
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>httpg://sunstorm.cnaf.infn.it:8444/srm/managerv2,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceEndpoint: httpg://sunstorm.cnaf.infn.it:8444/srm/managerv2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceName: INFN-CNAF-SRM
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceType: SRM
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>albalonga.cnaf.infn.it_org.glite.lb.server_889826742,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceEndpoint: &amp;lt;https://albalonga.cnaf.infn.it:9003/&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceName: INFN-CNAF-server
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceType: org.glite.lb.server
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>gridit-ce-001.cnaf.infn.it_org.edg.gatekeeper_715226072,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceEndpoint: gram://gridit-ce-001.cnaf.infn.it:2119/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceName: INFN-CNAF-gatekeeper
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceType: org.edg.gatekeeper
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>egee-wms-01.cnaf.infn.it_org.glite.wms.WMProxy_2200630265,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceEndpoint: &amp;lt;https://egee-wms-01.cnaf.infn.it:7443/glite_wms_wmproxy_server&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceName: INFN-CNAF-WMProxy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceType: org.glite.wms.WMProxy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cremino.cnaf.infn.it_org.glite.ce.CREAM_860197007,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceEndpoint: &amp;lt;https://cremino.cnaf.infn.it:8443/ce-cream/services&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceName: INFN-CNAF-CREAM
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceType: org.glite.ce.CREAM
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>cremino.cnaf.infn.it_org.glite.ce.Monitor_2670664997,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceEndpoint: &amp;lt;https://cremino.cnaf.infn.it:8443/ce-monitor/services/CEMonitor&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceName: INFN-CNAF-Monitor
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceType: org.glite.ce.Monitor
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dn: &lt;span style="color:#000">GlueServiceUniqueID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>top-bdii01.cnaf.infn.it_bdii_top_1813027130,Mds-Vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>INFN-CNAF,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceEndpoint: &amp;lt;ldap://egee-bdii.cnaf.infn.it:2170/mds-vo-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>local,o&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>grid&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceName: INFN-CNAF-bdii_top
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>GlueServiceType: bdii_top
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>See the Site Certification Manual tests
&lt;a href="../howto04_site_certification_manual_tests">HOWTO04&lt;/a>&lt;/p>
&lt;p>See to Resource Centre registration and certification procedure
&lt;a href="https://confluence.egi.eu/display/EGIPP/PROC09+Resource+Centre+Registration+and+Certification">PROC09&lt;/a>.&lt;/p></description></item><item><title>Providers: HOWTO04 Site Certification Manual tests</title><link>/providers/operations-manuals/howto04_site_certification_manual_tests/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/howto04_site_certification_manual_tests/</guid><description>
&lt;p>This page provides instructions on how to test manually the functionality of the
grid and cloud services offered by a site. These checks are executed by the EGI
Operations Team for sites that want to be formally included into EGI Production
infrastructure. The site must successfully pass either the grid or the cloud
certification tests to become part of the EGI Production infrastructure.&lt;/p>
&lt;h2 id="check-the-functionality-of-the-grid-elements">Check the functionality of the grid elements&lt;/h2>
&lt;p>Be sure that the site&amp;rsquo;s GIIS URL is contained in the Top level BDII/Information
System your NGI will use for your certification.&lt;/p>
&lt;p>Note that the examples here use the Italian NGI and sites. Please substitute
with &lt;strong>YOUR OWN&lt;/strong> NGI and site credentials when running the test.&lt;/p>
&lt;h3 id="arc-ce-checks">ARC CE checks&lt;/h3>
&lt;p>A first test can be done using ARC&amp;rsquo;s &lt;code>ngstat&lt;/code> command:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ /usr/bin/ngstat -q -l -c &amp;lt;CE hostname&amp;gt; -t &lt;span style="color:#0000cf;font-weight:bold">20&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>... plenty of output
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>If a monitoring host of your NGI is available, then the probes can easily be
executed from there:&lt;/p>
&lt;p>Check the status of the CE with:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ /usr/libexec/grid-monitoring/probes/org.ndgf/ARCCE-status &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> -H &amp;lt;CE hostname&amp;gt; -x /etc/nagios/globus/userproxy.pem-ops
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Status is active
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Test gsiftp:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ /usr/libexec/grid-monitoring/probes/org.ndgf/ARCCE-auth -H &amp;lt;CE hostname&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> -x /etc/nagios/globus/userproxy.pem-ops
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gsiftp OK
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Test the versions of the CA&amp;rsquo;s:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ /usr/libexec/grid-monitoring/probes/org.ndgf/ARCCE-caver -H &amp;lt;CE hostname&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> -x /etc/nagios/globus/userproxy.pem-ops
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">version&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> 1.38 - All CAs present
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check the versions of ARC and Globus:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ /usr/libexec/grid-monitoring/probes/org.ndgf/ARCCE-softver &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> -H &amp;lt;CE hostname&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> -x /etc/nagios/globus/userproxy.pem-ops
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>nordugrid-arc-0.8.3.1, globus-5.0.3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Copy a file:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ /usr/libexec/grid-monitoring/probes/org.ndgf/ARCCE-gridftp -H &amp;lt;CE hostname&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> -x /etc/nagios/globus/userproxy.pem-ops
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Job finished successfully
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Submit a test job:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ /usr/libexec/grid-monitoring/probes/org.ndgf/ARCCE-jobsubmit &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> -H &amp;lt;CE hostname&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --vo ops -x /etc/nagios/globus/userproxy.pem-ops
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Job submission successful
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check the LFC:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ /usr/libexec/grid-monitoring/probes/org.ndgf/ARCCE-lfc -H &amp;lt;CE hostname&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> -x /etc/nagios/globus/userproxy.pem-ops
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Job finished successfully
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check the SRM:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ /usr/libexec/grid-monitoring/probes/org.ndgf/ARCCE-srm -H &amp;lt;CE hostname&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> -x /etc/nagios/globus/userproxy.pem-ops
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Job finished successfully
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Before continuing, you may want to make sure that the probes for all services
which the CE intends to offer, do actually succeed.&lt;/p>
&lt;h3 id="storage-element-se-checks">Storage Element (SE) checks&lt;/h3>
&lt;p>Check if &lt;code>gridftp&lt;/code> server on SE works:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ uberftp inaf-se-01.ct.pi2s2.it
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>For STORM SE: check if SRM client works (on the published information you can
find the right port to use)&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ /opt/storm/srm-clients/bin/clientSRM &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> ping -e httpg://sunstorm.cnaf.infn.it:8444
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">============================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Sending Ping request to: httpg://sunstorm.cnaf.infn.it:8444
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">============================================================&lt;/span> Request status:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">statusCode&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;SRM_SUCCESS&amp;#34;&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>0&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> &lt;span style="color:#000">explanation&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;SRM server successfully contacted&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">============================================================&lt;/span> SRM Response:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">versionInfo&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;v2.2&amp;#34;&lt;/span> otherInfo &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>&lt;span style="color:#000">size&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>2&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>0&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#000">key&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;backend_type&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>0&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#000">value&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;StoRM&amp;#34;&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>1&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#000">key&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;backend_version&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>1&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#000">value&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&amp;lt;FE:1.5.0-1.sl4&amp;gt;&amp;lt;BE:1.5.3-4.sl4&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">============================================================&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Try to write on SE. Be sure your UI is pointing to an IS the SE is contained in
(you may use your certification BDII)&lt;/p>
&lt;p>1) Setting a top-bdii that is publishing the SE you have to test&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">LCG_GFAL_INFOSYS&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;TopBDII hostname&amp;gt;:2170
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>2) Copy a file from the local filesystem to the SE, registering it in the LFC.
This command output will return a SURL that you can use latter for other tests.&lt;/p>
&lt;p>A SURL is a path of the type:
&lt;code>srm://srm01.ncg.ingrid.pt/ibergrid/iber/generated/2011-02-01/file4034a935-8d7a-48f4-914f-16f2634d4802&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ lcg-cr -v --vo &amp;lt;VO&amp;gt;-d&amp;lt;Your SE&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> -l lfn:/grid/&amp;lt;VO&amp;gt;/test.txt file:&amp;lt;/path/to/your/local/file&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>3) Create a new replica in other SE (to check the third-party transfer between
2 SEs)&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ lcg-rep -v --vo &amp;lt;VO&amp;gt;-d&amp;lt;Other SE&amp;gt; &amp;lt;SURL&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>4) List Replicas&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ lcg-lr -v --vo &amp;lt;VO&amp;gt; lfn:/grid/&amp;lt;VO&amp;gt;/test.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>5) Delete all replicas&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ lcg-del -v --vo &amp;lt;VO&amp;gt;-a&amp;lt;guid&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="job-submission">Job submission&lt;/h3>
&lt;p>Submit a test job to &lt;strong>Cream-CE&lt;/strong> through the &lt;strong>WMS&lt;/strong>, i.e. using the
&lt;code>glite-wms-job-submit&lt;/code> command. In case, submit a mpi test job. The NGI_IT
certification WMS is &lt;code>gridit-cert-wms.cnaf.infn.it&lt;/code>.&lt;/p>
&lt;h3 id="registration-into-1st-level-hlr">Registration into 1st level HLR&lt;/h3>
&lt;p>&lt;strong>NOTE: this step is needed if your infrastructure uses DGAS as accounting
system&lt;/strong>&lt;/p>
&lt;p>After the site entered in production, it needs to register the site resources in
the HLR. Ask the site admins to open a ticket towards the HLR administrators,
passing them the following information:&lt;/p>
&lt;ul>
&lt;li>grid queues names, in the form:
&lt;ul>
&lt;li>&lt;code>gridit-ce-001.cnaf.infn.it:2119/jobmanager-lcgpbs-cert&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>not-grid queues names, in the form:
&lt;ul>
&lt;li>&lt;code>hostname:queue&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Name, surname ad certificate subject of each site admin&lt;/li>
&lt;li>Certificate subject of Computing Element&lt;/li>
&lt;/ul>
&lt;p>Eventually, the site admins have to open a ticket to DGAS support unit asking to
enable the forwarding of accounting data from the 2° level HLR to APEL.&lt;/p>
&lt;h3 id="certification-job">Certification Job&lt;/h3>
&lt;p>The &lt;a href="https://wiki.egi.eu/wiki/Certification_Job_template">test job&lt;/a> checks
several things, like the environment on WN and installed RPMs. Moreover it
performs some replica management tests. With a &lt;code>grep TEST&lt;/code> you may get a summary
of the results: in case of errors, you have to see in detail what is gone wrong!&lt;/p>
&lt;h3 id="globus-checks">Globus checks&lt;/h3>
&lt;blockquote>
&lt;p>These checks should be executed depending on the services registered in GOCDB
under a Resource Centre. Not all services are compulsory for a RC, but upon
registration of new ones, the corresponding tests should be executed.&lt;/p>
&lt;/blockquote>
&lt;h4 id="gsissh">GSISSH&lt;/h4>
&lt;p>Initialize grid proxy and check if GSISSH works:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ grid-proxy-init
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ gsissh USER@HOST -p &lt;span style="color:#0000cf;font-weight:bold">2222&lt;/span> /bin/date
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>Debug with: USER@HOST -vvv -p &lt;span style="color:#0000cf;font-weight:bold">2222&lt;/span> /bin/date&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="gridftp">GridFTP&lt;/h4>
&lt;p>Check if upload works:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ globus-url-copy file:/tmp/test.txt gsiftp://HOST:2811/tmp/test.txt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>Debug with: globus-url-copy -dbg -v -vb file:/tmp/test.txt gsiftp://HOST:2811/tmp/test.txt&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check if download works:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ globus-url-copy gsiftp://HOST:2811/tmp/test.txt file:/tmp/test.txt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>Debug with: globus-url-copy -dbg -v -vb gsiftp://HOST:2811/tmp/test.txt file:/tmp/test.txt&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Delete the remote file:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ uberftp HOST &lt;span style="color:#4e9a06">&amp;#39;rm /tmp/test.txt&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>Debug with: uberftp HOST &lt;span style="color:#4e9a06">&amp;#39;rm /tmp/test.txt&amp;#39;&lt;/span> -debug 3&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="gram">GRAM&lt;/h4>
&lt;p>Check authentication:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ globusrun -a -r HOST:2119
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check job submission:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ globusrun -s -r HOST:2119 &lt;span style="color:#4e9a06">&amp;#34;&amp;amp;(executable=&amp;#34;&lt;/span>/bin/date&lt;span style="color:#4e9a06">&amp;#34;)&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="qcg-checks">QCG checks&lt;/h2>
&lt;h3 id="qcg-computhng-checks">QCG Computhng checks&lt;/h3>
&lt;p>The presented tests of QCG-Computing service use the qcg-comp, the client
program for QCG-Computing, that may be installed from provided RPMS. In order to
connect to QCG-Computing the grid proxy must be created.&lt;/p>
&lt;p>&lt;strong>Generate user’s proxy:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ grid-proxy-init
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Your identity: /C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Mariusz Mamonski
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Enter GRID pass phrase &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> this identity:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Creating proxy ............................ Done
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Your proxy is valid &lt;span style="color:#204a87;font-weight:bold">until&lt;/span>: Fri Jun &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> 06:23:32 &lt;span style="color:#0000cf;font-weight:bold">2011&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Query the QCG-Computing service:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># the xmllint is used only to present the result in more pleasant way&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ qcg-comp -G &lt;span style="color:#000;font-weight:bold">|&lt;/span> xmllint --format -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;bes-factory:FactoryResourceAttributesDocument xmlns:bes-factory&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;http://schemas.ggf.org/bes/2006/08/bes-factory&amp;#34;&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>… a lot of information …   
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;/bes-factory:FactoryResourceAttributesDocument&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Submit a sample job:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ qcg-comp -c -J /opt/plgrid/qcg/share/qcg-comp/doc/examples/date.xml
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Activity Id: ccb6b04a-887b-4027-633f-412375559d73
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Query its status:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ qcg-comp -s -a ccb6b04a-887b-4027-633f-412375559d73
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">status&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> Executing
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ qcg-comp -s -a ccb6b04a-887b-4027-633f-412375559d73
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">status&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> Finished
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87">exit&lt;/span> &lt;span style="color:#000">status&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="qcg-notification-checks">QCG Notification checks&lt;/h3>
&lt;p>The tests of QCG-Notification require &lt;code>qcg-ntf-client&lt;/code> program to be installed
in a system. The program is provided in RPM package.&lt;/p>
&lt;p>&lt;strong>Create a sample subscription:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ qcg-ntf-client -d &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> -S &lt;span style="color:#4e9a06">&amp;#34;cons=http://127.0.0.1:2212 top=http://schemas.qoscosgrid.org/comp/2011/04/notification/topic;//*;Full&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>INF May &lt;span style="color:#0000cf;font-weight:bold">17&lt;/span> 14:15:51 &lt;span style="color:#0000cf;font-weight:bold">1128&lt;/span> 0xa0262720 &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>qcg-client-gsoa&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> Subscribed, subRef: &lt;span style="color:#4e9a06">&amp;#39;810917963&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Remove the created subscription:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ qcg-ntf-client -d -U &lt;span style="color:#4e9a06">&amp;#34;id=810917963&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>INF May &lt;span style="color:#0000cf;font-weight:bold">17&lt;/span> 14:41:48 &lt;span style="color:#0000cf;font-weight:bold">3318&lt;/span> 0xa0262720 &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>qcg-client-gsoa&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> Unsubscribed: &lt;span style="color:#4e9a06">&amp;#39;810917963&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>…
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Checking the connection with QCG-Computing:&lt;/strong> In one shell run ‘tail -f’ on
the QCG-Computing log file and in the other try to submit a sample job using the
qcg-comp program (as described above). Check the tail output if there are no
error messages on sending notifications. E.g. the following lines means that the
connection problems occurred:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ tail -f /opt/qcg/var/log/qcg-comp/qcg-compd.log
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>INF Oct &lt;span style="color:#0000cf;font-weight:bold">04&lt;/span> 10:55:33 &lt;span style="color:#0000cf;font-weight:bold">18929&lt;/span> 0x2adadc2abe30 &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>notification_ws&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> Sending notify: 320f014c-3181-4daf-bbd9-1824b7d8216a -&amp;gt; Queued
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>NOT Oct &lt;span style="color:#0000cf;font-weight:bold">04&lt;/span> 10:55:33 &lt;span style="color:#0000cf;font-weight:bold">18929&lt;/span> 0x2adadc2abe30 &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>.....ntf_client&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> FaultCode: &lt;span style="color:#4e9a06">&amp;#39;SOAP-ENV:Client&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>NOT Oct &lt;span style="color:#0000cf;font-weight:bold">04&lt;/span> 10:55:33 &lt;span style="color:#0000cf;font-weight:bold">18929&lt;/span> 0x2adadc2abe30 &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>.....ntf_client&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> FaultString: &lt;span style="color:#4e9a06">&amp;#39;smcm:ActivityState&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>NOT Oct &lt;span style="color:#0000cf;font-weight:bold">04&lt;/span> 10:55:33 &lt;span style="color:#0000cf;font-weight:bold">18929&lt;/span> 0x2adadc2abe30 &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>.....ntf_client&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> FaultDetail: &lt;span style="color:#4e9a06">&amp;#39;&amp;lt;SOAP-ENV:Detail xmlns:SOAP-ENV=&amp;#34;http://schemas.xmlsoap.org/soap/envelope/&amp;#34;&amp;gt;connect failed in tcp_connect()&amp;lt;/SOAP-ENV:Detail&amp;gt;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ERR Oct &lt;span style="color:#0000cf;font-weight:bold">04&lt;/span> 10:55:33 &lt;span style="color:#0000cf;font-weight:bold">18929&lt;/span> 0x2adadc2abe30 &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>notification_ws&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> Failed to send notification to http://grass1.man.poznan.pl:19011/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="qcg-broker-checks">QCG Broker checks&lt;/h3>
&lt;p>The basic tests of QCG-Broker service may be proceeded with help of
&lt;code>qcg-simple-client&lt;/code>, the software that provides a set of commands for
interaction with QCG-Broker. &lt;code>qcg-simple-client&lt;/code> may be installed from RPMs.&lt;/p>
&lt;p>&lt;strong>Create a sample job description:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ cat &amp;gt; sleep.qcg &lt;span style="color:#4e9a06">&amp;lt;&amp;lt; EOF
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">#QCG queue=plgrid
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">#QCG host=nova.wcss.wroc.pl
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">#QCG persistent
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">sleep 30
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Submit a job:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ qcg-sub sleep.qcg
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>https://qcg-broker.man.poznan.pl:8443/qcg/services/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>qcg-broker/qcg-broker.man.poznan.pl
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Your identity: &lt;span style="color:#000">C&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL,O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID,O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC,CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Bartosz Bosak
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Enter GRID pass phrase &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> this identity:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Creating proxy, please wait...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Proxy verify OK
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Your proxy is valid &lt;span style="color:#204a87;font-weight:bold">until&lt;/span> Tue Mar &lt;span style="color:#0000cf;font-weight:bold">12&lt;/span> 14:50:27 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">UserDN&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> /C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Bartosz Bosak
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">ProxyLifetime&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">24&lt;/span> Days &lt;span style="color:#0000cf;font-weight:bold">23&lt;/span> Hours &lt;span style="color:#0000cf;font-weight:bold">59&lt;/span> Minutes &lt;span style="color:#0000cf;font-weight:bold">58&lt;/span> Seconds
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">jobId&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> J1360936230540__0152
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Check the job statuses:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ qcg-info
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>https://qcg-broker.man.poznan.pl:8443/qcg/services/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>qcg-broker/qcg-broker.man.poznan.pl
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">UserDN&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> /C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Bartosz Bosak
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">ProxyLifetime&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">24&lt;/span> Days &lt;span style="color:#0000cf;font-weight:bold">23&lt;/span> Hours &lt;span style="color:#0000cf;font-weight:bold">59&lt;/span> Minutes &lt;span style="color:#0000cf;font-weight:bold">49&lt;/span> Seconds
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Command translated to:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&amp;#34;task_info&amp;#34;&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;J1360936230540__0152&amp;#34;&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;task&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Note:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>UserDN: /C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Bartosz Bosak
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>TaskType: SINGLE
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>SubmissionTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:31 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FinishTime:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ProxyLifetime: PT0S
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Status: PREPROCESSING
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>StatusDesc:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>StartTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:33 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Allocation:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>HostName: nova.wcss.wroc.pl
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ProcessesCount: &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ProcessesGroupId:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Status: PREPROCESSING
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>StatusDescription:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>SubmissionTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:32 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FinishTime:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>LocalSubmissionTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:37 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>LocalStartTime:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>LocalFinishTime:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ qcg-info
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>https://qcg-broker.man.poznan.pl:8443/qcg/services/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>qcg-broker/qcg-broker.man.poznan.pl
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">UserDN&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> /C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Bartosz Bosak
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">ProxyLifetime&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">24&lt;/span> Days &lt;span style="color:#0000cf;font-weight:bold">23&lt;/span> Hours &lt;span style="color:#0000cf;font-weight:bold">59&lt;/span> Minutes &lt;span style="color:#0000cf;font-weight:bold">23&lt;/span> Seconds
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Command translated to:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&amp;#34;task_info&amp;#34;&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;J1360936230540__0152&amp;#34;&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;task&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Note:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>UserDN: /C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Bartosz Bosak
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>TaskType: SINGLE
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>SubmissionTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:31 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FinishTime:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ProxyLifetime: PT0S
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Status: RUNNING
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>StatusDesc:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>StartTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:33 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Allocation:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>HostName: nova.wcss.wroc.pl
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ProcessesCount: &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ProcessesGroupId:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Status: RUNNING
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>StatusDescription:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>SubmissionTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:32 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FinishTime:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>LocalSubmissionTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:37 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>LocalStartTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:47 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>LocalFinishTime:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ qcg-info
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>https://qcg-broker.man.poznan.pl:8443/qcg/services/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>qcg-broker/qcg-broker.man.poznan.pl
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">UserDN&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> /C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Bartosz Bosak
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">ProxyLifetime&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">24&lt;/span> Days &lt;span style="color:#0000cf;font-weight:bold">23&lt;/span> Hours &lt;span style="color:#0000cf;font-weight:bold">56&lt;/span> Minutes &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> Seconds
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Command translated to:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&amp;#34;task_info&amp;#34;&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;J1360936230540__0152&amp;#34;&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;task&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Note:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>UserDN: /C&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PL/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>GRID/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>PSNC/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Bartosz Bosak
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>TaskType: SINGLE
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>SubmissionTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:31 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FinishTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:52:17 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ProxyLifetime: PT0S
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Status: FINISHED
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>StatusDesc:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>StartTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:33 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Allocation:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>HostName: nova.wcss.wroc.pl
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ProcessesCount: &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ProcessesGroupId:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Status: FINISHED
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>StatusDescription:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>SubmissionTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:32 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FinishTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:52:12 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>LocalSubmissionTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:37 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>LocalStartTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:50:47 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>LocalFinishTime: Fri Feb &lt;span style="color:#0000cf;font-weight:bold">15&lt;/span> 14:52:09 CET &lt;span style="color:#0000cf;font-weight:bold">2013&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="check-the-functionality-of-the-cloud-elements">Check the functionality of the cloud elements&lt;/h2>
&lt;p>Sites can provide any (not necessarily all) of the interfaces listed below:&lt;/p>
&lt;ul>
&lt;li>OpenStack Compute for VM Management&lt;/li>
&lt;li>CDMI for Object Storage&lt;/li>
&lt;/ul>
&lt;h3 id="cloud-compute-checks-prerequisites">Cloud Compute checks prerequisites&lt;/h3>
&lt;h4 id="appdb-integration">AppDB integration&lt;/h4>
&lt;p>Go to AppDB and look for a OS image member of the &lt;code>fedcloud.egi.eu&lt;/code> VO (all
sites should support), e.g.
&lt;a href="https://appdb.egi.eu/store/vappliance/egi.centos.7">EGI CentOS 7 image&lt;/a>&lt;/p>
&lt;p>Check that the site is visible in to the AppDB &amp;ldquo;Availability and Usage&amp;rdquo; panel
for the image. If not, probably the site has not registered the FedCloud VO into
their middleware (vmcatcher) or it did not properly configured the BDII provider
script.&lt;/p>
&lt;p>From that &amp;ldquo;Availability and Usage&amp;rdquo; panel, click on the Site name, then on the
latest VM Image version, select a resource template (preferably with the
smallest quantity of resources (RAM &amp;amp; CPU)) and click on the &amp;ldquo;get IDs&amp;rdquo; button on
the right of the resource template. You will get the &amp;ldquo;Site Endpoint&amp;rdquo;, &amp;ldquo;Template
ID&amp;rdquo; and &amp;ldquo;OCCI ID&amp;rdquo;. Save these values since they will be needed in the next
steps.&lt;/p>
&lt;h4 id="credentials">Credentials&lt;/h4>
&lt;p>Generate a set of keys for your user (it is not required to set a phassphrase
for the keys, since these are just temporary keys for the test), make sure to
set key permissions to &lt;code>400&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ssh-keygen -t rsa -b &lt;span style="color:#0000cf;font-weight:bold">2048&lt;/span> -f tempkey
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Generating public/private rsa key pair.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Enter passphrase &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>empty &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> no passphrase&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Enter same passphrase again:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Your identification has been saved in tempkey.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Your public key has been saved in tempkey.pub.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>The key fingerprint is:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ chmod &lt;span style="color:#0000cf;font-weight:bold">400&lt;/span> tempkey
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create a simple contextualization script, to setup access keys on the machine
and test contextualization&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ cat &lt;span style="color:#4e9a06">&amp;lt;&amp;lt; EOF &amp;gt; ctx.txt
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">Content-Type: multipart/mixed; boundary=&amp;#34;===============4393449873403893838==&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">MIME-Version: 1.0
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">--===============4393449873403893838==
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">Content-Type: text/x-shellscript; charset=&amp;#34;us-ascii&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">MIME-Version: 1.0
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">Content-Transfer-Encoding: 7bit
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">Content-Disposition: attachment; filename=&amp;#34;deploy.sh&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">echo &amp;#34;OK&amp;#34; &amp;gt; /tmp/deployment.log
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">--===============4393449873403893838==
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">Content-Type: text/cloud-config; charset=&amp;#34;us-ascii&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">MIME-Version: 1.0
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">Content-Transfer-Encoding: 7bit
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">Content-Disposition: attachment; filename=&amp;#34;userdata.txt&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">#cloud-config
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">users:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">- name: testadm
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> sudo: ALL=(ALL) NOPASSWD:ALL
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> lock-passwd: true
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> ssh-import-id: testadm
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> ssh-authorized-keys:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> - `cat tempkey.pub`
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">--===============4393449873403893838==--
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create a proxy in &lt;strong>RFC&lt;/strong> format for your tests:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ voms-proxy-init -rfc -voms fedcloud.egi.eu
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Your identity: /DC&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>es/DC&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>irisgrid/O&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>ifca/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Enol-Fernandez-delCastillo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Creating temporary proxy .......................................................................... Done
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Contacting voms2.grid.cesnet.cz:15002 &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>/DC&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>org/DC&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>terena/DC&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>tcs/OU&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>Domain Control Validated/CN&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>voms2.grid.cesnet.cz&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;fedcloud.egi.eu&amp;#34;&lt;/span> Done
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Creating proxy .............................................................................. Done
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Your proxy is valid &lt;span style="color:#204a87;font-weight:bold">until&lt;/span> Fri Nov &lt;span style="color:#0000cf;font-weight:bold">14&lt;/span> 04:59:26 &lt;span style="color:#0000cf;font-weight:bold">2014&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="openstack-compute-checks-orgopenstacknova-service-type">OpenStack Compute checks (org.openstack.nova service type)&lt;/h3>
&lt;p>Export the following variables on your shell (keystone URL can be obtained from
GOCDB URL of the endpoint)&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">OS_AUTH_URL&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &amp;lt;keystone URL&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">OS_AUTH_TYPE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>v2voms
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">OS_X509_USER_PROXY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000">$X509_USER_PROXY&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Get the list of tenants supporting your proxy&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ keystone_tenants
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Tenant id: 999f045cb1ff4684a15ebb338af69460
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Tenant name: VO:fedcloud.egi.eu Enabled: True
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Description: VO fedcloud.egi.eu
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Export the tenant name as shown from the command in the following variable:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">OS_PROJECT_NAME&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;VO:fedcloud.egi.eu&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Describe the available flavors, check also that the template ID provided by
AppDB is listed:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ openstack flavor list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+----+-----------+-------+------+-----------+-------+-----------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> ID &lt;span style="color:#000;font-weight:bold">|&lt;/span> Name &lt;span style="color:#000;font-weight:bold">|&lt;/span> RAM &lt;span style="color:#000;font-weight:bold">|&lt;/span> Disk &lt;span style="color:#000;font-weight:bold">|&lt;/span> Ephemeral &lt;span style="color:#000;font-weight:bold">|&lt;/span> VCPUs &lt;span style="color:#000;font-weight:bold">|&lt;/span> Is Public &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+----+-----------+-------+------+-----------+-------+-----------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> m1.tiny &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">512&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> True &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> m1.small &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">2000&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">20&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> True &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">3&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> m1.medium &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">4000&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">40&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> True &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">4&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> m1.large &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">7000&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">20&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">80&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">4&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> True &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">5&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> m1.xlarge &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">14000&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">30&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">160&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">8&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> True &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+----+-----------+-------+------+-----------+-------+-----------+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Describe available images, again check that the ID provided by AppDb is listed&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ openstack image list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+--------------------------------------+----------------------------------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> ID &lt;span style="color:#000;font-weight:bold">|&lt;/span> Name &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+--------------------------------------+----------------------------------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> 1414f242-d6d1-4a8c-8b26-8c0ada32f343 &lt;span style="color:#000;font-weight:bold">|&lt;/span> IFCA Fedora Cloud &lt;span style="color:#0000cf;font-weight:bold">23&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> 8a700834-04b4-4e91-a3d5-9246ef95167e &lt;span style="color:#000;font-weight:bold">|&lt;/span> LW Jupyter-R Ubuntu 14.04 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> 7f361fba-21d6-40ca-892d-17aa60b63a66 &lt;span style="color:#000;font-weight:bold">|&lt;/span> IFCA CentOS &lt;span style="color:#0000cf;font-weight:bold">7&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> f3544cc8-421f-4d93-ac35-eba7fdc75329 &lt;span style="color:#000;font-weight:bold">|&lt;/span> IFCA CentOS &lt;span style="color:#0000cf;font-weight:bold">6&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+--------------------------------------+----------------------------------------------+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Start a VM (using the flavor and images checked above and the context file
created previously). The returned ID will be used in the following commands:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ openstack server create &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --flavor &amp;lt;flavor&amp;gt; --image &amp;lt;image id&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --user-data ctx.txt &lt;span style="color:#204a87">test&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+--------------------------------------+------------------------------------------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> Field &lt;span style="color:#000;font-weight:bold">|&lt;/span> Value &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+--------------------------------------+------------------------------------------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-DCF:diskConfig &lt;span style="color:#000;font-weight:bold">|&lt;/span> MANUAL &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-EXT-AZ:availability_zone &lt;span style="color:#000;font-weight:bold">|&lt;/span> nova &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-EXT-STS:power_state &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-EXT-STS:task_state &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-EXT-STS:vm_state &lt;span style="color:#000;font-weight:bold">|&lt;/span> building &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-SRV-USG:launched_at &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-SRV-USG:terminated_at &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> accessIPv4 &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> accessIPv6 &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> addresses &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> config_drive &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> created &lt;span style="color:#000;font-weight:bold">|&lt;/span> 2016-03-01T13:07:10Z &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> flavor &lt;span style="color:#000;font-weight:bold">|&lt;/span> m1.tiny &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>1&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> hostId &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> id &lt;span style="color:#000;font-weight:bold">|&lt;/span> 5d3ed7d6-d5ac-4f09-a353-0c2bd0fbd0ea &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> image &lt;span style="color:#000;font-weight:bold">|&lt;/span> IFCA CentOS &lt;span style="color:#0000cf;font-weight:bold">7&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>7f361fba-21d6-40ca-892d-17aa60b63a66&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> key_name &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> name &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">test&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> os-extended-volumes:volumes_attached &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[]&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> progress &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> project_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> 999f045cb1ff4684a15ebb338af69460 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> properties &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> security_groups &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[{&lt;/span>u&lt;span style="color:#4e9a06">&amp;#39;name&amp;#39;&lt;/span>: u&lt;span style="color:#4e9a06">&amp;#39;default&amp;#39;&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">}]&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> status &lt;span style="color:#000;font-weight:bold">|&lt;/span> BUILD &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> updated &lt;span style="color:#000;font-weight:bold">|&lt;/span> 2016-03-01T13:07:11Z &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> user_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> a31b8c452b594369a49a8329103e241a &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+--------------------------------------+------------------------------------------------------+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check that the VM is active by describing it (it may take a few minutes):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ openstack server show &amp;lt;vm id&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+---------------------+--------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> Field &lt;span style="color:#000;font-weight:bold">|&lt;/span> Value &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+---------------------+--------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-EXT-STS:vm_state &lt;span style="color:#000;font-weight:bold">|&lt;/span> active &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+---------------------+--------+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>If the VM does not have a public IP, you will need to get an IP for it&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ openstack ip floating pool list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+-------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> Name &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+-------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> nova &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+-------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ openstack ip floating pool create &amp;lt;pool name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+-------------+----------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> Field &lt;span style="color:#000;font-weight:bold">|&lt;/span> Value &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+-------------+----------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> fixed_ip &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> id &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1265&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> instance_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> ip &lt;span style="color:#000;font-weight:bold">|&lt;/span> 193.146.75.245 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> pool &lt;span style="color:#000;font-weight:bold">|&lt;/span> nova &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+-------------+----------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ openstack ip floating add &amp;lt;ip&amp;gt; &amp;lt;vm id&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>The VM should have now a public IP available when shown:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ openstack server show &amp;lt;vm id&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+-----------+-------------------------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> Field &lt;span style="color:#000;font-weight:bold">|&lt;/span> Value &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+-----------+-------------------------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> addresses &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000">private&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>172.16.8.14, 193.146.75.245 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+-----------+-------------------------------------+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ssh to the machine to the provided IP (the options avoid problems when different
VMs have the same IP, don&amp;rsquo;t use them in production) and check that
contextualization script was executed:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ssh -i tempkey -o &lt;span style="color:#000">StrictHostKeyChecking&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>no -o &lt;span style="color:#000">UserKnownHostsFile&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>/dev/null &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> testadm@ &amp;lt;ip&amp;gt; &lt;span style="color:#4e9a06">&amp;#34;cat /tmp/deployment.log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Warning: Permanently added &lt;span style="color:#4e9a06">&amp;#39;193.146.75.245&amp;#39;&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>ECDSA&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> to the list of known hosts.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>OK
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create a storage volume:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ openstack volume create --size &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> &lt;span style="color:#204a87">test&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+---------------------+--------------------------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> Field &lt;span style="color:#000;font-weight:bold">|&lt;/span> Value &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+---------------------+--------------------------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> attachments &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[]&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> availability_zone &lt;span style="color:#000;font-weight:bold">|&lt;/span> nova &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> bootable &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">false&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> created_at &lt;span style="color:#000;font-weight:bold">|&lt;/span> 2016-03-01T13:29:44.392423 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> display_description &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> display_name &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">test&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> id &lt;span style="color:#000;font-weight:bold">|&lt;/span> 8f46046d-cd9b-4219-9ce7-f0abe30ad992 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> properties &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> size &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> snapshot_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> source_volid &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> status &lt;span style="color:#000;font-weight:bold">|&lt;/span> creating &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">type&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+---------------------+--------------------------------------+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>And show its status:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ openstack volume show &amp;lt;vol id&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Attach it to the running VM:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ openstack server add volume &amp;lt;vm id&amp;gt; &amp;lt;vol id&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>And check it&amp;rsquo;s attached:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ openstack volume show 8f46046d-cd9b-4219-9ce7-f0abe30ad992
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+---------------------+---------------------------------------------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> Field &lt;span style="color:#000;font-weight:bold">|&lt;/span> Value &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+---------------------+---------------------------------------------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> attachments &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[{&lt;/span>u&lt;span style="color:#4e9a06">&amp;#39;device&amp;#39;&lt;/span>: u&lt;span style="color:#4e9a06">&amp;#39;/dev/vdb&amp;#39;&lt;/span>, &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> u&lt;span style="color:#4e9a06">&amp;#39;server_id&amp;#39;&lt;/span>: u&lt;span style="color:#4e9a06">&amp;#39;21f6123f-926c-4816-b4fb-53df91907a63&amp;#39;&lt;/span>, &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> u&lt;span style="color:#4e9a06">&amp;#39;id&amp;#39;&lt;/span>: u&lt;span style="color:#4e9a06">&amp;#39;8f46046d-cd9b-4219-9ce7-f0abe30ad992&amp;#39;&lt;/span>, &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> u&lt;span style="color:#4e9a06">&amp;#39;volume_id&amp;#39;&lt;/span>: u&lt;span style="color:#4e9a06">&amp;#39;8f46046d-cd9b-4219-9ce7-f0abe30ad992&amp;#39;&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">}]&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> availability_zone &lt;span style="color:#000;font-weight:bold">|&lt;/span> nova &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> bootable &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">false&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> created_at &lt;span style="color:#000;font-weight:bold">|&lt;/span> 2016-03-01T13:29:44.000000 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> display_description &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> display_name &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">test&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> id &lt;span style="color:#000;font-weight:bold">|&lt;/span> 8f46046d-cd9b-4219-9ce7-f0abe30ad992 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> properties &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> size &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> snapshot_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> source_volid &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> status &lt;span style="color:#000;font-weight:bold">|&lt;/span> in-use &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">type&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+---------------------+---------------------------------------------------------+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>And login into the machine to create a filesystem, mount it, create a file, and
umount:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ssh -i tempkey -o &lt;span style="color:#000">StrictHostKeyChecking&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>no -o &lt;span style="color:#000">UserKnownHostsFile&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>/dev/null &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> testadm@ &amp;lt;ip_addr&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>testadm $ sudo mke2fs &amp;lt;device_id&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>...&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>testadm $ sudo mount &amp;lt;device_id&amp;gt; /mnt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>testadm $ touch /mnt/test
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>testadm $ ls -l /mnt/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>total &lt;span style="color:#0000cf;font-weight:bold">16&lt;/span> drwx------ &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> root root &lt;span style="color:#0000cf;font-weight:bold">16384&lt;/span> Nov &lt;span style="color:#0000cf;font-weight:bold">13&lt;/span> 17:43 lost+found
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-rw-r--r-- &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> root root &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> Nov &lt;span style="color:#0000cf;font-weight:bold">13&lt;/span> 17:45 &lt;span style="color:#204a87">test&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>testadm $ sudo umount /mnt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>testadm $ &lt;span style="color:#204a87">exit&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Delete the VM:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ openstack server delete &amp;lt;vm id&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>And create a new one with the volume attached directly (substitute vdb for the
same device name shown above):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ openstack server create &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --flavor &amp;lt;flavor&amp;gt; --image &amp;lt;image id&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --block-device-mapping &lt;span style="color:#000">vdb&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &amp;lt;volume id&amp;gt; &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> --user-data ctx.txt &lt;span style="color:#204a87">test&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+-----------------------------+---------------------------------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> Field &lt;span style="color:#000;font-weight:bold">|&lt;/span> Value &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+-----------------------------+---------------------------------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-DCF:diskConfig &lt;span style="color:#000;font-weight:bold">|&lt;/span> MANUAL &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-EXT-AZ:availability_zone &lt;span style="color:#000;font-weight:bold">|&lt;/span> nova &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-EXT-STS:power_state &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-EXT-STS:task_state &lt;span style="color:#000;font-weight:bold">|&lt;/span> scheduling &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> OS-EXT-STS:vm_state &lt;span style="color:#000;font-weight:bold">|&lt;/span> building &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> accessIPv4 &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> accessIPv6 &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> addresses &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> adminPass &lt;span style="color:#000;font-weight:bold">|&lt;/span> 9imSRC9EZhhX &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> config_drive &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> created &lt;span style="color:#000;font-weight:bold">|&lt;/span> 2016-03-01T13:45:21Z &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> flavor &lt;span style="color:#000;font-weight:bold">|&lt;/span> m1.tiny &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>1&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> hostId &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> id &lt;span style="color:#000;font-weight:bold">|&lt;/span> 10000d50-239b-4e86-bbd8-224143d6d346 &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> image &lt;span style="color:#000;font-weight:bold">|&lt;/span> Image &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> EGI Centos &lt;span style="color:#0000cf;font-weight:bold">6&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>CentOS/6/KVM&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>_egi &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> key_name &lt;span style="color:#000;font-weight:bold">|&lt;/span> None &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> name &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#204a87">test&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> progress &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> project_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> fffd98393bae4bf0acf66237c8f292ad &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> properties &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> security_groups &lt;span style="color:#000;font-weight:bold">|&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[{&lt;/span>u&lt;span style="color:#4e9a06">&amp;#39;name&amp;#39;&lt;/span>: u&lt;span style="color:#4e9a06">&amp;#39;default&amp;#39;&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">}]&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> status &lt;span style="color:#000;font-weight:bold">|&lt;/span> BUILD &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> updated &lt;span style="color:#000;font-weight:bold">|&lt;/span> 2016-03-01T13:45:23Z &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">|&lt;/span> user_id &lt;span style="color:#000;font-weight:bold">|&lt;/span> 6c254b295af64644904a813db0d3d88a &lt;span style="color:#000;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+-----------------------------+---------------------------------------------+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Assign the public IP (if it does not have one already):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ openstack ip floating add &amp;lt;ip&amp;gt; &amp;lt;vm id&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>And check that the volume is attached and usable:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ssh -i tempkey -o &lt;span style="color:#000">StrictHostKeyChecking&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>no -o &lt;span style="color:#000">UserKnownHostsFile&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>/dev/null &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> testadm@ &amp;lt;new_vm_ip_addr&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>testadm $ sudo mount &amp;lt;device_id&amp;gt; /mnt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>testadm $ ls -ltr /mnt/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>total &lt;span style="color:#0000cf;font-weight:bold">16&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>drwx------ &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> root root &lt;span style="color:#0000cf;font-weight:bold">16384&lt;/span> Nov &lt;span style="color:#0000cf;font-weight:bold">13&lt;/span> 17:43 lost+found
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-rw-r--r-- &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> root root &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> Nov &lt;span style="color:#0000cf;font-weight:bold">13&lt;/span> 17:45 &lt;span style="color:#204a87">test&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>testadm $ sudo umount /mnt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>testadm $ &lt;span style="color:#204a87">exit&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>Finally delete VM, volume and IP address &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>NOTE: use the id of the IP as returned
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>by openstack ip floating list&lt;span style="color:#4e9a06">\!&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ openstack server delete &amp;lt;vm id&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ openstack volume delete &amp;lt;volume id&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ openstack ip floating delete &amp;lt;ip id&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="cloud-storage-cdmi-checks-euegicloudstorage-managementcdmi-service-type">Cloud Storage (CDMI) checks (eu.egi.cloud.storage-management.cdmi service type)&lt;/h3>
&lt;p>List the content of the repository:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ bcdmi -e &amp;lt;cdmi_endpoint&amp;gt; list /
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create a test directory:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ bcdmi -e &amp;lt;cdmi_endpoint&amp;gt; mkdir &lt;span style="color:#204a87">test&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;completionStatus&amp;#34;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#34;Complete&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;objectName&amp;#34;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#34;test/&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;capabilitiesURI&amp;#34;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#34;/cdmi/AUTH_df37f5b1ebc94604964c2854b9c0551f/cdmi_capabilities/container/&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;parentURI&amp;#34;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#34;/cdmi/AUTH_df37f5b1ebc94604964c2854b9c0551f/&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;objectType&amp;#34;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#34;application/cdmi-container&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;metadata&amp;#34;&lt;/span>: &lt;span style="color:#ce5c00;font-weight:bold">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create a test file and upload it to the created directory:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#204a87">echo&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;TEST OK&amp;#34;&lt;/span> &amp;gt; testfile
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ bcdmi -e &amp;lt;cdmi_endpoint&amp;gt; put -T testfile
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>test/test.txt**
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Try to download back the file and compare to previous:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ bcdmi -e &amp;lt;cdmi_endpoint&amp;gt; get test/test.txt -o testfile.downloaded
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ diff testfile testfile.downloaded &lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#204a87">echo&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Files are equal&amp;#34;&lt;/span> &lt;span style="color:#4e9a06">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">||&lt;/span> &lt;span style="color:#204a87">echo&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Files differ&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Files are equal
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Delete the file:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ bcdmi -e &amp;lt;cdmi_endpoint&amp;gt; delete test/test.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check that the file is not present anymore&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ bcdmi -e &amp;lt;cdmi_endpoint&amp;gt; list test/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Upload the file again and recursively delete the directory:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ bcdmi -e &amp;lt;cdmi_endpoint&amp;gt; put -T testfile test/test.txt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ bcdmi -e &amp;lt;cdmi_endpoint&amp;gt; delete -r test/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check that the folder does not exist anymore&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ bcdmi -e &amp;lt;cdmi_endpoint&amp;gt; list /
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>See Site Certification GIIS Check
&lt;a href="../howto03_site_certificatoin_giis_check">HOWTO03&lt;/a>.&lt;/p>
&lt;p>See to Resource Centre registration and certification procedure
&lt;a href="https://confluence.egi.eu/display/EGIPP/PROC09+Resource+Centre+Registration+and+Certification">PROC09&lt;/a>.&lt;/p></description></item><item><title>Providers: FAQ HEP SPEC 06</title><link>/providers/operations-manuals/faq-hepspec06/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/providers/operations-manuals/faq-hepspec06/</guid><description>
&lt;h2 id="transition-to-hep-spec-a-new-cpu-benchmark">Transition to HEP SPEC, a new CPU benchmark&lt;/h2>
&lt;h3 id="q1-why-adopting-hep-spec-06">Q1: Why adopting HEP SPEC 06?&lt;/h3>
&lt;p>The traditional si2k CPU benchmark is now obsolete and it is time to move to HEP
SPEC, a new CPU benchmark that will replace si2k and will become the reference
benchmark for accounting purposes.&lt;/p>
&lt;p>Detailed description of the reasons are provided on the
&lt;a href="http://indico.cern.ch/getFile.py/access?contribId=3&amp;amp;sessionId=0&amp;amp;resId=0&amp;amp;materialId=0&amp;amp;confId=49388">transition to a new CPU benchmarking unit for the WLCG&lt;/a>.&lt;/p>
&lt;h3 id="q2-what-is-hep-spec-06">Q2: What is HEP SPEC 06?&lt;/h3>
&lt;p>The &lt;strong>HEP-SPEC06 benchmark&lt;/strong> is designed to scale with the performances of the
high-energy physics codes on similar machines. The goal was to have an accuracy
of ± 5% but for the moment the agreement is significantly higher.&lt;/p>
&lt;p>The measurement of HEP-SPEC repeated on identical machines varies less than 1%.
If the computing machines are similar, i.e. same processors and at least 2 GB
per core, the results obtained are very close, within some percent, so that it
is unnecessary to perform measures on all computing hosts. It is enough to do
the measurement for one type of processor and consider it valid for all the
machines with the same processor.&lt;/p>
&lt;p>If you are using different OS and specially different compilers, the data will
change.&lt;/p>
&lt;h3 id="q3-where-can-i-find-information-about-hep-spec-06-measurements">Q3: Where can I find information about HEP SPEC 06 measurements?&lt;/h3>
&lt;p>Some example results are available on the
&lt;a href="http://w3.hepix.org/benchmarking.html">HEPIX group-page&lt;/a>, where one can see the
differences between gcc3.4.x and gcc4.1.x.&lt;/p>
&lt;p>Additional results tables are available from various EGI partners:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.gridpp.ac.uk/wiki/HEPSPEC06">GRIDPP&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>If you don&amp;rsquo;t find your computing machine in that table, then it is better to try
to do the measurement because extrapolating the results increases further the
error.&lt;/p>
&lt;h3 id="q4-how-can-i-run-the-hep-spec-06-benchmark">Q4: How can I run the HEP SPEC 06 benchmark?&lt;/h3>
&lt;p>If you want to make HEP-SPEC06 on your own own, detailed instructions are
available at
&lt;a href="https://twiki.cern.ch/twiki/bin/view/FIOgroup/TsiBenchHEPSPECWlcg">CERN wiki&lt;/a>.&lt;/p>
&lt;p>In Short you need the following:&lt;/p>
&lt;ol>
&lt;li>A machine with any version of Linux compatible with Scientific Linux (RHEL,
SL, SLC, CentOS)&lt;/li>
&lt;li>The gcc compiler should be installed&lt;/li>
&lt;li>Configuration files and run script (available as a gzipped tar archive from
the CERN Wiki). The archive&amp;rsquo;s md5sum is 9fed92b8d515b88904705f76809c4028&lt;/li>
&lt;li>A tar ball of the SPECcpu2006 DVD called &lt;code>SPEC2006_v11.tar.bz2&lt;/code> that should
be in the same directory as the run script&lt;/li>
&lt;/ol>
&lt;h3 id="q5-my-site-already-adopted-hep-spec-06-do-i-still-need-to-publish-specint2000">Q5: My site already adopted HEP SPEC 06. Do I still need to publish SpecInt2000?&lt;/h3>
&lt;p>The transition to HEP-SPEC does not eliminate the need to publish the computing
power in SpecInt2000 (due to backward compatibility with sites not publishing
yet HEP-SPEC). In this case you may calculate the value SpecInt2000 starting
from HEP-SPEC through the following relation:&lt;/p>
&lt;ul>
&lt;li>value_kSI2K = value_HEP-SPEC / 4 (or value_HEP-SPEC = 4 * value_kSI2K)&lt;/li>
&lt;/ul>
&lt;p>For the &lt;code>GlueHostBenchmarkSI00&lt;/code> attribute in the GLUE v1.3 schema the following
relation is easier to use:&lt;/p>
&lt;ul>
&lt;li>value_SI00 = value_HEP-SPEC * 250 rounded to the nearest integer&lt;/li>
&lt;/ul>
&lt;h3 id="q6-how-are-hep-spec-06-results-set-in-yaim">Q6: How are HEP SPEC 06 results set in YAIM?&lt;/h3>
&lt;p>The YAIM variable &lt;code>CE_OTHERDESCR&lt;/code> is used to set the
&lt;code>GlueHostProcessorOtherDescription&lt;/code> attribute. The value of this variable MUST
be defined in your &lt;code>site-info.def&lt;/code> file as:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">Cores&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;CE_LOGCPU/CE_PHYSICALCPU&amp;gt; &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>, &lt;span style="color:#000">Benchmark&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;value&amp;gt;-HEP-SPEC06&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>where the ratio &lt;code>CE_LOGCPU&lt;/code> / &lt;code>CE_PHYSICALCPU&lt;/code> means the average number of cores
per physical CPU in a sub-cluster; in the case of (slightly) heterogeneous
sub-clusters it could be non-integer. The second value of this attribute MUST be
published only in the case the CPU power of the sub-cluster has been computed
using the HEP-SPEC06 benchmark. The Benchmark value must be the average
HEP_SPEC06 result per core, in the sub-cluster.&lt;/p>
&lt;p>These variables are set in your &lt;code>site-info.def&lt;/code> file. After this, the variables
need to be published by the CE&amp;rsquo;s resource BDII, configured e.g. by standard YAIM
commands.&lt;/p>
&lt;p>The total CPU capacity of the cluster is computed as Benchmark * &lt;code>CE_LOGCPU&lt;/code>.&lt;/p></description></item></channel></rss>